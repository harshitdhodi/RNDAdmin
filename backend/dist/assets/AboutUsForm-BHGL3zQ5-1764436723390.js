import{a as A,f as D,r as m,b_ as N,b$ as V,c0 as q,j as e}from"./index--VflTLOD-1764436723390.js";import{R as S}from"./index-CRrLHUu_-1764436723390.js";/* empty css                                 */import{F as r}from"./index-Bi_rZhVQ-1764436723390.js";import{S as L}from"./index-BWf3aaT8-1764436723390.js";import{B as T}from"./Breadcrumb-CwzUbFwB-1764436723390.js";import{I as p}from"./index-BwoVf0CA-1764436723390.js";import{B as b}from"./index-CSXFS1cw-1764436723390.js";import{U as k,R as P}from"./index-Cpl-OocU-1764436723390.js";import{s as d}from"./index-CS4dFYXh-1764436723390.js";import"./isEqual-BjRtorMI-1764436723390.js";import"./toArray-Bbgf03cS-1764436723390.js";import"./CheckCircleFilled-C4IJiWPZ-1764436723390.js";import"./ExclamationCircleFilled-CALEtjKY-1764436723390.js";import"./dropdown-J8LlB5qb-1764436723390.js";import"./EllipsisOutlined-DtbnzqO4-1764436723390.js";import"./TextArea-C_SsBZu1-1764436723390.js";import"./fade-0tZxNvTZ-1764436723390.js";import"./useForceUpdate-bjzDaKL7-1764436723390.js";import"./DeleteOutlined-B1eTiVhz-1764436723390.js";import"./DownloadOutlined-iAkUHt6p-1764436723390.js";import"./CheckOutlined-B7i_KJr8-1764436723390.js";import"./InfoCircleFilled-C7506uDI-1764436723390.js";const le=()=>{const{id:o}=A(),g=D(),[l]=r.useForm(),[h,f]=m.useState([]),[E,u]=m.useState(""),[n,x]=m.useState(!1),{data:s,isLoading:I}=N(o),[U]=V(),[F]=q();m.useEffect(()=>{s&&(l.setFieldsValue({title:s.title,shortDescription:s.shortDescription,description:s.description,imageTitle:s.imageTitle,altName:s.altName,section:s.section,slug:s.slug}),u(s.slug),x(s.slug!==s.section.toLowerCase().replace(/\s+/g,"-")),s.image&&f([{uid:"-1",name:"Current Image",status:"done",url:`/api/image/download/${s.image}`}]))},[s,l]),m.useEffect(()=>{const t=l.getFieldValue("section");if(t&&!n){const i=t.toLowerCase().replace(/\s+/g,"-");u(i),l.setFieldsValue({slug:i})}},[l.getFieldValue("section"),n]);const j={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:["","center","right","justify"]}],["link","image"],["clean"]]},y=async t=>{var i,c;try{const a=new FormData;a.append("title",t.title),a.append("shortDescription",t.shortDescription),a.append("description",t.description),a.append("imageTitle",t.imageTitle),a.append("altName",t.altName),a.append("section",t.section),a.append("slug",t.slug),(i=h[0])!=null&&i.originFileObj&&a.append("image",h[0].originFileObj),o?(await F({id:o,formData:a}).unwrap(),d.success("About Us updated successfully")):(await U(a).unwrap(),d.success("About Us created successfully")),g("/about-us-table")}catch(a){const w=((c=a.data)==null?void 0:c.error)||`Failed to ${o?"update":"create"} About Us entry`;d.error(w)}},C={beforeUpload:t=>(t.type.startsWith("image/")||d.error("You can only upload image files!"),!1),onChange:({fileList:t})=>f(t),fileList:h};return I&&o?e.jsx(L,{size:"large"}):e.jsxs(e.Fragment,{children:[e.jsx(T,{items:[{title:"Dashboard",onClick:()=>g("/dashboard")},{title:"About Us",onClick:()=>g("/about-us-table")},{title:o?"Edit About Us":"Create About Us"}],className:"mb-[1rem]"}),e.jsxs(r,{form:l,layout:"vertical",onFinish:y,children:[e.jsx(r.Item,{name:"section",label:"Section",rules:[{required:!0,message:"Please input a section!"}],children:e.jsx(p,{placeholder:"Enter a section",onChange:t=>{const{value:i}=t.target;if(!n){const c=i.toLowerCase().replace(/\s+/g,"-");u(c),l.setFieldsValue({slug:c})}}})}),e.jsx(r.Item,{name:"slug",label:e.jsxs("span",{children:["Slug",e.jsx(b,{type:"link",size:"small",onClick:()=>{if(x(!n),n){const i=l.getFieldValue("section").toLowerCase().replace(/\s+/g,"-");u(i),l.setFieldsValue({slug:i})}else{const t=l.getFieldValue("slug");u(t)}},className:"ml-2",children:n?"Use Auto Slug":"Customize Slug"})]}),rules:[{required:!0,message:"Slug is required!"},{pattern:/^[a-z0-9]+(?:-[a-z0-9]+)*$/,message:"Slug can only contain lowercase letters, numbers, and hyphens"}],children:e.jsx(p,{disabled:!n,onChange:t=>{n&&u(t.target.value)}})}),e.jsx(r.Item,{name:"title",label:"Title",rules:[{required:!1,message:"Please input the title!"}],children:e.jsx(p,{})}),e.jsx(r.Item,{name:"shortDescription",label:"Short Description",rules:[{required:!1,message:"Please input the short description!"}],children:e.jsx(S,{modules:j,theme:"snow",className:"custom-quill-editor h-[150px] mb-[50px]"})}),e.jsx(r.Item,{name:"description",label:"Description",rules:[{required:!1,message:"Please input the description!"}],children:e.jsx(S,{modules:j,theme:"snow",className:"custom-quill-editor h-[600px] mb-[50px]"})}),e.jsx(r.Item,{label:"Image",children:e.jsx(k,{...C,listType:"picture",children:e.jsx(b,{icon:e.jsx(P,{}),children:o?"Change Image":"Click to Upload"})})}),e.jsx(r.Item,{name:"imageTitle",label:"Image Title",rules:[{required:!1,message:"Please input the image title!"}],children:e.jsx(p,{})}),e.jsx(r.Item,{name:"altName",label:"Alt Name",rules:[{required:!1,message:"Please input the alt name!"}],children:e.jsx(p,{})}),e.jsx(r.Item,{children:e.jsx(b,{type:"primary",htmlType:"submit",children:o?"Update":"Submit"})})]})]})};export{le as default};
