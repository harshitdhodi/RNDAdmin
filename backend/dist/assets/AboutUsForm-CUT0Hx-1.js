import{bD as e,bE as s,bF as t,j as i}from"./main-DeRxjK88.js";import{g as a,d as l,r}from"./vendor-router-Bu4EHm1B.js";import{R as o}from"./index-CJo0JxI7.js";/* empty css                   */import{F as n}from"./index--6LMyILo.js";import{S as m}from"./index-VFidPMY_.js";import{B as d}from"./Breadcrumb-Dmow3_cy.js";import{S as u}from"./index-j6PXCaBg.js";import{I as c}from"./index-BrOIVdwD.js";import{B as p}from"./index-lUiyPlMq.js";import{U as g,R as j}from"./index-D3J037dB.js";import{s as h}from"./index-lMP3hCbg.js";import"./vendor-react-CI5aWZjI.js";import"./vendor-utils-BfOc9lHv.js";import"./isEqual-DOH0BpiM.js";import"./toArray-DkI11MDQ.js";import"./index-DRGG9HZA.js";import"./CheckCircleFilled-DiSUBvU5.js";import"./ExclamationCircleFilled-DZysw_83.js";import"./dropdown-B7KEEEnN.js";import"./EllipsisOutlined-L4j7-ai9.js";import"./getAllowClear-exXUluB6.js";import"./CheckOutlined-3fI3nOal.js";import"./Input-BufppJmu.js";import"./EyeOutlined-B2vwqoE1.js";import"./TextArea-BEMUKMsu.js";import"./fade-C0XPHGae.js";import"./DeleteOutlined-BpoFncVM.js";import"./DownloadOutlined-DQEsT_id.js";import"./InfoCircleFilled-D8dKuFWy.js";const x=()=>{const{id:x}=a(),b=l(),[f]=n.useForm(),[y,C]=r.useState([]),[F,I]=r.useState(""),[w,S]=r.useState(!1),{data:D,isLoading:q}=e(x),[A]=s(),[k]=t();r.useEffect((()=>{D&&(f.setFieldsValue({title:D.title,shortDescription:D.shortDescription,description:D.description,imageTitle:D.imageTitle,altName:D.altName,section:D.section,slug:D.slug}),I(D.slug),S(D.slug!==D.section.toLowerCase().replace(/\s+/g,"-")),D.image&&C([{uid:"-1",name:"Current Image",status:"done",url:`/api/image/download/${D.image}`}]))}),[D,f]),r.useEffect((()=>{const e=f.getFieldValue("section");if(e&&!w){const s=e.toLowerCase().replace(/\s+/g,"-");I(s),f.setFieldsValue({slug:s})}}),[f.getFieldValue("section"),w]);const U={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:["","center","right","justify"]}],["link","image"],["clean"]]},T={beforeUpload:e=>(e.type.startsWith("image/")||h.error("You can only upload image files!"),!1),onChange:({fileList:e})=>C(e),fileList:y};return q&&x?i.jsx(m,{size:"large"}):i.jsxs(i.Fragment,{children:[i.jsx(d,{items:[{title:"Dashboard",onClick:()=>b("/dashboard")},{title:"About Us",onClick:()=>b("/about-us-table")},{title:x?"Edit About Us":"Create About Us"}],style:{marginBottom:"1rem"}}),i.jsxs(n,{form:f,layout:"vertical",onFinish:async e=>{try{const s=new FormData;s.append("title",e.title),s.append("shortDescription",e.shortDescription),s.append("description",e.description),s.append("imageTitle",e.imageTitle),s.append("altName",e.altName),s.append("section",e.section),s.append("slug",e.slug),y[0]?.originFileObj&&s.append("image",y[0].originFileObj),x?(await k({id:x,formData:s}).unwrap(),h.success("About Us updated successfully")):(await A(s).unwrap(),h.success("About Us created successfully")),b("/about-us-table")}catch(s){const e=s.data?.error||`Failed to ${x?"update":"create"} About Us entry`;h.error(e)}},children:[i.jsx(n.Item,{name:"section",label:"Section",rules:[{required:!0,message:"Please select a section!"}],children:i.jsxs(u,{placeholder:"Select a section",onChange:e=>{if(!w){const s=e.toLowerCase().replace(/\s+/g,"-");I(s),f.setFieldsValue({slug:s})}},children:[i.jsx(u.Option,{value:"Introduction",children:"Introduction"}),i.jsx(u.Option,{value:"Mission Vision",children:"Mission Vision"})]})}),i.jsx(n.Item,{name:"slug",label:i.jsxs("span",{children:["Slug",i.jsx(p,{type:"link",size:"small",onClick:()=>{if(S(!w),w){const e=f.getFieldValue("section").toLowerCase().replace(/\s+/g,"-");I(e),f.setFieldsValue({slug:e})}else{const e=f.getFieldValue("slug");I(e)}},style:{marginLeft:8},children:w?"Use Auto Slug":"Customize Slug"})]}),rules:[{required:!0,message:"Slug is required!"},{pattern:/^[a-z0-9]+(?:-[a-z0-9]+)*$/,message:"Slug can only contain lowercase letters, numbers, and hyphens"}],children:i.jsx(c,{disabled:!w,onChange:e=>{w&&I(e.target.value)}})}),i.jsx(n.Item,{name:"title",label:"Title",rules:[{required:!1,message:"Please input the title!"}],children:i.jsx(c,{})}),i.jsx(n.Item,{name:"shortDescription",label:"Short Description",rules:[{required:!1,message:"Please input the short description!"}],children:i.jsx(o,{modules:U,theme:"snow",style:{height:"150px",marginBottom:"50px"},className:"custom-quill-editor"})}),i.jsx(n.Item,{name:"description",label:"Description",rules:[{required:!1,message:"Please input the description!"}],children:i.jsx(o,{modules:U,theme:"snow",style:{height:"600px",marginBottom:"50px"},className:"custom-quill-editor"})}),i.jsx(n.Item,{name:"image",label:"Image",rules:[{required:!1,message:"Please upload an image!"}],children:i.jsx(g,{...T,listType:"picture",children:i.jsx(p,{icon:i.jsx(j,{}),children:x?"Change Image":"Click to Upload"})})}),i.jsx(n.Item,{name:"imageTitle",label:"Image Title",rules:[{required:!1,message:"Please input the image title!"}],children:i.jsx(c,{})}),i.jsx(n.Item,{name:"altName",label:"Alt Name",rules:[{required:!1,message:"Please input the alt name!"}],children:i.jsx(c,{})}),i.jsx(n.Item,{children:i.jsx(p,{type:"primary",htmlType:"submit",children:x?"Update":"Submit"})})]})]})};export{x as default};
//# sourceMappingURL=AboutUsForm-CUT0Hx-1.js.map
