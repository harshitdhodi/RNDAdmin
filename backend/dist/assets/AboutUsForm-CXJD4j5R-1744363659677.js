import{bD as w,bE as A,bF as D,j as e}from"./main-CYNrSTW--1744363659677.js";import{i as V,f as q,c as u}from"./vendor-C9iLKeEQ-1744363659677.js";import{R as j}from"./index-C8OTX8Ey-1744363659677.js";/* empty css                                 */import{F as a}from"./index-BypMxXL9-1744363659677.js";import{S as L}from"./index-BrN1Ia0l-1744363659677.js";import{B as N}from"./Breadcrumb-C9dEtOAq-1744363659677.js";import{S as g}from"./index-H-NxSgLh-1744363659677.js";import{I as m}from"./index-D68M3nPv-1744363659677.js";import{B as h}from"./index-DkmSFnuQ-1744363659677.js";import{U as P,R as T}from"./index-DwnRFd4l-1744363659677.js";import{s as c}from"./index-CW_ISvXo-1744363659677.js";import"./isEqual-CZsbwD47-1744363659677.js";import"./toArray-Bbgf03cS-1744363659677.js";import"./CheckCircleFilled-L1JRGpiz-1744363659677.js";import"./ExclamationCircleFilled-CrJgWl4M-1744363659677.js";import"./dropdown-D2jFphdU-1744363659677.js";import"./EllipsisOutlined-D8fD8gip-1744363659677.js";import"./TextArea-BdT92n-5-1744363659677.js";import"./CheckOutlined-CDIdsoIE-1744363659677.js";import"./fade-DrgNSmoV-1744363659677.js";import"./useForceUpdate-CukwmpEq-1744363659677.js";import"./DeleteOutlined-BGiX-06U-1744363659677.js";import"./DownloadOutlined-DU0aRIHh-1744363659677.js";import"./InfoCircleFilled-lPyD7WkW-1744363659677.js";const le=()=>{const{id:r}=V(),p=q(),[o]=a.useForm(),[d,f]=u.useState([]),[k,n]=u.useState(""),[l,b]=u.useState(!1),{data:i,isLoading:S}=w(r),[y]=A(),[I]=D();u.useEffect(()=>{i&&(o.setFieldsValue({title:i.title,shortDescription:i.shortDescription,description:i.description,imageTitle:i.imageTitle,altName:i.altName,section:i.section,slug:i.slug}),n(i.slug),b(i.slug!==i.section.toLowerCase().replace(/\s+/g,"-")),i.image&&f([{uid:"-1",name:"Current Image",status:"done",url:`/api/image/download/${i.image}`}]))},[i,o]),u.useEffect(()=>{const s=o.getFieldValue("section");if(s&&!l){const t=s.toLowerCase().replace(/\s+/g,"-");n(t),o.setFieldsValue({slug:t})}},[o.getFieldValue("section"),l]);const x={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:["","center","right","justify"]}],["link","image"],["clean"]]},F=async s=>{try{const t=new FormData;t.append("title",s.title),t.append("shortDescription",s.shortDescription),t.append("description",s.description),t.append("imageTitle",s.imageTitle),t.append("altName",s.altName),t.append("section",s.section),t.append("slug",s.slug),d[0]?.originFileObj&&t.append("image",d[0].originFileObj),r?(await I({id:r,formData:t}).unwrap(),c.success("About Us updated successfully")):(await y(t).unwrap(),c.success("About Us created successfully")),p("/about-us-table")}catch(t){const C=t.data?.error||`Failed to ${r?"update":"create"} About Us entry`;c.error(C)}},U={beforeUpload:s=>(s.type.startsWith("image/")||c.error("You can only upload image files!"),!1),onChange:({fileList:s})=>f(s),fileList:d};return S&&r?e.jsx(L,{size:"large"}):e.jsxs(e.Fragment,{children:[e.jsx(N,{items:[{title:"Dashboard",onClick:()=>p("/dashboard")},{title:"About Us",onClick:()=>p("/about-us-table")},{title:r?"Edit About Us":"Create About Us"}],style:{marginBottom:"1rem"}}),e.jsxs(a,{form:o,layout:"vertical",onFinish:F,children:[e.jsx(a.Item,{name:"section",label:"Section",rules:[{required:!0,message:"Please select a section!"}],children:e.jsxs(g,{placeholder:"Select a section",onChange:s=>{if(!l){const t=s.toLowerCase().replace(/\s+/g,"-");n(t),o.setFieldsValue({slug:t})}},children:[e.jsx(g.Option,{value:"Introduction",children:"Introduction"}),e.jsx(g.Option,{value:"Mission Vision",children:"Mission Vision"})]})}),e.jsx(a.Item,{name:"slug",label:e.jsxs("span",{children:["Slug",e.jsx(h,{type:"link",size:"small",onClick:()=>{if(b(!l),l){const t=o.getFieldValue("section").toLowerCase().replace(/\s+/g,"-");n(t),o.setFieldsValue({slug:t})}else{const s=o.getFieldValue("slug");n(s)}},style:{marginLeft:8},children:l?"Use Auto Slug":"Customize Slug"})]}),rules:[{required:!0,message:"Slug is required!"},{pattern:/^[a-z0-9]+(?:-[a-z0-9]+)*$/,message:"Slug can only contain lowercase letters, numbers, and hyphens"}],children:e.jsx(m,{disabled:!l,onChange:s=>{l&&n(s.target.value)}})}),e.jsx(a.Item,{name:"title",label:"Title",rules:[{required:!1,message:"Please input the title!"}],children:e.jsx(m,{})}),e.jsx(a.Item,{name:"shortDescription",label:"Short Description",rules:[{required:!1,message:"Please input the short description!"}],children:e.jsx(j,{modules:x,theme:"snow",style:{height:"150px",marginBottom:"50px"},className:"custom-quill-editor"})}),e.jsx(a.Item,{name:"description",label:"Description",rules:[{required:!1,message:"Please input the description!"}],children:e.jsx(j,{modules:x,theme:"snow",style:{height:"600px",marginBottom:"50px"},className:"custom-quill-editor"})}),e.jsx(a.Item,{name:"image",label:"Image",rules:[{required:!1,message:"Please upload an image!"}],children:e.jsx(P,{...U,listType:"picture",children:e.jsx(h,{icon:e.jsx(T,{}),children:r?"Change Image":"Click to Upload"})})}),e.jsx(a.Item,{name:"imageTitle",label:"Image Title",rules:[{required:!1,message:"Please input the image title!"}],children:e.jsx(m,{})}),e.jsx(a.Item,{name:"altName",label:"Alt Name",rules:[{required:!1,message:"Please input the alt name!"}],children:e.jsx(m,{})}),e.jsx(a.Item,{children:e.jsx(h,{type:"primary",htmlType:"submit",children:r?"Update":"Submit"})})]})]})};export{le as default};
