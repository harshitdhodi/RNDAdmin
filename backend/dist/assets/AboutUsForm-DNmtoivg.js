import{d as e,b as s,e as t,S as i,B as r,f as o,U as a,s as l}from"./antd-UGvrC4Tl.js";import{r as n,j as m}from"./react-BfBsRgn0.js";import{R as c}from"./react-quill-O9LY_HeH.js";import{aP as p,aQ as u,aR as d}from"./index-cVSOkL6A.js";import{P as j}from"./ant-design-icons-DoIDTG1a.js";import{b as g,a as h}from"./react-router-DUJjWq5j.js";import"./@ant-design-DttPmOfw.js";import"./rc-util-CQtTJgfq.js";import"./@babel-BfC2A0EA.js";import"./react-is-BaRe0U6l.js";import"./react-dom-DwrudmHt.js";import"./classnames-C3ovBj6j.js";import"./scheduler-BFk34ZWe.js";import"./@emotion-Czw0TW3x.js";import"./stylis-IVPcsLSI.js";import"./@ctrl-B2IeE8ye.js";import"./rc-motion-Cs3GDHoo.js";import"./@rc-component-BRPzBFoO.js";import"./rc-resize-observer-pLBfxqzk.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./rc-dialog-BZYed8xW.js";import"./rc-table-Cyp0j0g2.js";import"./rc-virtual-list-DeG6VQAs.js";import"./rc-tree-Ct99pdeQ.js";import"./rc-checkbox-bMXfL26q.js";import"./rc-pagination-CiqGXVR2.js";import"./rc-select-j7aSw-6E.js";import"./rc-overflow-CN2VNozo.js";import"./throttle-debounce-w9OM8Bxz.js";import"./rc-input-ByOKN0-r.js";import"./rc-tooltip-C0SbzfR_.js";import"./rc-notification-D3ebMW8F.js";import"./rc-image-CGWTMT4q.js";import"./rc-textarea-DZAOw23I.js";import"./copy-to-clipboard-Bgp_G7Oq.js";import"./toggle-selection-DUsDmMsR.js";import"./rc-upload-ClZE7meS.js";import"./rc-progress-bbq4uvV3.js";import"./rc-dropdown-DRLVnlhP.js";import"./rc-menu-CY_ke4Oh.js";import"./rc-field-form-C7q369ye.js";import"./scroll-into-view-if-needed-cNB78-hM.js";import"./compute-scroll-into-view-CJmtT4lq.js";import"./rc-picker-B5UDvhgZ.js";import"./rc-tabs-DirvITx8.js";import"./lodash-CtK3uT03.js";import"./quill-CMG--X-K.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./lucide-D6BDVLHE.js";import"./axios-BoylL8Pu.js";import"./@syncfusion-CXokIO9o.js";import"./cookie-BUTH-fPQ.js";const b=()=>{const{id:b}=g(),x=h(),[f]=e.useForm(),[y,w]=n.useState([]),[v,C]=n.useState(""),[F,I]=n.useState(!1),{data:k,isLoading:q}=p(b),[S]=u(),[D]=d();n.useEffect((()=>{k&&(f.setFieldsValue({title:k.title,shortDescription:k.shortDescription,description:k.description,imageTitle:k.imageTitle,altName:k.altName,section:k.section,slug:k.slug}),C(k.slug),I(k.slug!==k.section.toLowerCase().replace(/\s+/g,"-")),k.image&&w([{uid:"-1",name:"Current Image",status:"done",url:`/api/image/download/${k.image}`}]))}),[k,f]),n.useEffect((()=>{const e=f.getFieldValue("section");if(e&&!F){const s=e.toLowerCase().replace(/\s+/g,"-");C(s),f.setFieldsValue({slug:s})}}),[f.getFieldValue("section"),F]);const U={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:["","center","right","justify"]}],["link","image"],["clean"]]},V={beforeUpload:e=>(e.type.startsWith("image/")||l.error("You can only upload image files!"),!1),onChange:({fileList:e})=>w(e),fileList:y};return q&&b?m.jsx(s,{size:"large"}):m.jsxs(m.Fragment,{children:[m.jsx(t,{items:[{title:"Dashboard",onClick:()=>x("/dashboard")},{title:"About Us",onClick:()=>x("/about-us-table")},{title:b?"Edit About Us":"Create About Us"}],style:{marginBottom:"1rem"}}),m.jsxs(e,{form:f,layout:"vertical",onFinish:async e=>{var s,t;try{const t=new FormData;t.append("title",e.title),t.append("shortDescription",e.shortDescription),t.append("description",e.description),t.append("imageTitle",e.imageTitle),t.append("altName",e.altName),t.append("section",e.section),t.append("slug",e.slug),(null==(s=y[0])?void 0:s.originFileObj)&&t.append("image",y[0].originFileObj),b?(await D({id:b,formData:t}).unwrap(),l.success("About Us updated successfully")):(await S(t).unwrap(),l.success("About Us created successfully")),x("/about-us-table")}catch(i){const e=(null==(t=i.data)?void 0:t.error)||`Failed to ${b?"update":"create"} About Us entry`;l.error(e)}},children:[m.jsx(e.Item,{name:"section",label:"Section",rules:[{required:!0,message:"Please select a section!"}],children:m.jsxs(i,{placeholder:"Select a section",onChange:e=>{if(!F){const s=e.toLowerCase().replace(/\s+/g,"-");C(s),f.setFieldsValue({slug:s})}},children:[m.jsx(i.Option,{value:"Introduction",children:"Introduction"}),m.jsx(i.Option,{value:"Mission Vision",children:"Mission Vision"})]})}),m.jsx(e.Item,{name:"slug",label:m.jsxs("span",{children:["Slug",m.jsx(r,{type:"link",size:"small",onClick:()=>{if(I(!F),F){const e=f.getFieldValue("section").toLowerCase().replace(/\s+/g,"-");C(e),f.setFieldsValue({slug:e})}else{const e=f.getFieldValue("slug");C(e)}},style:{marginLeft:8},children:F?"Use Auto Slug":"Customize Slug"})]}),rules:[{required:!0,message:"Slug is required!"},{pattern:/^[a-z0-9]+(?:-[a-z0-9]+)*$/,message:"Slug can only contain lowercase letters, numbers, and hyphens"}],children:m.jsx(o,{disabled:!F,onChange:e=>{F&&C(e.target.value)}})}),m.jsx(e.Item,{name:"title",label:"Title",rules:[{required:!1,message:"Please input the title!"}],children:m.jsx(o,{})}),m.jsx(e.Item,{name:"shortDescription",label:"Short Description",rules:[{required:!1,message:"Please input the short description!"}],children:m.jsx(c,{modules:U,theme:"snow",style:{height:"150px",marginBottom:"50px"},className:"custom-quill-editor"})}),m.jsx(e.Item,{name:"description",label:"Description",rules:[{required:!1,message:"Please input the description!"}],children:m.jsx(c,{modules:U,theme:"snow",style:{height:"600px",marginBottom:"50px"},className:"custom-quill-editor"})}),m.jsx(e.Item,{name:"image",label:"Image",rules:[{required:!1,message:"Please upload an image!"}],children:m.jsx(a,{...V,listType:"picture",children:m.jsx(r,{icon:m.jsx(j,{}),children:b?"Change Image":"Click to Upload"})})}),m.jsx(e.Item,{name:"imageTitle",label:"Image Title",rules:[{required:!1,message:"Please input the image title!"}],children:m.jsx(o,{})}),m.jsx(e.Item,{name:"altName",label:"Alt Name",rules:[{required:!1,message:"Please input the alt name!"}],children:m.jsx(o,{})}),m.jsx(e.Item,{children:m.jsx(r,{type:"primary",htmlType:"submit",children:b?"Update":"Submit"})})]})]})};export{b as default};
