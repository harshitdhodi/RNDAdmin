import{d as r,b as V,e as D,S as h,B as f,f as u,U as q,s as c}from"./antd-mtWlDmqY.js";import{r as p,j as e}from"./react-DKICu8bO.js";import{R as y}from"./react-quill-BTfuOY7l.js";import{aO as P,aP as L,aQ as N}from"./index-Bbo1zcj1.js";import{P as T}from"./ant-design-icons-CNhZ1eT-.js";import{b as k,a as B}from"./react-router-B9QVkYva.js";import"./@ant-design-jkdqJqTn.js";import"./rc-util-C9ihiQ8l.js";import"./@babel-C_xKm-6V.js";import"./react-is-NfUKNnIv.js";import"./react-dom-BBS6HuAW.js";import"./classnames-Bv6oJzD9.js";import"./scheduler-CKyTKYc2.js";import"./@emotion-CW87jbl0.js";import"./stylis-OW4gUFyn.js";import"./@ctrl-DOFZgDuz.js";import"./rc-motion-D0k58WYE.js";import"./@rc-component-DJY3KRXL.js";import"./rc-resize-observer-h7CJ_t66.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-dialog-CfVZmZCG.js";import"./rc-table-BJAsEMDh.js";import"./rc-virtual-list-OMMR-gr8.js";import"./rc-tree-aGCJh_41.js";import"./rc-checkbox-nRYcjTPl.js";import"./rc-pagination-ZKXeAm0h.js";import"./rc-select-RmeC3WgB.js";import"./rc-overflow-DEivB5rv.js";import"./throttle-debounce-CUWDS_la.js";import"./rc-input-CIUXRVU8.js";import"./rc-tooltip-Oavn6yow.js";import"./rc-notification-0md6QYDj.js";import"./rc-image-ClDwiN-j.js";import"./rc-textarea-CijmdGy3.js";import"./copy-to-clipboard-0rP7DRqq.js";import"./toggle-selection-DGa8lynz.js";import"./rc-upload-DlrdHvh1.js";import"./rc-progress-BVn0ZmF4.js";import"./rc-dropdown-D4AwxsUk.js";import"./rc-menu-MHhKtfoG.js";import"./rc-field-form-CVOtFEQA.js";import"./scroll-into-view-if-needed-BZeNfFF0.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./rc-picker-D0kXf0IF.js";import"./rc-tabs-XmQY-w_1.js";import"./lodash-BLBAyiDt.js";import"./quill-BGoone1_.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./lucide-D7hRWJEP.js";import"./axios-DXsv3KKR.js";import"./@syncfusion-BIAkhmGL.js";import"./cookie--_YQFYBD.js";const it=()=>{const{id:l}=k(),d=B(),[a]=r.useForm(),[g,b]=p.useState([]),[M,m]=p.useState(""),[n,x]=p.useState(!1),{data:i,isLoading:I}=P(l),[U]=L(),[C]=N();p.useEffect(()=>{i&&(a.setFieldsValue({title:i.title,shortDescription:i.shortDescription,description:i.description,imageTitle:i.imageTitle,altName:i.altName,section:i.section,slug:i.slug}),m(i.slug),x(i.slug!==i.section.toLowerCase().replace(/\s+/g,"-")),i.image&&b([{uid:"-1",name:"Current Image",status:"done",url:`/api/image/download/${i.image}`}]))},[i,a]),p.useEffect(()=>{const t=a.getFieldValue("section");if(t&&!n){const s=t.toLowerCase().replace(/\s+/g,"-");m(s),a.setFieldsValue({slug:s})}},[a.getFieldValue("section"),n]);const j={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:["","center","right","justify"]}],["link","image"],["clean"]]},F=async t=>{var s,S;try{const o=new FormData;o.append("title",t.title),o.append("shortDescription",t.shortDescription),o.append("description",t.description),o.append("imageTitle",t.imageTitle),o.append("altName",t.altName),o.append("section",t.section),o.append("slug",t.slug),(s=g[0])!=null&&s.originFileObj&&o.append("image",g[0].originFileObj),l?(await C({id:l,formData:o}).unwrap(),c.success("About Us updated successfully")):(await U(o).unwrap(),c.success("About Us created successfully")),d("/about-us-table")}catch(o){const A=((S=o.data)==null?void 0:S.error)||`Failed to ${l?"update":"create"} About Us entry`;c.error(A)}},w={beforeUpload:t=>(t.type.startsWith("image/")||c.error("You can only upload image files!"),!1),onChange:({fileList:t})=>b(t),fileList:g};return I&&l?e.jsx(V,{size:"large"}):e.jsxs(e.Fragment,{children:[e.jsx(D,{items:[{title:"Dashboard",onClick:()=>d("/dashboard")},{title:"About Us",onClick:()=>d("/about-us-table")},{title:l?"Edit About Us":"Create About Us"}],style:{marginBottom:"1rem"}}),e.jsxs(r,{form:a,layout:"vertical",onFinish:F,children:[e.jsx(r.Item,{name:"section",label:"Section",rules:[{required:!0,message:"Please select a section!"}],children:e.jsxs(h,{placeholder:"Select a section",onChange:t=>{if(!n){const s=t.toLowerCase().replace(/\s+/g,"-");m(s),a.setFieldsValue({slug:s})}},children:[e.jsx(h.Option,{value:"Introduction",children:"Introduction"}),e.jsx(h.Option,{value:"Mission Vision",children:"Mission Vision"})]})}),e.jsx(r.Item,{name:"slug",label:e.jsxs("span",{children:["Slug",e.jsx(f,{type:"link",size:"small",onClick:()=>{if(x(!n),n){const s=a.getFieldValue("section").toLowerCase().replace(/\s+/g,"-");m(s),a.setFieldsValue({slug:s})}else{const t=a.getFieldValue("slug");m(t)}},style:{marginLeft:8},children:n?"Use Auto Slug":"Customize Slug"})]}),rules:[{required:!0,message:"Slug is required!"},{pattern:/^[a-z0-9]+(?:-[a-z0-9]+)*$/,message:"Slug can only contain lowercase letters, numbers, and hyphens"}],children:e.jsx(u,{disabled:!n,onChange:t=>{n&&m(t.target.value)}})}),e.jsx(r.Item,{name:"title",label:"Title",rules:[{required:!1,message:"Please input the title!"}],children:e.jsx(u,{})}),e.jsx(r.Item,{name:"shortDescription",label:"Short Description",rules:[{required:!1,message:"Please input the short description!"}],children:e.jsx(y,{modules:j,theme:"snow",style:{height:"150px",marginBottom:"50px"},className:"custom-quill-editor"})}),e.jsx(r.Item,{name:"description",label:"Description",rules:[{required:!1,message:"Please input the description!"}],children:e.jsx(y,{modules:j,theme:"snow",style:{height:"600px",marginBottom:"50px"},className:"custom-quill-editor"})}),e.jsx(r.Item,{name:"image",label:"Image",rules:[{required:!1,message:"Please upload an image!"}],children:e.jsx(q,{...w,listType:"picture",children:e.jsx(f,{icon:e.jsx(T,{}),children:l?"Change Image":"Click to Upload"})})}),e.jsx(r.Item,{name:"imageTitle",label:"Image Title",rules:[{required:!1,message:"Please input the image title!"}],children:e.jsx(u,{})}),e.jsx(r.Item,{name:"altName",label:"Alt Name",rules:[{required:!1,message:"Please input the alt name!"}],children:e.jsx(u,{})}),e.jsx(r.Item,{children:e.jsx(f,{type:"primary",htmlType:"submit",children:l?"Update":"Submit"})})]})]})};export{it as default};
