import{bD as e,j as s,L as a,B as r,I as t}from"./main-BcUd3ASm.js";import{d as i,r as l,L as n,R as d}from"./vendor-router-CaZtIe2_.js";import{b as o}from"./index.esm-CJw2PcRb.js";import{a as c}from"./vendor-utils-CfKmydC0.js";import{R as m}from"./index-BEyUZcsN.js";/* empty css                   */import{F as h,a as p,b as x,c as j,d as u,e as g}from"./form-ChijvnbD.js";import{S as f,a as N,b as v,c as b,e as w,f as S,d as y}from"./select-Dc7LnXRO.js";import{C,b as F,c as P,a as E}from"./card-DKPCnjx_.js";import{B as R,b as B,d as D}from"./breadcrumb-DEvmmGzh.js";import{B as L}from"./react-toastify.esm-CrOn1nFw.js";import{H as V}from"./house-CNKfAUOI.js";import{U}from"./upload-CioWvAMz.js";import{L as q}from"./loader-circle-Bvow6UU1.js";import"./vendor-react-DD_RYU77.js";import"./isEqual-DwlFmuh_.js";import"./index-CMYgmcqM.js";import"./index-BY97PVuz.js";import"./check-CxfHQWmE.js";import"./chevron-up-BAx2OvKy.js";import"./chevron-right-C95tp0e6.js";const A=()=>{const A=i(),[I,{isLoading:_}]=e(),[k,z]=l.useState(null),[M,H]=l.useState(null),[J,K]=l.useState([]),[Q,T]=l.useState(!0),Z=o({defaultValues:{title:"",altName:"",details:"",pageSlug:"",imgName:""}});l.useEffect((()=>{(async()=>{try{const e=await c.get("/api/menulist/get-menu");e.data.success?K(e.data.data):L({title:"Error",description:"Failed to load menu list",variant:"destructive"})}catch(e){L({title:"Error",description:"Error fetching menu list",variant:"destructive"})}finally{T(!1)}})()}),[]);return s.jsxs(C,{className:"max-w-4xl mx-auto",children:[s.jsxs(F,{children:[s.jsx("div",{className:"mb-4",children:s.jsxs(R,{children:[s.jsx(B,{children:s.jsx(D,{asChild:!0,children:s.jsxs(n,{to:"/dashboard",children:[s.jsx(V,{className:"h-4 w-4 mr-1 inline"}),"Dashboard"]})})}),s.jsx(B,{children:s.jsx(D,{asChild:!0,children:s.jsx(n,{to:"/banner-table",children:"Banner Management"})})}),s.jsx(B,{children:s.jsx(D,{children:"Add New Banner"})})]})}),s.jsx(P,{className:"text-2xl",children:"Add New Banner"})]}),s.jsx(E,{children:s.jsx(h,{...Z,children:s.jsxs("form",{onSubmit:Z.handleSubmit((async e=>{try{const s=new FormData;if(!e.image?.[0])return void L({title:"Error",description:"Please select an image",variant:"destructive"});if(s.append("image",e.image[0]),s.append("imgName",e.imgName),!e.photo?.[0])return void L({title:"Error",description:"Please select a photo",variant:"destructive"});s.append("photo",e.photo[0]),s.append("title",e.title),s.append("altName",e.altName),s.append("details",e.details),s.append("pageSlug",e.pageSlug),await I(s).unwrap(),L({title:"Success",description:"Banner created successfully"}),A("/banner-table")}catch(s){L({title:"Error",description:"Failed to create banner",variant:"destructive"})}})),className:"space-y-6",children:[s.jsx(p,{control:Z.control,name:"pageSlug",rules:{required:"Please select a page slug!"},render:({field:e})=>s.jsxs(x,{children:[s.jsx(j,{children:"Page Slug"}),s.jsxs(f,{onValueChange:e.onChange,defaultValue:e.value,disabled:Q,children:[s.jsx(u,{children:s.jsx(N,{children:s.jsx(v,{placeholder:"Select a menu item"})})}),s.jsx(b,{children:J.map((e=>s.jsxs(w,{children:[s.jsx(S,{children:e.parent.name}),e.children.map((e=>s.jsxs(d.Fragment,{children:[s.jsx(y,{value:e.path,children:e.name}),e.subChildren.map((e=>s.jsx(y,{value:e.path,className:"pl-6",children:e.name},e._id)))]},e._id)))]},e._id)))})]}),s.jsx(g,{})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"image-upload",children:"Banner Image"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(a,{htmlFor:"image-upload",className:"cursor-pointer flex items-center gap-2 border rounded-md px-3 py-2 hover:bg-gray-100",children:[s.jsx(U,{className:"w-4 h-4"}),s.jsx("span",{children:"Upload Image"})]}),s.jsx("input",{id:"image-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{const s=e.target.files[0];if(s){const e=new FileReader;e.onload=()=>{z(e.result)},e.readAsDataURL(s),Z.setValue("image",[s])}}})]}),k&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("div",{className:"border rounded-md p-2",children:s.jsx("img",{src:k,alt:"Preview",className:"h-20 w-auto object-contain"})}),s.jsx(r,{variant:"ghost",size:"sm",onClick:()=>{z(null),Z.setValue("image",null)},className:"text-red-600",children:"Remove"})]}),Z.formState.errors.image&&s.jsx("p",{className:"text-sm font-medium text-red-500",children:Z.formState.errors.image.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"photo-upload",children:"Photo"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(a,{htmlFor:"photo-upload",className:"cursor-pointer flex items-center gap-2 border rounded-md px-3 py-2 hover:bg-gray-100",children:[s.jsx(U,{className:"w-4 h-4"}),s.jsx("span",{children:"Upload Photo"})]}),s.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{const s=e.target.files[0];if(s){const e=new FileReader;e.onload=()=>{H(e.result)},e.readAsDataURL(s),Z.setValue("photo",[s])}}})]}),M&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("div",{className:"border rounded-md p-2",children:s.jsx("img",{src:M,alt:"Preview",className:"h-20 w-auto object-contain"})}),s.jsx(r,{variant:"ghost",size:"sm",onClick:()=>{H(null),Z.setValue("photo",null)},className:"text-red-600",children:"Remove"})]}),Z.formState.errors.photo&&s.jsx("p",{className:"text-sm font-medium text-red-500",children:Z.formState.errors.photo.message})]}),s.jsx(p,{control:Z.control,name:"imgName",rules:{required:"Please input image name!"},render:({field:e})=>s.jsxs(x,{children:[s.jsx(j,{children:"Image Name"}),s.jsx(u,{children:s.jsx(t,{...e})}),s.jsx(g,{})]})}),s.jsx(p,{control:Z.control,name:"title",render:({field:e})=>s.jsxs(x,{children:[s.jsx(j,{children:"Title"}),s.jsx(u,{children:s.jsx(t,{...e})}),s.jsx(g,{})]})}),s.jsx(p,{control:Z.control,name:"altName",rules:{required:"Please input alt name!"},render:({field:e})=>s.jsxs(x,{children:[s.jsx(j,{children:"Alt Name"}),s.jsx(u,{children:s.jsx(t,{...e})}),s.jsx(g,{})]})}),s.jsx(p,{control:Z.control,name:"details",render:({field:e})=>s.jsxs(x,{children:[s.jsx(j,{children:"Details"}),s.jsx(u,{children:s.jsx("div",{className:"mb-12",children:s.jsx(m,{theme:"snow",value:e.value||"",onChange:e.onChange})})}),s.jsx(g,{})]})}),s.jsxs(r,{type:"submit",disabled:_,className:"w-full sm:w-auto",children:[_&&s.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit"]})]})})})]})};export{A as default};
//# sourceMappingURL=AddBannerForm-BUb-o11O.js.map
