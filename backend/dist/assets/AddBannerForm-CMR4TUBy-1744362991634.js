import{bI as N,j as e,b as R}from"./main-4qLjs9DC-1744362991634.js";import{f as S,c as i,L as p,R as u}from"./vendor-C9iLKeEQ-1744362991634.js";import{R as w}from"./index-DBeqC7Bh-1744362991634.js";/* empty css                                 */import{F as r}from"./index-DW8oOCb8-1744362991634.js";import{B as l}from"./Breadcrumb-M9mtmHv2-1744362991634.js";import{R as M}from"./HomeOutlined-_TtdPbDL-1744362991634.js";import{S as h}from"./index-NTQ2_5ui-1744362991634.js";import{U as P,R as U}from"./index-DDs19gMu-1744362991634.js";import{B as g}from"./index-KVtzR29S-1744362991634.js";import{I as o}from"./index-BsE1OYP1-1744362991634.js";import{s as n}from"./index-Bd6uC6rh-1744362991634.js";import"./isEqual-D_2kg5Y--1744362991634.js";import"./toArray-Bbgf03cS-1744362991634.js";import"./CheckCircleFilled-C3q27Cea-1744362991634.js";import"./ExclamationCircleFilled-CcTejJYc-1744362991634.js";import"./dropdown-D-MlIyxB-1744362991634.js";import"./EllipsisOutlined-BU33D6Nw-1744362991634.js";import"./TextArea-CI-mQ3ZF-1744362991634.js";import"./CheckOutlined-BpOl7NFo-1744362991634.js";import"./fade-C9qzS4sj-1744362991634.js";import"./useForceUpdate-D5st5PaX-1744362991634.js";import"./DeleteOutlined-_qmzhm1M-1744362991634.js";import"./DownloadOutlined-ByB2redz-1744362991634.js";import"./InfoCircleFilled-BS3KWSKr-1744362991634.js";const{Option:m}=h,se=()=>{const x=S(),[d]=r.useForm(),[j]=N(),[O,c]=i.useState(null),[f,b]=i.useState([]),[I,y]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const a=await R.get("/api/menulist/get-menu");a.data.success?b(a.data.data):n.error("Failed to load menu list")}catch(a){console.error("Error fetching menu list:",a),n.error("Error fetching menu list")}finally{y(!1)}})()},[]);const F=async t=>{try{const a=new FormData;if(t.image?.[0]?.originFileObj)a.append("image",t.image[0].originFileObj),a.append("imgName",t.imgName);else{n.error("Please select an image");return}a.append("title",t.title),a.append("altName",t.altName),a.append("details",t.details),a.append("pageSlug",t.pageSlug),await j(a),n.success("Banner created successfully"),x("/banner-table")}catch(a){console.error(a),n.error("Failed to create banner")}},B=t=>{const a=t.fileList[0];if(a?.originFileObj){const s=new FileReader;s.onload=()=>{c(s.result)},s.readAsDataURL(a.originFileObj),d.setFieldsValue({image:t.fileList})}else c(null)},L=t=>e.jsxs(u.Fragment,{children:[e.jsx(m,{value:t.parent.path,style:{fontWeight:"bold"},children:t.parent.name}),t.children.map(a=>e.jsxs(u.Fragment,{children:[e.jsxs(m,{value:a.path,style:{paddingLeft:20},children:[e.jsx("span",{children:" ├── "}),a.name]}),a.subChildren.map(s=>e.jsxs(m,{value:s.path,style:{paddingLeft:40},children:[e.jsx("span",{children:"├────"})," ",s.name]},s._id))]},a._id))]},t._id);return e.jsxs("div",{children:[e.jsxs(l,{style:{padding:"16px 24px"},children:[e.jsx(l.Item,{children:e.jsxs(p,{to:"/dashboard",children:[e.jsx(M,{})," Dashboard"]})}),e.jsx(l.Item,{children:e.jsx(p,{to:"/banner-table",children:"Banner Management"})}),e.jsx(l.Item,{children:"Add New Banner"})]}),e.jsxs("div",{style:{padding:"24px"},children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Banner"}),e.jsxs(r,{form:d,layout:"vertical",onFinish:F,children:[e.jsx(r.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Please select a page slug!"}],children:e.jsx(h,{placeholder:"Select a menu item",loading:I,children:f.map(t=>L(t))})}),e.jsx(r.Item,{name:"image",label:"Banner Image",rules:[{required:!0,message:"Please upload an image!"}],children:e.jsx(P,{maxCount:1,listType:"picture",beforeUpload:()=>!1,onChange:B,children:e.jsx(g,{icon:e.jsx(U,{}),children:"Upload Image"})})}),e.jsx(r.Item,{name:"imgName",label:"Image Name",rules:[{required:!0,message:"Please input image name!"}],children:e.jsx(o,{})}),e.jsx(r.Item,{name:"title",label:"Title",children:e.jsx(o,{})}),e.jsx(r.Item,{name:"altName",label:"Alt Name",rules:[{required:!0,message:"Please input alt name!"}],children:e.jsx(o,{})}),e.jsx(r.Item,{name:"details",label:"Details",children:e.jsx(w,{theme:"snow"})}),e.jsx(r.Item,{children:e.jsx(g,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})]})};export{se as default};
