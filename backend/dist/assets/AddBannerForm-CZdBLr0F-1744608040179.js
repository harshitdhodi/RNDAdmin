import{e as S,bY as L,r as l,j as e,L as u,c as w,R as g}from"./index-CRdG_42A-1744608040179.js";import{R as M}from"./index-DI6QGwNX-1744608040179.js";/* empty css                                 */import{F as n}from"./index-n1YizhD--1744608040179.js";import{B as m}from"./Breadcrumb-gIB8X9Gj-1744608040179.js";import{R as P}from"./HomeOutlined-CyUXSTaY-1744608040179.js";import{S as x}from"./index-DGPYhxn_-1744608040179.js";import{U,R as O}from"./index-BJMMXSAp-1744608040179.js";import{B as h}from"./index-DI_9E5ut-1744608040179.js";import{I as o}from"./index-BpqghIgr-1744608040179.js";import{s as i}from"./index-BX_No8xo-1744608040179.js";import"./isEqual-c0FdAt_E-1744608040179.js";import"./toArray-Bbgf03cS-1744608040179.js";import"./CheckCircleFilled-ChLXlquY-1744608040179.js";import"./ExclamationCircleFilled-B3z9dj68-1744608040179.js";import"./dropdown-BJAjt_Yl-1744608040179.js";import"./EllipsisOutlined-Cab6dvLL-1744608040179.js";import"./TextArea-Cuh71-ik-1744608040179.js";import"./CheckOutlined-BiDYBLrk-1744608040179.js";import"./fade-AgMJ1HSi-1744608040179.js";import"./useForceUpdate-LQ5l3NYF-1744608040179.js";import"./DeleteOutlined-DuBDjBH5-1744608040179.js";import"./DownloadOutlined-CYeovlEk-1744608040179.js";import"./InfoCircleFilled-B6vtsR_8-1744608040179.js";const{Option:c}=x,se=()=>{const j=S(),[d]=n.useForm(),[f]=L(),[A,p]=l.useState(null),[b,I]=l.useState([]),[N,F]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const r=await w.get("/api/menulist/get-menu");r.data.success?I(r.data.data):i.error("Failed to load menu list")}catch(r){console.error("Error fetching menu list:",r),i.error("Error fetching menu list")}finally{F(!1)}})()},[]);const y=async a=>{var r,t;try{const s=new FormData;if((t=(r=a.image)==null?void 0:r[0])!=null&&t.originFileObj)s.append("image",a.image[0].originFileObj),s.append("imgName",a.imgName);else{i.error("Please select an image");return}s.append("title",a.title),s.append("altName",a.altName),s.append("details",a.details),s.append("pageSlug",a.pageSlug),await f(s),i.success("Banner created successfully"),j("/banner-table")}catch(s){console.error(s),i.error("Failed to create banner")}},B=a=>{const r=a.fileList[0];if(r!=null&&r.originFileObj){const t=new FileReader;t.onload=()=>{p(t.result)},t.readAsDataURL(r.originFileObj),d.setFieldsValue({image:a.fileList})}else p(null)},R=a=>e.jsxs(g.Fragment,{children:[e.jsx(c,{value:a.parent.path,className:"font-bold",children:a.parent.name}),a.children.map(r=>e.jsxs(g.Fragment,{children:[e.jsxs(c,{value:r.path,className:"pl-5",children:[e.jsx("span",{children:" ├── "}),r.name]}),r.subChildren.map(t=>e.jsxs(c,{value:t.path,className:"pl-10",children:[e.jsx("span",{children:"├────"})," ",t.name]},t._id))]},r._id))]},a._id);return e.jsxs("div",{children:[e.jsxs(m,{className:"px-4 py-6",children:[e.jsx(m.Item,{children:e.jsxs(u,{to:"/dashboard",children:[e.jsx(P,{})," Dashboard"]})}),e.jsx(m.Item,{children:e.jsx(u,{to:"/banner-table",children:"Banner Management"})}),e.jsx(m.Item,{children:"Add New Banner"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Banner"}),e.jsxs(n,{form:d,layout:"vertical",onFinish:y,children:[e.jsx(n.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Please select a page slug!"}],children:e.jsx(x,{placeholder:"Select a menu item",loading:N,children:b.map(a=>R(a))})}),e.jsx(n.Item,{name:"image",label:"Banner Image",rules:[{required:!0,message:"Please upload an image!"}],children:e.jsx(U,{maxCount:1,listType:"picture",beforeUpload:()=>!1,onChange:B,children:e.jsx(h,{icon:e.jsx(O,{}),children:"Upload Image"})})}),e.jsx(n.Item,{name:"imgName",label:"Image Name",rules:[{required:!0,message:"Please input image name!"}],children:e.jsx(o,{})}),e.jsx(n.Item,{name:"title",label:"Title",children:e.jsx(o,{})}),e.jsx(n.Item,{name:"altName",label:"Alt Name",rules:[{required:!0,message:"Please input alt name!"}],children:e.jsx(o,{})}),e.jsx(n.Item,{name:"details",label:"Details",children:e.jsx(M,{theme:"snow"})}),e.jsx(n.Item,{children:e.jsx(h,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})]})};export{se as default};
