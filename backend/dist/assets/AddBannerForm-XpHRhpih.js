import{d as e,e as r,S as s,U as i,B as t,f as a,s as o}from"./antd-UGvrC4Tl.js";import{r as l,j as m,a as n}from"./react-BfBsRgn0.js";import{aU as p}from"./index-cVSOkL6A.js";import{R as c}from"./react-quill-O9LY_HeH.js";import{a as j}from"./axios-BoylL8Pu.js";import{Q as d,P as u}from"./ant-design-icons-DoIDTG1a.js";import{a as g,L as h}from"./react-router-DUJjWq5j.js";import"./@ant-design-DttPmOfw.js";import"./rc-util-CQtTJgfq.js";import"./@babel-BfC2A0EA.js";import"./react-is-BaRe0U6l.js";import"./react-dom-DwrudmHt.js";import"./classnames-C3ovBj6j.js";import"./scheduler-BFk34ZWe.js";import"./@emotion-Czw0TW3x.js";import"./stylis-IVPcsLSI.js";import"./@ctrl-B2IeE8ye.js";import"./rc-motion-Cs3GDHoo.js";import"./@rc-component-BRPzBFoO.js";import"./rc-resize-observer-pLBfxqzk.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./rc-dialog-BZYed8xW.js";import"./rc-table-Cyp0j0g2.js";import"./rc-virtual-list-DeG6VQAs.js";import"./rc-tree-Ct99pdeQ.js";import"./rc-checkbox-bMXfL26q.js";import"./rc-pagination-CiqGXVR2.js";import"./rc-select-j7aSw-6E.js";import"./rc-overflow-CN2VNozo.js";import"./throttle-debounce-w9OM8Bxz.js";import"./rc-input-ByOKN0-r.js";import"./rc-tooltip-C0SbzfR_.js";import"./rc-notification-D3ebMW8F.js";import"./rc-image-CGWTMT4q.js";import"./rc-textarea-DZAOw23I.js";import"./copy-to-clipboard-Bgp_G7Oq.js";import"./toggle-selection-DUsDmMsR.js";import"./rc-upload-ClZE7meS.js";import"./rc-progress-bbq4uvV3.js";import"./rc-dropdown-DRLVnlhP.js";import"./rc-menu-CY_ke4Oh.js";import"./rc-field-form-C7q369ye.js";import"./scroll-into-view-if-needed-cNB78-hM.js";import"./compute-scroll-into-view-CJmtT4lq.js";import"./rc-picker-B5UDvhgZ.js";import"./rc-tabs-DirvITx8.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./lucide-D6BDVLHE.js";import"./@syncfusion-CXokIO9o.js";import"./cookie-BUTH-fPQ.js";import"./lodash-CtK3uT03.js";import"./quill-CMG--X-K.js";const{Option:x}=s,b=()=>{const b=g(),[f]=e.useForm(),[y]=p(),[v,F]=l.useState(null),[I,w]=l.useState([]),[N,S]=l.useState(!0);l.useEffect((()=>{(async()=>{try{const e=await j.get("/api/menulist/get-menu");e.data.success?w(e.data.data):o.error("Failed to load menu list")}catch(e){o.error("Error fetching menu list")}finally{S(!1)}})()}),[]);return m.jsxs("div",{children:[m.jsxs(r,{style:{padding:"16px 24px"},children:[m.jsx(r.Item,{children:m.jsxs(h,{to:"/dashboard",children:[m.jsx(d,{})," Dashboard"]})}),m.jsx(r.Item,{children:m.jsx(h,{to:"/banner-table",children:"Banner Management"})}),m.jsx(r.Item,{children:"Add New Banner"})]}),m.jsxs("div",{style:{padding:"24px"},children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Banner"}),m.jsxs(e,{form:f,layout:"vertical",onFinish:async e=>{var r,s;try{const i=new FormData;if(!(null==(s=null==(r=e.image)?void 0:r[0])?void 0:s.originFileObj))return void o.error("Please select an image");i.append("image",e.image[0].originFileObj),i.append("imgName",e.imgName),i.append("title",e.title),i.append("altName",e.altName),i.append("details",e.details),i.append("pageSlug",e.pageSlug),await y(i),o.success("Banner created successfully"),b("/banner-table")}catch(i){o.error("Failed to create banner")}},children:[m.jsx(e.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Please select a page slug!"}],children:m.jsx(s,{placeholder:"Select a menu item",loading:N,children:I.map((e=>(e=>m.jsxs(n.Fragment,{children:[m.jsx(x,{value:e.parent.path,style:{fontWeight:"bold"},children:e.parent.name}),e.children.map((e=>m.jsxs(n.Fragment,{children:[m.jsxs(x,{value:e.path,style:{paddingLeft:20},children:[m.jsx("span",{children:" ├── "}),e.name]}),e.subChildren.map((e=>m.jsxs(x,{value:e.path,style:{paddingLeft:40},children:[m.jsx("span",{children:"├────"})," ",e.name]},e._id)))]},e._id)))]},e._id))(e)))})}),m.jsx(e.Item,{name:"image",label:"Banner Image",rules:[{required:!0,message:"Please upload an image!"}],children:m.jsx(i,{maxCount:1,listType:"picture",beforeUpload:()=>!1,onChange:e=>{const r=e.fileList[0];if(null==r?void 0:r.originFileObj){const s=new FileReader;s.onload=()=>{F(s.result)},s.readAsDataURL(r.originFileObj),f.setFieldsValue({image:e.fileList})}else F(null)},children:m.jsx(t,{icon:m.jsx(u,{}),children:"Upload Image"})})}),m.jsx(e.Item,{name:"imgName",label:"Image Name",rules:[{required:!0,message:"Please input image name!"}],children:m.jsx(a,{})}),m.jsx(e.Item,{name:"title",label:"Title",children:m.jsx(a,{})}),m.jsx(e.Item,{name:"altName",label:"Alt Name",rules:[{required:!0,message:"Please input alt name!"}],children:m.jsx(a,{})}),m.jsx(e.Item,{name:"details",label:"Details",children:m.jsx(c,{theme:"snow"})}),m.jsx(e.Item,{children:m.jsx(t,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})]})};export{b as default};
