import{bJ as S,j as e,b as R}from"./main-Dqjs8KFu.js";import{f as w,c as l,L as u,b as g}from"./vendor-DNXw0_ws.js";import{R as M}from"./index-CZ4jclvw.js";/* empty css                   */import{F as n}from"./index-Cw0H4GsE.js";import{B as o}from"./Breadcrumb-2KrIFCzH.js";import{R as P}from"./HomeOutlined-B2VBQP_C.js";import{S as x}from"./index-D2nVi2Dm.js";import{U,R as O}from"./index-D7cNkm7o.js";import{B as h}from"./index-Dx4ajweK.js";import{I as m}from"./index-Dn1mbgUD.js";import{s as i}from"./index-Nfv-4U3a.js";import"./isEqual-SRXYztYb.js";import"./toArray-CgZcBx3z.js";import"./CheckCircleFilled-B9cYDV8S.js";import"./ExclamationCircleFilled-Dpe_HOR5.js";import"./dropdown-CuRJ2VRe.js";import"./EllipsisOutlined-Czar8QPM.js";import"./TextArea-x7XPQzQf.js";import"./CheckOutlined-DiRhtld1.js";import"./fade-EN-OZS4J.js";import"./useForceUpdate-CFd9TtZN.js";import"./DeleteOutlined-BKV-co7l.js";import"./DownloadOutlined-BQKgUPjT.js";import"./InfoCircleFilled-Ce7fYp6d.js";const{Option:d}=x,ne=()=>{const j=w(),[c]=n.useForm(),[f]=S(),[A,p]=l.useState(null),[b,I]=l.useState([]),[y,F]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const t=await R.get("/api/menulist/get-menu");t.data.success?I(t.data.data):i.error("Failed to load menu list")}catch(t){console.error("Error fetching menu list:",t),i.error("Error fetching menu list")}finally{F(!1)}})()},[]);const B=async a=>{var t,r;try{const s=new FormData;if((r=(t=a.image)==null?void 0:t[0])!=null&&r.originFileObj)s.append("image",a.image[0].originFileObj),s.append("imgName",a.imgName);else{i.error("Please select an image");return}s.append("title",a.title),s.append("altName",a.altName),s.append("details",a.details),s.append("pageSlug",a.pageSlug),await f(s),i.success("Banner created successfully"),j("/banner-table")}catch(s){console.error(s),i.error("Failed to create banner")}},L=a=>{const t=a.fileList[0];if(t!=null&&t.originFileObj){const r=new FileReader;r.onload=()=>{p(r.result)},r.readAsDataURL(t.originFileObj),c.setFieldsValue({image:a.fileList})}else p(null)},N=a=>e.jsxs(g.Fragment,{children:[e.jsx(d,{value:a.parent.path,style:{fontWeight:"bold"},children:a.parent.name}),a.children.map(t=>e.jsxs(g.Fragment,{children:[e.jsxs(d,{value:t.path,style:{paddingLeft:20},children:[e.jsx("span",{children:" ├── "}),t.name]}),t.subChildren.map(r=>e.jsxs(d,{value:r.path,style:{paddingLeft:40},children:[e.jsx("span",{children:"├────"})," ",r.name]},r._id))]},t._id))]},a._id);return e.jsxs("div",{children:[e.jsxs(o,{style:{padding:"16px 24px"},children:[e.jsx(o.Item,{children:e.jsxs(u,{to:"/dashboard",children:[e.jsx(P,{})," Dashboard"]})}),e.jsx(o.Item,{children:e.jsx(u,{to:"/banner-table",children:"Banner Management"})}),e.jsx(o.Item,{children:"Add New Banner"})]}),e.jsxs("div",{style:{padding:"24px"},children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Banner"}),e.jsxs(n,{form:c,layout:"vertical",onFinish:B,children:[e.jsx(n.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Please select a page slug!"}],children:e.jsx(x,{placeholder:"Select a menu item",loading:y,children:b.map(a=>N(a))})}),e.jsx(n.Item,{name:"image",label:"Banner Image",rules:[{required:!0,message:"Please upload an image!"}],children:e.jsx(U,{maxCount:1,listType:"picture",beforeUpload:()=>!1,onChange:L,children:e.jsx(h,{icon:e.jsx(O,{}),children:"Upload Image"})})}),e.jsx(n.Item,{name:"imgName",label:"Image Name",rules:[{required:!0,message:"Please input image name!"}],children:e.jsx(m,{})}),e.jsx(n.Item,{name:"title",label:"Title",children:e.jsx(m,{})}),e.jsx(n.Item,{name:"altName",label:"Alt Name",rules:[{required:!0,message:"Please input alt name!"}],children:e.jsx(m,{})}),e.jsx(n.Item,{name:"details",label:"Details",children:e.jsx(M,{theme:"snow"})}),e.jsx(n.Item,{children:e.jsx(h,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})]})};export{ne as default};
