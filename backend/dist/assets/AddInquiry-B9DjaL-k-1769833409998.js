import{g as I,d4 as C,d6 as q,f as E,j as e,I as c,B as L}from"./index-Bz9LGQy6-1769833409998.js";import{b as A}from"./index.esm-9hCXLVUo-1769833409998.js";import{S as u,a as g,b as p,c as b,d as y}from"./select-Dcv52KWQ-1769833409998.js";import{F as T,a as n,b as t,c as l,d as o,e as i}from"./form-BOTLTCKx-1769833409998.js";import{t as k,o as w,s as d,c as B}from"./types-CLJ6I6Oa-1769833409998.js";import{B as M}from"./BreadCrumb-91y0pfAT-1769833409998.js";import"./index-Bcyj91ik-1769833409998.js";import"./index-DyHHWIte-1769833409998.js";const P=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],V=w({firstName:d().min(2,{message:"First name must be at least 2 characters"}),lastName:d().min(2,{message:"Last name must be at least 2 characters"}),organisation:d().min(2,{message:"Organisation name must be at least 2 characters"}),department:d().optional(),email:d().email({message:"Invalid email address"}),phone:d().regex(/^[0-9]{10}$/,{message:"Phone number must be 10 digits"}),address:d().optional(),country:d().optional(),message:d().min(10,{message:"Message must be at least 10 characters"}),needCallback:B().default(!1),status:d().nonempty({message:"Please select a status"}),source:d().nonempty({message:"Please select a source"})});function H({onClose:D}){const[f,{isLoading:h}]=I(),{data:x,isLoading:S}=C(),{data:j,isLoading:N}=q(),v=E(),a=A({resolver:k(V),defaultValues:{firstName:"",lastName:"",organisation:"",department:"",email:"",phone:"",address:"",country:"",message:"",needCallback:!1,status:"",source:""}}),F=async s=>{var m;try{const r={...s,date:new Date().toISOString().split("T")[0]};await f(r).unwrap(),a.reset(),v("/inquiry-list")}catch(r){alert(((m=r==null?void 0:r.data)==null?void 0:m.message)||"Failed to add inquiry.")}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(M,{items:P})}),e.jsx(T,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(F),className:"space-y-4 p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Inquiry"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{control:a.control,name:"firstName",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"First Name"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Enter first name",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"lastName",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Last Name"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Enter last name",...s})}),e.jsx(i,{})]})})]}),e.jsx(n,{control:a.control,name:"organisation",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Organisation"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Enter organisation name",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"email",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Email"}),e.jsx(o,{children:e.jsx(c,{type:"email",placeholder:"Enter email",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"phone",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Phone Number"}),e.jsx(o,{children:e.jsx(c,{type:"tel",placeholder:"Enter 10-digit phone",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"address",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Address"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Enter address",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"country",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Country"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Enter country",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"message",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Message"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Enter message",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"needCallback",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Need Callback"}),e.jsx(o,{children:e.jsx(c,{type:"checkbox",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"status",render:({field:s})=>{var m;return e.jsxs(t,{children:[e.jsx(l,{children:"Status"}),S?e.jsx("div",{children:"Loading statuses..."}):e.jsxs(u,{onValueChange:s.onChange,value:s.value,children:[e.jsx(o,{children:e.jsx(g,{children:e.jsx(p,{placeholder:"Select status"})})}),e.jsx(b,{children:(m=x==null?void 0:x.data)==null?void 0:m.map(r=>e.jsx(y,{value:r.status,children:r.status},r._id))})]}),e.jsx(i,{})]})}}),e.jsx(n,{control:a.control,name:"source",render:({field:s})=>{var m;return e.jsxs(t,{children:[e.jsx(l,{children:"Source"}),N?e.jsx("div",{children:"Loading sources..."}):e.jsxs(u,{onValueChange:s.onChange,value:s.value,children:[e.jsx(o,{children:e.jsx(g,{children:e.jsx(p,{placeholder:"Select source"})})}),e.jsx(b,{children:(m=j==null?void 0:j.data)==null?void 0:m.map(r=>e.jsx(y,{value:r.source,children:r.source},r._id))})]}),e.jsx(i,{})]})}}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsx(L,{type:"submit",disabled:h,children:h?"Adding...":"Add Inquiry"})})]})})]})}export{H as default};
