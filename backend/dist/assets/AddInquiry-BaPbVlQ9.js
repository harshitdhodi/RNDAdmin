import{j as e}from"./react-BfBsRgn0.js";import{c as s}from"./react-hook-form-Dn0Bw783.js";import{d as r,am as a,ao as n,I as l,B as t}from"./index-cVSOkL6A.js";import{S as i,a as o,b as d,c,d as m}from"./select-DKOOCAeT.js";import{F as j,a as x,b as h,c as u,d as p,e as g}from"./form-CnKjwTYl.js";import{o as f,s as b,c as v}from"./zod-CO6CETVj.js";import{t as y}from"./@hookform-DBV5tMOk.js";import{B as N}from"./BreadCrumb-D0swuSFA.js";import{a as k}from"./react-router-DUJjWq5j.js";import"./classnames-C3ovBj6j.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./lucide-D6BDVLHE.js";import"./axios-BoylL8Pu.js";import"./@syncfusion-CXokIO9o.js";import"./cookie-BUTH-fPQ.js";const C=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],E=f({firstName:b().min(2,{message:"First name must be at least 2 characters"}),lastName:b().min(2,{message:"Last name must be at least 2 characters"}),organisation:b().min(2,{message:"Organisation name must be at least 2 characters"}),department:b().optional(),email:b().email({message:"Invalid email address"}),phone:b().regex(/^[0-9]{10}$/,{message:"Phone number must be 10 digits"}),address:b().optional(),country:b().optional(),message:b().min(10,{message:"Message must be at least 10 characters"}),needCallback:v().default(!1),status:b().nonempty({message:"Please select a status"}),source:b().nonempty({message:"Please select a source"})});function S({onClose:f}){const[b,{isLoading:v}]=r(),{data:S,isLoading:q}=a(),{data:I,isLoading:L}=n(),w=k(),F=s({resolver:y(E),defaultValues:{firstName:"",lastName:"",organisation:"",department:"",email:"",phone:"",address:"",country:"",message:"",needCallback:!1,status:"",source:""}});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(N,{items:C})}),e.jsx(j,{...F,children:e.jsxs("form",{onSubmit:F.handleSubmit((async e=>{var s;try{const s={...e,date:(new Date).toISOString().split("T")[0]};await b(s).unwrap(),F.reset(),w("/inquiry-list")}catch(r){alert((null==(s=null==r?void 0:r.data)?void 0:s.message)||"Failed to add inquiry.")}})),className:"space-y-4 p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Inquiry"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:F.control,name:"firstName",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"First Name"}),e.jsx(p,{children:e.jsx(l,{placeholder:"Enter first name",...s})}),e.jsx(g,{})]})}),e.jsx(x,{control:F.control,name:"lastName",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Last Name"}),e.jsx(p,{children:e.jsx(l,{placeholder:"Enter last name",...s})}),e.jsx(g,{})]})})]}),e.jsx(x,{control:F.control,name:"organisation",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Organisation"}),e.jsx(p,{children:e.jsx(l,{placeholder:"Enter organisation name",...s})}),e.jsx(g,{})]})}),e.jsx(x,{control:F.control,name:"email",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Email"}),e.jsx(p,{children:e.jsx(l,{type:"email",placeholder:"Enter email",...s})}),e.jsx(g,{})]})}),e.jsx(x,{control:F.control,name:"phone",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Phone Number"}),e.jsx(p,{children:e.jsx(l,{type:"tel",placeholder:"Enter 10-digit phone",...s})}),e.jsx(g,{})]})}),e.jsx(x,{control:F.control,name:"address",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Address"}),e.jsx(p,{children:e.jsx(l,{placeholder:"Enter address",...s})}),e.jsx(g,{})]})}),e.jsx(x,{control:F.control,name:"country",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Country"}),e.jsx(p,{children:e.jsx(l,{placeholder:"Enter country",...s})}),e.jsx(g,{})]})}),e.jsx(x,{control:F.control,name:"message",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Message"}),e.jsx(p,{children:e.jsx(l,{placeholder:"Enter message",...s})}),e.jsx(g,{})]})}),e.jsx(x,{control:F.control,name:"needCallback",render:({field:s})=>e.jsxs(h,{children:[e.jsx(u,{children:"Need Callback"}),e.jsx(p,{children:e.jsx(l,{type:"checkbox",...s})}),e.jsx(g,{})]})}),e.jsx(x,{control:F.control,name:"status",render:({field:s})=>{var r;return e.jsxs(h,{children:[e.jsx(u,{children:"Status"}),q?e.jsx("div",{children:"Loading statuses..."}):e.jsxs(i,{onValueChange:s.onChange,value:s.value,children:[e.jsx(p,{children:e.jsx(o,{children:e.jsx(d,{placeholder:"Select status"})})}),e.jsx(c,{children:null==(r=null==S?void 0:S.data)?void 0:r.map((s=>e.jsx(m,{value:s.status,children:s.status},s._id)))})]}),e.jsx(g,{})]})}}),e.jsx(x,{control:F.control,name:"source",render:({field:s})=>{var r;return e.jsxs(h,{children:[e.jsx(u,{children:"Source"}),L?e.jsx("div",{children:"Loading sources..."}):e.jsxs(i,{onValueChange:s.onChange,value:s.value,children:[e.jsx(p,{children:e.jsx(o,{children:e.jsx(d,{placeholder:"Select source"})})}),e.jsx(c,{children:null==(r=null==I?void 0:I.data)?void 0:r.map((s=>e.jsx(m,{value:s.source,children:s.source},s._id)))})]}),e.jsx(g,{})]})}}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsx(t,{type:"submit",disabled:v,children:v?"Adding...":"Add Inquiry"})})]})})]})}export{S as default};
