import{e as F,ba as I,bc as C,j as e,I as d,B as q}from"./main-D56VxXD--1744353259833.js";import{f as E}from"./vendor-CxfDVdnA-1744353259833.js";import{b as L}from"./index.esm-ACKcJ_Ma-1744353259833.js";import{S as x,a as j,b as h,c as u,d as p}from"./select-DNWqn07V-1744353259833.js";import{F as A,a as n,b as t,c as l,d as o,e as i}from"./form-ThEuEsSk-1744353259833.js";import{t as T,o as k,s as c,c as w}from"./index-CTTUNsNs-1744353259833.js";import{B}from"./BreadCrumb-BO6dDDp5-1744353259833.js";import"./Combination-GEIj-fwg-1744353259833.js";import"./index-B4w3sIbe-1744353259833.js";import"./check-CNcU0gId-1744353259833.js";import"./chevron-up-BS150iEF-1744353259833.js";import"./chevron-right-1ZTII9Av-1744353259833.js";const M=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],P=k({firstName:c().min(2,{message:"First name must be at least 2 characters"}),lastName:c().min(2,{message:"Last name must be at least 2 characters"}),organisation:c().min(2,{message:"Organisation name must be at least 2 characters"}),department:c().optional(),email:c().email({message:"Invalid email address"}),phone:c().regex(/^[0-9]{10}$/,{message:"Phone number must be 10 digits"}),address:c().optional(),country:c().optional(),message:c().min(10,{message:"Message must be at least 10 characters"}),needCallback:w().default(!1),status:c().nonempty({message:"Please select a status"}),source:c().nonempty({message:"Please select a source"})});function U({onClose:V}){const[g,{isLoading:m}]=F(),{data:b,isLoading:y}=I(),{data:f,isLoading:S}=C(),N=E(),a=L({resolver:T(P),defaultValues:{firstName:"",lastName:"",organisation:"",department:"",email:"",phone:"",address:"",country:"",message:"",needCallback:!1,status:"",source:""}}),v=async s=>{try{const r={...s,date:new Date().toISOString().split("T")[0]};await g(r).unwrap(),a.reset(),N("/inquiry-list")}catch(r){alert(r?.data?.message||"Failed to add inquiry.")}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(B,{items:M})}),e.jsx(A,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(v),className:"space-y-4 p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Inquiry"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{control:a.control,name:"firstName",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"First Name"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter first name",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"lastName",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Last Name"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter last name",...s})}),e.jsx(i,{})]})})]}),e.jsx(n,{control:a.control,name:"organisation",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Organisation"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter organisation name",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"email",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Email"}),e.jsx(o,{children:e.jsx(d,{type:"email",placeholder:"Enter email",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"phone",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Phone Number"}),e.jsx(o,{children:e.jsx(d,{type:"tel",placeholder:"Enter 10-digit phone",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"address",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Address"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter address",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"country",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Country"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter country",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"message",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Message"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter message",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"needCallback",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Need Callback"}),e.jsx(o,{children:e.jsx(d,{type:"checkbox",...s})}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"status",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Status"}),y?e.jsx("div",{children:"Loading statuses..."}):e.jsxs(x,{onValueChange:s.onChange,value:s.value,children:[e.jsx(o,{children:e.jsx(j,{children:e.jsx(h,{placeholder:"Select status"})})}),e.jsx(u,{children:b?.data?.map(r=>e.jsx(p,{value:r.status,children:r.status},r._id))})]}),e.jsx(i,{})]})}),e.jsx(n,{control:a.control,name:"source",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Source"}),S?e.jsx("div",{children:"Loading sources..."}):e.jsxs(x,{onValueChange:s.onChange,value:s.value,children:[e.jsx(o,{children:e.jsx(j,{children:e.jsx(h,{placeholder:"Select source"})})}),e.jsx(u,{children:f?.data?.map(r=>e.jsx(p,{value:r.source,children:r.source},r._id))})]}),e.jsx(i,{})]})}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsx(q,{type:"submit",disabled:m,children:m?"Adding...":"Add Inquiry"})})]})})]})}export{U as default};
