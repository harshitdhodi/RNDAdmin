import{d as e,b4 as s,b6 as r,j as a,I as n,B as l}from"./main-BcUd3ASm.js";import{d as t}from"./vendor-router-CaZtIe2_.js";import{b as i}from"./index.esm-CJw2PcRb.js";import{S as d,a as o,b as c,c as j,d as h}from"./select-Dc7LnXRO.js";import{F as m,a as x,b as u,c as p,d as g,e as f}from"./form-ChijvnbD.js";import{B as b}from"./BreadCrumb-B5EzA35k.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";import"./index-CMYgmcqM.js";import"./index-BY97PVuz.js";import"./check-CxfHQWmE.js";import"./chevron-up-BAx2OvKy.js";import"./breadcrumb-DEvmmGzh.js";import"./chevron-right-C95tp0e6.js";const y=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}];function N({onClose:N}){const[v,{isLoading:C}]=e(),{data:E,isLoading:k}=s(),{data:S,isLoading:L}=r(),q=t(),I=i({defaultValues:{firstName:"",lastName:"",organisation:"",department:"",email:"",phone:"",address:"",country:"",message:"",needCallback:!1,status:"",source:""}});return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"ml-1",children:a.jsx(b,{items:y})}),a.jsx(m,{...I,children:a.jsxs("form",{onSubmit:I.handleSubmit((async e=>{const s=(e=>{const s={};return(!e.firstName||e.firstName.length<2)&&(s.firstName="First name must be at least 2 characters"),(!e.lastName||e.lastName.length<2)&&(s.lastName="Last name must be at least 2 characters"),(!e.organisation||e.organisation.length<2)&&(s.organisation="Organisation name must be at least 2 characters"),e.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(s.email="Invalid email address"),e.phone&&/^[0-9]{10}$/.test(e.phone)||(s.phone="Phone number must be 10 digits"),(!e.message||e.message.length<10)&&(s.message="Message must be at least 10 characters"),e.status||(s.status="Please select a status"),e.source||(s.source="Please select a source"),s})(e);if(Object.keys(s).length>0)Object.keys(s).forEach((e=>{I.setError(e,{type:"manual",message:s[e]})}));else try{const s={...e,date:(new Date).toISOString().split("T")[0]};await v(s).unwrap(),I.reset(),q("/inquiry-list")}catch(r){alert(r?.data?.message||"Failed to add inquiry.")}})),className:"space-y-4 p-4",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Inquiry"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(x,{control:I.control,name:"firstName",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"First Name"}),a.jsx(g,{children:a.jsx(n,{placeholder:"Enter first name",...e})}),a.jsx(f,{})]})}),a.jsx(x,{control:I.control,name:"lastName",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"Last Name"}),a.jsx(g,{children:a.jsx(n,{placeholder:"Enter last name",...e})}),a.jsx(f,{})]})})]}),a.jsx(x,{control:I.control,name:"organisation",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"Organisation"}),a.jsx(g,{children:a.jsx(n,{placeholder:"Enter organisation name",...e})}),a.jsx(f,{})]})}),a.jsx(x,{control:I.control,name:"email",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"Email"}),a.jsx(g,{children:a.jsx(n,{type:"email",placeholder:"Enter email",...e})}),a.jsx(f,{})]})}),a.jsx(x,{control:I.control,name:"phone",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"Phone Number"}),a.jsx(g,{children:a.jsx(n,{type:"tel",placeholder:"Enter 10-digit phone",...e})}),a.jsx(f,{})]})}),a.jsx(x,{control:I.control,name:"address",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"Address"}),a.jsx(g,{children:a.jsx(n,{placeholder:"Enter address",...e})}),a.jsx(f,{})]})}),a.jsx(x,{control:I.control,name:"country",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"Country"}),a.jsx(g,{children:a.jsx(n,{placeholder:"Enter country",...e})}),a.jsx(f,{})]})}),a.jsx(x,{control:I.control,name:"message",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"Message"}),a.jsx(g,{children:a.jsx(n,{placeholder:"Enter message",...e})}),a.jsx(f,{})]})}),a.jsx(x,{control:I.control,name:"needCallback",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"Need Callback"}),a.jsx(g,{children:a.jsx(n,{type:"checkbox",checked:e.value,onChange:s=>e.onChange(s.target.checked)})}),a.jsx(f,{})]})}),a.jsx(x,{control:I.control,name:"status",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"Status"}),k?a.jsx("div",{children:"Loading statuses..."}):a.jsxs(d,{onValueChange:e.onChange,value:e.value,children:[a.jsx(g,{children:a.jsx(o,{children:a.jsx(c,{placeholder:"Select status"})})}),a.jsx(j,{children:E?.data?.map((e=>a.jsx(h,{value:e.status,children:e.status},e._id)))})]}),a.jsx(f,{})]})}),a.jsx(x,{control:I.control,name:"source",render:({field:e})=>a.jsxs(u,{children:[a.jsx(p,{children:"Source"}),L?a.jsx("div",{children:"Loading sources..."}):a.jsxs(d,{onValueChange:e.onChange,value:e.value,children:[a.jsx(g,{children:a.jsx(o,{children:a.jsx(c,{placeholder:"Select source"})})}),a.jsx(j,{children:S?.data?.map((e=>a.jsx(h,{value:e.source,children:e.source},e._id)))})]}),a.jsx(f,{})]})}),a.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:a.jsx(l,{type:"submit",disabled:C,children:C?"Adding...":"Add Inquiry"})})]})})]})}export{N as default};
//# sourceMappingURL=AddInquiry-CFSl6BOy.js.map
