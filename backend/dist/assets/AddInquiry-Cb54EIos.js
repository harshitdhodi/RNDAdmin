import{d as e,ba as s,bc as a,j as r,I as n,B as l}from"./main-DeRxjK88.js";import{d as t}from"./vendor-router-Bu4EHm1B.js";import{b as i}from"./index.esm-C1PzQRG-.js";import{S as d,a as o,b as c,c as m,d as j}from"./select-Dqodnixf.js";import{F as x,a as h,b as u,c as p,d as g,e as f}from"./form-DduRHWMV.js";import{t as b,o as y,s as v,c as N}from"./index-Db_ZYzj8.js";import{B as C}from"./BreadCrumb-PqVNrGAD.js";import"./vendor-react-CI5aWZjI.js";import"./vendor-utils-BfOc9lHv.js";import"./Combination-CNfQ0noH.js";import"./index-Kj7Vjsi3.js";import"./check-CVm68GV7.js";import"./chevron-up-3rt5hBY6.js";import"./chevron-right-YTRb9aqn.js";const E=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],S=y({firstName:v().min(2,{message:"First name must be at least 2 characters"}),lastName:v().min(2,{message:"Last name must be at least 2 characters"}),organisation:v().min(2,{message:"Organisation name must be at least 2 characters"}),department:v().optional(),email:v().email({message:"Invalid email address"}),phone:v().regex(/^[0-9]{10}$/,{message:"Phone number must be 10 digits"}),address:v().optional(),country:v().optional(),message:v().min(10,{message:"Message must be at least 10 characters"}),needCallback:N().default(!1),status:v().nonempty({message:"Please select a status"}),source:v().nonempty({message:"Please select a source"})});function I({onClose:y}){const[v,{isLoading:N}]=e(),{data:I,isLoading:q}=s(),{data:F,isLoading:L}=a(),k=t(),w=i({resolver:b(S),defaultValues:{firstName:"",lastName:"",organisation:"",department:"",email:"",phone:"",address:"",country:"",message:"",needCallback:!1,status:"",source:""}});return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"ml-1",children:r.jsx(C,{items:E})}),r.jsx(x,{...w,children:r.jsxs("form",{onSubmit:w.handleSubmit((async e=>{try{const s={...e,date:(new Date).toISOString().split("T")[0]};await v(s).unwrap(),w.reset(),k("/inquiry-list")}catch(s){alert(s?.data?.message||"Failed to add inquiry.")}})),className:"space-y-4 p-4",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Inquiry"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(h,{control:w.control,name:"firstName",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"First Name"}),r.jsx(g,{children:r.jsx(n,{placeholder:"Enter first name",...e})}),r.jsx(f,{})]})}),r.jsx(h,{control:w.control,name:"lastName",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"Last Name"}),r.jsx(g,{children:r.jsx(n,{placeholder:"Enter last name",...e})}),r.jsx(f,{})]})})]}),r.jsx(h,{control:w.control,name:"organisation",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"Organisation"}),r.jsx(g,{children:r.jsx(n,{placeholder:"Enter organisation name",...e})}),r.jsx(f,{})]})}),r.jsx(h,{control:w.control,name:"email",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"Email"}),r.jsx(g,{children:r.jsx(n,{type:"email",placeholder:"Enter email",...e})}),r.jsx(f,{})]})}),r.jsx(h,{control:w.control,name:"phone",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"Phone Number"}),r.jsx(g,{children:r.jsx(n,{type:"tel",placeholder:"Enter 10-digit phone",...e})}),r.jsx(f,{})]})}),r.jsx(h,{control:w.control,name:"address",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"Address"}),r.jsx(g,{children:r.jsx(n,{placeholder:"Enter address",...e})}),r.jsx(f,{})]})}),r.jsx(h,{control:w.control,name:"country",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"Country"}),r.jsx(g,{children:r.jsx(n,{placeholder:"Enter country",...e})}),r.jsx(f,{})]})}),r.jsx(h,{control:w.control,name:"message",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"Message"}),r.jsx(g,{children:r.jsx(n,{placeholder:"Enter message",...e})}),r.jsx(f,{})]})}),r.jsx(h,{control:w.control,name:"needCallback",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"Need Callback"}),r.jsx(g,{children:r.jsx(n,{type:"checkbox",...e})}),r.jsx(f,{})]})}),r.jsx(h,{control:w.control,name:"status",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"Status"}),q?r.jsx("div",{children:"Loading statuses..."}):r.jsxs(d,{onValueChange:e.onChange,value:e.value,children:[r.jsx(g,{children:r.jsx(o,{children:r.jsx(c,{placeholder:"Select status"})})}),r.jsx(m,{children:I?.data?.map((e=>r.jsx(j,{value:e.status,children:e.status},e._id)))})]}),r.jsx(f,{})]})}),r.jsx(h,{control:w.control,name:"source",render:({field:e})=>r.jsxs(u,{children:[r.jsx(p,{children:"Source"}),L?r.jsx("div",{children:"Loading sources..."}):r.jsxs(d,{onValueChange:e.onChange,value:e.value,children:[r.jsx(g,{children:r.jsx(o,{children:r.jsx(c,{placeholder:"Select source"})})}),r.jsx(m,{children:F?.data?.map((e=>r.jsx(j,{value:e.source,children:e.source},e._id)))})]}),r.jsx(f,{})]})}),r.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:r.jsx(l,{type:"submit",disabled:N,children:N?"Adding...":"Add Inquiry"})})]})})]})}export{I as default};
//# sourceMappingURL=AddInquiry-Cb54EIos.js.map
