{"version":3,"file":"AddInquiry-Cb54EIos.js","sources":["../../src/inquiry/AddInquiry.jsx"],"sourcesContent":["import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue\n} from \"@/components/ui/select\";\nimport {\n    Form,\n    FormControl,\n    FormField,\n    FormItem,\n    FormLabel,\n    FormMessage\n} from \"@/components/ui/form\";\nimport { useAddInquiryMutation, } from \"@/slice/inquiry/inquiry\";\nimport { useGetAllSourcesQuery } from \"@/slice/source/source\";\nimport * as z from 'zod';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { useNavigate } from 'react-router-dom';\nimport { useGetAllStatusesQuery } from '@/slice/status/status';\nimport { BreadcrumbWithCustomSeparator } from '@/breadCrumb/BreadCrumb';\nconst breadcrumbItems = [\n    { label: \"Dashboard\", href: \"/dashboard\" },\n    { label: \"Inquiry Table\", href: \"/inquiry-list\" },\n    { label: \"Inquiry Form\", href: null }, // No `href` indicates the current page\n]\n// Define validation schema\nconst inquirySchema = z.object({\n    firstName: z.string().min(2, { message: \"First name must be at least 2 characters\" }),\n    lastName: z.string().min(2, { message: \"Last name must be at least 2 characters\" }),\n    organisation: z.string().min(2, { message: \"Organisation name must be at least 2 characters\" }),\n    department: z.string().optional(),\n    email: z.string().email({ message: \"Invalid email address\" }),\n    phone: z.string()\n        .regex(/^[0-9]{10}$/, { message: \"Phone number must be 10 digits\" }),\n    address: z.string().optional(),\n    country: z.string().optional(),\n    message: z.string().min(10, { message: \"Message must be at least 10 characters\" }),\n    needCallback: z.boolean().default(false),\n    status: z.string().nonempty({ message: \"Please select a status\" }),\n    source: z.string().nonempty({ message: \"Please select a source\" })\n});\n\nexport default function AddInquiryForm({ onClose }) {\n    const [addInquiry, { isLoading: isAdding }] = useAddInquiryMutation();\n    const { data: statuses, isLoading: statusesLoading } = useGetAllStatusesQuery();\n    const { data: sources, isLoading: sourcesLoading } = useGetAllSourcesQuery();\n    const navigate = useNavigate();\n\n    // Initialize form with zod resolver\n    const form = useForm({\n        resolver: zodResolver(inquirySchema),\n        defaultValues: {\n            firstName: \"\",\n            lastName: \"\",\n            organisation: \"\",\n            department: \"\",\n            email: \"\",\n            phone: \"\",\n            address: \"\",\n            country: \"\",\n            message: \"\",\n            needCallback: false,\n            status: \"\", // Default value if statuses are not fetched yet\n            source: \"\" // Default empty value for source\n        }\n    });\n\n    // Handle form submission\n    const onSubmit = async (data) => {\n        try {\n            const inquiryData = {\n                ...data,\n                date: new Date().toISOString().split('T')[0] // Current date\n            };\n\n            await addInquiry(inquiryData).unwrap();\n\n            // Reset form and navigate\n            form.reset();\n            navigate('/inquiry-list');\n        } catch (error) {\n            // Display error feedback\n            alert(error?.data?.message || \"Failed to add inquiry.\");\n        }\n    };\n\n    return (\n        <>\n            <div className=\"ml-1\">\n                <BreadcrumbWithCustomSeparator items={breadcrumbItems} />\n\n            </div>\n            <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 p-4\">\n                    <h2 className=\"text-xl font-semibold mb-4\">Add New Inquiry</h2>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <FormField\n                            control={form.control}\n                            name=\"firstName\"\n                            render={({ field }) => (\n                                <FormItem>\n                                    <FormLabel>First Name</FormLabel>\n                                    <FormControl>\n                                        <Input placeholder=\"Enter first name\" {...field} />\n                                    </FormControl>\n                                    <FormMessage />\n                                </FormItem>\n                            )}\n                        />\n\n                        <FormField\n                            control={form.control}\n                            name=\"lastName\"\n                            render={({ field }) => (\n                                <FormItem>\n                                    <FormLabel>Last Name</FormLabel>\n                                    <FormControl>\n                                        <Input placeholder=\"Enter last name\" {...field} />\n                                    </FormControl>\n                                    <FormMessage />\n                                </FormItem>\n                            )}\n                        />\n                    </div>\n\n                    <FormField\n                        control={form.control}\n                        name=\"organisation\"\n                        render={({ field }) => (\n                            <FormItem>\n                                <FormLabel>Organisation</FormLabel>\n                                <FormControl>\n                                    <Input placeholder=\"Enter organisation name\" {...field} />\n                                </FormControl>\n                                <FormMessage />\n                            </FormItem>\n                        )}\n                    />\n\n                    <FormField\n                        control={form.control}\n                        name=\"email\"\n                        render={({ field }) => (\n                            <FormItem>\n                                <FormLabel>Email</FormLabel>\n                                <FormControl>\n                                    <Input\n                                        type=\"email\"\n                                        placeholder=\"Enter email\"\n                                        {...field}\n                                    />\n                                </FormControl>\n                                <FormMessage />\n                            </FormItem>\n                        )}\n                    />\n\n                    <FormField\n                        control={form.control}\n                        name=\"phone\"\n                        render={({ field }) => (\n                            <FormItem>\n                                <FormLabel>Phone Number</FormLabel>\n                                <FormControl>\n                                    <Input\n                                        type=\"tel\"\n                                        placeholder=\"Enter 10-digit phone\"\n                                        {...field}\n                                    />\n                                </FormControl>\n                                <FormMessage />\n                            </FormItem>\n                        )}\n                    />\n\n                    <FormField\n                        control={form.control}\n                        name=\"address\"\n                        render={({ field }) => (\n                            <FormItem>\n                                <FormLabel>Address</FormLabel>\n                                <FormControl>\n                                    <Input\n                                        placeholder=\"Enter address\"\n                                        {...field}\n                                    />\n                                </FormControl>\n                                <FormMessage />\n                            </FormItem>\n                        )}\n                    />\n\n                    <FormField\n                        control={form.control}\n                        name=\"country\"\n                        render={({ field }) => (\n                            <FormItem>\n                                <FormLabel>Country</FormLabel>\n                                <FormControl>\n                                    <Input\n                                        placeholder=\"Enter country\"\n                                        {...field}\n                                    />\n                                </FormControl>\n                                <FormMessage />\n                            </FormItem>\n                        )}\n                    />\n\n                    <FormField\n                        control={form.control}\n                        name=\"message\"\n                        render={({ field }) => (\n                            <FormItem>\n                                <FormLabel>Message</FormLabel>\n                                <FormControl>\n                                    <Input\n                                        placeholder=\"Enter message\"\n                                        {...field}\n                                    />\n                                </FormControl>\n                                <FormMessage />\n                            </FormItem>\n                        )}\n                    />\n\n                    <FormField\n                        control={form.control}\n                        name=\"needCallback\"\n                        render={({ field }) => (\n                            <FormItem>\n                                <FormLabel>Need Callback</FormLabel>\n                                <FormControl>\n                                    <Input\n                                        type=\"checkbox\"\n                                        {...field}\n                                    />\n                                </FormControl>\n                                <FormMessage />\n                            </FormItem>\n                        )}\n                    />\n\n                    <FormField\n                        control={form.control}\n                        name=\"status\"\n                        render={({ field }) => (\n                            <FormItem>\n                                <FormLabel>Status</FormLabel>\n                                {statusesLoading ? (\n                                    <div>Loading statuses...</div>\n                                ) : (\n                                    <Select\n                                        onValueChange={field.onChange}\n                                        value={field.value}\n                                    >\n                                        <FormControl>\n                                            <SelectTrigger>\n                                                <SelectValue placeholder=\"Select status\" />\n                                            </SelectTrigger>\n                                        </FormControl>\n                                        <SelectContent>\n                                            {statuses?.data?.map((status) => (\n                                                <SelectItem key={status._id} value={status.status}>\n                                                    {status.status}\n                                                </SelectItem>\n                                            ))}\n                                        </SelectContent>\n                                    </Select>\n                                )}\n                                <FormMessage />\n                            </FormItem>\n                        )}\n                    />\n\n                    <FormField\n                        control={form.control}\n                        name=\"source\"\n                        render={({ field }) => (\n                            <FormItem>\n                                <FormLabel>Source</FormLabel>\n                                {sourcesLoading ? (\n                                    <div>Loading sources...</div>\n                                ) : (\n                                    <Select\n                                        onValueChange={field.onChange}\n                                        value={field.value}\n                                    >\n                                        <FormControl>\n                                            <SelectTrigger>\n                                                <SelectValue placeholder=\"Select source\" />\n                                            </SelectTrigger>\n                                        </FormControl>\n                                        <SelectContent>\n                                            {sources?.data?.map((source) => (\n                                                <SelectItem key={source._id} value={source.source}>\n                                                    {source.source}\n                                                </SelectItem>\n                                            ))}\n                                        </SelectContent>\n                                    </Select>\n                                )}\n                                <FormMessage />\n                            </FormItem>\n                        )}\n                    />\n\n\n                    <div className=\"flex justify-end space-x-2 pt-4\">\n                        <Button\n                            type=\"submit\"\n                            disabled={isAdding}\n                        >\n                            {isAdding ? \"Adding...\" : \"Add Inquiry\"}\n                        </Button>\n                    </div>\n                </form>\n            </Form>\n        </>\n    );\n}\n"],"names":["breadcrumbItems","label","href","inquirySchema","z.object","firstName","z.string","min","message","lastName","organisation","department","optional","email","phone","regex","address","country","needCallback","z.boolean","default","status","nonempty","source","AddInquiryForm","onClose","addInquiry","isLoading","isAdding","useAddInquiryMutation","data","statuses","statusesLoading","useGetAllStatusesQuery","sources","sourcesLoading","useGetAllSourcesQuery","navigate","useNavigate","form","useForm","resolver","zodResolver","defaultValues","jsxs","Fragment","children","jsx","className","BreadcrumbWithCustomSeparator","items","Form","onSubmit","handleSubmit","async","inquiryData","date","Date","toISOString","split","unwrap","reset","error","alert","FormField","control","name","render","field","FormItem","FormLabel","FormControl","Input","placeholder","FormMessage","type","Select","onValueChange","onChange","value","SelectTrigger","SelectValue","SelectContent","map","SelectItem","_id","Button","disabled"],"mappings":"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"}