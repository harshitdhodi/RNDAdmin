{"version":3,"file":"AddInquiry-I1kPd-9U.js","sources":["../../src/inquiry/AddInquiry.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue\r\n} from \"@/components/ui/select\";\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage\r\n} from \"@/components/ui/form\";\r\nimport { useAddInquiryMutation } from \"@/slice/inquiry/inquiry\";\r\nimport { useGetAllSourcesQuery } from \"@/slice/source/source\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useGetAllStatusesQuery } from '@/slice/status/status';\r\nimport { BreadcrumbWithCustomSeparator } from '@/breadCrumb/BreadCrumb';\r\n\r\nconst breadcrumbItems = [\r\n    { label: \"Dashboard\", href: \"/dashboard\" },\r\n    { label: \"Inquiry Table\", href: \"/inquiry-list\" },\r\n    { label: \"Inquiry Form\", href: null },\r\n]\r\n\r\nexport default function AddInquiryForm({ onClose }) {\r\n    const [addInquiry, { isLoading: isAdding }] = useAddInquiryMutation();\r\n    const { data: statuses, isLoading: statusesLoading } = useGetAllStatusesQuery();\r\n    const { data: sources, isLoading: sourcesLoading } = useGetAllSourcesQuery();\r\n    const navigate = useNavigate();\r\n\r\n    const form = useForm({\r\n        defaultValues: {\r\n            firstName: \"\",\r\n            lastName: \"\",\r\n            organisation: \"\",\r\n            department: \"\",\r\n            email: \"\",\r\n            phone: \"\",\r\n            address: \"\",\r\n            country: \"\",\r\n            message: \"\",\r\n            needCallback: false,\r\n            status: \"\",\r\n            source: \"\"\r\n        }\r\n    });\r\n\r\n    // Custom validation function\r\n    const validateForm = (data) => {\r\n        const errors = {};\r\n\r\n        if (!data.firstName || data.firstName.length < 2) {\r\n            errors.firstName = \"First name must be at least 2 characters\";\r\n        }\r\n\r\n        if (!data.lastName || data.lastName.length < 2) {\r\n            errors.lastName = \"Last name must be at least 2 characters\";\r\n        }\r\n\r\n        if (!data.organisation || data.organisation.length < 2) {\r\n            errors.organisation = \"Organisation name must be at least 2 characters\";\r\n        }\r\n\r\n        if (!data.email || !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(data.email)) {\r\n            errors.email = \"Invalid email address\";\r\n        }\r\n\r\n        if (!data.phone || !/^[0-9]{10}$/.test(data.phone)) {\r\n            errors.phone = \"Phone number must be 10 digits\";\r\n        }\r\n\r\n        if (!data.message || data.message.length < 10) {\r\n            errors.message = \"Message must be at least 10 characters\";\r\n        }\r\n\r\n        if (!data.status) {\r\n            errors.status = \"Please select a status\";\r\n        }\r\n\r\n        if (!data.source) {\r\n            errors.source = \"Please select a source\";\r\n        }\r\n\r\n        return errors;\r\n    };\r\n\r\n    const onSubmit = async (data) => {\r\n        const validationErrors = validateForm(data);\r\n        \r\n        if (Object.keys(validationErrors).length > 0) {\r\n            Object.keys(validationErrors).forEach(field => {\r\n                form.setError(field, { type: 'manual', message: validationErrors[field] });\r\n            });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const inquiryData = {\r\n                ...data,\r\n                date: new Date().toISOString().split('T')[0]\r\n            };\r\n\r\n            await addInquiry(inquiryData).unwrap();\r\n            form.reset();\r\n            navigate('/inquiry-list');\r\n        } catch (error) {\r\n            alert(error?.data?.message || \"Failed to add inquiry.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"ml-1\">\r\n                <BreadcrumbWithCustomSeparator items={breadcrumbItems} />\r\n            </div>\r\n            <Form {...form}>\r\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 p-4\">\r\n                    <h2 className=\"text-xl font-semibold mb-4\">Add New Inquiry</h2>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"firstName\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>First Name</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"Enter first name\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"lastName\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Last Name</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"Enter last name\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n                    </div>\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"organisation\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Organisation</FormLabel>\r\n                                <FormControl>\r\n                                    <Input placeholder=\"Enter organisation name\" {...field} />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"email\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Email</FormLabel>\r\n                                <FormControl>\r\n                                    <Input\r\n                                        type=\"email\"\r\n                                        placeholder=\"Enter email\"\r\n                                        {...field}\r\n                                    />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"phone\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Phone Number</FormLabel>\r\n                                <FormControl>\r\n                                    <Input\r\n                                        type=\"tel\"\r\n                                        placeholder=\"Enter 10-digit phone\"\r\n                                        {...field}\r\n                                    />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"address\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Address</FormLabel>\r\n                                <FormControl>\r\n                                    <Input\r\n                                        placeholder=\"Enter address\"\r\n                                        {...field}\r\n                                    />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"country\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Country</FormLabel>\r\n                                <FormControl>\r\n                                    <Input\r\n                                        placeholder=\"Enter country\"\r\n                                        {...field}\r\n                                    />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"message\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Message</FormLabel>\r\n                                <FormControl>\r\n                                    <Input\r\n                                        placeholder=\"Enter message\"\r\n                                        {...field}\r\n                                    />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"needCallback\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Need Callback</FormLabel>\r\n                                <FormControl>\r\n                                    <Input\r\n                                        type=\"checkbox\"\r\n                                        checked={field.value}\r\n                                        onChange={(e) => field.onChange(e.target.checked)}\r\n                                    />\r\n                                </FormControl>\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"status\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Status</FormLabel>\r\n                                {statusesLoading ? (\r\n                                    <div>Loading statuses...</div>\r\n                                ) : (\r\n                                    <Select\r\n                                        onValueChange={field.onChange}\r\n                                        value={field.value}\r\n                                    >\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select status\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            {statuses?.data?.map((status) => (\r\n                                                <SelectItem key={status._id} value={status.status}>\r\n                                                    {status.status}\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <FormField\r\n                        control={form.control}\r\n                        name=\"source\"\r\n                        render={({ field }) => (\r\n                            <FormItem>\r\n                                <FormLabel>Source</FormLabel>\r\n                                {sourcesLoading ? (\r\n                                    <div>Loading sources...</div>\r\n                                ) : (\r\n                                    <Select\r\n                                        onValueChange={field.onChange}\r\n                                        value={field.value}\r\n                                    >\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select source\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            {sources?.data?.map((source) => (\r\n                                                <SelectItem key={source._id} value={source.source}>\r\n                                                    {source.source}\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                                <FormMessage />\r\n                            </FormItem>\r\n                        )}\r\n                    />\r\n\r\n                    <div className=\"flex justify-end space-x-2 pt-4\">\r\n                        <Button\r\n                            type=\"submit\"\r\n                            disabled={isAdding}\r\n                        >\r\n                            {isAdding ? \"Adding...\" : \"Add Inquiry\"}\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </Form>\r\n        </>\r\n    );\r\n}"],"names":["breadcrumbItems","label","href","AddInquiryForm","onClose","addInquiry","isLoading","isAdding","useAddInquiryMutation","data","statuses","statusesLoading","useGetAllStatusesQuery","sources","sourcesLoading","useGetAllSourcesQuery","navigate","useNavigate","form","useForm","defaultValues","firstName","lastName","organisation","department","email","phone","address","country","message","needCallback","status","source","jsxs","Fragment","children","jsx","className","BreadcrumbWithCustomSeparator","items","Form","onSubmit","handleSubmit","async","validationErrors","errors","length","test","validateForm","Object","keys","forEach","field","setError","type","inquiryData","date","Date","toISOString","split","unwrap","reset","error","alert","FormField","control","name","render","FormItem","FormLabel","FormControl","Input","placeholder","FormMessage","checked","value","onChange","e","target","Select","onValueChange","SelectTrigger","SelectValue","SelectContent","map","SelectItem","_id","Button","disabled"],"mappings":"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"}