{"version":3,"file":"AddTemplate-CeXEHhtz.js","sources":["../../src/email/template/AddTemplate.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useAddTemplateMutation } from \"@/slice/template/emailTemplate\";\r\nimport ReactQuill from \"react-quill\"; // Import ReactQuill\r\nimport \"react-quill/dist/quill.snow.css\"; // Import Quill styles\r\nimport { useGetEmailCategoriesQuery } from \"@/slice/emailCategory/emailCategory\";\r\n\r\nconst AddTemplateForm = () => {\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    setValue, // To set the value of the Quill editor\r\n    formState: { errors },\r\n  } = useForm();\r\n\r\n  const [addTemplate, { isLoading }] = useAddTemplateMutation();\r\n\r\n  const { data: categories, isLoading: categoriesLoading } = useGetEmailCategoriesQuery();\r\n\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      await addTemplate(data).unwrap();\r\n      alert(\"Template added successfully!\");\r\n      reset(); // Clear the form\r\n    } catch (error) {\r\n      alert(\"Failed to add template: \" + error.message);\r\n    }\r\n  };\r\n\r\n  // Handle changes in the Quill editor\r\n  const handleEditorChange = (value) => {\r\n    setValue(\"body\", value); // Set the Quill editor value into the form state\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 mx-auto\">\r\n      <h1 className=\"text-xl font-bold mb-4\">Add New Template</h1>\r\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n        {/* Category Field */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-1\" htmlFor=\"category\">\r\n            Category\r\n          </label>\r\n          <select\r\n            id=\"category\"\r\n            {...register(\"category\", { required: \"Category is required\" })}\r\n            className=\"w-full border border-gray-300 rounded px-3 py-2\"\r\n          >\r\n            <option value=\"\">Select a category</option>\r\n            {categories?.map((category) => (\r\n              <option key={category._id} value={category._id}>\r\n                {category.emailCategory}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          {errors.category && (\r\n            <p className=\"text-red-500 text-sm\">{errors.category.message}</p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Name Field */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-1\" htmlFor=\"name\">\r\n            Name\r\n          </label>\r\n          <input\r\n            id=\"name\"\r\n            {...register(\"name\", { required: \"Name is required\" })}\r\n            className=\"w-full border border-gray-300 rounded px-3 py-2\"\r\n            placeholder=\"Enter template name\"\r\n          />\r\n          {errors.name && <p className=\"text-red-500 text-sm\">{errors.name.message}</p>}\r\n        </div>\r\n\r\n        {/* Subject Field */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-1\" htmlFor=\"subject\">\r\n            Subject\r\n          </label>\r\n          <input\r\n            id=\"subject\"\r\n            {...register(\"subject\", { required: \"Subject is required\" })}\r\n            className=\"w-full border border-gray-300 rounded px-3 py-2\"\r\n            placeholder=\"Enter template subject\"\r\n          />\r\n          {errors.subject && <p className=\"text-red-500 text-sm\">{errors.subject.message}</p>}\r\n        </div>\r\n\r\n        {/* Body Field (ReactQuill) */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-1\" htmlFor=\"body\">\r\n            Body\r\n          </label>\r\n          <ReactQuill\r\n            value=\"\" // Set the value dynamically\r\n            onChange={handleEditorChange} // Update the form state on change\r\n            placeholder=\"Enter template body\"\r\n            className=\"w-full border border-gray-300 rounded px-3 py-2\"\r\n          />\r\n          {errors.body && <p className=\"text-red-500 text-sm\">{errors.body.message}</p>}\r\n        </div>\r\n\r\n        {/* Submit Button */}\r\n        <button\r\n          type=\"submit\"\r\n          className={`w-1/4 bg-blue-500 text-white px-4 py-2 rounded ${isLoading ? \"opacity-50\" : \"\"}`}\r\n          disabled={isLoading}\r\n        >\r\n          {isLoading ? \"Adding...\" : \"Add Template\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddTemplateForm;\r\n"],"names":["AddTemplateForm","register","handleSubmit","reset","setValue","formState","errors","useForm","addTemplate","isLoading","useAddTemplateMutation","data","categories","categoriesLoading","useGetEmailCategoriesQuery","jsxs","className","children","jsx","onSubmit","async","unwrap","alert","error","message","htmlFor","id","required","value","map","category","_id","emailCategory","placeholder","name","subject","ReactQuill","onChange","body","type","disabled"],"mappings":"oTAOA,MAAMA,EAAkB,KAChB,MAAAC,SACJA,EAAAC,aACAA,EAAAC,MACAA,EAAAC,SACAA,EACAC,WAAWC,OAAEA,IACXC,KAEGC,GAAaC,UAAEA,IAAeC,KAE7BC,KAAMC,EAAYH,UAAWI,GAAsBC,IAkBzD,OAAAC,EAAAA,KAAC,MAAI,CAAAC,UAAU,cACbC,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,yBAAyBC,SAAgB,4BACtD,OAAK,CAAAE,SAAUjB,GAlBHkB,MAAOT,IAClB,UACIH,EAAYG,GAAMU,SACxBC,MAAM,gCACAnB,UACCoB,GACDD,MAAA,2BAA6BC,EAAMC,QAAO,KAYRR,UAAU,YAEhDC,SAAA,CAAAF,OAAC,MACC,CAAAE,SAAA,CAAAC,MAAC,QAAM,CAAAF,UAAU,iCAAiCS,QAAQ,WAAWR,SAErE,aACAF,EAAAA,KAAC,SAAA,CACCW,GAAG,cACCzB,EAAS,WAAY,CAAE0B,SAAU,yBACrCX,UAAU,kDAEVC,SAAA,CAACC,EAAAA,IAAA,SAAA,CAAOU,MAAM,GAAGX,SAAiB,sBACjCL,GAAYiB,KAAKC,GACfZ,EAAAA,IAAA,SAAA,CAA0BU,MAAOE,EAASC,IACxCd,SAAAa,EAASE,eADCF,EAASC,UAKzBzB,EAAOwB,UACLZ,MAAA,IAAA,CAAEF,UAAU,uBAAwBC,SAAAX,EAAOwB,SAASN,oBAKxD,MACC,CAAAP,SAAA,CAAAC,MAAC,QAAM,CAAAF,UAAU,iCAAiCS,QAAQ,OAAOR,SAEjE,SACAC,EAAAA,IAAC,QAAA,CACCQ,GAAG,UACCzB,EAAS,OAAQ,CAAE0B,SAAU,qBACjCX,UAAU,kDACViB,YAAY,wBAEb3B,EAAO4B,MAAShB,MAAA,IAAA,CAAEF,UAAU,uBAAwBC,SAAAX,EAAO4B,KAAKV,oBAIlE,MACC,CAAAP,SAAA,CAAAC,MAAC,QAAM,CAAAF,UAAU,iCAAiCS,QAAQ,UAAUR,SAEpE,YACAC,EAAAA,IAAC,QAAA,CACCQ,GAAG,aACCzB,EAAS,UAAW,CAAE0B,SAAU,wBACpCX,UAAU,kDACViB,YAAY,2BAEb3B,EAAO6B,SAAYjB,MAAA,IAAA,CAAEF,UAAU,uBAAwBC,SAAAX,EAAO6B,QAAQX,oBAIxE,MACC,CAAAP,SAAA,CAAAC,MAAC,QAAM,CAAAF,UAAU,iCAAiCS,QAAQ,OAAOR,SAEjE,SACAC,EAAAA,IAACkB,EAAA,CACCR,MAAM,GACNS,SAjEkBT,IAC1BxB,EAAS,OAAQwB,EAAK,EAiEdK,YAAY,sBACZjB,UAAU,oDAEXV,EAAOgC,MAASpB,MAAA,IAAA,CAAEF,UAAU,uBAAwBC,SAAAX,EAAOgC,KAAKd,aAInEN,EAAAA,IAAC,SAAA,CACCqB,KAAK,SACLvB,UAAW,mDAAkDP,EAAY,aAAe,IACxF+B,SAAU/B,EAETQ,WAAY,YAAc,sBAGjC"}