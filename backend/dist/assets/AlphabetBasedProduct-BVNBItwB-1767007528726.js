import{j as e,aL as S,r as x,f as w,B as P,i as T}from"./index-DgWUCWkU-1767007528726.js";import{B as k}from"./BreadCrumb-JyyCPHEn-1767007528726.js";import{C as _}from"./checkbox-Q402cyo9-1767007528726.js";import{C as L,a as B}from"./card-BDAjsm2D-1767007528726.js";import{T as I,a as A,b as N,c as u,d as E,e as j}from"./table-C9UvEusF-1767007528726.js";import{S as R,a as $,b as F,c as D,d as p}from"./select-Cp6cfOEw-1767007528726.js";import"./index-BQ48bS1n-1767007528726.js";import"./check-D5Xto1eh-1767007528726.js";import"./index-qMYJrHgw-1767007528726.js";function G({categorySlug:c,chemicals:r,selectedGrades:t,setSelectedGrades:l}){const o=(a,n)=>{l(a?i=>[...i,n]:i=>i.filter(m=>m!==n))},h=a=>{l(n=>n.filter(i=>i!==a))};return e.jsx(L,{className:"md:col-span-1 bg-[#dee8ff] h-fit rounded-none p-3",children:e.jsxs(B,{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-normal mb-4",children:"Your Selections"}),t.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Grades:"}),e.jsx("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:t.map(a=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:a}),e.jsx("button",{onClick:()=>h(a),className:"text-gray-600 hover:text-red-600",children:e.jsx(S,{size:16})})]},a))})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Grades"}),e.jsx("div",{className:"space-y-2",children:r.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{id:a._id,checked:t.includes(a.grade),onCheckedChange:n=>o(n,a.grade)}),e.jsx("label",{htmlFor:a._id,className:"text-sm",children:a.grade})]},a._id))})]})})]})})}const M=({chemicals:c})=>{const[r,t]=x.useState(1),l=10,o=w();if(!c||c.length===0)return e.jsx("div",{className:"p-4 text-center",children:"No products found."});const h=c.length,a=Math.ceil(h/l),n=c.slice((r-1)*l,r*l),i=s=>{t(s)},m=s=>{const d=s.replace(/\s+/g,"-").toLowerCase();console.log(`Redirecting to: /${d}`),o(`/${d}`)};return e.jsxs("div",{children:[e.jsxs(I,{children:[e.jsx(A,{children:e.jsxs(N,{className:"bg-gray-100",children:[e.jsx(u,{children:"Product Code"}),e.jsx(u,{children:"Product Name"}),e.jsx(u,{children:"CAS"}),e.jsx(u,{children:"TDS"}),e.jsx(u,{children:"MSDS"})]})}),e.jsx(E,{children:n.map(s=>e.jsxs(N,{children:[e.jsx(j,{children:s.auto_p_code}),e.jsx(j,{children:e.jsx("button",{className:"text-blue-900 hover:no-underline",onClick:()=>m(s.name),children:s.name})}),e.jsx(j,{children:s.cas_number}),e.jsx(j,{children:"Specs"}),e.jsx(j,{children:"MSDS"})]},s.auto_p_code))})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("nav",{className:"flex space-x-1","aria-label":"Pagination",children:Array.from({length:a},(s,d)=>d+1).map(s=>e.jsx(P,{variant:s===r?"outline":"default",size:"sm",className:`min-w-[40px] ${s===r?"bg-blue-600 text-white hover:bg-blue-700":"hover:bg-blue-50"}`,onClick:()=>i(s),children:s},s))})})]})};function z({letter:c,totalItems:r,itemsPerPage:t,setItemsPerPage:l}){return e.jsx("div",{className:"w-full mb-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:['Showing Products for "',c,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground uppercase tracking-wide",children:"Fine Chemicals & Laboratory Reagents for Research & Industries"}),e.jsxs("div",{className:"bg-blue-50 flex items-center px-3 py-1 justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["1 to ",t," of ",r," item(s) displayed"]}),e.jsxs(R,{value:t.toString(),onValueChange:o=>l(Number(o)),children:[e.jsx($,{className:"w-[120px]",children:e.jsx(F,{placeholder:"Show per page"})}),e.jsxs(D,{children:[e.jsx(p,{value:"10",children:"10 per page"}),e.jsx(p,{value:"25",children:"25 per page"}),e.jsx(p,{value:"50",children:"50 per page"}),e.jsx(p,{value:"100",children:"100 per page"})]})]})]})]})})}function U(){const c=T(),{selectedLetter:r,chemicals:t}=c.state||{};console.log({selectedLetter:r,chemicals:t});const[l,o]=x.useState([]),[h,a]=x.useState(50),[n,i]=x.useState([]),[m,s]=x.useState(!0),[d,v]=x.useState(null);x.useEffect(()=>{t&&r&&(async()=>{try{s(!0);const g=await fetch(`/api/chemical/getChemicalByCategoryAndAlphabet?categoryslug=${t}&alphabet=${r}`);if(!g.ok)throw new Error("Failed to fetch chemicals");const y=await g.json();i(y)}catch(g){v(g.message)}finally{s(!1)}})()},[t,r]);const f=l.length?n.filter(b=>l.includes(b.grade)):n,C=f.length;return m?e.jsx("div",{children:"Loading..."}):d?e.jsxs("div",{children:["Error loading chemicals: ",d]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-7xl mx-auto mb-10 ",children:[e.jsx(k,{chemicals:t,categorySlug:t,selectedLetter:r}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsx(G,{categorySlug:t,chemicals:n,selectedGrades:l,setSelectedGrades:o}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(z,{letter:r,totalItems:C,itemsPerPage:h,setItemsPerPage:a}),e.jsx(M,{selectedLetter:r,categorySlug:t,chemicals:f})]})]})]})})}export{U as default};
