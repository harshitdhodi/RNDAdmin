import{j as t,b as u}from"./main-CuiBl65R-1744447280152.js";import{c as a}from"./vendor-C9iLKeEQ-1744447280152.js";import{J as j}from"./jodit-react-CS_-vL61-1744447280152.js";import{F as d}from"./index-yBgiZpA_-1744447280152.js";import{B as v}from"./index-BASe7pQd-1744447280152.js";import{s as c}from"./index-DiO0HVuh-1744447280152.js";import"./toArray-Bbgf03cS-1744447280152.js";import"./CheckCircleFilled-BXipySGT-1744447280152.js";import"./ExclamationCircleFilled-CxUyat0W-1744447280152.js";import"./InfoCircleFilled-D0gqUfmi-1744447280152.js";const P=()=>{const[s]=d.useForm(),[n,i]=a.useState(""),[C,f]=a.useState(""),[m,y]=a.useState(null),h=a.useRef(null),B={uploader:{insertImageAsBase64URI:!0},toolbarAdaptive:!1,toolbarSticky:!1,buttons:["bold","italic","underline","ul","ol","fontsize","paragraph","link","image","video","table","align","undo","redo","font","fontsize","brush","foreColor","backColor"],style:{color:"black"}},b=async()=>{try{const e=await u.get("/api/blogCard/getCard"),o=e.data[0];console.log(e),y(o._id),i(o.blogCard);const l=new DOMParser().parseFromString(o.blogCard,"text/html"),r=l.getElementsByTagName("*");for(let p of r)(p.style.color==="white"||p.style.color==="#ffffff")&&(p.style.color="black");f(l.body.innerHTML),s.setFieldsValue({blogCard:o.blogCard})}catch(e){console.error("Failed to fetch blog card:",e),c.error("Failed to fetch blog card.")}};a.useEffect(()=>{b()},[s]);const F=e=>{i(e);const g=new DOMParser().parseFromString(e,"text/html"),l=g.getElementsByTagName("*");for(let r of l)(r.style.color==="white"||r.style.color==="#ffffff")&&(r.style.color="black");f(g.body.innerHTML)},x=async e=>{try{m?(await u.put(`/api/blogCard/editCard/${m}`,{blogCard:n}),c.success("Blog card updated successfully!")):(await u.post("/api/blogCard/addCard",{blogCard:n}),c.success("Blog card added successfully!")),s.resetFields(),i(""),f(""),b()}catch(o){console.error("Failed to save blog card:",o),c.error("Failed to save blog card.")}};return t.jsxs(d,{form:s,layout:"vertical",onFinish:x,name:"blog_card_form",children:[t.jsx(d.Item,{name:"blogCard",label:"Blog Card Content",rules:[{required:!0,message:"Please input the blog card content!"}],children:t.jsx(j,{ref:h,value:C||n,config:B,onChange:F})}),t.jsx(d.Item,{children:t.jsx(v,{type:"primary",htmlType:"submit",children:m?"Update Blog Card":"Add Blog Card"})})]})};export{P as default};
