{"version":3,"file":"BlogCard-CIdWgDao.js","sources":["../../src/websiteBackend/blogCard/BlogCard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Form } from '@/components/ui/form';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useToast } from 'react-toastify';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardHeader, CardContent } from '@/components/ui/card';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\nconst BlogCardForm = () => {\r\n  const [form] = Form.useForm();\r\n  const [blogCard, setBlogCard] = useState('');\r\n  const [displayContent, setDisplayContent] = useState('');\r\n  const [blogCardId, setBlogCardId] = useState(null);\r\n;\r\n\r\n  const fetchBlogCard = async () => {\r\n    try {\r\n      const response = await axios.get('/api/blogCard/getCard');\r\n      const blogCardData = response.data[0];\r\n      setBlogCardId(blogCardData._id);\r\n      setBlogCard(blogCardData.blogCard);\r\n\r\n      const parser = new DOMParser();\r\n      const doc = parser.parseFromString(blogCardData.blogCard, 'text/html');\r\n      const elements = doc.getElementsByTagName('*');\r\n      for (let element of elements) {\r\n        if (element.style.color === 'white' || element.style.color === '#ffffff') {\r\n          element.style.color = 'black';\r\n        }\r\n      }\r\n      setDisplayContent(doc.body.innerHTML);\r\n      form.setFieldsValue({ blogCard: blogCardData.blogCard });\r\n    } catch (error) {\r\n      toast({ title: 'Error', description: 'Failed to fetch blog card.', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBlogCard();\r\n  }, [form]);\r\n\r\n  const handleEditorChange = (newContent) => {\r\n    setBlogCard(newContent);\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(newContent, 'text/html');\r\n    const elements = doc.getElementsByTagName('*');\r\n    for (let element of elements) {\r\n      if (element.style.color === 'white' || element.style.color === '#ffffff') {\r\n        element.style.color = 'black';\r\n      }\r\n    }\r\n    setDisplayContent(doc.body.innerHTML);\r\n  };\r\n\r\n  const onFinish = async () => {\r\n    try {\r\n      if (blogCardId) {\r\n        await axios.put(`/api/blogCard/editCard/${blogCardId}`, { blogCard });\r\n        toast({ title: 'Success', description: 'Blog card updated successfully!' });\r\n      } else {\r\n        await axios.post('/api/blogCard/addCard', { blogCard });\r\n        toast({ title: 'Success', description: 'Blog card added successfully!' });\r\n      }\r\n      form.resetFields();\r\n      setBlogCard('');\r\n      setDisplayContent('');\r\n      fetchBlogCard();\r\n    } catch (error) {\r\n      toast({ title: 'Error', description: 'Failed to save blog card.', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"p-6 max-w-2xl mx-auto\">\r\n      <CardHeader>\r\n        <h2 className=\"text-xl font-bold\">Blog Card Form</h2>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <Form form={form} layout=\"vertical\" onFinish={onFinish} name=\"blog_card_form\">\r\n          <div className=\"mb-4\">\r\n            <Label htmlFor=\"blogCard\">Blog Card Content</Label>\r\n            <ReactQuill\r\n              id=\"blogCard\"\r\n              value={displayContent || blogCard}\r\n              onChange={handleEditorChange}\r\n              modules={{\r\n                toolbar: [\r\n                  [{ header: '1' }, { header: '2' }, { font: [] }],\r\n                  [{ list: 'ordered' }, { list: 'bullet' }],\r\n                  ['bold', 'italic', 'underline', 'blockquote'],\r\n                  [{ align: [] }],\r\n                  ['link', 'image', 'video'],\r\n                  ['clean']\r\n                ]\r\n              }}\r\n              formats={[\r\n                'header', 'font', 'list', 'bold', 'italic', 'underline',\r\n                'blockquote', 'align', 'link', 'image', 'video'\r\n              ]}\r\n            />\r\n          </div>\r\n          <Button type=\"submit\" className=\"w-full\">\r\n            {blogCardId ? 'Update Blog Card' : 'Add Blog Card'}\r\n          </Button>\r\n        </Form>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default BlogCardForm;"],"names":["BlogCardForm","form","Form","useForm","blogCard","setBlogCard","useState","displayContent","setDisplayContent","blogCardId","setBlogCardId","fetchBlogCard","async","blogCardData","axios","get","data","_id","doc","DOMParser","parseFromString","elements","getElementsByTagName","element","style","color","body","innerHTML","setFieldsValue","error","toast","title","description","variant","useEffect","jsxs","Card","className","children","jsx","CardHeader","CardContent","layout","onFinish","put","post","resetFields","name","Label","htmlFor","ReactQuill","id","value","onChange","newContent","modules","toolbar","header","font","list","align","formats","Button","type"],"mappings":"8bAWA,MAAMA,EAAe,KACnB,MAAOC,GAAQC,EAAKC,WACbC,EAAUC,GAAeC,EAAAA,SAAS,KAClCC,EAAgBC,GAAqBF,EAAAA,SAAS,KAC9CG,EAAYC,GAAiBJ,EAAAA,SAAS,MAGvCK,EAAgBC,UAChB,IACF,MACMC,SADiBC,EAAMC,IAAI,0BACHC,KAAK,GACnCN,EAAcG,EAAaI,KAC3BZ,EAAYQ,EAAaT,UAEnB,MACAc,GADS,IAAIC,WACAC,gBAAgBP,EAAaT,SAAU,aACpDiB,EAAWH,EAAII,qBAAqB,KAC1C,IAAA,IAASC,KAAWF,EACU,UAAxBE,EAAQC,MAAMC,OAA6C,YAAxBF,EAAQC,MAAMC,QACnDF,EAAQC,MAAMC,MAAQ,SAGRjB,EAAAU,EAAIQ,KAAKC,WAC3B1B,EAAK2B,eAAe,CAAExB,SAAUS,EAAaT,iBACtCyB,GACPC,MAAM,CAAEC,MAAO,QAASC,YAAa,6BAA8BC,QAAS,eAAe,GAI/FC,EAAAA,WAAU,KACMvB,GAAA,GACb,CAACV,IAkCF,OAAAkC,EAAAA,KAACC,EAAK,CAAAC,UAAU,wBACdC,SAAA,CAAAC,EAAAA,IAACC,GACCF,SAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,oBAAoBC,8BAEpCC,EAAAA,IAACE,GACCH,SAACH,EAAAA,KAAAjC,EAAA,CAAKD,OAAYyC,OAAO,WAAWC,SAxBzB/B,UACX,IACEH,SACIK,EAAM8B,IAAI,0BAA0BnC,IAAc,CAAEL,aAC1D0B,MAAM,CAAEC,MAAO,UAAWC,YAAa,4CAEjClB,EAAM+B,KAAK,wBAAyB,CAAEzC,aAC5C0B,MAAM,CAAEC,MAAO,UAAWC,YAAa,mCAEzC/B,EAAK6C,cACLzC,EAAY,IACZG,EAAkB,IACJG,UACPkB,GACPC,MAAM,CAAEC,MAAO,QAASC,YAAa,4BAA6BC,QAAS,eAAe,GAUhCc,KAAK,iBAC3DT,SAAA,CAACH,EAAAA,KAAA,MAAA,CAAIE,UAAU,OACbC,SAAA,CAACC,EAAAA,IAAAS,EAAA,CAAMC,QAAQ,WAAWX,SAAiB,sBAC3CC,EAAAA,IAACW,EAAA,CACCC,GAAG,WACHC,MAAO7C,GAAkBH,EACzBiD,SA3CgBC,IAC1BjD,EAAYiD,GACN,MACApC,GADS,IAAIC,WACAC,gBAAgBkC,EAAY,aACzCjC,EAAWH,EAAII,qBAAqB,KAC1C,IAAA,IAASC,KAAWF,EACU,UAAxBE,EAAQC,MAAMC,OAA6C,YAAxBF,EAAQC,MAAMC,QACnDF,EAAQC,MAAMC,MAAQ,SAGRjB,EAAAU,EAAIQ,KAAKC,UAAS,EAkC1B4B,QAAS,CACPC,QAAS,CACP,CAAC,CAAEC,OAAQ,KAAO,CAAEA,OAAQ,KAAO,CAAEC,KAAM,KAC3C,CAAC,CAAEC,KAAM,WAAa,CAAEA,KAAM,WAC9B,CAAC,OAAQ,SAAU,YAAa,cAChC,CAAC,CAAEC,MAAO,KACV,CAAC,OAAQ,QAAS,SAClB,CAAC,WAGLC,QAAS,CACP,SAAU,OAAQ,OAAQ,OAAQ,SAAU,YAC5C,aAAc,QAAS,OAAQ,QAAS,cAI9CtB,EAAAA,IAACuB,GAAOC,KAAK,SAAS1B,UAAU,SAC7BC,SAAA7B,EAAa,mBAAqB,yBAI3C"}