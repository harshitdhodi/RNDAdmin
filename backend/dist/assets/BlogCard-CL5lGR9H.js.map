{"version":3,"file":"BlogCard-CL5lGR9H.js","sources":["../../src/websiteBackend/blogCard/BlogCard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardHeader, CardContent } from '@/components/ui/card';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\nconst BlogCardForm = () => {\r\n  const { register, handleSubmit, setValue, reset } = useForm();\r\n  const [blogCardId, setBlogCardId] = useState(null);\r\n  const [displayContent, setDisplayContent] = useState('');\r\n  const [blogCard, setBlogCard] = useState('');\r\n\r\n  const fetchBlogCard = async () => {\r\n    try {\r\n      const response = await axios.get('/api/blogCard/getCard');\r\n      const blogCardData = response.data[0];\r\n      setBlogCardId(blogCardData._id);\r\n      setBlogCard(blogCardData.blogCard);\r\n\r\n      const parser = new DOMParser();\r\n      const doc = parser.parseFromString(blogCardData.blogCard, 'text/html');\r\n      const elements = doc.getElementsByTagName('*');\r\n      for (let element of elements) {\r\n        if (element.style.color === 'white' || element.style.color === '#ffffff') {\r\n          element.style.color = 'black';\r\n        }\r\n      }\r\n\r\n      setDisplayContent(doc.body.innerHTML);\r\n      setValue('blogCard', blogCardData.blogCard); // set form value\r\n    } catch (error) {\r\n      console.error('Failed to fetch blog card:', error);\r\n      // You can use toast here\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBlogCard();\r\n  }, []);\r\n\r\n  const handleEditorChange = (content) => {\r\n    setBlogCard(content);\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(content, 'text/html');\r\n    const elements = doc.getElementsByTagName('*');\r\n    for (let element of elements) {\r\n      if (element.style.color === 'white' || element.style.color === '#ffffff') {\r\n        element.style.color = 'black';\r\n      }\r\n    }\r\n    setDisplayContent(doc.body.innerHTML);\r\n    setValue('blogCard', content); // update react-hook-form state\r\n  };\r\n\r\n  const onSubmit = async () => {\r\n    try {\r\n      if (blogCardId) {\r\n        await axios.put(`/api/blogCard/editCard/${blogCardId}`, { blogCard });\r\n        toast({ title: 'Success', description: 'Blog card updated successfully!' });\r\n      } else {\r\n        await axios.post('/api/blogCard/addCard', { blogCard });\r\n        toast({ title: 'Success', description: 'Blog card added successfully!' });\r\n      }\r\n\r\n      reset();\r\n      setBlogCard('');\r\n      setDisplayContent('');\r\n      fetchBlogCard();\r\n    } catch (error) {\r\n      toast({ title: 'Error', description: 'Failed to save blog card.', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"p-6 max-w-2xl mx-auto\">\r\n      <CardHeader>\r\n        <h2 className=\"text-xl font-bold\">Blog Card Form</h2>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n          <div>\r\n            <Label htmlFor=\"blogCard\">Blog Card Content</Label>\r\n            <ReactQuill\r\n              id=\"blogCard\"\r\n              value={displayContent || blogCard}\r\n              onChange={handleEditorChange}\r\n              modules={{\r\n                toolbar: [\r\n                  [{ header: '1' }, { header: '2' }, { font: [] }],\r\n                  [{ list: 'ordered' }, { list: 'bullet' }],\r\n                  ['bold', 'italic', 'underline', 'blockquote'],\r\n                  [{ align: [] }],\r\n                  ['link', 'image', 'video'],\r\n                  ['clean']\r\n                ]\r\n              }}\r\n              formats={[\r\n                'header', 'font', 'list', 'bold', 'italic', 'underline',\r\n                'blockquote', 'align', 'link', 'image', 'video'\r\n              ]}\r\n            />\r\n            {/* Register hidden field so form state includes it */}\r\n            <input type=\"hidden\" {...register('blogCard')} />\r\n          </div>\r\n          <Button type=\"submit\" className=\"w-full\">\r\n            {blogCardId ? 'Update Blog Card' : 'Add Blog Card'}\r\n          </Button>\r\n        </form>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default BlogCardForm;\r\n"],"names":["BlogCardForm","register","handleSubmit","setValue","reset","useForm","blogCardId","setBlogCardId","useState","displayContent","setDisplayContent","blogCard","setBlogCard","fetchBlogCard","async","blogCardData","axios","get","data","_id","doc","DOMParser","parseFromString","elements","getElementsByTagName","element","style","color","body","innerHTML","error","useEffect","jsxs","Card","className","children","jsx","CardHeader","CardContent","onSubmit","put","toast","title","description","post","variant","Label","htmlFor","ReactQuill","id","value","onChange","content","modules","toolbar","header","font","list","align","formats","type","Button"],"mappings":"0XASA,MAAMA,EAAe,KACnB,MAAMC,SAAEA,EAAUC,aAAAA,EAAAC,SAAcA,EAAUC,MAAAA,GAAUC,KAC7CC,EAAYC,GAAiBC,EAAAA,SAAS,OACtCC,EAAgBC,GAAqBF,EAAAA,SAAS,KAC9CG,EAAUC,GAAeJ,EAAAA,SAAS,IAEnCK,EAAgBC,UAChB,IACF,MACMC,SADiBC,EAAMC,IAAI,0BACHC,KAAK,GACnCX,EAAcQ,EAAaI,KAC3BP,EAAYG,EAAaJ,UAEnB,MACAS,GADS,IAAIC,WACAC,gBAAgBP,EAAaJ,SAAU,aACpDY,EAAWH,EAAII,qBAAqB,KAC1C,IAAA,IAASC,KAAWF,EACU,UAAxBE,EAAQC,MAAMC,OAA6C,YAAxBF,EAAQC,MAAMC,QACnDF,EAAQC,MAAMC,MAAQ,SAIRjB,EAAAU,EAAIQ,KAAKC,WAClB1B,EAAA,WAAYY,EAAaJ,gBAC3BmB,GAC0C,GAKrDC,EAAAA,WAAU,KACMlB,GAAA,GACb,IAoCD,OAAAmB,EAAAA,KAACC,EAAK,CAAAC,UAAU,wBACdC,SAAA,CAAAC,EAAAA,IAACC,GACCF,SAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,oBAAoBC,8BAEpCC,EAAAA,IAACE,GACCH,SAACH,EAAAA,KAAA,OAAA,CAAKO,SAAUrC,GAzBLY,UACX,IACER,SACIU,EAAMwB,IAAI,0BAA0BlC,IAAc,CAAEK,aAC1D8B,MAAM,CAAEC,MAAO,UAAWC,YAAa,4CAEjC3B,EAAM4B,KAAK,wBAAyB,CAAEjC,aAC5C8B,MAAM,CAAEC,MAAO,UAAWC,YAAa,mCAGnCvC,IACNQ,EAAY,IACZF,EAAkB,IACJG,UACPiB,GACPW,MAAM,CAAEC,MAAO,QAASC,YAAa,4BAA6BE,QAAS,eAAe,KAUhDX,UAAU,YAChDC,SAAA,CAAAH,OAAC,MACC,CAAAG,SAAA,CAACC,EAAAA,IAAAU,EAAA,CAAMC,QAAQ,WAAWZ,SAAiB,sBAC3CC,EAAAA,IAACY,EAAA,CACCC,GAAG,WACHC,MAAOzC,GAAkBE,EACzBwC,SA7CgBC,IAC1BxC,EAAYwC,GACN,MACAhC,GADS,IAAIC,WACAC,gBAAgB8B,EAAS,aACtC7B,EAAWH,EAAII,qBAAqB,KAC1C,IAAA,IAASC,KAAWF,EACU,UAAxBE,EAAQC,MAAMC,OAA6C,YAAxBF,EAAQC,MAAMC,QACnDF,EAAQC,MAAMC,MAAQ,SAGRjB,EAAAU,EAAIQ,KAAKC,WAC3B1B,EAAS,WAAYiD,EAAO,EAmClBC,QAAS,CACPC,QAAS,CACP,CAAC,CAAEC,OAAQ,KAAO,CAAEA,OAAQ,KAAO,CAAEC,KAAM,KAC3C,CAAC,CAAEC,KAAM,WAAa,CAAEA,KAAM,WAC9B,CAAC,OAAQ,SAAU,YAAa,cAChC,CAAC,CAAEC,MAAO,KACV,CAAC,OAAQ,QAAS,SAClB,CAAC,WAGLC,QAAS,CACP,SAAU,OAAQ,OAAQ,OAAQ,SAAU,YAC5C,aAAc,QAAS,OAAQ,QAAS,iBAI3C,QAAM,CAAAC,KAAK,YAAa3D,EAAS,iBAEpCmC,EAAAA,IAACyB,GAAOD,KAAK,SAAS1B,UAAU,SAC7BC,SAAA7B,EAAa,mBAAqB,yBAI3C"}