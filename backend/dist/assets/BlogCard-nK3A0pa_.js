import{d as r,B as o,s as t}from"./antd-CxduzDaN.js";import{r as e,j as s}from"./react-BfBsRgn0.js";import{a as i}from"./axios-BoylL8Pu.js";import{J as a}from"./jodit-react-fql43Xjk.js";import"./@ant-design-DttPmOfw.js";import"./rc-util-CQtTJgfq.js";import"./@babel-BfC2A0EA.js";import"./react-is-BaRe0U6l.js";import"./react-dom-DwrudmHt.js";import"./classnames-C3ovBj6j.js";import"./scheduler-BFk34ZWe.js";import"./@emotion-Czw0TW3x.js";import"./stylis-IVPcsLSI.js";import"./@ctrl-B2IeE8ye.js";import"./rc-motion-Cs3GDHoo.js";import"./@rc-component-BB24pTyE.js";import"./rc-resize-observer-DUJXZwxn.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./ant-design-icons-DoIDTG1a.js";import"./rc-dialog-BGKNmDMe.js";import"./rc-table-CybQOAzy.js";import"./rc-virtual-list-P8JqKX09.js";import"./rc-tree--ithDbGw.js";import"./rc-checkbox-bMXfL26q.js";import"./rc-pagination-CiqGXVR2.js";import"./rc-select-sVu4PbUz.js";import"./rc-overflow-73VxJI7O.js";import"./throttle-debounce-w9OM8Bxz.js";import"./rc-input-ByOKN0-r.js";import"./rc-tooltip-C1heEwdg.js";import"./rc-notification-D3ebMW8F.js";import"./rc-image-BIQJV_M3.js";import"./rc-textarea-DLkAnH0O.js";import"./copy-to-clipboard-Bgp_G7Oq.js";import"./toggle-selection-DUsDmMsR.js";import"./rc-upload-ClZE7meS.js";import"./rc-progress-bbq4uvV3.js";import"./rc-dropdown-C238bXH-.js";import"./rc-menu-CzbBjnhu.js";import"./rc-field-form-DaYAwFJ8.js";import"./scroll-into-view-if-needed-cNB78-hM.js";import"./compute-scroll-into-view-CJmtT4lq.js";import"./rc-picker-B5UDvhgZ.js";import"./rc-tabs-DG0zBL9k.js";const l=()=>{const[l]=r.useForm(),[c,m]=e.useState(""),[p,d]=e.useState(""),[n,j]=e.useState(null),g=e.useRef(null),f=async()=>{try{const r=(await i.get("/api/blogCard/getCard")).data[0];j(r._id),m(r.blogCard);const o=(new DOMParser).parseFromString(r.blogCard,"text/html"),t=o.getElementsByTagName("*");for(let e of t)"white"!==e.style.color&&"#ffffff"!==e.style.color||(e.style.color="black");d(o.body.innerHTML),l.setFieldsValue({blogCard:r.blogCard})}catch(r){t.error("Failed to fetch blog card.")}};e.useEffect((()=>{f()}),[l]);return s.jsxs(r,{form:l,layout:"vertical",onFinish:async r=>{try{n?(await i.put(`/api/blogCard/editCard/${n}`,{blogCard:c}),t.success("Blog card updated successfully!")):(await i.post("/api/blogCard/addCard",{blogCard:c}),t.success("Blog card added successfully!")),l.resetFields(),m(""),d(""),f()}catch(o){t.error("Failed to save blog card.")}},name:"blog_card_form",children:[s.jsx(r.Item,{name:"blogCard",label:"Blog Card Content",rules:[{required:!0,message:"Please input the blog card content!"}],children:s.jsx(a,{ref:g,value:p||c,config:{uploader:{insertImageAsBase64URI:!0},toolbarAdaptive:!1,toolbarSticky:!1,buttons:["bold","italic","underline","ul","ol","fontsize","paragraph","link","image","video","table","align","undo","redo","font","fontsize","brush","foreColor","backColor"],style:{color:"black"}},onChange:r=>{m(r);const o=(new DOMParser).parseFromString(r,"text/html"),t=o.getElementsByTagName("*");for(let e of t)"white"!==e.style.color&&"#ffffff"!==e.style.color||(e.style.color="black");d(o.body.innerHTML)}})}),s.jsx(r.Item,{children:s.jsx(o,{type:"primary",htmlType:"submit",children:n?"Update Blog Card":"Add Blog Card"})})]})};export{l as default};
