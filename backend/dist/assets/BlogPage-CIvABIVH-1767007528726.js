import{dr as p,ds as y,f,r as w,j as e,L as b,be as a,dk as I,bc as v,dt as k,cX as N,dl as _,cY as B}from"./index-DgWUCWkU-1767007528726.js";import{I as T}from"./index-bQnOC6rm-1767007528726.js";import"./index-DjAlXMiT-1767007528726.js";const{Text:r}=k,A=()=>{const{data:d,error:i,isLoading:l,refetch:c}=p(),[x,{isLoading:L}]=y(),g=f(),[o,h]=w.useState({});if(l)return e.jsx("div",{children:"Loading..."});if(i)return e.jsxs("div",{children:["Error: ",i.message||"An error occurred"]});const m=async t=>{try{await x(t).unwrap(),c()}catch(s){console.error("Failed to delete blog:",s)}},j=t=>{h(s=>({...s,[t]:!s[t]}))},u=[{title:"Title",dataIndex:"title",key:"title",width:150,render:t=>e.jsx(r,{strong:!0,children:t})},{title:"Date",dataIndex:"date",key:"date",width:50},{title:"Details",dataIndex:"details",key:"details",render:(t,s)=>e.jsxs("div",{children:[e.jsx("div",{className:`relative overflow-hidden ${o[s._id]?"max-h-none":"max-h-[5em]"}`,dangerouslySetInnerHTML:{__html:t}}),e.jsx(a,{type:"link",onClick:()=>j(s._id),size:"small",children:o[s._id]?"Show Less":"Read More"})]})},{title:"Images",dataIndex:"image",key:"image",width:100,render:t=>t&&t.length>0?t.map((s,n)=>e.jsx(T,{src:`/api/image/download/${s}`,alt:`Blog Image ${n+1}`,width:50,height:50,className:"object-cover border-2"},n)):e.jsx(r,{type:"secondary",children:"No Image"})},{title:"Actions",key:"actions",width:150,render:(t,s)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(a,{icon:e.jsx(N,{}),onClick:()=>g(`/edit-blog-form/${s._id}`)}),e.jsx(_,{title:"Are you sure you want to delete this blog?",onConfirm:()=>m(s._id),okText:"Yes",cancelText:"No",children:e.jsx(a,{danger:!0,icon:e.jsx(B,{})})})]})}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between mb-4 p-5",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Blogs"})}),e.jsx(b,{to:"/blog-form",children:e.jsx(a,{type:"primary",icon:e.jsx(I,{}),children:"Add Blog"})})]}),e.jsx(v,{columns:u,dataSource:d,rowKey:"_id",pagination:{pageSize:5}})]})};export{A as default};
