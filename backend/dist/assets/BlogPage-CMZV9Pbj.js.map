{"version":3,"file":"BlogPage-CMZV9Pbj.js","sources":["../../src/blog/BlogPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useGetAllBlogsQuery, useDeleteBlogMutation } from '@/slice/blog/blog';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Dialog, DialogTrigger, DialogContent } from \"@/components/ui/dialog\";\r\nimport { Trash, Pencil, Plus } from 'lucide-react';\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst BlogTable = () => {\r\n  const { data: blogs, error, isLoading, refetch } = useGetAllBlogsQuery();\r\n  const [deleteBlog, { isLoading: isDeleting }] = useDeleteBlogMutation();\r\n  const navigate = useNavigate();\r\n  const [expandedRows, setExpandedRows] = useState({});\r\n\r\n  if (isLoading) return <Skeleton className=\"h-48 w-full\" />;\r\n  if (error) return <div>Error: {error.message || 'An error occurred'}</div>;\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await deleteBlog(id).unwrap();\r\n      refetch();\r\n    } catch (error) {\r\n      console.error('Failed to delete blog:', error);\r\n    }\r\n  };\r\n\r\n  const toggleDetails = (id) => {\r\n    setExpandedRows((prev) => ({\r\n      ...prev,\r\n      [id]: !prev[id],\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex justify-between items-center mb-4 p-5\">\r\n        <h2 className='text-2xl font-semibold'>Blogs</h2>\r\n        <Link to=\"/blog-form\">\r\n          <Button className=\"flex items-center gap-2\">\r\n            <Plus size={16} /> Add Blog\r\n          </Button>\r\n        </Link>\r\n      </div>\r\n      <Card>\r\n        <CardContent>\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Title</TableHead>\r\n                <TableHead>Date</TableHead>\r\n                <TableHead>Details</TableHead>\r\n                <TableHead>Images</TableHead>\r\n                <TableHead>Actions</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {blogs?.map((blog) => (\r\n                <TableRow key={blog._id}>\r\n                  <TableCell className=\"font-semibold\">{blog.title}</TableCell>\r\n                  <TableCell>{blog.date}</TableCell>\r\n                  <TableCell>\r\n                    <div className={cn(\"overflow-hidden\", expandedRows[blog._id] ? \"max-h-none\" : \"max-h-20\")}\r\n                         dangerouslySetInnerHTML={{ __html: blog.details }}\r\n                    />\r\n                    <Button variant=\"link\" className=\"text-blue-600 p-0\"\r\n                            onClick={() => toggleDetails(blog._id)}>\r\n                      {expandedRows[blog._id] ? 'Show Less' : 'Read More'}\r\n                    </Button>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {blog.image?.length ? (\r\n                      blog.image.map((img, index) => (\r\n                        <img key={index} src={`/api/image/download/${img}`} alt=\"Blog\" className=\"w-12 h-12 object-cover rounded\" />\r\n                      ))\r\n                    ) : (\r\n                      <span className=\"text-gray-500\">No Image</span>\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <div className=\"flex space-x-2\">\r\n                      <Button variant=\"outline\" size=\"icon\" onClick={() => navigate(`/edit-blog-form/${blog._id}`)}>\r\n                        <Pencil size={16} />\r\n                      </Button>\r\n                      <Dialog>\r\n                        <DialogTrigger asChild>\r\n                          <Button variant=\"destructive\" size=\"icon\">\r\n                            <Trash size={16} />\r\n                          </Button>\r\n                        </DialogTrigger>\r\n                        <DialogContent>\r\n                          <p>Are you sure you want to delete this blog?</p>\r\n                          <div className=\"flex justify-end space-x-2 mt-4\">\r\n                            <Button variant=\"outline\">Cancel</Button>\r\n                            <Button variant=\"destructive\" onClick={() => handleDelete(blog._id)}>Delete</Button>\r\n                          </div>\r\n                        </DialogContent>\r\n                      </Dialog>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlogTable;"],"names":["BlogTable","data","blogs","error","isLoading","refetch","useGetAllBlogsQuery","deleteBlog","isDeleting","useDeleteBlogMutation","navigate","useNavigate","expandedRows","setExpandedRows","useState","jsx","Skeleton","className","jsxs","children","message","Link","to","Button","Plus","size","Card","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","map","blog","TableCell","title","date","cn","_id","dangerouslySetInnerHTML","__html","details","variant","onClick","toggleDetails","id","prev","image","length","img","index","src","alt","Pencil","Dialog","DialogTrigger","asChild","Trash","DialogContent","async","unwrap","handleDelete"],"mappings":"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"}