import{bO as I,a as R,b as y,j as e,L as l,I as i,B as b}from"./main-Bqu49der.js";import{c as o,u as B,L as D}from"./vendor-CxfDVdnA.js";import{T as P}from"./textarea-CvP-z1Iq.js";import{B as T}from"./Banner-6Nc023Cb.js";import{R as q}from"./recaptcha-wrapper-BU9WcoW9.js";import"./index-EH8SpnOa.js";const E="/assets/career-CkIT_sJc.jpg";function V(){const[t,p]=o.useState({name:"",address:"",email:"",contactNo:"",postAppliedFor:""}),[u,x]=o.useState(null),[h,g]=o.useState(!1),[F,f]=o.useState(null),[k,{isLoading:j}]=I(),C=B().pathname.replace(/^\//,"")||"career",{data:m,isLoading:A}=R(C),[d,w]=o.useState(null);o.useEffect(()=>{y.get("/api/careerInfo").then(a=>{a.data.length>0&&w(a.data[0])}).catch(a=>{console.error("Error fetching career info:",a)})},[]);const n=a=>{const{id:r,value:s}=a.target;p(c=>({...c,[r]:s}))},L=a=>{const r=a.target.files[0],s=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],c=5*1024*1024;if(r){if(!s.includes(r.type)){alert("Please upload only PDF, DOC, or DOCX files"),a.target.value=null;return}if(r.size>c){alert("File size must be less than 5MB"),a.target.value=null;return}x(r)}},v=a=>{a.preventDefault(),p({name:"",address:"",email:"",contactNo:"",postAppliedFor:""}),x(null)},S=async a=>{if(a.preventDefault(),!F){alert("Please complete the reCAPTCHA");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)){alert("Please enter a valid email address");return}try{g(!0);const s=new FormData;Object.keys(t).forEach(N=>{s.append(N,t[N])}),u&&s.append("resumeFile",u),(await y.post("/api/career/add",s,{headers:{"Content-Type":"multipart/form-data"}})).status===200&&(alert("Application submitted successfully!"),v(a),a.target.reset(),f(null))}catch(s){alert("Failed to submit application: "+s.response?.data?.message||s.message)}finally{g(!1)}};return e.jsxs(e.Fragment,{children:[A?e.jsx("div",{children:"Loading banner..."}):e.jsx(T,{imageUrl:m&&m.length>0?`/api/image/download/${m[0].image}`:E}),e.jsxs("div",{className:"sm:max-w-[75rem] w-full mx-auto",children:[e.jsx("nav",{className:"py-4 px-4 sm:px-0 md:px-6",children:e.jsxs("div",{className:"flex border-b border-gray-300 pb-4 items-center space-x-2 text-sm",children:[e.jsx(D,{to:"/",className:"text-gray-600 hover:text-gray-900",children:"Home"}),e.jsx("span",{className:"text-gray-400",children:"Â»"}),e.jsx("span",{className:"text-orange-500",children:"Careers"})]})}),e.jsxs("div",{className:"mb-7 px-4 md:px-6 sm:px-0",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Careers"}),e.jsx("div",{className:"bg-orange-500 h-1 w-12"})]}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:d.info}})}),e.jsxs("div",{className:"grid md:grid-cols-2 w-full gap-7 px-4 md:px-6 sm:px-0",children:[e.jsxs("form",{className:"space-y-6 w-full",onSubmit:S,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Name*"}),e.jsx(i,{id:"name",required:!0,className:"rounded-none",value:t.name,onChange:n,maxLength:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"address",children:"Address*"}),e.jsx(P,{id:"address",required:!0,className:"rounded-none",value:t.address,onChange:n,maxLength:500})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"email",children:"Email*"}),e.jsx(i,{id:"email",type:"email",required:!0,className:"rounded-none",value:t.email,onChange:n,maxLength:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"contactNo",children:"Contact No*"}),e.jsx(i,{id:"contactNo",type:"tel",required:!0,className:"rounded-none",value:t.contactNo,onChange:n,maxLength:20})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"resume",children:"Upload Your resume*"}),e.jsx("div",{className:"text-sm text-gray-500",children:"[doc,docx OR pdf, max 5MB]"}),e.jsx(i,{id:"resume",type:"file",accept:".doc,.docx,.pdf",required:!0,className:"rounded-none",onChange:L})]}),e.jsx("div",{className:"md:hidden space-y-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"postAppliedFor",children:"Post Applied For*"}),e.jsx(i,{id:"postAppliedFor",required:!0,className:"rounded-none",value:t.postAppliedFor,onChange:n,maxLength:100})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(b,{type:"submit",className:"bg-blue-700 rounded-sm text-lg py-6 hover:bg-blue-800",disabled:j||h,children:j||h?"Submitting...":"Submit"}),e.jsx(b,{type:"button",variant:"destructive",className:"bg-orange-500 hover:bg-orange-600 text-lg py-6 rounded-sm",onClick:v,children:"Reset"})]})]}),e.jsxs("div",{className:"hidden md:flex flex-col items-start justify-start w-full",children:[e.jsx("div",{className:"w-full ml-10 flex justify-center relative -top-8 items-center",children:e.jsx("img",{src:d.image?`/api/image/download/${d.image}`:"no-image",alt:"Career growth illustration",className:"object-contain w-full h-[80%]"})}),e.jsxs("div",{className:"space-y-2 w-full relative -top-24",children:[e.jsx(l,{htmlFor:"postAppliedFor",children:"Post Applied For*"}),e.jsx(i,{id:"postAppliedFor",required:!0,className:"rounded-none",value:t.postAppliedFor,onChange:n,maxLength:100})]}),e.jsx("div",{className:"space-y-2 w-full relative -top-20",children:e.jsx(q,{sitekey:"6LfRcrsqAAAAAI_53KTLkPZ_l-jthc1g2UrlrHtE",onChange:a=>f(a)})})]})]})]})]})]})}export{V as default};
