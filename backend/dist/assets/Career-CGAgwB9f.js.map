{"version":3,"file":"Career-CGAgwB9f.js","sources":["../../src/website/pages/Career.jsx","../../src/website/images/career.jpg"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { useNavigate, Link, useLocation } from \"react-router-dom\";\r\nimport { useSubmitApplicationMutation } from \"@/slice/career/CareerForm\";\r\nimport { useGetBannerByPageSlugQuery } from \"@/slice/banner/banner\";\r\nimport { Banner } from \"../componets/Banner\";\r\nimport axios from 'axios';\r\nimport career from '../images/career.jpg';\r\nimport ReCAPTCHA from \"react-google-recaptcha\";\r\n\r\nexport default function CareerForm() {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    address: '',\r\n    email: '',\r\n    contactNo: '',\r\n    postAppliedFor: '',\r\n  });\r\n  const [resumeFile, setResumeFile] = useState(null);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [captchaValue, setCaptchaValue] = useState(null);\r\n  const [submitApplication, { isLoading }] = useSubmitApplicationMutation();\r\n  const location = useLocation();\r\n  const path = location.pathname.replace(/^\\//, '') || 'career';\r\n  const { data: banners, isLoading: isBannerLoading } = useGetBannerByPageSlugQuery(path);\r\n  const [careerInfo, setCareerInfo] = useState(null);\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/careerInfo')\r\n      .then(response => {\r\n        if (response.data.length > 0) {\r\n          setCareerInfo(response.data[0]);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching career info:', error);\r\n      });\r\n  }, []);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { id, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [id]: value\r\n    }));\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    const allowedTypes = [\r\n      'application/pdf',\r\n      'application/msword',\r\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\r\n    ];\r\n    const maxSize = 5 * 1024 * 1024; // 5MB\r\n\r\n    if (file) {\r\n      if (!allowedTypes.includes(file.type)) {\r\n        alert('Please upload only PDF, DOC, or DOCX files');\r\n        e.target.value = null;\r\n        return;\r\n      }\r\n      if (file.size > maxSize) {\r\n        alert('File size must be less than 5MB');\r\n        e.target.value = null;\r\n        return;\r\n      }\r\n      setResumeFile(file);\r\n    }\r\n  };\r\n\r\n  const handleReset = (e) => {\r\n    e.preventDefault();\r\n    setFormData({\r\n      name: '',\r\n      address: '',\r\n      email: '',\r\n      contactNo: '',\r\n      postAppliedFor: '',\r\n    });\r\n    setResumeFile(null);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!captchaValue) {\r\n      alert('Please complete the reCAPTCHA');\r\n      return;\r\n    }\r\n\r\n    // Basic email validation\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(formData.email)) {\r\n      alert('Please enter a valid email address');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsUploading(true);\r\n      const formDataToSend = new FormData();\r\n      Object.keys(formData).forEach(key => {\r\n        formDataToSend.append(key, formData[key]);\r\n      });\r\n      if (resumeFile) {\r\n        formDataToSend.append('resumeFile', resumeFile);\r\n      }\r\n\r\n      // Directly send data using axios\r\n      const response = await axios.post('/api/career/add', formDataToSend, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        alert('Application submitted successfully!');\r\n        handleReset(e);\r\n        e.target.reset();\r\n        setCaptchaValue(null); // Reset reCAPTCHA value\r\n      } else {\r\n        // alert('Failed to submit application. Please try again.');\r\n      }\r\n    } catch (error) {\r\n      alert('Failed to submit application: ' + error.response?.data?.message || error.message);\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {isBannerLoading ? (\r\n        <div>Loading banner...</div>\r\n      ) : (\r\n        <Banner\r\n          imageUrl={banners && banners.length > 0 ? `/api/image/download/${banners[0].image}` : career}\r\n        />\r\n      )}\r\n      <div className=\"sm:max-w-[75rem] w-full mx-auto\">\r\n        <nav className=\"py-4 px-4 sm:px-0 md:px-6\">\r\n          <div className=\"flex border-b border-gray-300 pb-4 items-center space-x-2 text-sm\">\r\n            <Link to=\"/\" className=\"text-gray-600 hover:text-gray-900\">Home</Link>\r\n            <span className=\"text-gray-400\">Â»</span>\r\n            <span className=\"text-orange-500\">Careers</span>\r\n          </div>\r\n        </nav>\r\n        <div className=\"mb-7 px-4 md:px-6 sm:px-0\">\r\n          <h1 className=\"text-3xl font-bold\">Careers</h1>\r\n          <div className=\"bg-orange-500 h-1 w-12\"></div>\r\n        </div>\r\n        {careerInfo && (\r\n          <>\r\n            <div className=\"mb-4\">\r\n              <div dangerouslySetInnerHTML={{ __html: careerInfo.info }} />\r\n            </div>\r\n\r\n            <div className=\"grid md:grid-cols-2 w-full gap-7 px-4 md:px-6 sm:px-0\">\r\n              <form className=\"space-y-6 w-full\" onSubmit={handleSubmit}>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"name\">Name*</Label>\r\n                  <Input\r\n                    id=\"name\"\r\n                    required\r\n                    className=\"rounded-none\"\r\n                    value={formData.name}\r\n                    onChange={handleInputChange}\r\n                    maxLength={100}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"address\">Address*</Label>\r\n                  <Textarea\r\n                    id=\"address\"\r\n                    required\r\n                    className=\"rounded-none\"\r\n                    value={formData.address}\r\n                    onChange={handleInputChange}\r\n                    maxLength={500}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"email\">Email*</Label>\r\n                  <Input\r\n                    id=\"email\"\r\n                    type=\"email\"\r\n                    required\r\n                    className=\"rounded-none\"\r\n                    value={formData.email}\r\n                    onChange={handleInputChange}\r\n                    maxLength={100}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"contactNo\">Contact No*</Label>\r\n                  <Input\r\n                    id=\"contactNo\"\r\n                    type=\"tel\"\r\n                    required\r\n                    className=\"rounded-none\"\r\n                    value={formData.contactNo}\r\n                    onChange={handleInputChange}\r\n                    maxLength={20}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"resume\">Upload Your resume*</Label>\r\n                  <div className=\"text-sm text-gray-500\">[doc,docx OR pdf, max 5MB]</div>\r\n                  <Input\r\n                    id=\"resume\"\r\n                    type=\"file\"\r\n                    accept=\".doc,.docx,.pdf\"\r\n                    required\r\n                    className=\"rounded-none\"\r\n                    onChange={handleFileChange}\r\n                  />\r\n                </div>\r\n\r\n                {/* Mobile-specific fields */}\r\n                <div className=\"md:hidden space-y-6\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"postAppliedFor\">Post Applied For*</Label>\r\n                    <Input\r\n                      id=\"postAppliedFor\"\r\n                      required\r\n                      className=\"rounded-none\"\r\n                      value={formData.postAppliedFor}\r\n                      onChange={handleInputChange}\r\n                      maxLength={100}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-4\">\r\n                  <Button\r\n                    type=\"submit\"\r\n                    className=\"bg-blue-700 rounded-sm text-lg py-6 hover:bg-blue-800\"\r\n                    disabled={isLoading || isUploading}\r\n                  >\r\n                    {isLoading || isUploading ? 'Submitting...' : 'Submit'}\r\n                  </Button>\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"destructive\"\r\n                    className=\"bg-orange-500 hover:bg-orange-600 text-lg py-6 rounded-sm\"\r\n                    onClick={handleReset}\r\n                  >\r\n                    Reset\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n              <div className=\"hidden md:flex flex-col items-start justify-start w-full\">\r\n                <div className=\"w-full ml-10 flex justify-center relative -top-8 items-center\">\r\n                  <img\r\n                    src={careerInfo.image ? `/api/image/download/${careerInfo.image}` : \"no-image\"}\r\n                    alt=\"Career growth illustration\"\r\n                    className=\"object-contain w-full h-[80%]\"\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2 w-full relative -top-24\">\r\n                  <Label htmlFor=\"postAppliedFor\">Post Applied For*</Label>\r\n                  <Input\r\n                    id=\"postAppliedFor\"\r\n                    required\r\n                    className=\"rounded-none\"\r\n                    value={formData.postAppliedFor}\r\n                    onChange={handleInputChange}\r\n                    maxLength={100}\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2 w-full relative -top-20\">\r\n                  <ReCAPTCHA\r\n                    sitekey={import.meta.env.VITE_SITE_KEY}\r\n                    onChange={(value) => setCaptchaValue(value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}","export default \"__VITE_ASSET__C9j_GlzF__\""],"names":["CareerForm","formData","setFormData","useState","name","address","email","contactNo","postAppliedFor","resumeFile","setResumeFile","isUploading","setIsUploading","captchaValue","setCaptchaValue","submitApplication","isLoading","useSubmitApplicationMutation","path","useLocation","pathname","replace","data","banners","isBannerLoading","useGetBannerByPageSlugQuery","careerInfo","setCareerInfo","useEffect","axios","get","then","response","length","catch","error","handleInputChange","e","id","value","target","prev","handleReset","preventDefault","jsxs","Fragment","children","jsx","Banner","imageUrl","image","className","Link","to","dangerouslySetInnerHTML","__html","info","onSubmit","async","alert","test","formDataToSend","FormData","Object","keys","forEach","key","append","post","headers","status","reset","message","Label","htmlFor","Input","required","onChange","maxLength","Textarea","type","accept","file","files","includes","size","Button","disabled","variant","onClick","src","alt","ReCAPTCHA","sitekey"],"mappings":"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"}