import{bI as e,bN as s,bO as a,j as r,I as t,B as i}from"./main-BcUd3ASm.js";import{d as l,g as n,r as d}from"./vendor-router-CaZtIe2_.js";import{C as c,b as o,c as m,a as p}from"./card-DKPCnjx_.js";import{F as u,a as x,b as j,c as h,d as f,e as b,f as N}from"./form-ChijvnbD.js";import{T as v}from"./textarea-BX_s7d6D.js";import{B as g,a as A,b as F,d as y,e as P}from"./breadcrumb-DEvmmGzh.js";import{b as w}from"./index.esm-CJw2PcRb.js";import{B as C}from"./react-toastify.esm-CrOn1nFw.js";import{U as S}from"./upload-CioWvAMz.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";import"./chevron-right-C95tp0e6.js";const E=()=>{const E=l(),{id:k}=n(),q=!!k,[D,I]=d.useState(null),[L,R]=d.useState(null),[B]=e(),[U]=s(),{data:Z,isLoading:O}=a(k,{skip:!q}),V=w({defaultValues:{name:"",email:"",contactNo:"",address:"",postAppliedFor:"",resumeFile:null}});d.useEffect((()=>{q&&Z?.data&&(V.reset({name:Z.data.name,email:Z.data.email,contactNo:Z.data.contactNo,address:Z.data.address,postAppliedFor:Z.data.postAppliedFor}),Z.data.resumeFile&&R({name:Z.data.resumeFile.split("/").pop(),url:Z.data.resumeFile}))}),[Z,V,q]);const $=e=>{const s=e.target.files[0];if(s){if("application/pdf"!==s.type)return C({variant:"destructive",title:"Invalid File",description:"You can only upload PDF files!"}),void(e.target.value="");I(s),V.setValue("resumeFile",s.name),R(null)}};return O?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-lg",children:"Loading..."})}):r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx(g,{className:"mb-6",children:r.jsxs(A,{children:[r.jsx(F,{children:r.jsx(y,{onClick:()=>E("/dashboard"),className:"cursor-pointer",children:"Dashboard"})}),r.jsx(P,{}),r.jsx(F,{children:r.jsx(y,{onClick:()=>E("/career-table"),className:"cursor-pointer",children:"Career Applications"})}),r.jsx(P,{}),r.jsx(F,{children:r.jsx(y,{children:q?"Edit Application":"Add Application"})})]})}),r.jsxs(c,{children:[r.jsx(o,{children:r.jsx(m,{children:q?"Edit Application":"Add New Application"})}),r.jsx(p,{children:r.jsx(u,{...V,children:r.jsxs("form",{onSubmit:V.handleSubmit((async e=>{try{const s=new FormData;s.append("name",e.name),s.append("email",e.email),s.append("contactNo",e.contactNo),s.append("address",e.address),s.append("postAppliedFor",e.postAppliedFor),D&&s.append("resumeFile",D),q?(await U({id:k,formData:s}).unwrap(),C({title:"Success",description:"Application updated successfully!"})):(await B(s).unwrap(),C({title:"Success",description:"Application submitted successfully!"})),E("/career-table")}catch(s){C({variant:"destructive",title:"Error",description:s.message||"Something went wrong"})}})),className:"space-y-6",children:[r.jsx(x,{control:V.control,name:"name",rules:{required:"Please enter name",minLength:{value:2,message:"Name must be at least 2 characters"}},render:({field:e})=>r.jsxs(j,{children:[r.jsx(h,{children:"Name"}),r.jsx(f,{children:r.jsx(t,{...e})}),r.jsx(b,{})]})}),r.jsx(x,{control:V.control,name:"email",rules:{required:"Please enter email",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Please enter a valid email"}},render:({field:e})=>r.jsxs(j,{children:[r.jsx(h,{children:"Email"}),r.jsx(f,{children:r.jsx(t,{type:"email",...e})}),r.jsx(b,{})]})}),r.jsx(x,{control:V.control,name:"contactNo",rules:{required:"Please enter contact number",pattern:{value:/^[0-9]{10}$/,message:"Please enter a valid 10-digit number"}},render:({field:e})=>r.jsxs(j,{children:[r.jsx(h,{children:"Contact Number"}),r.jsx(f,{children:r.jsx(t,{...e})}),r.jsx(b,{})]})}),r.jsx(x,{control:V.control,name:"address",rules:{required:"Please enter address",minLength:{value:5,message:"Address must be at least 5 characters"}},render:({field:e})=>r.jsxs(j,{children:[r.jsx(h,{children:"Address"}),r.jsx(f,{children:r.jsx(v,{rows:4,...e})}),r.jsx(b,{})]})}),r.jsx(x,{control:V.control,name:"postAppliedFor",rules:{required:"Please enter post applied for"},render:({field:e})=>r.jsxs(j,{children:[r.jsx(h,{children:"Post Applied For"}),r.jsx(f,{children:r.jsx(t,{...e})}),r.jsx(b,{})]})}),r.jsx(x,{control:V.control,name:"resumeFile",rules:{required:!q&&!L&&"Please upload resume"},render:({field:e})=>r.jsxs(j,{children:[r.jsx(h,{children:"Resume"}),r.jsx(f,{children:r.jsxs("div",{className:"space-y-4",children:[L&&r.jsx("div",{className:"flex items-center p-2 bg-slate-100 rounded",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:L.name}),r.jsx("p",{className:"text-xs text-gray-500",children:"Existing resume"})]})}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(i,{type:"button",variant:"outline",className:"cursor-pointer",onClick:()=>document.getElementById("resume-upload").click(),children:[r.jsx(S,{className:"h-4 w-4 mr-2"}),L||D?"Replace Resume":"Upload Resume"]}),r.jsx(t,{id:"resume-upload",type:"file",accept:"application/pdf",onChange:$,className:"hidden"}),D&&r.jsx("span",{className:"text-sm",children:D.name})]})]})}),r.jsx(N,{children:"Only PDF files are accepted"}),r.jsx(b,{})]})}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(i,{type:"submit",disabled:O,children:q?"Update":"Submit"}),r.jsx(i,{type:"button",variant:"outline",onClick:()=>E("/career-table"),children:"Cancel"})]})]})})})]})]})};export{E as default};
//# sourceMappingURL=CareerForm-Ba8Ij2vc.js.map
