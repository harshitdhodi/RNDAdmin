{"version":3,"file":"CareerForm-Ba8Ij2vc.js","sources":["../../src/websiteBackend/career/CareerForm.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { \r\n    useSubmitApplicationMutation,\r\n    useUpdateApplicationMutation,\r\n    useGetApplicationByIdQuery\r\n} from '../../slice/career/CareerForm';\r\nimport { Upload } from 'lucide-react';\r\n\r\n// Import shadcn components\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Form, FormControl, FormDescription, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Breadcrumb, BreadcrumbItem, BreadcrumbLink, BreadcrumbList, BreadcrumbSeparator } from \"@/components/ui/breadcrumb\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst CareerAdminForm = () => {\r\n    const navigate = useNavigate();\r\n    const { id } = useParams();\r\n    const isEditMode = !!id;\r\n    const [resumeFile, setResumeFile] = useState(null);\r\n    const [existingResume, setExistingResume] = useState(null);\r\n\r\n    // API hooks\r\n    const [submitApplication] = useSubmitApplicationMutation();\r\n    const [updateApplication] = useUpdateApplicationMutation();\r\n    const { data: editData, isLoading: isLoadingEdit } = useGetApplicationByIdQuery(id, {\r\n        skip: !isEditMode\r\n    });\r\n\r\n    // Initialize form with react-hook-form\r\n    const form = useForm({\r\n        defaultValues: {\r\n            name: '',\r\n            email: '',\r\n            contactNo: '',\r\n            address: '',\r\n            postAppliedFor: '',\r\n            resumeFile: null\r\n        }\r\n    });\r\n\r\n    // Set form values when editing\r\n    useEffect(() => {\r\n        if (isEditMode && editData?.data) {\r\n            form.reset({\r\n                name: editData.data.name,\r\n                email: editData.data.email,\r\n                contactNo: editData.data.contactNo,\r\n                address: editData.data.address,\r\n                postAppliedFor: editData.data.postAppliedFor,\r\n            });\r\n            \r\n            // Set existing resume file\r\n            if (editData.data.resumeFile) {\r\n                setExistingResume({\r\n                    name: editData.data.resumeFile.split('/').pop(),\r\n                    url: editData.data.resumeFile,\r\n                });\r\n            }\r\n        }\r\n    }, [editData, form, isEditMode]);\r\n\r\n    const onSubmit = async (values) => {\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('name', values.name);\r\n            formData.append('email', values.email);\r\n            formData.append('contactNo', values.contactNo);\r\n            formData.append('address', values.address);\r\n            formData.append('postAppliedFor', values.postAppliedFor);\r\n\r\n            // Only append file if a new one is uploaded\r\n            if (resumeFile) {\r\n                formData.append('resumeFile', resumeFile);\r\n            }\r\n\r\n            if (isEditMode) {\r\n                await updateApplication({ id, formData }).unwrap();\r\n                toast({\r\n                    title: \"Success\",\r\n                    description: \"Application updated successfully!\"\r\n                });\r\n            } else {\r\n                await submitApplication(formData).unwrap();\r\n                toast({\r\n                    title: \"Success\",\r\n                    description: \"Application submitted successfully!\"\r\n                });\r\n            }\r\n            navigate('/career-table');\r\n        } catch (error) {\r\n            toast({\r\n                variant: \"destructive\",\r\n                title: \"Error\",\r\n                description: error.message || \"Something went wrong\"\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleFileChange = (event) => {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n            if (file.type !== 'application/pdf') {\r\n                toast({\r\n                    variant: \"destructive\",\r\n                    title: \"Invalid File\",\r\n                    description: \"You can only upload PDF files!\"\r\n                });\r\n                event.target.value = '';\r\n                return;\r\n            }\r\n            setResumeFile(file);\r\n            form.setValue('resumeFile', file.name);\r\n            setExistingResume(null);\r\n        }\r\n    };\r\n\r\n    if (isLoadingEdit) return (\r\n        <div className=\"flex items-center justify-center h-64\">\r\n            <div className=\"text-lg\">Loading...</div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-6\">\r\n            <Breadcrumb className=\"mb-6\">\r\n                <BreadcrumbList>\r\n                    <BreadcrumbItem>\r\n                        <BreadcrumbLink \r\n                            onClick={() => navigate('/dashboard')}\r\n                            className=\"cursor-pointer\"\r\n                        >\r\n                            Dashboard\r\n                        </BreadcrumbLink>\r\n                    </BreadcrumbItem>\r\n                    <BreadcrumbSeparator />\r\n                    <BreadcrumbItem>\r\n                        <BreadcrumbLink \r\n                            onClick={() => navigate('/career-table')}\r\n                            className=\"cursor-pointer\"\r\n                        >\r\n                            Career Applications\r\n                        </BreadcrumbLink>\r\n                    </BreadcrumbItem>\r\n                    <BreadcrumbSeparator />\r\n                    <BreadcrumbItem>\r\n                        <BreadcrumbLink>{isEditMode ? 'Edit Application' : 'Add Application'}</BreadcrumbLink>\r\n                    </BreadcrumbItem>\r\n                </BreadcrumbList>\r\n            </Breadcrumb>\r\n\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle>{isEditMode ? 'Edit Application' : 'Add New Application'}</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <Form {...form}>\r\n                        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"name\"\r\n                                rules={{ \r\n                                    required: \"Please enter name\",\r\n                                    minLength: {\r\n                                        value: 2,\r\n                                        message: \"Name must be at least 2 characters\"\r\n                                    }\r\n                                }}\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Name</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"email\"\r\n                                rules={{\r\n                                    required: \"Please enter email\",\r\n                                    pattern: {\r\n                                        value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                                        message: \"Please enter a valid email\"\r\n                                    }\r\n                                }}\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Email</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input type=\"email\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"contactNo\"\r\n                                rules={{\r\n                                    required: \"Please enter contact number\",\r\n                                    pattern: {\r\n                                        value: /^[0-9]{10}$/,\r\n                                        message: \"Please enter a valid 10-digit number\"\r\n                                    }\r\n                                }}\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Contact Number</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"address\"\r\n                                rules={{\r\n                                    required: \"Please enter address\",\r\n                                    minLength: {\r\n                                        value: 5,\r\n                                        message: \"Address must be at least 5 characters\"\r\n                                    }\r\n                                }}\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Address</FormLabel>\r\n                                        <FormControl>\r\n                                            <Textarea rows={4} {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"postAppliedFor\"\r\n                                rules={{ required: \"Please enter post applied for\" }}\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Post Applied For</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"resumeFile\"\r\n                                rules={{ \r\n                                    required: !isEditMode && !existingResume ? \"Please upload resume\" : false \r\n                                }}\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Resume</FormLabel>\r\n                                        <FormControl>\r\n                                            <div className=\"space-y-4\">\r\n                                                {existingResume && (\r\n                                                    <div className=\"flex items-center p-2 bg-slate-100 rounded\">\r\n                                                        <div className=\"flex-1\">\r\n                                                            <p className=\"text-sm font-medium\">{existingResume.name}</p>\r\n                                                            <p className=\"text-xs text-gray-500\">Existing resume</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                                <div className=\"flex items-center gap-4\">\r\n                                                    <Button \r\n                                                        type=\"button\" \r\n                                                        variant=\"outline\"\r\n                                                        className=\"cursor-pointer\"\r\n                                                        onClick={() => document.getElementById('resume-upload').click()}\r\n                                                    >\r\n                                                        <Upload className=\"h-4 w-4 mr-2\" />\r\n                                                        {existingResume || resumeFile ? 'Replace Resume' : 'Upload Resume'}\r\n                                                    </Button>\r\n                                                    <Input\r\n                                                        id=\"resume-upload\"\r\n                                                        type=\"file\"\r\n                                                        accept=\"application/pdf\"\r\n                                                        onChange={handleFileChange}\r\n                                                        className=\"hidden\"\r\n                                                    />\r\n                                                    {resumeFile && (\r\n                                                        <span className=\"text-sm\">{resumeFile.name}</span>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </FormControl>\r\n                                        <FormDescription>\r\n                                            Only PDF files are accepted\r\n                                        </FormDescription>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n\r\n                            <div className=\"flex gap-4 pt-4\">\r\n                                <Button type=\"submit\" disabled={isLoadingEdit}>\r\n                                    {isEditMode ? 'Update' : 'Submit'}\r\n                                </Button>\r\n                                <Button \r\n                                    type=\"button\"\r\n                                    variant=\"outline\"\r\n                                    onClick={() => navigate('/career-table')}\r\n                                >\r\n                                    Cancel\r\n                                </Button>\r\n                            </div>\r\n                        </form>\r\n                    </Form>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CareerAdminForm;"],"names":["CareerAdminForm","navigate","useNavigate","id","useParams","isEditMode","resumeFile","setResumeFile","useState","existingResume","setExistingResume","submitApplication","useSubmitApplicationMutation","updateApplication","useUpdateApplicationMutation","data","editData","isLoading","isLoadingEdit","useGetApplicationByIdQuery","skip","form","useForm","defaultValues","name","email","contactNo","address","postAppliedFor","useEffect","reset","split","pop","url","handleFileChange","event","file","target","files","type","toast","variant","title","description","value","setValue","jsx","className","children","jsxs","Breadcrumb","BreadcrumbList","BreadcrumbItem","BreadcrumbLink","onClick","BreadcrumbSeparator","Card","CardHeader","CardTitle","CardContent","Form","onSubmit","handleSubmit","async","values","formData","FormData","append","unwrap","error","message","FormField","control","rules","required","minLength","render","field","FormItem","FormLabel","FormControl","Input","FormMessage","pattern","Textarea","rows","Button","document","getElementById","click","Upload","accept","onChange","FormDescription","disabled"],"mappings":"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"}