{"version":3,"file":"CareerForm-BfJDQT_o.js","sources":["../../src/websiteBackend/career/CareerForm.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Form, Input, Button, Card, Breadcrumb, message, Upload } from 'antd';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { UploadOutlined } from '@ant-design/icons';\nimport { \n    useSubmitApplicationMutation,\n    useUpdateApplicationMutation,\n    useGetApplicationByIdQuery\n} from '../../slice/career/CareerForm';\n\nconst CareerAdminForm = () => {\n    const [form] = Form.useForm();\n    const navigate = useNavigate();\n    const { id } = useParams();\n    const isEditMode = !!id;\n    const [fileList, setFileList] = useState([]);\n\n    // API hooks\n    const [submitApplication] = useSubmitApplicationMutation();\n    const [updateApplication] = useUpdateApplicationMutation();\n    const { data: editData, isLoading: isLoadingEdit } = useGetApplicationByIdQuery(id, {\n        skip: !isEditMode\n    });\n\n    // Set form values when editing\n    useEffect(() => {\n        if (isEditMode && editData?.data) {\n            form.setFieldsValue({\n                name: editData.data.name,\n                email: editData.data.email,\n                contactNo: editData.data.contactNo,\n                address: editData.data.address,\n                postAppliedFor: editData.data.postAppliedFor,\n            });\n            \n            // Set existing resume file\n            if (editData.data.resumeFile) {\n                setFileList([\n                    {\n                        uid: '-1',\n                        name: editData.data.resumeFile.split('/').pop(),\n                        status: 'done',\n                        url: editData.data.resumeFile,\n                    }\n                ]);\n            }\n        }\n    }, [editData, form, isEditMode]);\n\n    const onFinish = async (values) => {\n        try {\n            const formData = new FormData();\n            formData.append('name', values.name);\n            formData.append('email', values.email);\n            formData.append('contactNo', values.contactNo);\n            formData.append('address', values.address);\n            formData.append('postAppliedFor', values.postAppliedFor);\n\n            // Only append file if a new one is uploaded\n            if (fileList[0]?.originFileObj) {\n                formData.append('resumeFile', fileList[0].originFileObj);\n            }\n\n            if (isEditMode) {\n                await updateApplication({ id, formData }).unwrap();\n                message.success('Application updated successfully!');\n            } else {\n                await submitApplication(formData).unwrap();\n                message.success('Application submitted successfully!');\n            }\n            navigate('/career-table');\n        } catch (error) {\n            message.error(error.message || 'Something went wrong');\n        }\n    };\n\n    const handleFileChange = ({ fileList: newFileList }) => {\n        setFileList(newFileList);\n    };\n\n    const uploadProps = {\n        beforeUpload: (file) => {\n            const isPDF = file.type === 'application/pdf';\n            if (!isPDF) {\n                message.error('You can only upload PDF files!');\n                return false;\n            }\n            return false; // Prevent automatic upload\n        },\n        maxCount: 1,\n        fileList,\n        onChange: handleFileChange,\n    };\n\n    return (\n        <div style={{ padding: '20px' }}>\n            <Breadcrumb\n                items={[\n                    { \n                        title: <span onClick={() => navigate('/dashboard')} style={{ cursor: 'pointer' }}>\n                            Dashboard\n                        </span>\n                    },\n                    { \n                        title: <span onClick={() => navigate('/career-table')} style={{ cursor: 'pointer' }}>\n                            Career Applications\n                        </span>\n                    },\n                    { title: isEditMode ? 'Edit Application' : 'Add Application' }\n                ]}\n                style={{ marginBottom: '16px' }}\n            />\n\n            <Card title={isEditMode ? 'Edit Application' : 'Add New Application'}>\n                <Form\n                    form={form}\n                    layout=\"vertical\"\n                    onFinish={onFinish}\n                    disabled={isLoadingEdit}\n                >\n                    <Form.Item\n                        name=\"name\"\n                        label=\"Name\"\n                        rules={[\n                            { required: true, message: 'Please enter name' },\n                            { min: 2, message: 'Name must be at least 2 characters' }\n                        ]}\n                    >\n                        <Input />\n                    </Form.Item>\n\n                    <Form.Item\n                        name=\"email\"\n                        label=\"Email\"\n                        rules={[\n                            { required: true, message: 'Please enter email' },\n                            { type: 'email', message: 'Please enter a valid email' }\n                        ]}\n                    >\n                        <Input />\n                    </Form.Item>\n\n                    <Form.Item\n                        name=\"contactNo\"\n                        label=\"Contact Number\"\n                        rules={[\n                            { required: true, message: 'Please enter contact number' },\n                            { pattern: /^[0-9]{10}$/, message: 'Please enter a valid 10-digit number' }\n                        ]}\n                    >\n                        <Input />\n                    </Form.Item>\n\n                    <Form.Item\n                        name=\"address\"\n                        label=\"Address\"\n                        rules={[\n                            { required: true, message: 'Please enter address' },\n                            { min: 5, message: 'Address must be at least 5 characters' }\n                        ]}\n                    >\n                        <Input.TextArea rows={4} />\n                    </Form.Item>\n\n                    <Form.Item\n                        name=\"postAppliedFor\"\n                        label=\"Post Applied For\"\n                        rules={[{ required: true, message: 'Please enter post applied for' }]}\n                    >\n                        <Input />\n                    </Form.Item>\n\n                    <Form.Item\n                        name=\"resumeFile\"\n                        label=\"Resume\"\n                        rules={[\n                            { \n                                required: !isEditMode && !fileList.length, \n                                message: 'Please upload resume' \n                            }\n                        ]}\n                    >\n                        <Upload {...uploadProps}>\n                            <Button icon={<UploadOutlined />}>\n                                {fileList.length ? 'Replace Resume' : 'Upload Resume'}\n                            </Button>\n                        </Upload>\n                    </Form.Item>\n\n                    <Form.Item>\n                        <Button type=\"primary\" htmlType=\"submit\" loading={isLoadingEdit}>\n                            {isEditMode ? 'Update' : 'Submit'}\n                        </Button>\n                        <Button \n                            style={{ marginLeft: '10px' }}\n                            onClick={() => navigate('/career-table')}\n                        >\n                            Cancel\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Card>\n        </div>\n    );\n};\n\nexport default CareerAdminForm; "],"names":["CareerAdminForm","form","Form","useForm","navigate","useNavigate","id","useParams","isEditMode","fileList","setFileList","useState","submitApplication","useSubmitApplicationMutation","updateApplication","useUpdateApplicationMutation","data","editData","isLoading","isLoadingEdit","useGetApplicationByIdQuery","skip","useEffect","setFieldsValue","name","email","contactNo","address","postAppliedFor","resumeFile","uid","split","pop","status","url","uploadProps","beforeUpload","file","type","message","error","maxCount","onChange","newFileList","style","padding","children","jsx","Breadcrumb","items","title","onClick","cursor","marginBottom","Card","jsxs","layout","onFinish","async","values","formData","FormData","append","originFileObj","unwrap","success","disabled","Item","label","rules","required","min","Input","pattern","TextArea","rows","length","Upload","Button","icon","UploadOutlined","htmlType","loading","marginLeft"],"mappings":"kjCAUA,MAAMA,EAAkB,KACpB,MAAOC,GAAQC,EAAKC,UACdC,EAAWC,KACXC,GAAEA,GAAOC,IACTC,IAAeF,GACdG,EAAUC,GAAeC,EAAAA,SAAS,KAGlCC,GAAqBC,KACrBC,GAAqBC,KACpBC,KAAMC,EAAUC,UAAWC,GAAkBC,EAA2Bd,EAAI,CAChFe,MAAOb,IAIXc,EAAAA,WAAU,KACFd,GAAcS,GAAUD,OACxBf,EAAKsB,eAAe,CAChBC,KAAMP,EAASD,KAAKQ,KACpBC,MAAOR,EAASD,KAAKS,MACrBC,UAAWT,EAASD,KAAKU,UACzBC,QAASV,EAASD,KAAKW,QACvBC,eAAgBX,EAASD,KAAKY,iBAI9BX,EAASD,KAAKa,YACFnB,EAAA,CACR,CACIoB,IAAK,KACLN,KAAMP,EAASD,KAAKa,WAAWE,MAAM,KAAKC,MAC1CC,OAAQ,OACRC,IAAKjB,EAASD,KAAKa,cAG/B,GAEL,CAACZ,EAAUhB,EAAMO,IAEd,MA+BA2B,EAAc,CAChBC,aAAeC,IACiB,oBAAdA,EAAKC,MAEfC,EAAQC,MAAM,mCAGX,GAEXC,SAAU,EACVhC,WACAiC,SAfqB,EAAGjC,SAAUkC,MAClCjC,EAAYiC,EAAW,GAiB3B,cACK,MAAI,CAAAC,MAAO,CAAEC,QAAS,QACnBC,SAAA,CAAAC,EAAAA,IAACC,EAAA,CACGC,MAAO,CACH,CACIC,MAAOH,EAAAA,IAAC,OAAK,CAAAI,QAAS,IAAM/C,EAAS,cAAewC,MAAO,CAAEQ,OAAQ,WAAaN,SAElF,eAEJ,CACII,MAAOH,EAAAA,IAAC,OAAK,CAAAI,QAAS,IAAM/C,EAAS,iBAAkBwC,MAAO,CAAEQ,OAAQ,WAAaN,SAErF,yBAEJ,CAAEI,MAAO1C,EAAa,mBAAqB,oBAE/CoC,MAAO,CAAES,aAAc,UAG1BN,EAAAA,IAAAO,EAAA,CAAKJ,MAAO1C,EAAa,mBAAqB,sBAC3CsC,SAAAS,EAAAA,KAACrD,EAAA,CACGD,OACAuD,OAAO,WACPC,SApECC,MAAOC,IAChB,IACM,MAAAC,EAAW,IAAIC,SACZD,EAAAE,OAAO,OAAQH,EAAOnC,MACtBoC,EAAAE,OAAO,QAASH,EAAOlC,OACvBmC,EAAAE,OAAO,YAAaH,EAAOjC,WAC3BkC,EAAAE,OAAO,UAAWH,EAAOhC,SACzBiC,EAAAE,OAAO,iBAAkBH,EAAO/B,gBAGrCnB,EAAS,IAAIsD,eACbH,EAASE,OAAO,aAAcrD,EAAS,GAAGsD,eAG1CvD,SACMM,EAAkB,CAAER,KAAIsD,aAAYI,SAC1CzB,EAAQ0B,QAAQ,6CAEVrD,EAAkBgD,GAAUI,SAClCzB,EAAQ0B,QAAQ,wCAEpB7D,EAAS,uBACJoC,GACGD,EAAAC,MAAMA,EAAMD,SAAW,uBAAsB,GA8C7C2B,SAAU/C,EAEV2B,SAAA,CAAAC,EAAAA,IAAC7C,EAAKiE,KAAL,CACG3C,KAAK,OACL4C,MAAM,OACNC,MAAO,CACH,CAAEC,UAAU,EAAM/B,QAAS,qBAC3B,CAAEgC,IAAK,EAAGhC,QAAS,uCAGvBO,eAAC0B,EAAM,CAAA,KAGXzB,EAAAA,IAAC7C,EAAKiE,KAAL,CACG3C,KAAK,QACL4C,MAAM,QACNC,MAAO,CACH,CAAEC,UAAU,EAAM/B,QAAS,sBAC3B,CAAED,KAAM,QAASC,QAAS,+BAG9BO,eAAC0B,EAAM,CAAA,KAGXzB,EAAAA,IAAC7C,EAAKiE,KAAL,CACG3C,KAAK,YACL4C,MAAM,iBACNC,MAAO,CACH,CAAEC,UAAU,EAAM/B,QAAS,+BAC3B,CAAEkC,QAAS,cAAelC,QAAS,yCAGvCO,eAAC0B,EAAM,CAAA,KAGXzB,EAAAA,IAAC7C,EAAKiE,KAAL,CACG3C,KAAK,UACL4C,MAAM,UACNC,MAAO,CACH,CAAEC,UAAU,EAAM/B,QAAS,wBAC3B,CAAEgC,IAAK,EAAGhC,QAAS,0CAGvBO,SAACC,EAAAA,IAAAyB,EAAME,SAAN,CAAeC,KAAM,MAG1B5B,EAAAA,IAAC7C,EAAKiE,KAAL,CACG3C,KAAK,iBACL4C,MAAM,mBACNC,MAAO,CAAC,CAAEC,UAAU,EAAM/B,QAAS,kCAEnCO,eAAC0B,EAAM,CAAA,KAGXzB,EAAAA,IAAC7C,EAAKiE,KAAL,CACG3C,KAAK,aACL4C,MAAM,SACNC,MAAO,CACH,CACIC,UAAW9D,IAAeC,EAASmE,OACnCrC,QAAS,yBAIjBO,SAACC,EAAAA,IAAA8B,EAAA,IAAW1C,EACRW,eAACgC,EAAO,CAAAC,KAAOhC,EAAAA,IAAAiC,EAAA,CAAe,GACzBlC,SAAArC,EAASmE,OAAS,iBAAmB,sBAKlDrB,EAAAA,KAACrD,EAAKiE,KAAL,CACGrB,SAAA,CAACC,EAAAA,IAAA+B,EAAA,CAAOxC,KAAK,UAAU2C,SAAS,SAASC,QAAS/D,EAC7C2B,SAAatC,EAAA,SAAW,WAE7BuC,EAAAA,IAAC+B,EAAA,CACGlC,MAAO,CAAEuC,WAAY,QACrBhC,QAAS,IAAM/C,EAAS,iBAC3B0C,SAAA,qBAMjB"}