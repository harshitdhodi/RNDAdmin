import{dO as i,f as A,a as N,r as b,e3 as P,en as y,eo as C,j as e,dS as I,dT as n,dU as w,be as u,dV as E,dn as o}from"./index-6ENpBTB9-1767263781753.js";import{C as q}from"./index-hweWAVxv-1767263781753.js";import"./Skeleton-YRYyQZOV-1767263781753.js";const S=()=>{const[p]=i.useForm(),d=A(),{id:c}=N(),r=!!c,[l,h]=b.useState([]),[j]=P(),[g]=y(),{data:a,isLoading:x}=C(c,{skip:!r});b.useEffect(()=>{r&&(a!=null&&a.data)&&(p.setFieldsValue({name:a.data.name,email:a.data.email,contactNo:a.data.contactNo,address:a.data.address,postAppliedFor:a.data.postAppliedFor}),a.data.resumeFile&&h([{uid:"-1",name:a.data.resumeFile.split("/").pop(),status:"done",url:a.data.resumeFile}]))},[a,p,r]);const F=async t=>{var m;try{const s=new FormData;s.append("name",t.name),s.append("email",t.email),s.append("contactNo",t.contactNo),s.append("address",t.address),s.append("postAppliedFor",t.postAppliedFor),(m=l[0])!=null&&m.originFileObj&&s.append("resumeFile",l[0].originFileObj),r?(await g({id:c,formData:s}).unwrap(),o.success("Application updated successfully!")):(await j(s).unwrap(),o.success("Application submitted successfully!")),d("/career-table")}catch(s){o.error(s.message||"Something went wrong")}},f={beforeUpload:t=>(t.type==="application/pdf"||o.error("You can only upload PDF files!"),!1),maxCount:1,fileList:l,onChange:({fileList:t})=>{h(t)}};return e.jsxs("div",{className:"p-5",children:[e.jsx(I,{items:[{title:e.jsx("span",{onClick:()=>d("/dashboard"),className:"cursor-pointer",children:"Dashboard"})},{title:e.jsx("span",{onClick:()=>d("/career-table"),className:"cursor-pointer",children:"Career Applications"})},{title:r?"Edit Application":"Add Application"}],className:"mb-4"}),e.jsx(q,{title:r?"Edit Application":"Add New Application",children:e.jsxs(i,{form:p,layout:"vertical",onFinish:F,disabled:x,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter name"},{min:2,message:"Name must be at least 2 characters"}],children:e.jsx(n,{})}),e.jsx(i.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(n,{})}),e.jsx(i.Item,{name:"contactNo",label:"Contact Number",rules:[{required:!0,message:"Please enter contact number"},{pattern:/^[0-9]{10}$/,message:"Please enter a valid 10-digit number"}],children:e.jsx(n,{})}),e.jsx(i.Item,{name:"address",label:"Address",rules:[{required:!0,message:"Please enter address"},{min:5,message:"Address must be at least 5 characters"}],children:e.jsx(n.TextArea,{rows:4})}),e.jsx(i.Item,{name:"postAppliedFor",label:"Post Applied For",rules:[{required:!0,message:"Please enter post applied for"}],children:e.jsx(n,{})}),e.jsx(i.Item,{name:"resumeFile",label:"Resume",rules:[{required:!r&&!l.length,message:"Please upload resume"}],children:e.jsx(w,{...f,children:e.jsx(u,{icon:e.jsx(E,{}),children:l.length?"Replace Resume":"Upload Resume"})})}),e.jsxs(i.Item,{children:[e.jsx(u,{type:"primary",htmlType:"submit",loading:x,children:r?"Update":"Submit"}),e.jsx(u,{className:"ml-3",onClick:()=>d("/career-table"),children:"Cancel"})]})]})})]})};export{S as default};
