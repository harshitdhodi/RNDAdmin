import{bN as F,bU as A,bV as y,j as e}from"./main-4qLjs9DC-1744362991634.js";import{f as P,i as C,c as h}from"./vendor-C9iLKeEQ-1744362991634.js";import{F as i}from"./index-DW8oOCb8-1744362991634.js";import{B as I}from"./Breadcrumb-M9mtmHv2-1744362991634.js";import{C as N}from"./index-B3G48YuP-1744362991634.js";import{I as n}from"./index-BsE1OYP1-1744362991634.js";import{U as w,R as E}from"./index-DDs19gMu-1744362991634.js";import{B as c}from"./index-KVtzR29S-1744362991634.js";import{s as p}from"./index-Bd6uC6rh-1744362991634.js";import"./toArray-Bbgf03cS-1744362991634.js";import"./CheckCircleFilled-C3q27Cea-1744362991634.js";import"./ExclamationCircleFilled-CcTejJYc-1744362991634.js";import"./dropdown-D-MlIyxB-1744362991634.js";import"./EllipsisOutlined-BU33D6Nw-1744362991634.js";import"./Skeleton-CAwKbkRC-1744362991634.js";import"./PlusOutlined-Z6eIRuSQ-1744362991634.js";import"./TextArea-CI-mQ3ZF-1744362991634.js";import"./fade-C9qzS4sj-1744362991634.js";import"./useForceUpdate-D5st5PaX-1744362991634.js";import"./DeleteOutlined-_qmzhm1M-1744362991634.js";import"./DownloadOutlined-ByB2redz-1744362991634.js";import"./CheckOutlined-BpOl7NFo-1744362991634.js";import"./InfoCircleFilled-BS3KWSKr-1744362991634.js";const _=()=>{const[m]=i.useForm(),l=P(),{id:d}=C(),r=!!d,[o,u]=h.useState([]),[x]=F(),[b]=A(),{data:t,isLoading:f}=y(d,{skip:!r});h.useEffect(()=>{r&&t?.data&&(m.setFieldsValue({name:t.data.name,email:t.data.email,contactNo:t.data.contactNo,address:t.data.address,postAppliedFor:t.data.postAppliedFor}),t.data.resumeFile&&u([{uid:"-1",name:t.data.resumeFile.split("/").pop(),status:"done",url:t.data.resumeFile}]))},[t,m,r]);const g=async s=>{try{const a=new FormData;a.append("name",s.name),a.append("email",s.email),a.append("contactNo",s.contactNo),a.append("address",s.address),a.append("postAppliedFor",s.postAppliedFor),o[0]?.originFileObj&&a.append("resumeFile",o[0].originFileObj),r?(await b({id:d,formData:a}).unwrap(),p.success("Application updated successfully!")):(await x(a).unwrap(),p.success("Application submitted successfully!")),l("/career-table")}catch(a){p.error(a.message||"Something went wrong")}},j={beforeUpload:s=>(s.type==="application/pdf"||p.error("You can only upload PDF files!"),!1),maxCount:1,fileList:o,onChange:({fileList:s})=>{u(s)}};return e.jsxs("div",{style:{padding:"20px"},children:[e.jsx(I,{items:[{title:e.jsx("span",{onClick:()=>l("/dashboard"),style:{cursor:"pointer"},children:"Dashboard"})},{title:e.jsx("span",{onClick:()=>l("/career-table"),style:{cursor:"pointer"},children:"Career Applications"})},{title:r?"Edit Application":"Add Application"}],style:{marginBottom:"16px"}}),e.jsx(N,{title:r?"Edit Application":"Add New Application",children:e.jsxs(i,{form:m,layout:"vertical",onFinish:g,disabled:f,children:[e.jsx(i.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter name"},{min:2,message:"Name must be at least 2 characters"}],children:e.jsx(n,{})}),e.jsx(i.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(n,{})}),e.jsx(i.Item,{name:"contactNo",label:"Contact Number",rules:[{required:!0,message:"Please enter contact number"},{pattern:/^[0-9]{10}$/,message:"Please enter a valid 10-digit number"}],children:e.jsx(n,{})}),e.jsx(i.Item,{name:"address",label:"Address",rules:[{required:!0,message:"Please enter address"},{min:5,message:"Address must be at least 5 characters"}],children:e.jsx(n.TextArea,{rows:4})}),e.jsx(i.Item,{name:"postAppliedFor",label:"Post Applied For",rules:[{required:!0,message:"Please enter post applied for"}],children:e.jsx(n,{})}),e.jsx(i.Item,{name:"resumeFile",label:"Resume",rules:[{required:!r&&!o.length,message:"Please upload resume"}],children:e.jsx(w,{...j,children:e.jsx(c,{icon:e.jsx(E,{}),children:o.length?"Replace Resume":"Upload Resume"})})}),e.jsxs(i.Item,{children:[e.jsx(c,{type:"primary",htmlType:"submit",loading:f,children:r?"Update":"Submit"}),e.jsx(c,{style:{marginLeft:"10px"},onClick:()=>l("/career-table"),children:"Cancel"})]})]})})]})};export{_ as default};
