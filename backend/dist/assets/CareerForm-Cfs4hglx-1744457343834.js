import{e as A,a as N,r as x,c1 as P,c8 as y,c9 as C,j as e}from"./index-CTmdbOVv-1744457343834.js";import{F as r}from"./index-DtqtsP1R-1744457343834.js";import{B as I}from"./Breadcrumb-DJAUqnFw-1744457343834.js";import{C as w}from"./index-DDfYYaZv-1744457343834.js";import{I as l}from"./index-BS1FdLLq-1744457343834.js";import{U as E,R}from"./index-DCIc4WHv-1744457343834.js";import{B as u}from"./index-DeSw4PMk-1744457343834.js";import{s as m}from"./index-iEAMcUcB-1744457343834.js";import"./toArray-Bbgf03cS-1744457343834.js";import"./CheckCircleFilled-DwY5cLSL-1744457343834.js";import"./ExclamationCircleFilled-DyLQxQ7Z-1744457343834.js";import"./dropdown-CIskmZK0-1744457343834.js";import"./EllipsisOutlined-owFl0lzX-1744457343834.js";import"./Skeleton-DSd5zUxR-1744457343834.js";import"./PlusOutlined-B1--_oG--1744457343834.js";import"./TextArea-ez4QYfQK-1744457343834.js";import"./fade-C_oOCnnY-1744457343834.js";import"./useForceUpdate-DfNexeYC-1744457343834.js";import"./DeleteOutlined-g90zYKVR-1744457343834.js";import"./DownloadOutlined-DceT0LjC-1744457343834.js";import"./CheckOutlined-XP0yS5yI-1744457343834.js";import"./InfoCircleFilled-BWy8Yegx-1744457343834.js";const _=()=>{const[p]=r.useForm(),n=A(),{id:d}=N(),i=!!d,[o,h]=x.useState([]),[b]=P(),[j]=y(),{data:a,isLoading:f}=C(d,{skip:!i});x.useEffect(()=>{i&&(a!=null&&a.data)&&(p.setFieldsValue({name:a.data.name,email:a.data.email,contactNo:a.data.contactNo,address:a.data.address,postAppliedFor:a.data.postAppliedFor}),a.data.resumeFile&&h([{uid:"-1",name:a.data.resumeFile.split("/").pop(),status:"done",url:a.data.resumeFile}]))},[a,p,i]);const g=async t=>{var c;try{const s=new FormData;s.append("name",t.name),s.append("email",t.email),s.append("contactNo",t.contactNo),s.append("address",t.address),s.append("postAppliedFor",t.postAppliedFor),(c=o[0])!=null&&c.originFileObj&&s.append("resumeFile",o[0].originFileObj),i?(await j({id:d,formData:s}).unwrap(),m.success("Application updated successfully!")):(await b(s).unwrap(),m.success("Application submitted successfully!")),n("/career-table")}catch(s){m.error(s.message||"Something went wrong")}},F={beforeUpload:t=>(t.type==="application/pdf"||m.error("You can only upload PDF files!"),!1),maxCount:1,fileList:o,onChange:({fileList:t})=>{h(t)}};return e.jsxs("div",{className:"p-5",children:[e.jsx(I,{items:[{title:e.jsx("span",{onClick:()=>n("/dashboard"),className:"cursor-pointer",children:"Dashboard"})},{title:e.jsx("span",{onClick:()=>n("/career-table"),className:"cursor-pointer",children:"Career Applications"})},{title:i?"Edit Application":"Add Application"}],className:"mb-4"}),e.jsx(w,{title:i?"Edit Application":"Add New Application",children:e.jsxs(r,{form:p,layout:"vertical",onFinish:g,disabled:f,children:[e.jsx(r.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter name"},{min:2,message:"Name must be at least 2 characters"}],children:e.jsx(l,{})}),e.jsx(r.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(l,{})}),e.jsx(r.Item,{name:"contactNo",label:"Contact Number",rules:[{required:!0,message:"Please enter contact number"},{pattern:/^[0-9]{10}$/,message:"Please enter a valid 10-digit number"}],children:e.jsx(l,{})}),e.jsx(r.Item,{name:"address",label:"Address",rules:[{required:!0,message:"Please enter address"},{min:5,message:"Address must be at least 5 characters"}],children:e.jsx(l.TextArea,{rows:4})}),e.jsx(r.Item,{name:"postAppliedFor",label:"Post Applied For",rules:[{required:!0,message:"Please enter post applied for"}],children:e.jsx(l,{})}),e.jsx(r.Item,{name:"resumeFile",label:"Resume",rules:[{required:!i&&!o.length,message:"Please upload resume"}],children:e.jsx(E,{...F,children:e.jsx(u,{icon:e.jsx(R,{}),children:o.length?"Replace Resume":"Upload Resume"})})}),e.jsxs(r.Item,{children:[e.jsx(u,{type:"primary",htmlType:"submit",loading:f,children:i?"Update":"Submit"}),e.jsx(u,{className:"ml-3",onClick:()=>n("/career-table"),children:"Cancel"})]})]})})]})};export{_ as default};
