import{dO as s,r as t,j as e,dS as c,du as S,dU as U,bd as g,dV as v,c as l,dn as d}from"./index-Bx7n1Wn1-1770007580750.js";import{J as E}from"./jodit-react-D_Q1Xs5q-1770007580750.js";import{I as F}from"./index-CfneM_8K-1770007580750.js";import"./index-Djka3w5H-1770007580750.js";const{Title:w}=S,J=()=>{const[n]=s.useForm(),[m,f]=t.useState(""),[h,p]=t.useState(null),[u,I]=t.useState(null),[o,x]=t.useState(null),i=()=>{l.get("/api/careerInfo").then(a=>{if(a.data.length>0){const r=a.data[0];x(r),f(r.info),n.setFieldsValue({info:r.info}),r.image&&I(`/api/image/download/${r.image}`)}}).catch(a=>{console.error("Error fetching career info:",a)})};t.useEffect(()=>{i()},[n]);const j=a=>{f(a)},C=({file:a})=>{p(a),I(URL.createObjectURL(a))},b=async a=>{const r=new FormData;r.append("info",m),h&&r.append("image",h);try{o?(await l.put(`/api/careerInfo/${o._id}`,r),d.success("Career info updated successfully"),i()):(await l.post("/api/careerInfo",r),d.success("Career info created successfully"),i())}catch(y){console.error("Error saving career info:",y),d.error("Error saving career info")}};return e.jsxs("div",{children:[e.jsxs(c,{children:[e.jsx(c.Item,{href:"/dashboard",children:"Dashboard"}),e.jsx(c.Item,{children:"Career Info"})]}),e.jsx(w,{level:2,className:"mx-4",children:"Career Info"}),e.jsxs(s,{form:n,onFinish:b,layout:"vertical",children:[e.jsx(s.Item,{label:"Info",name:"info",rules:[{required:!0,message:"Please enter the info"}],children:e.jsx(E,{value:m,onChange:j})}),e.jsxs(s.Item,{label:"Image",name:"image",children:[u&&e.jsx(F,{width:200,src:u,alt:"Career Info Image"}),e.jsx(U,{beforeUpload:()=>!1,onChange:C,maxCount:1,children:e.jsx(g,{icon:e.jsx(v,{}),children:"Select Image"})})]}),e.jsx(s.Item,{children:e.jsx(g,{type:"primary",htmlType:"submit",children:o?"Update":"Submit"})})]})]})};export{J as default};
