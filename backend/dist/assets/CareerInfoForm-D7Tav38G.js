import{j as e,L as t,B as a}from"./main-BQqr2_19.js";import{r as i}from"./vendor-router-DoRotgOs.js";import{a as s}from"./vendor-utils-CfKmydC0.js";import{F as r}from"./form-8DYzE22W.js";import{C as o,b as l,a as n}from"./card-CPQ_AIkA.js";import{R as c}from"./index-BEyUZcsN.js";/* empty css                   */import"./vendor-react-DD_RYU77.js";import"./index.esm-CSDyVtrl.js";import"./isEqual-DwlFmuh_.js";const d=()=>{const[d]=r.useForm(),[f,m]=i.useState(""),[u,p]=i.useState(null),[x,h]=i.useState(null),[g,j]=i.useState(null),b=async()=>{try{const e=await s.get("/api/careerInfo");if(e.data.length>0){const t=e.data[0];j(t),m(t.info),d.setFieldsValue({info:t.info}),t.image&&h(`/api/image/download/${t.image}`)}}catch(e){toast({title:"Error",description:"Failed to fetch career info.",variant:"destructive"})}};i.useEffect((()=>{b()}),[d]);return e.jsxs(o,{className:"p-6 max-w-2xl mx-auto",children:[e.jsx(l,{children:e.jsx("h2",{className:"text-xl font-bold",children:"Career Info"})}),e.jsx(n,{children:e.jsxs(r,{form:d,layout:"vertical",onFinish:async()=>{const e=new FormData;e.append("info",f),u&&e.append("image",u);try{g?(await s.put(`/api/careerInfo/${g._id}`,e),toast({title:"Success",description:"Career info updated successfully!"})):(await s.post("/api/careerInfo",e),toast({title:"Success",description:"Career info created successfully!"})),b()}catch(t){toast({title:"Error",description:"Failed to save career info.",variant:"destructive"})}},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"info",children:"Info"}),e.jsx(c,{id:"info",value:f,onChange:e=>{m(e);const t=(new DOMParser).parseFromString(e,"text/html"),a=t.getElementsByTagName("*");for(let i of a)"white"!==i.style.color&&"#ffffff"!==i.style.color||(i.style.color="black");m(t.body.innerHTML)},modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","blockquote"],[{align:[]}],["link","image","video"],["clean"]]},formats:["header","font","list","bold","italic","underline","blockquote","align","link","image","video"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"image",children:"Image"}),x&&e.jsx("img",{className:"w-32 mb-2 rounded",src:x,alt:"Career Info"}),e.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&(p(t),h(URL.createObjectURL(t)))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsx(a,{type:"submit",className:"w-full",children:g?"Update Career Info":"Submit Career Info"})]})})]})};export{d as default};
//# sourceMappingURL=CareerInfoForm-D7Tav38G.js.map
