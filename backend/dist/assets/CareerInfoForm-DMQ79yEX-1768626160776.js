import{dP as s,r as t,j as e,dT as c,dv as v,dV as E,be as p,dW as S,c as l,dp as d}from"./index-BlNJerT2-1768626160776.js";import{J as U}from"./jodit-react-D4Kkoka3-1768626160776.js";import{I as F}from"./index-XsoNuYwV-1768626160776.js";import"./index-B86e0TWB-1768626160776.js";const{Title:w}=v,J=()=>{const[o]=s.useForm(),[m,f]=t.useState(""),[h,g]=t.useState(null),[u,I]=t.useState(null),[n,x]=t.useState(null),i=()=>{l.get("/api/careerInfo").then(a=>{if(a.data.length>0){const r=a.data[0];x(r),f(r.info),o.setFieldsValue({info:r.info}),r.image&&I(`/api/image/download/${r.image}`)}}).catch(a=>{console.error("Error fetching career info:",a)})};t.useEffect(()=>{i()},[o]);const j=a=>{f(a)},C=({file:a})=>{g(a),I(URL.createObjectURL(a))},b=async a=>{const r=new FormData;r.append("info",m),h&&r.append("image",h);try{n?(await l.put(`/api/careerInfo/${n._id}`,r),d.success("Career info updated successfully"),i()):(await l.post("/api/careerInfo",r),d.success("Career info created successfully"),i())}catch(y){console.error("Error saving career info:",y),d.error("Error saving career info")}};return e.jsxs("div",{children:[e.jsxs(c,{children:[e.jsx(c.Item,{href:"/dashboard",children:"Dashboard"}),e.jsx(c.Item,{children:"Career Info"})]}),e.jsx(w,{level:2,className:"mx-4",children:"Career Info"}),e.jsxs(s,{form:o,onFinish:b,layout:"vertical",children:[e.jsx(s.Item,{label:"Info",name:"info",rules:[{required:!0,message:"Please enter the info"}],children:e.jsx(U,{value:m,onChange:j})}),e.jsxs(s.Item,{label:"Image",name:"image",children:[u&&e.jsx(F,{width:200,src:u,alt:"Career Info Image"}),e.jsx(E,{beforeUpload:()=>!1,onChange:C,maxCount:1,children:e.jsx(p,{icon:e.jsx(S,{}),children:"Select Image"})})]}),e.jsx(s.Item,{children:e.jsx(p,{type:"primary",htmlType:"submit",children:n?"Update":"Submit"})})]})]})};export{J as default};
