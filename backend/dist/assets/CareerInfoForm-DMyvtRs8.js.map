{"version":3,"file":"CareerInfoForm-DMyvtRs8.js","sources":["../../src/websiteBackend/career/CareerInfoForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Form, Input, Button, Upload, message, Image, Breadcrumb, Typography } from 'antd';\r\nimport { UploadOutlined, HomeOutlined } from '@ant-design/icons';\r\nimport JoditEditor from 'jodit-react';\r\nimport axios from 'axios';\r\n\r\nconst { Title } = Typography;\r\n\r\nconst CareerInfoForm = () => {\r\n  const [form] = Form.useForm();\r\n  const [info, setInfo] = useState('');\r\n  const [image, setImage] = useState(null);\r\n  const [imageUrl, setImageUrl] = useState(null);\r\n  const [careerInfo, setCareerInfo] = useState(null);\r\n\r\n  const fetchCareerInfo = () => {\r\n    axios.get('/api/careerInfo')\r\n      .then(response => {\r\n        if (response.data.length > 0) {\r\n          const data = response.data[0];\r\n          setCareerInfo(data);\r\n          setInfo(data.info);\r\n          form.setFieldsValue({ info: data.info });\r\n          if (data.image) {\r\n            setImageUrl(`/api/image/download/${data.image}`);\r\n          }\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching career info:', error);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCareerInfo();\r\n  }, [form]);\r\n\r\n  const handleInfoChange = (newInfo) => {\r\n    setInfo(newInfo);\r\n  };\r\n\r\n  const handleImageChange = ({ file }) => {\r\n    setImage(file);\r\n    setImageUrl(URL.createObjectURL(file));\r\n  };\r\n\r\n  const handleSubmit = async (values) => {\r\n    const formData = new FormData();\r\n    formData.append('info', info);\r\n    if (image) {\r\n      formData.append('image', image);\r\n    }\r\n\r\n    try {\r\n      if (careerInfo) {\r\n        // Update existing career info\r\n        await axios.put(`/api/careerInfo/${careerInfo._id}`, formData);\r\n        message.success('Career info updated successfully');\r\n        fetchCareerInfo(); // Fetch updated data\r\n      } else {\r\n        // Create new career info\r\n        await axios.post('/api/careerInfo', formData);\r\n        message.success('Career info created successfully');\r\n        fetchCareerInfo(); // Fetch updated data\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving career info:', error);\r\n      message.error('Error saving career info');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Breadcrumb>\r\n        <Breadcrumb.Item href=\"/dashboard\">\r\n        Dashboard\r\n        </Breadcrumb.Item>\r\n       \r\n        <Breadcrumb.Item>Career Info</Breadcrumb.Item>\r\n      </Breadcrumb>\r\n      <Title level={2} style={{ margin: '16px 0' }}>Career Info</Title>\r\n      <Form form={form} onFinish={handleSubmit} layout=\"vertical\">\r\n        <Form.Item label=\"Info\" name=\"info\" rules={[{ required: true, message: 'Please enter the info' }]}>\r\n          <JoditEditor\r\n            value={info}\r\n            onChange={handleInfoChange}\r\n          />\r\n        </Form.Item>\r\n        <Form.Item label=\"Image\" name=\"image\">\r\n          {imageUrl && (\r\n            <Image\r\n              width={200}\r\n              src={imageUrl}\r\n              alt=\"Career Info Image\"\r\n            />\r\n          )}\r\n          <Upload\r\n            beforeUpload={() => false}\r\n            onChange={handleImageChange}\r\n            maxCount={1}\r\n          >\r\n            <Button icon={<UploadOutlined />}>Select Image</Button>\r\n          </Upload>\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            {careerInfo ? 'Update' : 'Submit'}\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CareerInfoForm;"],"names":["Title","Typography","CareerInfoForm","form","Form","useForm","info","setInfo","useState","image","setImage","imageUrl","setImageUrl","careerInfo","setCareerInfo","fetchCareerInfo","axios","get","then","response","data","length","setFieldsValue","catch","error","useEffect","children","jsxs","Breadcrumb","jsx","Item","href","level","style","margin","onFinish","async","values","formData","FormData","append","put","_id","message","success","post","layout","label","name","rules","required","JoditEditor","value","onChange","newInfo","Image","width","src","alt","Upload","beforeUpload","file","URL","createObjectURL","maxCount","Button","icon","UploadOutlined","type","htmlType"],"mappings":"ykCAMA,MAAMA,MAAEA,GAAUC,EAEZC,EAAiB,KACrB,MAAOC,GAAQC,EAAKC,WACbC,EAAMC,GAAWC,EAAAA,SAAS,KAC1BC,EAAOC,GAAYF,EAAAA,SAAS,OAC5BG,EAAUC,GAAeJ,EAAAA,SAAS,OAClCK,EAAYC,GAAiBN,EAAAA,SAAS,MAEvCO,EAAkB,KACtBC,EAAMC,IAAI,mBACPC,MAAiBC,IACZ,GAAAA,EAASC,KAAKC,OAAS,EAAG,CACtB,MAAAD,EAAOD,EAASC,KAAK,GAC3BN,EAAcM,GACdb,EAAQa,EAAKd,MACbH,EAAKmB,eAAe,CAAEhB,KAAMc,EAAKd,OAC7Bc,EAAKX,OACKG,EAAA,uBAAuBQ,EAAKX,QAC1C,KAGHc,OAAeC,IACoC,GACnD,EAGLC,EAAAA,WAAU,KACQV,GAAA,GACf,CAACZ,IAoCJ,cACG,MACC,CAAAuB,SAAA,CAAAC,OAACC,EACC,CAAAF,SAAA,CAAAG,EAAAA,IAACD,EAAWE,KAAX,CAAgBC,KAAK,aAAaL,SAEnC,cAECG,EAAAA,IAAAD,EAAWE,KAAX,CAAgBJ,SAAW,mBAE9BG,EAAAA,IAAC7B,GAAMgC,MAAO,EAAGC,MAAO,CAAEC,OAAQ,UAAYR,SAAW,uBACxDtB,EAAK,CAAAD,OAAYgC,SAnCDC,MAAOC,IACpB,MAAAC,EAAW,IAAIC,SACZD,EAAAE,OAAO,OAAQlC,GACpBG,GACO6B,EAAAE,OAAO,QAAS/B,GAGvB,IACEI,SAEIG,EAAMyB,IAAI,mBAAmB5B,EAAW6B,MAAOJ,GACrDK,EAAQC,QAAQ,oCACA7B,YAGVC,EAAM6B,KAAK,kBAAmBP,GACpCK,EAAQC,QAAQ,oCACA7B,WAEXS,GAEPmB,EAAQnB,MAAM,2BAA0B,GAcEsB,OAAO,WAC/CpB,SAAA,CAAAG,EAAAA,IAACzB,EAAK0B,KAAL,CAAUiB,MAAM,OAAOC,KAAK,OAAOC,MAAO,CAAC,CAAEC,UAAU,EAAMP,QAAS,0BACrEjB,SAAAG,EAAAA,IAACsB,EAAA,CACCC,MAAO9C,EACP+C,SAhDgBC,IACxB/C,EAAQ+C,EAAO,aAkDVlD,EAAK0B,KAAL,CAAUiB,MAAM,QAAQC,KAAK,QAC3BtB,SAAA,CACCf,GAAAkB,EAAAA,IAAC0B,EAAA,CACCC,MAAO,IACPC,IAAK9C,EACL+C,IAAI,sBAGR7B,EAAAA,IAAC8B,EAAA,CACCC,aAAc,KAAM,EACpBP,SAzDgB,EAAGQ,WAC3BnD,EAASmD,GACGjD,EAAAkD,IAAIC,gBAAgBF,GAAK,EAwD7BG,SAAU,EAEVtC,eAACuC,EAAO,CAAAC,KAAOrC,MAAAsC,EAAA,CAAe,GAAIzC,SAAY,sBAGjDG,EAAAA,IAAAzB,EAAK0B,KAAL,CACCJ,SAACG,EAAAA,IAAAoC,EAAA,CAAOG,KAAK,UAAUC,SAAS,SAC7B3C,SAAab,EAAA,SAAW,kBAIjC"}