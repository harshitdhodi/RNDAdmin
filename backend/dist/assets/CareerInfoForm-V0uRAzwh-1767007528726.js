import{dN as s,r as t,j as e,dR as c,dt as U,dT as v,be as g,dU as E,c as l,dm as d}from"./index-DgWUCWkU-1767007528726.js";import{J as S}from"./jodit-react-CEYlRlyi-1767007528726.js";import{I as F}from"./index-bQnOC6rm-1767007528726.js";import"./index-DjAlXMiT-1767007528726.js";const{Title:w}=U,J=()=>{const[o]=s.useForm(),[m,f]=t.useState(""),[h,p]=t.useState(null),[u,I]=t.useState(null),[n,x]=t.useState(null),i=()=>{l.get("/api/careerInfo").then(a=>{if(a.data.length>0){const r=a.data[0];x(r),f(r.info),o.setFieldsValue({info:r.info}),r.image&&I(`/api/image/download/${r.image}`)}}).catch(a=>{console.error("Error fetching career info:",a)})};t.useEffect(()=>{i()},[o]);const j=a=>{f(a)},C=({file:a})=>{p(a),I(URL.createObjectURL(a))},b=async a=>{const r=new FormData;r.append("info",m),h&&r.append("image",h);try{n?(await l.put(`/api/careerInfo/${n._id}`,r),d.success("Career info updated successfully"),i()):(await l.post("/api/careerInfo",r),d.success("Career info created successfully"),i())}catch(y){console.error("Error saving career info:",y),d.error("Error saving career info")}};return e.jsxs("div",{children:[e.jsxs(c,{children:[e.jsx(c.Item,{href:"/dashboard",children:"Dashboard"}),e.jsx(c.Item,{children:"Career Info"})]}),e.jsx(w,{level:2,className:"mx-4",children:"Career Info"}),e.jsxs(s,{form:o,onFinish:b,layout:"vertical",children:[e.jsx(s.Item,{label:"Info",name:"info",rules:[{required:!0,message:"Please enter the info"}],children:e.jsx(S,{value:m,onChange:j})}),e.jsxs(s.Item,{label:"Image",name:"image",children:[u&&e.jsx(F,{width:200,src:u,alt:"Career Info Image"}),e.jsx(v,{beforeUpload:()=>!1,onChange:C,maxCount:1,children:e.jsx(g,{icon:e.jsx(E,{}),children:"Select Image"})})]}),e.jsx(s.Item,{children:e.jsx(g,{type:"primary",htmlType:"submit",children:n?"Update":"Submit"})})]})]})};export{J as default};
