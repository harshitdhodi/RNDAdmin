import{e,B as r,F as t,a as o,M as i,s}from"./antd-CxduzDaN.js";import{j as a}from"./react-BfBsRgn0.js";import{b2 as c,b3 as l}from"./index-mCSb4W1J.js";import{O as n,J as p,G as m,H as d}from"./ant-design-icons-DoIDTG1a.js";import{a as j}from"./react-router-DUJjWq5j.js";import"./@ant-design-DttPmOfw.js";import"./rc-util-CQtTJgfq.js";import"./@babel-BfC2A0EA.js";import"./react-is-BaRe0U6l.js";import"./react-dom-DwrudmHt.js";import"./classnames-C3ovBj6j.js";import"./scheduler-BFk34ZWe.js";import"./@emotion-Czw0TW3x.js";import"./stylis-IVPcsLSI.js";import"./@ctrl-B2IeE8ye.js";import"./rc-motion-Cs3GDHoo.js";import"./@rc-component-BB24pTyE.js";import"./rc-resize-observer-DUJXZwxn.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./rc-dialog-BGKNmDMe.js";import"./rc-table-CybQOAzy.js";import"./rc-virtual-list-P8JqKX09.js";import"./rc-tree--ithDbGw.js";import"./rc-checkbox-bMXfL26q.js";import"./rc-pagination-CiqGXVR2.js";import"./rc-select-sVu4PbUz.js";import"./rc-overflow-73VxJI7O.js";import"./throttle-debounce-w9OM8Bxz.js";import"./rc-input-ByOKN0-r.js";import"./rc-tooltip-C1heEwdg.js";import"./rc-notification-D3ebMW8F.js";import"./rc-image-BIQJV_M3.js";import"./rc-textarea-DLkAnH0O.js";import"./copy-to-clipboard-Bgp_G7Oq.js";import"./toggle-selection-DUsDmMsR.js";import"./rc-upload-ClZE7meS.js";import"./rc-progress-bbq4uvV3.js";import"./rc-dropdown-C238bXH-.js";import"./rc-menu-CzbBjnhu.js";import"./rc-field-form-DaYAwFJ8.js";import"./scroll-into-view-if-needed-cNB78-hM.js";import"./compute-scroll-into-view-CJmtT4lq.js";import"./rc-picker-B5UDvhgZ.js";import"./rc-tabs-DG0zBL9k.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./lucide-D6BDVLHE.js";import"./axios-BoylL8Pu.js";import"./cookie-BUTH-fPQ.js";const u=()=>{const u=j(),{data:x,isLoading:f}=c(),[h]=l(),y=[{title:"Info",key:"info",render:(e,r)=>a.jsxs("div",{children:[a.jsx("strong",{children:r.name}),a.jsx("div",{children:r.contactNo}),a.jsx("div",{style:{color:"#666"},children:r.address})]}),sorter:(e,r)=>e.name.localeCompare(r.name)},{title:"Email",dataIndex:"email",key:"email"},{title:"Post Applied For",dataIndex:"postAppliedFor",key:"postAppliedFor",sorter:(e,r)=>e.postAppliedFor.localeCompare(r.postAppliedFor)},{title:"Resume",key:"resume",render:(e,r)=>a.jsx(p,{onClick:()=>(async e=>{try{const r=e.split("/").pop(),t=await fetch(`/api/image/pdf/download/${r}`);if(!t.ok)throw new Error("Download failed");const o=await t.blob(),i=window.URL.createObjectURL(o),s=document.createElement("a");s.href=i,s.download=r,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}catch(r){s.error("Failed to download file")}})(r.resumeFile),style:{cursor:"pointer",color:"#1890ff"}})},{title:"Applied Date",dataIndex:"createdAt",key:"createdAt",render:e=>new Date(e).toLocaleDateString(),sorter:(e,r)=>new Date(e.createdAt)-new Date(r.createdAt)},{title:"Actions",key:"actions",render:(e,r)=>a.jsxs(o,{size:"middle",children:[a.jsx(m,{style:{color:"#1890ff",cursor:"pointer"},onClick:()=>(e=>{u(`/career/edit/${e._id}`)})(r)}),a.jsx(d,{style:{color:"#ff4d4f",cursor:"pointer"},onClick:()=>{return e=r._id,void i.confirm({title:"Are you sure you want to delete this application?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk:async()=>{try{await h(e).unwrap(),s.success("Application deleted successfully!")}catch(r){s.error(r.message||"Something went wrong")}}});var e}})]})}];return a.jsxs("div",{children:[a.jsx(e,{items:[{title:a.jsx("span",{onClick:()=>u("/dashboard"),className:"cursor-pointer",children:"Dashboard"})},{title:"Career Applications"}],className:"mb-4"}),a.jsxs("div",{className:"flex justify-between items-center mb-5",children:[a.jsx("div",{className:"text-2xl font-semibold",children:"Career List "}),a.jsx(r,{type:"primary",icon:a.jsx(n,{}),onClick:()=>u("/career/add"),style:{marginBottom:"16px"},className:"float-right",children:"Add New Application"})]}),a.jsx(t,{columns:y,dataSource:(null==x?void 0:x.data)||[],loading:f,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:e=>`Total ${e} applications`},scroll:{x:!0}})]})};export{u as default};
