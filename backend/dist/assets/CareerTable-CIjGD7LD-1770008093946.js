import{f as w,ek as y,el as f,j as a,dl as b,bb as j,em as g,cX as A,cY as k,dn as r}from"./index-s1lMi29O-1770008093946.js";import{M as N}from"./index-kgIDmFTL-1770008093946.js";import"./index-Coq7tTkU-1770008093946.js";import"./Skeleton-BPYue-2v-1770008093946.js";const F=()=>{const s=w(),{data:n,isLoading:c}=y(),[d]=f(),p=t=>{s(`/career/edit/${t._id}`)},m=t=>{N.confirm({title:"Are you sure you want to delete this application?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk:async()=>{try{await d(t).unwrap(),r.success("Application deleted successfully!")}catch(e){r.error(e.message||"Something went wrong")}}})},x=async t=>{try{const e=t.split("/").pop(),l=await fetch(`/api/image/pdf/download/${e}`);if(!l.ok)throw new Error("Download failed");const u=await l.blob(),i=window.URL.createObjectURL(u),o=document.createElement("a");o.href=i,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(i)}catch(e){r.error("Failed to download file"),console.error("Download error:",e)}},h=[{title:"Info",key:"info",render:(t,e)=>a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:e.name}),a.jsx("p",{children:e.contactNo}),a.jsx("p",{className:"text-gray-500",children:e.address})]}),sorter:(t,e)=>t.name.localeCompare(e.name)},{title:"Email",dataIndex:"email",key:"email"},{title:"Post Applied For",dataIndex:"postAppliedFor",key:"postAppliedFor",sorter:(t,e)=>t.postAppliedFor.localeCompare(e.postAppliedFor)},{title:"Resume",key:"resume",render:(t,e)=>a.jsx(g,{onClick:()=>x(e.resumeFile),className:"text-yellow-600 cursor-pointer"})},{title:"Applied Date",dataIndex:"createdAt",key:"createdAt",render:t=>new Date(t).toLocaleDateString(),sorter:(t,e)=>new Date(t.createdAt)-new Date(e.createdAt)},{title:"Actions",key:"actions",render:(t,e)=>a.jsxs("div",{className:"flex gap-3",children:[a.jsx(A,{className:"text-yellow-600 cursor-pointer",onClick:()=>p(e)}),a.jsx(k,{className:"text-red-500 cursor-pointer",onClick:()=>m(e._id)})]})}];return a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4 text-sm text-gray-600 flex gap-2",children:[a.jsx("span",{className:"text-yellow-600 cursor-pointer hover:underline",onClick:()=>s("/dashboard"),children:"Dashboard"}),a.jsx("span",{children:"/"}),a.jsx("span",{children:"Career Applications"})]}),a.jsxs("div",{className:"flex justify-between items-center mb-5",children:[a.jsx("h2",{className:"text-2xl font-semibold",children:"Career List"}),a.jsxs("button",{onClick:()=>s("/career/add"),className:"bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700 flex items-center gap-2",children:[a.jsx(b,{}),"Add New Application"]})]}),a.jsx(j,{columns:h,dataSource:(n==null?void 0:n.data)||[],loading:c,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:t=>`Total ${t} applications`},scroll:{x:!0}})]})};export{F as default};
