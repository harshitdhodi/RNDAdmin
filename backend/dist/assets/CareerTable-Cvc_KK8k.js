import{h as e,j as s,B as t,D as i,l as a,m as r,o as c,bc as n}from"./main-BcUd3ASm.js";import{d as o,r as l}from"./vendor-router-CaZtIe2_.js";import{a as d}from"./vendor-utils-CfKmydC0.js";import{T as h,a as j,b as p,e as x,d as m}from"./table-DnBX1p3B.js";import{B as u}from"./breadcrumb-DEvmmGzh.js";import"./react-toastify.esm-CrOn1nFw.js";import{P as f}from"./plus-DdATqG_B.js";import{P as v}from"./pencil-QP0ylATY.js";import{T as y}from"./trash-2-D2atH8Kb.js";import"./vendor-react-DD_RYU77.js";import"./chevron-right-C95tp0e6.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),w=()=>{const e=o(),[w,k]=l.useState([]),[C,g]=l.useState(!0),[A,D]=l.useState(null);l.useEffect((()=>{(async()=>{try{const e=await d.get("/api/career/applications");k(e.data||[])}catch(e){toast({title:"Error",description:"Failed to fetch applications.",variant:"destructive"})}finally{g(!1)}})()}),[toast]);const N=async()=>{try{await d.delete(`/api/career/applications/${A}`),k(w.filter((e=>e._id!==A))),toast({title:"Success",description:"Application deleted successfully!"})}catch(e){toast({title:"Error",description:"Failed to delete application.",variant:"destructive"})}};return s.jsxs("div",{children:[s.jsxs(u,{children:[s.jsx(u.Item,{onClick:()=>e("/dashboard"),children:"Dashboard"}),s.jsx(u.Item,{children:"Career Applications"})]}),s.jsxs("div",{className:"flex justify-between items-center mb-5",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"Career List"}),s.jsxs(t,{onClick:()=>e("/career/add"),children:[s.jsx(f,{className:"mr-2"})," Add New Application"]})]}),s.jsxs(h,{children:[s.jsx(j,{children:s.jsxs(p,{children:[s.jsx(x,{children:"Info"}),s.jsx(x,{children:"Email"}),s.jsx(x,{children:"Post Applied For"}),s.jsx(x,{children:"Resume"}),s.jsx(x,{children:"Applied Date"}),s.jsx(x,{children:"Actions"})]})}),s.jsx(m,{children:w.map((o=>s.jsxs(p,{children:[s.jsxs(x,{children:[s.jsx("strong",{children:o.name}),s.jsx("div",{children:o.contactNo}),s.jsx("div",{className:"text-gray-500",children:o.address})]}),s.jsx(x,{children:o.email}),s.jsx(x,{children:o.postAppliedFor}),s.jsx(x,{children:s.jsx(t,{variant:"ghost",onClick:()=>(async e=>{try{const s=e.split("/").pop(),t=await fetch(`/api/image/pdf/download/${s}`);if(!t.ok)throw new Error("Download failed");const i=await t.blob(),a=window.URL.createObjectURL(i),r=document.createElement("a");r.href=a,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)}catch(s){toast({title:"Error",description:"Failed to download file.",variant:"destructive"})}})(o.resumeFile),children:s.jsx(b,{className:"text-blue-500"})})}),s.jsx(x,{children:new Date(o.createdAt).toLocaleDateString()}),s.jsxs(x,{children:[s.jsx(t,{variant:"ghost",onClick:()=>e(`/career/edit/${o._id}`),children:s.jsx(v,{className:"text-blue-500"})}),s.jsxs(i,{children:[s.jsx(a,{asChild:!0,children:s.jsx(t,{variant:"ghost",onClick:()=>D(o._id),children:s.jsx(y,{className:"text-red-500"})})}),s.jsxs(r,{children:[s.jsx(c,{children:"Confirm Deletion"}),s.jsx(n,{children:"Are you sure you want to delete this application? This action cannot be undone."}),s.jsx(t,{variant:"destructive",onClick:N,children:"Delete"})]})]})]})]},o._id)))})]})]})};export{w as default};
//# sourceMappingURL=CareerTable-Cvc_KK8k.js.map
