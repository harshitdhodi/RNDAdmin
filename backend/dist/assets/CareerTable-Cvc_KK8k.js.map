{"version":3,"file":"CareerTable-Cvc_KK8k.js","sources":["../../node_modules/lucide-react/dist/esm/icons/download.js","../../src/websiteBackend/career/CareerTable.jsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Download = createLucideIcon(\"Download\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"7 10 12 15 17 10\", key: \"2ggqvy\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"15\", y2: \"3\", key: \"1vk2je\" }]\n]);\n\nexport { Download as default };\n//# sourceMappingURL=download.js.map\n","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Table, TableHeader, TableBody, TableRow, TableCell } from '@/components/ui/table';\r\nimport { Breadcrumb } from '@/components/ui/breadcrumb';\r\nimport { Dialog, DialogTrigger, DialogContent, DialogTitle, DialogDescription } from '@/components/ui/dialog';\r\nimport { useToast } from 'react-toastify';\r\nimport { Pencil, Trash2, Download, Plus } from 'lucide-react';\r\n\r\nconst CareerTable = () => {\r\n  const navigate = useNavigate();\r\n;\r\n  const [applications, setApplications] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [deleteId, setDeleteId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchApplications = async () => {\r\n      try {\r\n        const response = await axios.get('/api/career/applications');\r\n        setApplications(response.data || []);\r\n      } catch (error) {\r\n        toast({ title: 'Error', description: 'Failed to fetch applications.', variant: 'destructive' });\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchApplications();\r\n  }, [toast]);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await axios.delete(`/api/career/applications/${deleteId}`);\r\n      setApplications(applications.filter(app => app._id !== deleteId));\r\n      toast({ title: 'Success', description: 'Application deleted successfully!' });\r\n    } catch (error) {\r\n      toast({ title: 'Error', description: 'Failed to delete application.', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  const handleDownload = async (filePath) => {\r\n    try {\r\n      const filename = filePath.split('/').pop();\r\n      const response = await fetch(`/api/image/pdf/download/${filename}`);\r\n      if (!response.ok) throw new Error('Download failed');\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = filename;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n      toast({ title: 'Error', description: 'Failed to download file.', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Breadcrumb>\r\n        <Breadcrumb.Item onClick={() => navigate('/dashboard')}>Dashboard</Breadcrumb.Item>\r\n        <Breadcrumb.Item>Career Applications</Breadcrumb.Item>\r\n      </Breadcrumb>\r\n      <div className=\"flex justify-between items-center mb-5\">\r\n        <h2 className=\"text-2xl font-semibold\">Career List</h2>\r\n        <Button onClick={() => navigate('/career/add')}>\r\n          <Plus className=\"mr-2\" /> Add New Application\r\n        </Button>\r\n      </div>\r\n      <Table>\r\n        <TableHeader>\r\n          <TableRow>\r\n            <TableCell>Info</TableCell>\r\n            <TableCell>Email</TableCell>\r\n            <TableCell>Post Applied For</TableCell>\r\n            <TableCell>Resume</TableCell>\r\n            <TableCell>Applied Date</TableCell>\r\n            <TableCell>Actions</TableCell>\r\n          </TableRow>\r\n        </TableHeader>\r\n        <TableBody>\r\n          {applications.map((record) => (\r\n            <TableRow key={record._id}>\r\n              <TableCell>\r\n                <strong>{record.name}</strong>\r\n                <div>{record.contactNo}</div>\r\n                <div className=\"text-gray-500\">{record.address}</div>\r\n              </TableCell>\r\n              <TableCell>{record.email}</TableCell>\r\n              <TableCell>{record.postAppliedFor}</TableCell>\r\n              <TableCell>\r\n                <Button variant=\"ghost\" onClick={() => handleDownload(record.resumeFile)}>\r\n                  <Download className=\"text-blue-500\" />\r\n                </Button>\r\n              </TableCell>\r\n              <TableCell>{new Date(record.createdAt).toLocaleDateString()}</TableCell>\r\n              <TableCell>\r\n                <Button variant=\"ghost\" onClick={() => navigate(`/career/edit/${record._id}`)}>\r\n                  <Pencil className=\"text-blue-500\" />\r\n                </Button>\r\n                <Dialog>\r\n                  <DialogTrigger asChild>\r\n                    <Button variant=\"ghost\" onClick={() => setDeleteId(record._id)}>\r\n                      <Trash2 className=\"text-red-500\" />\r\n                    </Button>\r\n                  </DialogTrigger>\r\n                  <DialogContent>\r\n                    <DialogTitle>Confirm Deletion</DialogTitle>\r\n                    <DialogDescription>\r\n                      Are you sure you want to delete this application? This action cannot be undone.\r\n                    </DialogDescription>\r\n                    <Button variant=\"destructive\" onClick={handleDelete}>Delete</Button>\r\n                  </DialogContent>\r\n                </Dialog>\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CareerTable;"],"names":["Download","createLucideIcon","d","key","points","x1","x2","y1","y2","CareerTable","navigate","useNavigate","applications","setApplications","useState","isLoading","setIsLoading","deleteId","setDeleteId","useEffect","async","response","axios","get","data","error","toast","title","description","variant","fetchApplications","handleDelete","delete","filter","app","_id","children","jsxs","Breadcrumb","jsx","Item","onClick","className","Button","Plus","Table","TableHeader","TableRow","TableCell","TableBody","map","record","name","contactNo","address","email","postAppliedFor","filePath","filename","split","pop","fetch","ok","Error","blob","url","window","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","handleDownload","resumeFile","Date","createdAt","toLocaleDateString","Pencil","Dialog","DialogTrigger","asChild","Trash2","DialogContent","DialogTitle","DialogDescription"],"mappings":";;;;;;GASA,MAAMA,EAAWC,EAAiB,WAAY,CAC5C,CAAC,OAAQ,CAAEC,EAAG,4CAA6CC,IAAK,WAChE,CAAC,WAAY,CAAEC,OAAQ,mBAAoBD,IAAK,WAChD,CAAC,OAAQ,CAAEE,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,IAAKL,IAAK,aCFnDM,EAAc,KAClB,MAAMC,EAAWC,KAEVC,EAAcC,GAAmBC,EAAAA,SAAS,KAC1CC,EAAWC,GAAgBF,EAAAA,UAAS,IACpCG,EAAUC,GAAeJ,EAAAA,SAAS,MAEzCK,EAAAA,WAAU,KACkBC,WACpB,IACF,MAAMC,QAAiBC,EAAMC,IAAI,4BACjBV,EAAAQ,EAASG,MAAQ,UAC1BC,GACPC,MAAM,CAAEC,MAAO,QAASC,YAAa,gCAAiCC,QAAS,eAAe,CAC9F,QACAb,GAAa,EAAK,GAGJc,EAAA,GACjB,CAACJ,QAEJ,MAAMK,EAAeX,UACf,UACIE,EAAMU,OAAO,4BAA4Bf,KAC/CJ,EAAgBD,EAAaqB,QAAOC,GAAOA,EAAIC,MAAQlB,KACvDS,MAAM,CAAEC,MAAO,UAAWC,YAAa,4CAChCH,GACPC,MAAM,CAAEC,MAAO,QAASC,YAAa,gCAAiCC,QAAS,eAAe,GAuBlG,cACG,MACC,CAAAO,SAAA,CAAAC,OAACC,EACC,CAAAF,SAAA,CAACG,MAAAD,EAAWE,KAAX,CAAgBC,QAAS,IAAM/B,EAAS,cAAe0B,SAAS,cAChEG,EAAAA,IAAAD,EAAWE,KAAX,CAAgBJ,SAAmB,2BAEtCC,EAAAA,KAAC,MAAI,CAAAK,UAAU,yCACbN,SAAA,CAACG,EAAAA,IAAA,KAAA,CAAGG,UAAU,yBAAyBN,SAAW,uBACjDO,EAAO,CAAAF,QAAS,IAAM/B,EAAS,eAC9B0B,SAAA,CAACG,EAAAA,IAAAK,EAAA,CAAKF,UAAU,SAAS,oCAG5BG,EACC,CAAAT,SAAA,CAACG,EAAAA,IAAAO,EAAA,CACCV,gBAACW,EACC,CAAAX,SAAA,CAAAG,EAAAA,IAACS,GAAUZ,SAAI,SACfG,EAAAA,IAACS,GAAUZ,SAAK,UAChBG,EAAAA,IAACS,GAAUZ,SAAgB,qBAC3BG,EAAAA,IAACS,GAAUZ,SAAM,WACjBG,EAAAA,IAACS,GAAUZ,SAAY,iBACvBG,EAAAA,IAACS,GAAUZ,SAAO,uBAGrBa,EACE,CAAAb,SAAAxB,EAAasC,KAAKC,UAChBJ,EACC,CAAAX,SAAA,CAAAC,OAACW,EACC,CAAAZ,SAAA,CAACG,EAAAA,IAAA,SAAA,CAAQH,WAAOgB,OAChBb,EAAAA,IAAC,MAAK,CAAAH,SAAAe,EAAOE,YACZd,EAAAA,IAAA,MAAA,CAAIG,UAAU,gBAAiBN,WAAOkB,aAEzCf,EAAAA,IAACS,EAAW,CAAAZ,SAAAe,EAAOI,QACnBhB,EAAAA,IAACS,EAAW,CAAAZ,SAAAe,EAAOK,uBAClBR,EACC,CAAAZ,SAAAG,EAAAA,IAACI,EAAO,CAAAd,QAAQ,QAAQY,QAAS,IArDxBrB,OAAOqC,IACxB,IACF,MAAMC,EAAWD,EAASE,MAAM,KAAKC,MAC/BvC,QAAiBwC,MAAM,2BAA2BH,KACxD,IAAKrC,EAASyC,GAAU,MAAA,IAAIC,MAAM,mBAC5B,MAAAC,QAAa3C,EAAS2C,OACtBC,EAAMC,OAAOC,IAAIC,gBAAgBJ,GACjCK,EAAOC,SAASC,cAAc,KACpCF,EAAKG,KAAOP,EACZI,EAAKI,SAAWf,EACPY,SAAAI,KAAKC,YAAYN,GAC1BA,EAAKO,QACIN,SAAAI,KAAKG,YAAYR,GACnBH,OAAAC,IAAIW,gBAAgBb,SACpBxC,GACPC,MAAM,CAAEC,MAAO,QAASC,YAAa,2BAA4BC,QAAS,eAAe,GAsCxCkD,CAAe5B,EAAO6B,YAC3D5C,SAAAG,MAACvC,GAAS0C,UAAU,sBAGxBH,MAACS,GAAWZ,SAAI,IAAA6C,KAAK9B,EAAO+B,WAAWC,8BACtCnC,EACC,CAAAZ,SAAA,CAAAG,MAACI,EAAO,CAAAd,QAAQ,QAAQY,QAAS,IAAM/B,EAAS,gBAAgByC,EAAOhB,OACrEC,SAAAG,EAAAA,IAAC6C,EAAO,CAAA1C,UAAU,2BAEnB2C,EACC,CAAAjD,SAAA,CAAAG,EAAAA,IAAC+C,GAAcC,SAAO,EACpBnD,eAACO,EAAO,CAAAd,QAAQ,QAAQY,QAAS,IAAMvB,EAAYiC,EAAOhB,KACxDC,SAAAG,EAAAA,IAACiD,GAAO9C,UAAU,4BAGrB+C,EACC,CAAArD,SAAA,CAAAG,EAAAA,IAACmD,GAAYtD,SAAgB,qBAC7BG,EAAAA,IAACoD,GAAkBvD,SAEnB,0FACCO,EAAO,CAAAd,QAAQ,cAAcY,QAASV,EAAcK,SAAM,sBA7BpDe,EAAOhB,cAqC9B","x_google_ignoreList":[0]}