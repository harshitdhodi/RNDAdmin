import{f,cd as w,ce as b,j as o}from"./index-hVri1bw9-1764395594329.js";import{R as j}from"./PlusOutlined-ByY_Cxs8-1764395594329.js";import{F as y}from"./Table-DuSCaz9G-1764395594329.js";import{R as g}from"./DownloadOutlined-BeMLH6qZ-1764395594329.js";import{R as A}from"./EditOutlined-DfmDGGoG-1764395594329.js";import{R as k}from"./DeleteOutlined-BFyOSsD7-1764395594329.js";import{s as i}from"./index-B44g-h7k-1764395594329.js";import{M as N}from"./index-CS_w008U-1764395594329.js";import"./toArray-Bbgf03cS-1764395594329.js";import"./index-Vz4GTmeV-1764395594329.js";import"./addEventListener-BzUaqt7Z-1764395594329.js";import"./index-5fCYg7FX-1764395594329.js";import"./EllipsisOutlined-kjtz1ZDr-1764395594329.js";import"./dropdown-DmNOe_LX-1764395594329.js";import"./TextArea-0a4D3yre-1764395594329.js";import"./CheckOutlined-DJDmJSRr-1764395594329.js";import"./index-yr2eBg36-1764395594329.js";import"./index-B3C835Z4-1764395594329.js";import"./useForceUpdate-siptFCzz-1764395594329.js";import"./index-CgQSeoGb-1764395594329.js";import"./CheckCircleFilled-FHAo7tTs-1764395594329.js";import"./ExclamationCircleFilled-BjQh_O2k-1764395594329.js";import"./InfoCircleFilled-DGIFRtU_-1764395594329.js";import"./ActionButton-C9xNr0xP-1764395594329.js";import"./index-BIh1lGsr-1764395594329.js";import"./fade-RUaLsAGn-1764395594329.js";import"./Skeleton-D3YPxazm-1764395594329.js";const X=()=>{const a=f(),{data:s,isLoading:c}=w(),[d]=b(),p=t=>{a(`/career/edit/${t._id}`)},m=t=>{N.confirm({title:"Are you sure you want to delete this application?",content:"This action cannot be undone.",okText:"Yes",okType:"danger",cancelText:"No",onOk:async()=>{try{await d(t).unwrap(),i.success("Application deleted successfully!")}catch(e){i.error(e.message||"Something went wrong")}}})},x=async t=>{try{const e=t.split("/").pop(),n=await fetch(`/api/image/pdf/download/${e}`);if(!n.ok)throw new Error("Download failed");const h=await n.blob(),l=window.URL.createObjectURL(h),r=document.createElement("a");r.href=l,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(l)}catch(e){i.error("Failed to download file"),console.error("Download error:",e)}},u=[{title:"Info",key:"info",render:(t,e)=>o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:e.name}),o.jsx("p",{children:e.contactNo}),o.jsx("p",{className:"text-gray-500",children:e.address})]}),sorter:(t,e)=>t.name.localeCompare(e.name)},{title:"Email",dataIndex:"email",key:"email"},{title:"Post Applied For",dataIndex:"postAppliedFor",key:"postAppliedFor",sorter:(t,e)=>t.postAppliedFor.localeCompare(e.postAppliedFor)},{title:"Resume",key:"resume",render:(t,e)=>o.jsx(g,{onClick:()=>x(e.resumeFile),className:"text-blue-600 cursor-pointer"})},{title:"Applied Date",dataIndex:"createdAt",key:"createdAt",render:t=>new Date(t).toLocaleDateString(),sorter:(t,e)=>new Date(t.createdAt)-new Date(e.createdAt)},{title:"Actions",key:"actions",render:(t,e)=>o.jsxs("div",{className:"flex gap-3",children:[o.jsx(A,{className:"text-blue-600 cursor-pointer",onClick:()=>p(e)}),o.jsx(k,{className:"text-red-500 cursor-pointer",onClick:()=>m(e._id)})]})}];return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-4 text-sm text-gray-600 flex gap-2",children:[o.jsx("span",{className:"text-blue-600 cursor-pointer hover:underline",onClick:()=>a("/dashboard"),children:"Dashboard"}),o.jsx("span",{children:"/"}),o.jsx("span",{children:"Career Applications"})]}),o.jsxs("div",{className:"flex justify-between items-center mb-5",children:[o.jsx("h2",{className:"text-2xl font-semibold",children:"Career List"}),o.jsxs("button",{onClick:()=>a("/career/add"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2",children:[o.jsx(j,{}),"Add New Application"]})]}),o.jsx(y,{columns:u,dataSource:(s==null?void 0:s.data)||[],loading:c,rowKey:"_id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:t=>`Total ${t} applications`},scroll:{x:!0}})]})};export{X as default};
