import{cf as e,cg as a,ch as i,j as t}from"./main-DeRxjK88.js";import{d as s,g as r,r as l,L as o}from"./vendor-router-Bu4EHm1B.js";import{F as n}from"./index--6LMyILo.js";import{B as m}from"./Breadcrumb-Dmow3_cy.js";import{I as d}from"./index-BrOIVdwD.js";import{U as c,R as p}from"./index-D3J037dB.js";import{B as u}from"./index-lUiyPlMq.js";import{s as j}from"./index-lMP3hCbg.js";import"./vendor-react-CI5aWZjI.js";import"./vendor-utils-BfOc9lHv.js";import"./toArray-DkI11MDQ.js";import"./index-DRGG9HZA.js";import"./CheckCircleFilled-DiSUBvU5.js";import"./ExclamationCircleFilled-DZysw_83.js";import"./dropdown-B7KEEEnN.js";import"./EllipsisOutlined-L4j7-ai9.js";import"./getAllowClear-exXUluB6.js";import"./Input-BufppJmu.js";import"./EyeOutlined-B2vwqoE1.js";import"./TextArea-BEMUKMsu.js";import"./fade-C0XPHGae.js";import"./DeleteOutlined-BpoFncVM.js";import"./DownloadOutlined-DQEsT_id.js";import"./CheckOutlined-3fI3nOal.js";import"./InfoCircleFilled-D8dKuFWy.js";const g=()=>{const[g]=n.useForm(),x=s(),{id:h}=r(),{data:f,isLoading:C}=e(h,{skip:!h}),[b]=a(),[F]=i(),[y,I]=l.useState([]),[w,O]=l.useState([]);l.useEffect((()=>{f&&(g.setFieldsValue(f),I([{url:`/api/image/pdf/view/${f.catalogue}`,name:f.catalogue}]),O([{url:`/api/image/view/${f.image}`,name:f.image}]))}),[f,g]);return t.jsxs(t.Fragment,{children:[t.jsxs(m,{style:{marginBottom:"16px"},children:[t.jsx(m.Item,{children:t.jsx(o,{to:"/dashboard",children:"Dashboard"})}),t.jsx(m.Item,{children:t.jsx(o,{to:"/catalogue-table",children:"Catalogue Table"})}),t.jsx(m.Item,{children:h?"Edit Catalogue":"Create Catalogue"})]}),t.jsxs(n,{form:g,layout:"vertical",onFinish:async e=>{const a=new FormData;a.append("title",e.title),y[0]?.originFileObj&&a.append("catalog",y[0].originFileObj),w[0]?.originFileObj&&a.append("image",w[0].originFileObj);try{h?(await F({id:h,formData:a}).unwrap(),j.success("Catalogue updated successfully")):(await b(a).unwrap(),j.success("Catalogue created successfully")),x("/catalogue-table")}catch(i){j.error("Failed to save catalogue")}},children:[t.jsx(n.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter the title"}],children:t.jsx(d,{})}),t.jsx(n.Item,{name:"catalogue",label:"Catalogue",rules:[{required:!0,message:"Please upload a catalogue"}],children:t.jsx(c,{listType:"picture",maxCount:1,fileList:y,beforeUpload:()=>!1,onChange:({fileList:e})=>I(e),children:t.jsx(u,{icon:t.jsx(p,{}),children:"Upload Catalogue"})})}),t.jsx(n.Item,{name:"image",label:"Image",rules:[{required:!0,message:"Please upload an image"}],children:t.jsx(c,{listType:"picture",maxCount:1,fileList:w,beforeUpload:()=>!1,onChange:({fileList:e})=>O(e),children:t.jsx(u,{icon:t.jsx(p,{}),children:"Upload Image"})})}),t.jsx(n.Item,{children:t.jsx(u,{type:"primary",htmlType:"submit",loading:C,children:h?"Update":"Create"})})]})]})};export{g as default};
//# sourceMappingURL=CatalogueForm-C6FgnFso.js.map
