import{r as e,j as a}from"./react-BfBsRgn0.js";import{a as t}from"./axios-BoylL8Pu.js";import{a as l}from"./react-router-DUJjWq5j.js";import"./classnames-C3ovBj6j.js";import"./cookie-BUTH-fPQ.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";const s=()=>{const[s,o]=e.useState(""),[r,n]=e.useState(null),[c,i]=e.useState(""),[d,u]=e.useState(""),[m,b]=e.useState(""),[h,p]=e.useState([]),[x,g]=e.useState(""),[j,f]=e.useState("active"),[v,y]=e.useState(""),[N,C]=e.useState(""),[w,S]=e.useState(""),[F,k]=e.useState(""),[M,q]=e.useState(""),[L,$]=e.useState(""),[A,_]=e.useState(""),[z,D]=e.useState(""),[E,I]=e.useState(""),[P,R]=e.useState(""),U=l();e.useEffect((()=>{O()}),[]);const O=async()=>{try{const e=await t.get("/api/chemicalCategory/getall",{withCredentials:!0});p(e.data)}catch(e){}};e.useEffect((()=>{C(`https://rndtechnosoft.com/${w}`)}),[w,d,m]),e.useEffect((()=>{S(s.replace(/\s+/g,"-").toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""))}),[s]),e.useEffect((()=>{S(w.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-"))}),[w]);const T=(e,a)=>{for(const t of e){if(t._id===a)return t;if(t.subCategories){const e=T(t.subCategories,a);if(e)return e}}return null},W=((e,a)=>{const t=T(e,a);return t?t.subCategories:[]})(h,d);return a.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{let e="/api/chemicalCategory/insertCategory";const a=new FormData;a.append("category",s),r&&a.append("photo",r),a.append("alt",c),a.append("slug",w),a.append("metatitle",F),a.append("metakeywords",L),a.append("metadescription",M),a.append("metalanguage",A),a.append("metacanonical",z),a.append("metaschema",E),a.append("otherMeta",P),a.append("url",N),a.append("priority",x),a.append("changeFreq",v),a.append("status",j),d&&!m?e=`/api/chemicalCategory/insertSubCategory?categoryId=${d}`:d&&m&&(e=`/api/chemicalCategory/insertSubSubCategory?categoryId=${d}&subCategoryId=${m}`);await t.post(e,a,{withCredentials:!0});o(""),n(null),i(""),u(""),b(""),S(""),f("active"),k(""),q(""),$(""),_(""),D(""),I(""),R(""),C(""),g(""),y(""),U("/chemical-category")}catch(a){}},className:"p-4",children:[a.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Add Category"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"parentCategory",className:"block font-semibold mb-2",children:"Parent Category"}),a.jsxs("select",{id:"parentCategory",value:d,onChange:e=>{const a=e.target.value;u(a),b("")},className:"w-full p-2 border rounded focus:outline-none",children:[a.jsx("option",{value:"",children:"Select Parent Category"}),h.map((e=>a.jsx("option",{value:e._id,children:e.category},e._id)))]})]}),W.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"subCategory",className:"block font-semibold mb-2",children:"Subcategory (optional)"}),a.jsxs("select",{id:"subCategory",value:m,onChange:e=>{const a=e.target.value;b(a)},className:"w-full p-2 border rounded focus:outline-none",children:[a.jsx("option",{value:"",children:"Select Subcategory"}),W.map((e=>a.jsx("option",{value:e._id,children:e.category},e._id)))]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"title",className:"block font-semibold mb-2",children:"Category"}),a.jsx("input",{type:"text",id:"title",value:s,onChange:e=>o(e.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photo"}),a.jsx("input",{type:"file",name:"photo",id:"photo",onChange:e=>{const a=e.target.files[0];n(a)},className:"border rounded focus:outline-none",accept:"image/*"}),r&&a.jsxs("div",{className:"mt-2 w-56 relative group",children:[a.jsx("img",{src:URL.createObjectURL(r),alt:"Gallery",className:"h-32 w-56 object-cover"}),a.jsx("button",{type:"button",onClick:()=>{n(null)},className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600 focus:outline-none",children:"X"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"alt",className:"block font-semibold mb-2",children:"Alternative Text"}),a.jsx("input",{type:"text",id:"alt",value:c,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]})]})]}),a.jsxs("div",{className:"mb-4 mt-4",children:[a.jsx("label",{htmlFor:"slug",className:"block font-semibold mb-2",children:"Slug"}),a.jsx("input",{type:"text",id:"slug",value:w,onChange:e=>S(e.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),a.jsxs("div",{className:"mb-4 mt-4",children:[a.jsx("label",{htmlFor:"url",className:"block font-semibold mb-2",children:"URL"}),a.jsx("input",{type:"text",id:"url",value:N,disabled:!0,className:"w-full p-2 border rounded focus:outline-none"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Title"}),a.jsx("textarea",{id:"meta",value:F,onChange:e=>k(e.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Description"}),a.jsx("textarea",{id:"meta",value:M,onChange:e=>q(e.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Keywords"}),a.jsx("textarea",{id:"meta",value:L,onChange:e=>$(e.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Canonical"}),a.jsx("textarea",{id:"meta",value:z,onChange:e=>D(e.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Language"}),a.jsx("textarea",{id:"meta",value:A,onChange:e=>_(e.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Other Meta"}),a.jsx("textarea",{id:"meta",value:P,onChange:e=>R(e.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Schema"}),a.jsx("textarea",{id:"meta",value:E,onChange:e=>I(e.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"priority",className:"block font-semibold mb-2",children:"Priority"}),a.jsx("input",{type:"number",id:"priority",min:0,max:1,step:.01,value:x,onChange:e=>g(e.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"changeFreq",className:"block font-semibold mb-2",children:"Change Frequency"}),a.jsxs("select",{id:"changeFreq",value:v,onChange:e=>y(e.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[a.jsx("option",{value:"",children:"Select Change Frequency"}),a.jsx("option",{value:"always",children:"Always"}),a.jsx("option",{value:"hourly",children:"Hourly"}),a.jsx("option",{value:"daily",children:"Daily"}),a.jsx("option",{value:"weekly",children:"Weekly"}),a.jsx("option",{value:"monthly",children:"Monthly"}),a.jsx("option",{value:"yearly",children:"Yearly"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),a.jsxs("select",{id:"status",value:j,onChange:e=>f(e.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]}),a.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Add Category"})]})};export{s as default};
