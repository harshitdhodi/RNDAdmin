import{o as Q,r as w,P as X,u as V,j as e,Q as g,i as ee,I as N,B as F,X as O,U as G,f as se,a as ae,L as J,c as P}from"./index-DhlDUgTv-1764301063565.js";import{C as p,u as re,a as te,b as le}from"./index.esm-CTOLFLIa-1764301063565.js";import{P as I}from"./index-Bnc9_51n-1764301063565.js";import{C as $,a as q}from"./card-BjmbNRy0-1764301063565.js";import{S as L,a as R,b as z,c as D,d as k}from"./select-DMJOdBV5-1764301063565.js";import{T as Y}from"./textarea-BGEpChXG-1764301063565.js";import{R as ie}from"./index-B-8cQENb-1764301063565.js";/* empty css                                 */import"./Combination-QVfWENRt-1764301063565.js";import"./index-CFEPn6SB-1764301063565.js";import"./check-MO2flO6M-1764301063565.js";import"./isEqual-BijmyNs6-1764301063565.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=Q("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),B=({control:t,chemicalData:c,watch:u,setValue:a})=>{const[f,b]=w.useState([]),[y,i]=w.useState([]),{data:o,isLoading:m}=X(),s=o||[],{data:r,isLoading:n,isSuccess:l,isError:j,error:E}=V(),x=r||[],C=u("category"),U=u("sub_category"),T=u("subsub_category_id");return console.log(C,U,T),w.useEffect(()=>{var _;if(!x.length)return;const h=x.find(d=>d._id===C);h&&(b(h.subCategories||[]),a("categorySlug",h.slug));const v=U&&((_=h==null?void 0:h.subCategories)==null?void 0:_.find(d=>d._id===U));v&&(i(v.subSubCategory||[]),a("subCategorySlug",v.slug))},[x,C,U,a]),w.useEffect(()=>{if(!y.length)return;const h=T&&y.find(v=>v._id===T);h&&a("subSubCategorySlug",h.slug)},[y,T,a]),w.useEffect(()=>{j&&console.error("Failed to load categories:",E)},[j,E]),w.useEffect(()=>{var h,v;if(c&&c.category&&x.length>0){const _=x.find(d=>d._id===c.category);if(_){b(_.subCategories||[]),a("category",c.category),a("categorySlug",_.slug);const d=(h=_.subCategories)==null?void 0:h.find(A=>A._id===c.sub_category);d&&(i(d.subSubCategory||[]),a("sub_category",c.sub_category),a("subCategorySlug",d.slug));const S=(v=d==null?void 0:d.subSubCategory)==null?void 0:v.find(A=>A._id===c.subsub_category_id);S&&(a("subsub_category_id",c.subsub_category_id),a("subSubCategorySlug",S.slug))}}},[c,x,a]),e.jsx($,{className:"w-full max-w-2xl border-none mx-auto shadow-none",children:e.jsx(q,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"category",children:"Category"}),e.jsx(p,{name:"category",control:t,rules:{required:"Category is required"},render:({field:h})=>{var v,_;return e.jsxs(L,{value:h.value||"",onValueChange:d=>{const S=x.find(A=>A._id===d);S&&(h.onChange(S._id),a("categorySlug",S.slug))},children:[e.jsx(R,{id:"category",children:e.jsx(z,{children:h.value&&l?(v=x.find(d=>d._id===h.value))==null?void 0:v.category:c&&((_=c.category)==null?void 0:_.name)||"Select Category"})}),e.jsx(D,{children:n?e.jsx(k,{value:"loading",disabled:!0,children:"Loading..."}):l&&x.length>0?x.map(d=>e.jsx(k,{value:d._id,children:d.category},d._id)):e.jsx(k,{value:"none",disabled:!0,children:"No categories available"})})]})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"sub_category",children:"Sub Category"}),e.jsx(p,{name:"sub_category",control:t,render:({field:h})=>{var v,_;return e.jsxs(L,{value:h.value||"",onValueChange:d=>{const S=f.find(A=>A._id===d);S&&(h.onChange(S._id),a("subCategorySlug",S.slug))},disabled:!C||f.length===0,children:[e.jsx(R,{id:"sub_category",children:e.jsx(z,{children:h.value&&f.length>0?(v=f.find(d=>d._id===h.value))==null?void 0:v.category:c&&((_=c.sub_category)==null?void 0:_.name)||"Select Sub Category"})}),e.jsx(D,{children:f.length>0?f.map(d=>e.jsx(k,{value:d._id,children:d.category},d._id)):e.jsx(k,{value:"none",disabled:!0,children:"No sub-categories available"})})]})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"subsub_category_id",children:"Sub Sub Category"}),e.jsx(p,{name:"subsub_category_id",control:t,render:({field:h})=>{var v,_;return e.jsxs(L,{value:h.value||"",onValueChange:d=>{const S=y.find(A=>A._id===d);S&&(h.onChange(S._id),a("subSubCategorySlug",S.slug))},disabled:!U||y.length===0,children:[e.jsx(R,{id:"subsub_category_id",children:e.jsx(z,{children:h.value&&y.length>0?(v=y.find(d=>d._id===h.value))==null?void 0:v.category:c&&((_=c.subSubCategory)==null?void 0:_.category)||"Select Sub Sub Category"})}),e.jsx(D,{children:y.length>0?y.map(d=>e.jsx(k,{value:d._id,children:d.category},d._id)):e.jsx(k,{value:"none",disabled:!0,children:"No sub-sub-categories available"})})]})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"unit",children:"Unit"}),e.jsx(p,{name:"unit",control:t,rules:{required:"Unit is required"},render:({field:h})=>e.jsxs(L,{onValueChange:h.onChange,value:h.value||void 0,children:[e.jsx(R,{id:"unit",children:e.jsx(z,{placeholder:"Select Unit"})}),e.jsx(D,{children:m?e.jsx(k,{value:"loading",children:"Loading..."}):s.map(v=>e.jsx(k,{value:v.name,children:v.name},v._id))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"assay",children:"Assay (%)"}),e.jsx(p,{name:"assay",control:t,render:({field:h})=>e.jsx("div",{children:e.jsx("input",{type:"string",id:"assay",min:"0",max:"100",step:"0.01",value:h.value||0,onChange:v=>h.onChange(v.target.value),className:"w-full border "})})})]})]})})})};B.propTypes={control:I.object.isRequired,chemicalData:I.object,watch:I.func.isRequired,setValue:I.func.isRequired};var M={exports:{}},ne=M.exports,K;function ce(){return K||(K=1,function(t,c){(function(u,a,f){t.exports=f(),t.exports.default=f()})("slugify",ne,function(){var u=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),a=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function f(b,y){if(typeof b!="string")throw new Error("slugify: string argument expected");y=typeof y=="string"?{replacement:y}:y||{};var i=a[y.locale]||{},o=y.replacement===void 0?"-":y.replacement,m=y.trim===void 0?!0:y.trim,s=b.normalize().split("").reduce(function(r,n){var l=i[n];return l===void 0&&(l=u[n]),l===void 0&&(l=n),l===o&&(l=" "),r+l.replace(y.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return y.strict&&(s=s.replace(/[^A-Za-z0-9\s]/g,"")),m&&(s=s.trim()),s=s.replace(/\s+/g,o),y.lower&&(s=s.toLowerCase()),s}return f.extend=function(b){Object.assign(u,b)},f})}(M)),M.exports}var oe=ce();const Z=ee(oe),de=({control:t,setValue:c})=>{const u=re({control:t,name:"name"});return w.useEffect(()=>{if(u){const a=Z(u,{lower:!0,strict:!0,trim:!0});c("slug",a)}},[u,c]),e.jsx($,{className:"w-full max-w-2xl mx-auto shadow-none border-none",children:e.jsxs(q,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"name",children:"Name"}),e.jsx(p,{name:"name",control:t,rules:{required:"Name is required"},render:({field:a})=>e.jsx(N,{id:"name",...a})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"slug",children:"Slug"}),e.jsx(p,{name:"slug",control:t,render:({field:a})=>e.jsx(N,{id:"slug",...a,onChange:f=>{const b=Z(f.target.value,{lower:!0,strict:!0,trim:!0});a.onChange(b)}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"chemical_type",children:"Chemical Type"}),e.jsx(p,{name:"chemical_type",control:t,render:({field:a})=>e.jsx(N,{id:"chemical_type",...a})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"cas_number",children:"CAS Number"}),e.jsx(p,{name:"cas_number",control:t,render:({field:a})=>e.jsx(N,{id:"cas_number",...a})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"iupac",children:"IUPAC Name"}),e.jsx(p,{name:"iupac",control:t,render:({field:a})=>e.jsx(N,{id:"iupac",...a})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"molecular_formula",children:"Molecular Formula"}),e.jsx(p,{name:"molecular_formula",control:t,render:({field:a})=>e.jsx(N,{id:"molecular_formula",...a})})]})]})})},H=({control:t,watch:c})=>{const[u,a]=w.useState({specs:!1,msds:!1}),f=c("specs"),b=c("msds"),y=(i,o="specs")=>{if(i){const m=o==="msds"?"msds":"specs",s=i.split(".")[0];window.open(`/api/image/${m}/view/${s}`,"_blank")}};return e.jsx($,{className:"w-full max-w-2xl mx-auto border-none shadow-none",children:e.jsxs(q,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"packings",children:"Packings"}),e.jsx(p,{name:"packings",control:t,defaultValue:[],render:({field:i})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{placeholder:"Enter packing (e.g., 25kg)",onKeyDown:o=>{if(o.key==="Enter"){o.preventDefault();const m=o.target.value.trim();m&&!i.value.includes(m)&&(i.onChange([...i.value,m]),o.target.value="")}}}),e.jsx(F,{type:"button",onClick:o=>{const m=o.currentTarget.previousSibling,s=m.value.trim();s&&!i.value.includes(s)&&(i.onChange([...i.value,s]),m.value="")},children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(i.value)&&i.value.map((o,m)=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[e.jsx("span",{children:o}),e.jsx("button",{type:"button",onClick:()=>{const s=i.value.filter((r,n)=>n!==m);i.onChange(s)},className:"text-muted-foreground hover:text-foreground",children:e.jsx(O,{className:"h-4 w-4"})})]},m))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"grade",children:"Grade"}),e.jsx(p,{name:"grade",control:t,render:({field:i})=>e.jsx(N,{id:"grade",placeholder:"Enter grade",...i})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"iupac",children:"IUPAC Name"}),e.jsx(p,{name:"iupac",control:t,render:({field:i})=>e.jsx(N,{id:"iupac",placeholder:"Enter IUPAC name",...i})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"h_s_code",children:"HS Code"}),e.jsx(p,{name:"h_s_code",control:t,render:({field:i})=>e.jsx(N,{id:"h_s_code",placeholder:"Enter HS code",...i})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"molecular_weight",children:"Molecular Weight"}),e.jsx(p,{name:"molecular_weight",control:t,render:({field:i})=>e.jsx(N,{id:"molecular_weight",type:"number",placeholder:"Enter molecular weight",...i})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"molecular_formula",children:"Molecular Formula"}),e.jsx(p,{name:"molecular_formula",control:t,render:({field:i})=>e.jsx(N,{id:"molecular_formula",placeholder:"Enter molecular formula",...i})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"application",children:"Applications"}),e.jsx(p,{name:"application",control:t,defaultValue:[],render:({field:i})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{placeholder:"Enter application",onKeyDown:o=>{if(o.key==="Enter"){o.preventDefault();const m=o.target.value.trim();m&&!i.value.includes(m)&&(i.onChange([...i.value,m]),o.target.value="")}}}),e.jsx(F,{type:"button",onClick:o=>{const m=o.currentTarget.previousSibling,s=m.value.trim();s&&!i.value.includes(s)&&(i.onChange([...i.value,s]),m.value="")},children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(i.value)&&i.value.map((o,m)=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[e.jsx("span",{children:o}),e.jsx("button",{type:"button",onClick:()=>{const s=i.value.filter((r,n)=>n!==m);i.onChange(s)},className:"text-muted-foreground hover:text-foreground",children:e.jsx(O,{className:"h-4 w-4"})})]},m))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"specs",children:"Specifications (PDF)"}),e.jsx(p,{name:"specs",control:t,render:({field:{value:i,onChange:o,...m}})=>e.jsxs("div",{className:"space-y-2",children:[typeof f=="string"&&f&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-secondary rounded-md",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm truncate",children:f}),e.jsx(F,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(f,"specs"),children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(F,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(""),children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsx(N,{id:"specs",type:"file",accept:".pdf",disabled:u.specs,onChange:async s=>{var n;const r=(n=s.target.files)==null?void 0:n[0];r&&(a(l=>({...l,specs:!0})),o(r),a(l=>({...l,specs:!1})))},...m}),u.specs&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploading specification file..."})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"msds",children:"MSDS (PDF)"}),e.jsx(p,{name:"msds",control:t,render:({field:{value:i,onChange:o,...m}})=>e.jsxs("div",{className:"space-y-2",children:[typeof b=="string"&&b&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-secondary rounded-md",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm truncate",children:b}),e.jsx(F,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(b,"msds"),children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(F,{type:"button",variant:"ghost",size:"sm",onClick:()=>o(""),children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsx(N,{id:"msds",type:"file",accept:".pdf",disabled:u.msds,onChange:async s=>{var n;const r=(n=s.target.files)==null?void 0:n[0];r&&(a(l=>({...l,msds:!0})),o(r),a(l=>({...l,msds:!1})))},...m}),u.msds&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploading MSDS file..."})]})})]})]})})};H.propTypes={control:I.object.isRequired,watch:I.func};H.defaultProps={watch:()=>{}};const ue=({control:t})=>e.jsx($,{className:"w-full max-w-2xl mx-auto border-none shadow-none",children:e.jsxs(q,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metatitle",children:"Meta Title"}),e.jsx(p,{name:"metatitle",control:t,render:({field:c})=>e.jsx(N,{id:"metatitle",placeholder:"Enter meta title",...c})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metadescription",children:"Meta Description"}),e.jsx(p,{name:"metadescription",control:t,render:({field:c})=>e.jsx(Y,{id:"metadescription",placeholder:"Enter meta description",...c,rows:3})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metakeywords",children:"Meta Keywords"}),e.jsx(p,{name:"metakeywords",control:t,render:({field:c})=>e.jsx(N,{id:"metakeywords",placeholder:"Enter meta keywords",...c})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metacanonical",children:"Meta Canonical URL"}),e.jsx(p,{name:"metacanonical",control:t,render:({field:c})=>e.jsx(N,{id:"metacanonical",placeholder:"Enter canonical URL",...c})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metalanguage",children:"Meta Language"}),e.jsx(p,{name:"metalanguage",control:t,render:({field:c})=>e.jsx(N,{id:"metalanguage",placeholder:"Enter language code (e.g., en-US)",...c})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metaschema",children:"Meta Schema"}),e.jsx(p,{name:"metaschema",control:t,render:({field:c})=>e.jsx(Y,{id:"metaschema",placeholder:"Enter JSON-LD schema",...c,rows:4})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"otherMeta",children:"Other Meta Information"}),e.jsx(p,{name:"otherMeta",control:t,render:({field:c})=>e.jsx(Y,{id:"otherMeta",placeholder:"Enter any additional meta information",...c,rows:3})})]})]})}),me=({control:t,setValue:c})=>{const{fields:u,append:a,remove:f,update:b}=te({control:t,name:"images"}),y={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]},i=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background","align","direction","code-block","script"],o=w.useCallback((s,r)=>{var l,j,E,x;const n=s.target.files[0];if(n){(j=(l=u[r])==null?void 0:l.preview)!=null&&j.startsWith("blob:")&&URL.revokeObjectURL(u[r].preview);const C=URL.createObjectURL(n);b(r,{...u[r],file:n,preview:C,altText:((E=u[r])==null?void 0:E.altText)||"",title:((x=u[r])==null?void 0:x.title)||"",url:null})}},[u,b]);w.useEffect(()=>()=>{u.forEach(s=>{var r;(r=s==null?void 0:s.preview)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(s.preview)})},[u]);const m=w.useCallback(s=>{var r,n;(n=(r=u[s])==null?void 0:r.preview)!=null&&n.startsWith("blob:")&&URL.revokeObjectURL(u[s].preview),u[s]._id&&c(`imagesToDelete.${u[s]._id}`,!0),f(s)},[u,f,c]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"global_tagline",children:"Global Tagline"}),e.jsx(p,{name:"global_tagline",control:t,defaultValue:"",render:({field:s})=>e.jsx(N,{id:"global_tagline",placeholder:"Enter global tagline",...s})}),e.jsx("p",{className:"text-xs text-gray-500",children:"A brief tagline that will appear globally."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"description",children:"Description"}),e.jsx(p,{name:"description",control:t,defaultValue:"",render:({field:{onChange:s,value:r}})=>e.jsx("div",{className:"quill-container",children:e.jsx(ie,{id:"description",theme:"snow",value:r,onChange:s,className:"bg-white",modules:y,formats:i,placeholder:"Enter detailed description..."})})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format your content using the toolbar above. Use headings, lists, and formatting to create well-structured content."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"synonyms",children:"Synonyms"}),e.jsx(p,{name:"synonyms",control:t,defaultValue:[],render:({field:s})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{placeholder:"Enter synonym",onKeyDown:r=>{if(r.key==="Enter"){r.preventDefault();const n=r.target.value.trim();n&&!s.value.includes(n)&&(s.onChange([...s.value,n]),r.target.value="")}}}),e.jsx(F,{type:"button",onClick:r=>{const n=r.currentTarget.previousSibling,l=n.value.trim();l&&!s.value.includes(l)&&(s.onChange([...s.value,l]),n.value="")},children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(s.value)&&s.value.map((r,n)=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[e.jsx("span",{children:r}),e.jsx("button",{type:"button",onClick:()=>{const l=s.value.filter((j,E)=>E!==n);s.onChange(l)},className:"text-muted-foreground hover:text-foreground",children:e.jsx(O,{className:"h-4 w-4"})})]},n))})]})})]}),e.jsx(g,{children:"Images"})," ",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-semibold text-red-500",children:"(If you  want to update image then upload new image and remove already uploaded image)"}),u.map((s,r)=>e.jsxs("div",{className:"space-y-2 border p-4 rounded-lg",children:[s.preview||s.url?e.jsx("img",{src:s.preview||`/api/image/download/${s.url}`,alt:s.altText||"Image preview",className:"w-32 h-32 object-cover rounded border"}):e.jsx("div",{className:"w-32 h-32 flex items-center justify-center border rounded bg-gray-100",children:"No Preview"}),e.jsx("input",{type:"file",onChange:n=>o(n,r),accept:"image/*",className:`block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-full file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-blue-50 file:text-blue-700\r
                hover:file:bg-blue-100`}),e.jsx(g,{htmlFor:`alt-text-${r}`,children:"Alt Text"}),e.jsx(p,{name:`images.${r}.altText`,control:t,defaultValue:s.altText||"",render:({field:n})=>e.jsx(N,{id:`alt-text-${r}`,placeholder:"Alt Text",...n})}),e.jsx(g,{htmlFor:`image-title-${r}`,children:"Image Title"}),e.jsx(p,{name:`images.${r}.title`,control:t,defaultValue:s.title||"",render:({field:n})=>e.jsx(N,{id:`image-title-${r}`,placeholder:"Image Title",...n})}),e.jsx("button",{type:"button",onClick:()=>m(r),className:"text-red-600 hover:underline",children:"Remove"})]},s.id)),e.jsx("button",{type:"button",onClick:()=>a({file:null,preview:null,altText:"",title:"",url:null}),className:"px-4 py-2 mt-4 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add Image"})]})},Se=()=>{const{control:t,handleSubmit:c,watch:u,setValue:a}=le({defaultValues:{category:"",sub_category:"",subsub_category_id:"",categorySlug:"",subCategorySlug:"",subSubCategorySlug:"",name:"",slug:"",images:[],catalog:"",msds:"",specs:"",unit:"",chemical_type:"",cas_number:"",packings:[],grade:"",iupac:"",h_s_code:"",molecular_weight:"",molecular_formula:"",synonyms:[],application:[],chemical_industries:[],product_code:"",auto_p_code:"",packing:"",hs_code:"",assay:"",metatitle:"",metadescription:"",metakeywords:"",metacanonical:"",metalanguage:"",metaschema:"",otherMeta:"",imagesToDelete:{}}}),f=se(),{id:b}=ae(),[y,i]=w.useState(!1),[o,m]=w.useState(null);w.useEffect(()=>{(async()=>{if(b){i(!0);try{const l=(await P.get(`/api/chemical/getChemicalById?id=${b}`)).data;m(l),l.category&&(a("category",l.category._id),a("categorySlug",l.category.slug)),l.sub_category&&(a("sub_category",l.sub_category._id),a("subCategorySlug",l.sub_category.slug)),l.subsub_category_id&&(a("subsub_category_id",typeof l.subsub_category_id=="object"?l.subsub_category_id._id:l.subsub_category_id),a("subSubCategorySlug",l.subsub_category_id.slug||"")),Object.entries(l).forEach(([j,E])=>{j!=="category"&&j!=="sub_category"&&j!=="subsub_category_id"&&j!=="images"&&a(j,E)}),l.images&&l.images.length>0&&a("images",l.images)}catch(n){console.error("Error fetching chemical data:",n)}finally{i(!1)}}})()},[b,a]);const s=async r=>{var n,l;try{const j=new FormData;r.images.forEach((x,C)=>{x.file instanceof File?(j.append("images",x.file),j.append(`altText-${C}`,x.altText||""),j.append(`title-${C}`,x.title||"")):x._id&&(j.append(`existingImages[${C}][_id]`,x._id),j.append(`existingImages[${C}][altText]`,x.altText||""),j.append(`existingImages[${C}][title]`,x.title||""))}),Object.keys(r.imagesToDelete).forEach(x=>{j.append("imagesToDelete[]",x)}),Object.entries(r).forEach(([x,C])=>{x!=="images"&&x!=="imagesToDelete"&&C!==void 0&&C!==null&&C!==""&&(Array.isArray(C)?C.forEach((U,T)=>{j.append(`${x}[${T}]`,U)}):x==="molecular_weight"&&C?j.append(x,Number(C)):j.append(x,C))});let E;b?E=await P.put(`/api/chemical/updateChemicalById?id=${b}`,j,{headers:{"Content-Type":"multipart/form-data"}}):E=await P.post("/api/chemical/add",j,{headers:{"Content-Type":"multipart/form-data"}}),console.log("Form submitted successfully",E.data),f("/chemical-table")}catch(j){console.error("Error submitting form:",((l=(n=j.response)==null?void 0:n.data)==null?void 0:l.message)||j.message)}};return y?e.jsx("div",{children:"Loading existing chemical data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex items-center text-sm text-gray-500",children:[e.jsx(J,{to:"/",className:"hover:text-purple-600",children:"Home"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(J,{to:"/chemical-table",className:"hover:text-purple-600",children:"Chemicals"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900",children:b?"Edit Chemical":"New Chemical"})]}),e.jsxs("form",{onSubmit:c(s),className:"space-y-6 bg-white",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Category Information"}),e.jsx(B,{control:t,watch:u,setValue:a,chemicalData:o})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Chemical Details"}),e.jsx(de,{control:t,setValue:a,chemicalData:o})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Chemical Properties"}),e.jsx(H,{control:t,chemicalData:o})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Image Upload"}),e.jsx(me,{control:t,setValue:a,chemicalData:o})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Meta Information"}),e.jsx(ue,{control:t,chemicalData:o})]})]}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(F,{type:"submit",className:"px-8 py-3 w-1/4 text-white rounded-md hover:bg-purple-700 transition duration-300 ease-in-out transform hover:scale-105",children:b?"Update Chemical":"Submit Chemical"})})]})]})};export{Se as ChemicalFormPage,Se as default};
