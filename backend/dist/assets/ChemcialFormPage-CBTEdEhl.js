import{i as Z,E as B,u as Q,j as e,L as g,I as f,B as E,X as T,b as q}from"./main-Bqu49der.js";import{c as C,j as V,f as X,i as ee,L as P}from"./vendor-CxfDVdnA.js";import{C as p,u as se,a as ae,b as re}from"./index.esm-BeVsDzK4.js";import{P as A}from"./index-EH8SpnOa.js";import{C as R,a as D}from"./card-BRhuz6TV.js";import{S as I,a as O,b as L,c as M,d as w}from"./select-Dn-vA80t.js";import{T as $}from"./textarea-CvP-z1Iq.js";import{R as te}from"./index-CSXG-3Bq.js";/* empty css                   */import"./Combination-Ci2TH8So.js";import"./index-BIwstZJs.js";import"./check-DuL3r9s-.js";import"./chevron-up-D49Me_Ei.js";import"./isEqual-D12pi9da.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=Z("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),K=({control:t,chemicalData:c,watch:u,setValue:r})=>{const[b,j]=C.useState([]),[x,l]=C.useState([]),{data:d,isLoading:m}=B(),s=d||[],{data:i,isLoading:a,isSuccess:o,isError:y,error:v}=Q(),_=i||[],k=u("category"),F=u("sub_category"),U=u("subsub_category_id");return console.log(k,F,U),C.useEffect(()=>{if(!_.length)return;const h=_.find(N=>N._id===k);h&&(j(h.subCategories||[]),r("categorySlug",h.slug));const n=F&&h?.subCategories?.find(N=>N._id===F);n&&(l(n.subSubCategory||[]),r("subCategorySlug",n.slug))},[_,k,F,r]),C.useEffect(()=>{if(!x.length)return;const h=U&&x.find(n=>n._id===U);h&&r("subSubCategorySlug",h.slug)},[x,U,r]),C.useEffect(()=>{y&&console.error("Failed to load categories:",v)},[y,v]),C.useEffect(()=>{if(c&&c.category&&_.length>0){const h=_.find(n=>n._id===c.category);if(h){j(h.subCategories||[]),r("category",c.category),r("categorySlug",h.slug);const n=h.subCategories?.find(S=>S._id===c.sub_category);n&&(l(n.subSubCategory||[]),r("sub_category",c.sub_category),r("subCategorySlug",n.slug));const N=n?.subSubCategory?.find(S=>S._id===c.subsub_category_id);N&&(r("subsub_category_id",c.subsub_category_id),r("subSubCategorySlug",N.slug))}}},[c,_,r]),e.jsx(R,{className:"w-full max-w-2xl border-none mx-auto shadow-none",children:e.jsx(D,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"category",children:"Category"}),e.jsx(p,{name:"category",control:t,rules:{required:"Category is required"},render:({field:h})=>e.jsxs(I,{value:h.value||"",onValueChange:n=>{const N=_.find(S=>S._id===n);N&&(h.onChange(N._id),r("categorySlug",N.slug))},children:[e.jsx(O,{id:"category",children:e.jsx(L,{children:h.value&&o?_.find(n=>n._id===h.value)?.category:c&&c.category?.name||"Select Category"})}),e.jsx(M,{children:a?e.jsx(w,{value:"loading",disabled:!0,children:"Loading..."}):o&&_.length>0?_.map(n=>e.jsx(w,{value:n._id,children:n.category},n._id)):e.jsx(w,{value:"none",disabled:!0,children:"No categories available"})})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"sub_category",children:"Sub Category"}),e.jsx(p,{name:"sub_category",control:t,render:({field:h})=>e.jsxs(I,{value:h.value||"",onValueChange:n=>{const N=b.find(S=>S._id===n);N&&(h.onChange(N._id),r("subCategorySlug",N.slug))},disabled:!k||b.length===0,children:[e.jsx(O,{id:"sub_category",children:e.jsx(L,{children:h.value&&b.length>0?b.find(n=>n._id===h.value)?.category:c&&c.sub_category?.name||"Select Sub Category"})}),e.jsx(M,{children:b.length>0?b.map(n=>e.jsx(w,{value:n._id,children:n.category},n._id)):e.jsx(w,{value:"none",disabled:!0,children:"No sub-categories available"})})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"subsub_category_id",children:"Sub Sub Category"}),e.jsx(p,{name:"subsub_category_id",control:t,render:({field:h})=>e.jsxs(I,{value:h.value||"",onValueChange:n=>{const N=x.find(S=>S._id===n);N&&(h.onChange(N._id),r("subSubCategorySlug",N.slug))},disabled:!F||x.length===0,children:[e.jsx(O,{id:"subsub_category_id",children:e.jsx(L,{children:h.value&&x.length>0?x.find(n=>n._id===h.value)?.category:c&&c.subSubCategory?.category||"Select Sub Sub Category"})}),e.jsx(M,{children:x.length>0?x.map(n=>e.jsx(w,{value:n._id,children:n.category},n._id)):e.jsx(w,{value:"none",disabled:!0,children:"No sub-sub-categories available"})})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"unit",children:"Unit"}),e.jsx(p,{name:"unit",control:t,rules:{required:"Unit is required"},render:({field:h})=>e.jsxs(I,{onValueChange:h.onChange,value:h.value||void 0,children:[e.jsx(O,{id:"unit",children:e.jsx(L,{placeholder:"Select Unit"})}),e.jsx(M,{children:m?e.jsx(w,{value:"loading",children:"Loading..."}):s.map(n=>e.jsx(w,{value:n.name,children:n.name},n._id))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"assay",children:"Assay (%)"}),e.jsx(p,{name:"assay",control:t,render:({field:h})=>e.jsx("div",{children:e.jsx("input",{type:"string",id:"assay",min:"0",max:"100",step:"0.01",value:h.value||0,onChange:n=>h.onChange(n.target.value),className:"w-full border "})})})]})]})})})};K.propTypes={control:A.object.isRequired,chemicalData:A.object,watch:A.func.isRequired,setValue:A.func.isRequired};var z={exports:{}},le=z.exports,J;function ie(){return J||(J=1,function(t,c){(function(u,r,b){t.exports=b(),t.exports.default=b()})("slugify",le,function(){var u=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),r=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function b(j,x){if(typeof j!="string")throw new Error("slugify: string argument expected");x=typeof x=="string"?{replacement:x}:x||{};var l=r[x.locale]||{},d=x.replacement===void 0?"-":x.replacement,m=x.trim===void 0?!0:x.trim,s=j.normalize().split("").reduce(function(i,a){var o=l[a];return o===void 0&&(o=u[a]),o===void 0&&(o=a),o===d&&(o=" "),i+o.replace(x.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return x.strict&&(s=s.replace(/[^A-Za-z0-9\s]/g,"")),m&&(s=s.trim()),s=s.replace(/\s+/g,d),x.lower&&(s=s.toLowerCase()),s}return b.extend=function(j){Object.assign(u,j)},b})}(z)),z.exports}var ne=ie();const W=V(ne),ce=({control:t,setValue:c})=>{const u=se({control:t,name:"name"});return C.useEffect(()=>{if(u){const r=W(u,{lower:!0,strict:!0,trim:!0});c("slug",r)}},[u,c]),e.jsx(R,{className:"w-full max-w-2xl mx-auto shadow-none border-none",children:e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"name",children:"Name"}),e.jsx(p,{name:"name",control:t,rules:{required:"Name is required"},render:({field:r})=>e.jsx(f,{id:"name",...r})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"slug",children:"Slug"}),e.jsx(p,{name:"slug",control:t,render:({field:r})=>e.jsx(f,{id:"slug",...r,onChange:b=>{const j=W(b.target.value,{lower:!0,strict:!0,trim:!0});r.onChange(j)}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"chemical_type",children:"Chemical Type"}),e.jsx(p,{name:"chemical_type",control:t,render:({field:r})=>e.jsx(f,{id:"chemical_type",...r})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"cas_number",children:"CAS Number"}),e.jsx(p,{name:"cas_number",control:t,render:({field:r})=>e.jsx(f,{id:"cas_number",...r})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"iupac",children:"IUPAC Name"}),e.jsx(p,{name:"iupac",control:t,render:({field:r})=>e.jsx(f,{id:"iupac",...r})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"molecular_formula",children:"Molecular Formula"}),e.jsx(p,{name:"molecular_formula",control:t,render:({field:r})=>e.jsx(f,{id:"molecular_formula",...r})})]})]})})},Y=({control:t,watch:c})=>{const[u,r]=C.useState({specs:!1,msds:!1}),b=c("specs"),j=c("msds"),x=(l,d="specs")=>{if(l){const m=d==="msds"?"msds":"specs",s=l.split(".")[0];window.open(`/api/image/${m}/view/${s}`,"_blank")}};return e.jsx(R,{className:"w-full max-w-2xl mx-auto border-none shadow-none",children:e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"packings",children:"Packings"}),e.jsx(p,{name:"packings",control:t,defaultValue:[],render:({field:l})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{placeholder:"Enter packing (e.g., 25kg)",onKeyDown:d=>{if(d.key==="Enter"){d.preventDefault();const m=d.target.value.trim();m&&!l.value.includes(m)&&(l.onChange([...l.value,m]),d.target.value="")}}}),e.jsx(E,{type:"button",onClick:d=>{const m=d.currentTarget.previousSibling,s=m.value.trim();s&&!l.value.includes(s)&&(l.onChange([...l.value,s]),m.value="")},children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(l.value)&&l.value.map((d,m)=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[e.jsx("span",{children:d}),e.jsx("button",{type:"button",onClick:()=>{const s=l.value.filter((i,a)=>a!==m);l.onChange(s)},className:"text-muted-foreground hover:text-foreground",children:e.jsx(T,{className:"h-4 w-4"})})]},m))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"grade",children:"Grade"}),e.jsx(p,{name:"grade",control:t,render:({field:l})=>e.jsx(f,{id:"grade",placeholder:"Enter grade",...l})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"iupac",children:"IUPAC Name"}),e.jsx(p,{name:"iupac",control:t,render:({field:l})=>e.jsx(f,{id:"iupac",placeholder:"Enter IUPAC name",...l})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"h_s_code",children:"HS Code"}),e.jsx(p,{name:"h_s_code",control:t,render:({field:l})=>e.jsx(f,{id:"h_s_code",placeholder:"Enter HS code",...l})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"molecular_weight",children:"Molecular Weight"}),e.jsx(p,{name:"molecular_weight",control:t,render:({field:l})=>e.jsx(f,{id:"molecular_weight",type:"number",placeholder:"Enter molecular weight",...l})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"molecular_formula",children:"Molecular Formula"}),e.jsx(p,{name:"molecular_formula",control:t,render:({field:l})=>e.jsx(f,{id:"molecular_formula",placeholder:"Enter molecular formula",...l})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"application",children:"Applications"}),e.jsx(p,{name:"application",control:t,defaultValue:[],render:({field:l})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{placeholder:"Enter application",onKeyDown:d=>{if(d.key==="Enter"){d.preventDefault();const m=d.target.value.trim();m&&!l.value.includes(m)&&(l.onChange([...l.value,m]),d.target.value="")}}}),e.jsx(E,{type:"button",onClick:d=>{const m=d.currentTarget.previousSibling,s=m.value.trim();s&&!l.value.includes(s)&&(l.onChange([...l.value,s]),m.value="")},children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(l.value)&&l.value.map((d,m)=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[e.jsx("span",{children:d}),e.jsx("button",{type:"button",onClick:()=>{const s=l.value.filter((i,a)=>a!==m);l.onChange(s)},className:"text-muted-foreground hover:text-foreground",children:e.jsx(T,{className:"h-4 w-4"})})]},m))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"specs",children:"Specifications (PDF)"}),e.jsx(p,{name:"specs",control:t,render:({field:{value:l,onChange:d,...m}})=>e.jsxs("div",{className:"space-y-2",children:[typeof b=="string"&&b&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-secondary rounded-md",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm truncate",children:b}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(b,"specs"),children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",onClick:()=>d(""),children:e.jsx(T,{className:"h-4 w-4"})})]}),e.jsx(f,{id:"specs",type:"file",accept:".pdf",disabled:u.specs,onChange:async s=>{const i=s.target.files?.[0];i&&(r(a=>({...a,specs:!0})),d(i),r(a=>({...a,specs:!1})))},...m}),u.specs&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploading specification file..."})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"msds",children:"MSDS (PDF)"}),e.jsx(p,{name:"msds",control:t,render:({field:{value:l,onChange:d,...m}})=>e.jsxs("div",{className:"space-y-2",children:[typeof j=="string"&&j&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-secondary rounded-md",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm truncate",children:j}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(j,"msds"),children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",onClick:()=>d(""),children:e.jsx(T,{className:"h-4 w-4"})})]}),e.jsx(f,{id:"msds",type:"file",accept:".pdf",disabled:u.msds,onChange:async s=>{const i=s.target.files?.[0];i&&(r(a=>({...a,msds:!0})),d(i),r(a=>({...a,msds:!1})))},...m}),u.msds&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploading MSDS file..."})]})})]})]})})};Y.propTypes={control:A.object.isRequired,watch:A.func};Y.defaultProps={watch:()=>{}};const oe=({control:t})=>e.jsx(R,{className:"w-full max-w-2xl mx-auto border-none shadow-none",children:e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metatitle",children:"Meta Title"}),e.jsx(p,{name:"metatitle",control:t,render:({field:c})=>e.jsx(f,{id:"metatitle",placeholder:"Enter meta title",...c})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metadescription",children:"Meta Description"}),e.jsx(p,{name:"metadescription",control:t,render:({field:c})=>e.jsx($,{id:"metadescription",placeholder:"Enter meta description",...c,rows:3})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metakeywords",children:"Meta Keywords"}),e.jsx(p,{name:"metakeywords",control:t,render:({field:c})=>e.jsx(f,{id:"metakeywords",placeholder:"Enter meta keywords",...c})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metacanonical",children:"Meta Canonical URL"}),e.jsx(p,{name:"metacanonical",control:t,render:({field:c})=>e.jsx(f,{id:"metacanonical",placeholder:"Enter canonical URL",...c})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metalanguage",children:"Meta Language"}),e.jsx(p,{name:"metalanguage",control:t,render:({field:c})=>e.jsx(f,{id:"metalanguage",placeholder:"Enter language code (e.g., en-US)",...c})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"metaschema",children:"Meta Schema"}),e.jsx(p,{name:"metaschema",control:t,render:({field:c})=>e.jsx($,{id:"metaschema",placeholder:"Enter JSON-LD schema",...c,rows:4})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"otherMeta",children:"Other Meta Information"}),e.jsx(p,{name:"otherMeta",control:t,render:({field:c})=>e.jsx($,{id:"otherMeta",placeholder:"Enter any additional meta information",...c,rows:3})})]})]})}),de=({control:t,setValue:c})=>{const{fields:u,append:r,remove:b,update:j}=ae({control:t,name:"images"}),x={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]},l=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background","align","direction","code-block","script"],d=C.useCallback((s,i)=>{const a=s.target.files[0];if(a){u[i]?.preview?.startsWith("blob:")&&URL.revokeObjectURL(u[i].preview);const o=URL.createObjectURL(a);j(i,{...u[i],file:a,preview:o,altText:u[i]?.altText||"",title:u[i]?.title||"",url:null})}},[u,j]);C.useEffect(()=>()=>{u.forEach(s=>{s?.preview?.startsWith("blob:")&&URL.revokeObjectURL(s.preview)})},[u]);const m=C.useCallback(s=>{u[s]?.preview?.startsWith("blob:")&&URL.revokeObjectURL(u[s].preview),u[s]._id&&c(`imagesToDelete.${u[s]._id}`,!0),b(s)},[u,b,c]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"global_tagline",children:"Global Tagline"}),e.jsx(p,{name:"global_tagline",control:t,defaultValue:"",render:({field:s})=>e.jsx(f,{id:"global_tagline",placeholder:"Enter global tagline",...s})}),e.jsx("p",{className:"text-xs text-gray-500",children:"A brief tagline that will appear globally."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"description",children:"Description"}),e.jsx(p,{name:"description",control:t,defaultValue:"",render:({field:{onChange:s,value:i}})=>e.jsx("div",{className:"quill-container",children:e.jsx(te,{id:"description",theme:"snow",value:i,onChange:s,className:"bg-white",modules:x,formats:l,placeholder:"Enter detailed description..."})})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format your content using the toolbar above. Use headings, lists, and formatting to create well-structured content."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"synonyms",children:"Synonyms"}),e.jsx(p,{name:"synonyms",control:t,defaultValue:[],render:({field:s})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{placeholder:"Enter synonym",onKeyDown:i=>{if(i.key==="Enter"){i.preventDefault();const a=i.target.value.trim();a&&!s.value.includes(a)&&(s.onChange([...s.value,a]),i.target.value="")}}}),e.jsx(E,{type:"button",onClick:i=>{const a=i.currentTarget.previousSibling,o=a.value.trim();o&&!s.value.includes(o)&&(s.onChange([...s.value,o]),a.value="")},children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(s.value)&&s.value.map((i,a)=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[e.jsx("span",{children:i}),e.jsx("button",{type:"button",onClick:()=>{const o=s.value.filter((y,v)=>v!==a);s.onChange(o)},className:"text-muted-foreground hover:text-foreground",children:e.jsx(T,{className:"h-4 w-4"})})]},a))})]})})]}),e.jsx(g,{children:"Images"}),u.map((s,i)=>e.jsxs("div",{className:"space-y-2 border p-4 rounded-lg",children:[s.preview||s.url?e.jsx("img",{src:s.preview||`/api/image/download/${s.url}`,alt:s.altText||"Image preview",className:"w-32 h-32 object-cover rounded border"}):e.jsx("div",{className:"w-32 h-32 flex items-center justify-center border rounded bg-gray-100",children:"No Preview"}),e.jsx("input",{type:"file",onChange:a=>d(a,i),accept:"image/*",className:`block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-full file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-blue-50 file:text-blue-700\r
                hover:file:bg-blue-100`}),e.jsx(g,{htmlFor:`alt-text-${i}`,children:"Alt Text"}),e.jsx(p,{name:`images.${i}.altText`,control:t,defaultValue:s.altText||"",render:({field:a})=>e.jsx(f,{id:`alt-text-${i}`,placeholder:"Alt Text",...a})}),e.jsx(g,{htmlFor:`image-title-${i}`,children:"Image Title"}),e.jsx(p,{name:`images.${i}.title`,control:t,defaultValue:s.title||"",render:({field:a})=>e.jsx(f,{id:`image-title-${i}`,placeholder:"Image Title",...a})}),e.jsx("button",{type:"button",onClick:()=>m(i),className:"text-red-600 hover:underline",children:"Remove"})]},s.id)),e.jsx("button",{type:"button",onClick:()=>r({file:null,preview:null,altText:"",title:"",url:null}),className:"px-4 py-2 mt-4 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add Image"})]})},Se=()=>{const{control:t,handleSubmit:c,watch:u,setValue:r}=re({defaultValues:{category:"",sub_category:"",subsub_category_id:"",categorySlug:"",subCategorySlug:"",subSubCategorySlug:"",name:"",slug:"",images:[],catalog:"",msds:"",specs:"",unit:"",chemical_type:"",cas_number:"",packings:[],grade:"",iupac:"",h_s_code:"",molecular_weight:"",molecular_formula:"",synonyms:[],application:[],chemical_industries:[],product_code:"",auto_p_code:"",packing:"",hs_code:"",assay:"",metatitle:"",metadescription:"",metakeywords:"",metacanonical:"",metalanguage:"",metaschema:"",otherMeta:"",imagesToDelete:{}}}),b=X(),{id:j}=ee(),[x,l]=C.useState(!1),[d,m]=C.useState(null);C.useEffect(()=>{(async()=>{if(j){l(!0);try{const o=(await q.get(`/api/chemical/getChemicalById?id=${j}`)).data;m(o),o.category&&(r("category",o.category._id),r("categorySlug",o.category.slug)),o.sub_category&&(r("sub_category",o.sub_category._id),r("subCategorySlug",o.sub_category.slug)),o.subsub_category_id&&(r("subsub_category_id",typeof o.subsub_category_id=="object"?o.subsub_category_id._id:o.subsub_category_id),r("subSubCategorySlug",o.subsub_category_id.slug||"")),Object.entries(o).forEach(([y,v])=>{y!=="category"&&y!=="sub_category"&&y!=="subsub_category_id"&&y!=="images"&&r(y,v)}),o.images&&o.images.length>0&&r("images",o.images)}catch(a){console.error("Error fetching chemical data:",a)}finally{l(!1)}}})()},[j,r]);const s=async i=>{try{const a=new FormData;i.images.forEach((y,v)=>{y.file instanceof File?(a.append("images",y.file),a.append(`altText-${v}`,y.altText||""),a.append(`title-${v}`,y.title||"")):y.url&&(a.append(`existingImages[${v}][url]`,y.url),a.append(`existingImages[${v}][altText]`,y.altText||""),a.append(`existingImages[${v}][title]`,y.title||""))}),Object.keys(i.imagesToDelete).forEach(y=>{a.append("imagesToDelete[]",y)}),Object.entries(i).forEach(([y,v])=>{y!=="images"&&y!=="imagesToDelete"&&v!==void 0&&v!==null&&v!==""&&(Array.isArray(v)?v.forEach((_,k)=>{a.append(`${y}[${k}]`,_)}):y==="molecular_weight"&&v?a.append(y,Number(v)):a.append(y,v))});let o;j?o=await q.put(`/api/chemical/updateChemicalById?id=${j}`,a,{headers:{"Content-Type":"multipart/form-data"}}):o=await q.post("/api/chemical/add",a,{headers:{"Content-Type":"multipart/form-data"}}),console.log("Form submitted successfully",o.data),b("/chemical-table")}catch(a){console.error("Error submitting form:",a.response?.data?.message||a.message)}};return x?e.jsx("div",{children:"Loading existing chemical data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex items-center text-sm text-gray-500",children:[e.jsx(P,{to:"/",className:"hover:text-purple-600",children:"Home"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(P,{to:"/chemical-table",className:"hover:text-purple-600",children:"Chemicals"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900",children:j?"Edit Chemical":"New Chemical"})]}),e.jsxs("form",{onSubmit:c(s),className:"space-y-6 bg-white",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Category Information"}),e.jsx(K,{control:t,watch:u,setValue:r,chemicalData:d})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Chemical Details"}),e.jsx(ce,{control:t,setValue:r,chemicalData:d})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Chemical Properties"}),e.jsx(Y,{control:t,chemicalData:d})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Image Upload"}),e.jsx(de,{control:t,setValue:r,chemicalData:d})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Meta Information"}),e.jsx(oe,{control:t,chemicalData:d})]})]}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(E,{type:"submit",className:"px-8 py-3 w-1/4 text-white rounded-md hover:bg-purple-700 transition duration-300 ease-in-out transform hover:scale-105",children:j?"Update Chemical":"Submit Chemical"})})]})]})};export{Se as ChemicalFormPage,Se as default};
