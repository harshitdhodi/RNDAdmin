import{u as m,j as s,B as n,P as b,S as y}from"./main-Bqu49der.js";import{L as f,f as C,R as p}from"./vendor-CxfDVdnA.js";import{T as v,a as N,b as x,c as l,d as I,e as h}from"./table-CI9DwgTg.js";import{P as w}from"./plus-my77MK7m.js";import{C as S}from"./chevron-right-C2D5cHS9.js";import{T}from"./trash-2-D6D36YAN.js";const d=({item:e,level:a,parentIds:c={}})=>{const i=C(),[r,u]=p.useState(!1),g=e.subCategories?.length>0||e.subSubCategory?.length>0,t={...c,...a===0?{categoryId:e._id}:a===1?{subcategoryId:e._id}:{subSubCategoryId:e._id}},j=()=>{const o=`/edit-chemical-category/${t.categoryId||""}${t.subcategoryId?`/${t.subcategoryId}`:""}${t.subSubCategoryId?`/${t.subSubCategoryId}`:""}`;i(o)};return s.jsxs(s.Fragment,{children:[s.jsxs(x,{children:[s.jsx(h,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center",style:{paddingLeft:`${a*20}px`},children:[g&&s.jsx("button",{onClick:()=>u(!r),className:"mr-2",children:r?s.jsx(b,{className:"h-4 w-4"}):s.jsx(S,{className:"h-4 w-4"})}),e.category]})}),s.jsx(h,{children:s.jsxs("div",{className:"flex justify-start ",children:[s.jsx(n,{variant:"ghost",size:"icon",onClick:j,children:s.jsx(y,{className:"h-4 w-4 text-blue-600"})}),s.jsx(n,{variant:"ghost",size:"icon",children:s.jsx(T,{className:"h-4 w-4 text-red-600"})})]})})]}),r&&e.subCategories&&e.subCategories.map(o=>s.jsx(d,{item:o,level:a+1,parentIds:t},o._id)),r&&e.subSubCategory&&e.subSubCategory.map(o=>s.jsx(d,{item:o,level:a+1,parentIds:t},o._id))]})};function P(){const{data:e,error:a,isLoading:c}=m();if(console.log("Raw API response:",e),c)return s.jsx("div",{children:"Loading..."});if(a)return s.jsxs("div",{children:["Error: ",a.message||"An error occurred"]});const i=Array.isArray(e)?e:[e];return console.log("Processed categories:",i),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-end",children:s.jsx(f,{to:"/chemical-category-form",children:s.jsxs(n,{children:[s.jsx(w,{className:"mr-2 h-4 w-4"})," Add Category"]})})}),s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs(v,{children:[s.jsx(N,{children:s.jsxs(x,{children:[s.jsx(l,{children:"Categories"}),s.jsx(l,{children:"Actions"})]})}),s.jsx(I,{children:i.map(r=>s.jsx(d,{item:r,level:0,parentIds:{}},r._id))})]})})]})}function B(){return s.jsxs("div",{className:"container mx-auto py-10",children:[s.jsx("h1",{className:"text-2xl font-bold mb-5",children:"Product Categories"}),s.jsx(P,{})]})}export{B as default};
