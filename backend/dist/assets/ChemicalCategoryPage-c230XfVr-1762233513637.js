import{u as y,j as s,L as C,B as n,f,R as p,Z as v,S as N}from"./index-DQEtGUrR-1762233513637.js";import{T as I,a as w,b as g,c as x,d as S,e as u}from"./table-CkC-qu-f-1762233513637.js";import{P as T}from"./plus-mprX_k2d-1762233513637.js";import{C as A}from"./chevron-right-DC9Wwm-_-1762233513637.js";import{T as P}from"./trash-2-DJdr9GeB-1762233513637.js";const d=({item:e,level:a,parentIds:i={}})=>{var l,h;const c=f(),[r,j]=p.useState(!1),m=((l=e.subCategories)==null?void 0:l.length)>0||((h=e.subSubCategory)==null?void 0:h.length)>0,o={...i,...a===0?{categoryId:e._id}:a===1?{subcategoryId:e._id}:{subSubCategoryId:e._id}},b=()=>{const t=`/edit-chemical-category/${o.categoryId||""}${o.subcategoryId?`/${o.subcategoryId}`:""}${o.subSubCategoryId?`/${o.subSubCategoryId}`:""}`;c(t)};return s.jsxs(s.Fragment,{children:[s.jsxs(g,{children:[s.jsx(u,{className:"font-medium",children:s.jsxs("div",{className:`flex items-center pl-[${a*20}px]`,children:[m&&s.jsx("button",{onClick:()=>j(!r),className:"mr-2",children:r?s.jsx(v,{className:"h-4 w-4"}):s.jsx(A,{className:"h-4 w-4"})}),e.category]})}),s.jsx(u,{children:s.jsxs("div",{className:"flex justify-start ",children:[s.jsx(n,{variant:"ghost",size:"icon",onClick:b,children:s.jsx(N,{className:"h-4 w-4 text-blue-600"})}),s.jsx(n,{variant:"ghost",size:"icon",children:s.jsx(P,{className:"h-4 w-4 text-red-600"})})]})})]}),r&&e.subCategories&&e.subCategories.map(t=>s.jsx(d,{item:t,level:a+1,parentIds:o},t._id)),r&&e.subSubCategory&&e.subSubCategory.map(t=>s.jsx(d,{item:t,level:a+1,parentIds:o},t._id))]})};function R(){const{data:e,error:a,isLoading:i}=y();if(console.log("Raw API response:",e),i)return s.jsx("div",{children:"Loading..."});if(a)return s.jsxs("div",{children:["Error: ",a.message||"An error occurred"]});const c=Array.isArray(e)?e:[e];return console.log("Processed categories:",c),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-end",children:s.jsx(C,{to:"/chemical-category-form",children:s.jsxs(n,{children:[s.jsx(T,{className:"mr-2 h-4 w-4"})," Add Category"]})})}),s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs(I,{children:[s.jsx(w,{children:s.jsxs(g,{children:[s.jsx(x,{children:"Categories"}),s.jsx(x,{children:"Actions"})]})}),s.jsx(S,{children:c.map(r=>s.jsx(d,{item:r,level:0,parentIds:{}},r._id))})]})})]})}function E(){return s.jsxs("div",{className:"container mx-auto py-10",children:[s.jsx("h1",{className:"text-2xl font-bold mb-5",children:"Product Categories"}),s.jsx(R,{})]})}export{E as default};
