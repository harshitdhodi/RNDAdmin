import{j as e,D as N,m as v,n as w,o as D,I as E,B as c,F as S,G as k,H as I,J as H}from"./main-B_OYodTY.js";import{c as d}from"./vendor-CxfDVdnA.js";import{T as M,a as B,b as o,c as m,d as F,e as h}from"./table-4v0nO1xc.js";import{P}from"./plus-B7nEkLih.js";function _({open:n,setOpen:l,chemicalName:r,setChemicalName:s,handleSave:i}){return e.jsx(N,{open:n,onOpenChange:l,children:e.jsxs(v,{children:[e.jsx(w,{children:e.jsx(D,{className:"text-purple-600",children:"Manage Chemical Type"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{id:"name",placeholder:"Chemical Type Name",value:r,onChange:t=>s(t.target.value),className:"border-purple-200 focus:border-purple-400"}),!r&&e.jsx("p",{className:"text-red-500 text-sm",children:"Please enter name"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{onClick:i,disabled:!r,className:"bg-green-500 hover:bg-green-600",children:"Save"}),e.jsx(c,{variant:"destructive",onClick:()=>l(!1),children:"Cancel"})]})]})]})})}function z({chemicalTypes:n,handleEdit:l,handleDelete:r}){return e.jsxs(M,{className:"w-1/2 border",children:[e.jsx(B,{children:e.jsxs(o,{className:"bg-gray-100",children:[e.jsx(m,{className:"w-[200px] border-r font-bold  border-gray-300",children:"Action"}),e.jsx(m,{className:"font-bold",children:"Name"})]})}),e.jsx(F,{children:n.map(s=>e.jsxs(o,{className:"p-1",children:[e.jsx(h,{className:"p-2 border-r border-gray-300",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",className:"bg-green-500 px-2 py-1 hover:bg-green-600 w-20 text-white border-none",size:"sm",onClick:()=>l(s),children:"Edit"}),e.jsx(c,{variant:"outline",className:"bg-red-500 hover:bg-red-600 w-20 text-white border-none",size:"sm",onClick:()=>r(s._id),children:"Delete"})]})}),e.jsx(h,{className:"p-2",children:s.name})]},s.id))})]})}function J(){const[n,l]=d.useState(!1),[r,s]=d.useState(""),[i,t]=d.useState(null),{data:p=[],isLoading:x,error:u}=S(),[g]=k(),[j]=I(),[b]=H(),y=async()=>{try{if(r){const a={name:r};console.log("Saving chemical type:",{id:i,updatedChemicalType:a}),i?await j({id:i,updatedChemicalType:a}).unwrap():await g(a).unwrap(),s(""),t(null),l(!1)}}catch(a){console.error("Failed to save chemical type:",a)}},C=a=>{a&&a._id?(s(a.name),t(a._id),l(!0)):console.error("Invalid chemical type selected:",a)},f=async a=>{try{await b(a).unwrap()}catch(T){console.error("Failed to delete chemical type:",T)}};return x?e.jsx("p",{children:"Loading..."}):u?e.jsx("p",{children:"Error fetching chemical types."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-purple-600",children:"Chemical Types"}),e.jsxs(c,{onClick:()=>l(!0),className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Add Chemical Type"]})]}),e.jsx(z,{chemicalTypes:p,handleEdit:C,handleDelete:f}),e.jsx(_,{open:n,setOpen:l,chemicalName:r,setChemicalName:s,handleSave:y,editingId:i})]})}export{J as default};
