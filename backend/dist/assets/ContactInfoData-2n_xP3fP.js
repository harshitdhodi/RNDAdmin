import{bU as e,bV as a,bW as t,j as s}from"./main-BQqr2_19.js";import{r as l}from"./vendor-router-DoRotgOs.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";const o=()=>{const[o,i]=l.useState({address:"",mobiles:[""],emails:[""],imgTitle:[""],altName:[""],photo:[],previewUrls:[]}),[r]=e(),[m]=a(),{data:d}=t();l.useEffect((()=>{if(d&&d.length>0){const e=d[0];i({address:e.address,mobiles:e.mobiles,emails:e.emails,imgTitle:e.imgTitle||[""],altName:e.altName||[""],photo:[],previewUrls:e.photo?e.photo.map((e=>`/api/image/download/${e}`)):[]})}}),[d]);l.useEffect((()=>()=>{o.previewUrls.forEach((e=>{e.startsWith("blob:")&&URL.revokeObjectURL(e)}))}),[o.previewUrls]);return s.jsx("div",{className:"max-w-2xl mx-auto p-4",children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault();const a=new FormData;a.append("address",o.address),o.mobiles.forEach((e=>{a.append("mobiles[]",e)})),o.emails.forEach((e=>{a.append("emails[]",e)})),o.imgTitle.forEach(((e,t)=>{a.append("imgTitle[]",e)})),o.altName.forEach(((e,t)=>{a.append("altName[]",e)})),o.photo.length>0?o.photo.forEach((e=>{a.append("photo[]",e)})):d&&d[0]?.photo&&d[0].photo.forEach((e=>{a.append("photo[]",e)}));try{d&&d.length>0?await m({id:d[0]._id,formData:a}).unwrap():await r(a).unwrap()}catch(t){}},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),s.jsx("textarea",{value:o.address,onChange:e=>i((a=>({...a,address:e.target.value}))),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Numbers"}),o.mobiles.map(((e,a)=>s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx("input",{type:"tel",value:e,onChange:e=>i((t=>{const s=[...t.mobiles];return s[a]=e.target.value,{...t,mobiles:s}})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),o.mobiles.length>1&&s.jsx("button",{type:"button",onClick:()=>i((e=>{const t=[...e.mobiles];return t.splice(a,1),{...e,mobiles:t}})),className:"text-red-500",children:"Remove"})]},a))),s.jsx("button",{type:"button",onClick:()=>i((e=>({...e,mobiles:[...e.mobiles,""]}))),className:"mt-2 text-indigo-600",children:"Add Mobile"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emails"}),o.emails.map(((e,a)=>s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx("input",{type:"email",value:e,onChange:e=>i((t=>{const s=[...t.emails];return s[a]=e.target.value,{...t,emails:s}})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),o.emails.length>1&&s.jsx("button",{type:"button",onClick:()=>i((e=>{const t=[...e.emails];return t.splice(a,1),{...e,emails:t}})),className:"text-red-500",children:"Remove"})]},a))),s.jsx("button",{type:"button",onClick:()=>i((e=>({...e,emails:[...e.emails,""]}))),className:"mt-2 text-indigo-600",children:"Add Email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo Images"}),s.jsx("input",{type:"file",onChange:e=>{const a=Array.from(e.target.files),t=a.map((e=>URL.createObjectURL(e)));i((e=>({...e,photo:a,previewUrls:[...t],imgTitle:a.map((()=>"")),altName:a.map((()=>""))})))},accept:"image/*",multiple:!0,className:"mt-1 block w-full"}),s.jsx("div",{className:"mt-2 grid grid-cols-3 gap-4",children:o.previewUrls.map(((e,a)=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:e,alt:o.altName[a]||`Preview ${a+1}`,className:"w-24 h-24 object-cover rounded"}),s.jsx("input",{type:"text",placeholder:"Image Title",value:o.imgTitle[a]||"",onChange:e=>{const t=[...o.imgTitle];t[a]=e.target.value,i((e=>({...e,imgTitle:t})))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),s.jsx("input",{type:"text",placeholder:"Alt Text",value:o.altName[a]||"",onChange:e=>{const t=[...o.altName];t[a]=e.target.value,i((e=>({...e,altName:t})))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),s.jsx("button",{type:"button",onClick:()=>{i((e=>({...e,previewUrls:e.previewUrls.filter(((e,t)=>t!==a)),photo:Array.from(e.photo).filter(((e,t)=>t!==a)),imgTitle:e.imgTitle.filter(((e,t)=>t!==a)),altName:e.altName.filter(((e,t)=>t!==a))})))},className:"text-red-500",children:"Remove"})]},a)))})]}),s.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700",children:d&&d.length>0?"Update":"Submit"})]})})};export{o as default};
//# sourceMappingURL=ContactInfoData-2n_xP3fP.js.map
