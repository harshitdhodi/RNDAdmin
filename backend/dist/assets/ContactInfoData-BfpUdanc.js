import{r as e,j as t}from"./react-BfBsRgn0.js";import{bb as s,bc as a,bd as i}from"./index-mCSb4W1J.js";import"./classnames-C3ovBj6j.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./react-router-DUJjWq5j.js";import"./cookie-BUTH-fPQ.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./lucide-D6BDVLHE.js";import"./axios-BoylL8Pu.js";const r=()=>{const[r,l]=e.useState({address:"",mobiles:[""],emails:[""],imgTitle:[""],altName:[""],photo:[],previewUrls:[]}),[o]=s(),[m]=a(),{data:d}=i();e.useEffect((()=>{if(d&&d.length>0){const e=d[0];l({address:e.address,mobiles:e.mobiles,emails:e.emails,imgTitle:e.imgTitle||[""],altName:e.altName||[""],photo:[],previewUrls:e.photo?e.photo.map((e=>`/api/image/download/${e}`)):[]})}}),[d]);e.useEffect((()=>()=>{r.previewUrls.forEach((e=>{e.startsWith("blob:")&&URL.revokeObjectURL(e)}))}),[r.previewUrls]);return t.jsx("div",{className:"max-w-2xl mx-auto p-4",children:t.jsxs("form",{onSubmit:async e=>{var t;e.preventDefault();const s=new FormData;s.append("address",r.address),r.mobiles.forEach((e=>{s.append("mobiles[]",e)})),r.emails.forEach((e=>{s.append("emails[]",e)})),r.imgTitle.forEach(((e,t)=>{s.append("imgTitle[]",e)})),r.altName.forEach(((e,t)=>{s.append("altName[]",e)})),r.photo.length>0?r.photo.forEach((e=>{s.append("photo[]",e)})):d&&(null==(t=d[0])?void 0:t.photo)&&d[0].photo.forEach((e=>{s.append("photo[]",e)}));try{d&&d.length>0?await m({id:d[0]._id,formData:s}).unwrap():await o(s).unwrap()}catch(a){}},className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),t.jsx("textarea",{value:r.address,onChange:e=>l((t=>({...t,address:e.target.value}))),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Numbers"}),r.mobiles.map(((e,s)=>t.jsxs("div",{className:"flex gap-2 mt-1",children:[t.jsx("input",{type:"tel",value:e,onChange:e=>l((t=>{const a=[...t.mobiles];return a[s]=e.target.value,{...t,mobiles:a}})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),r.mobiles.length>1&&t.jsx("button",{type:"button",onClick:()=>l((e=>{const t=[...e.mobiles];return t.splice(s,1),{...e,mobiles:t}})),className:"text-red-500",children:"Remove"})]},s))),t.jsx("button",{type:"button",onClick:()=>l((e=>({...e,mobiles:[...e.mobiles,""]}))),className:"mt-2 text-indigo-600",children:"Add Mobile"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emails"}),r.emails.map(((e,s)=>t.jsxs("div",{className:"flex gap-2 mt-1",children:[t.jsx("input",{type:"email",value:e,onChange:e=>l((t=>{const a=[...t.emails];return a[s]=e.target.value,{...t,emails:a}})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),r.emails.length>1&&t.jsx("button",{type:"button",onClick:()=>l((e=>{const t=[...e.emails];return t.splice(s,1),{...e,emails:t}})),className:"text-red-500",children:"Remove"})]},s))),t.jsx("button",{type:"button",onClick:()=>l((e=>({...e,emails:[...e.emails,""]}))),className:"mt-2 text-indigo-600",children:"Add Email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo Images"}),t.jsx("input",{type:"file",onChange:e=>{const t=Array.from(e.target.files),s=t.map((e=>URL.createObjectURL(e)));l((e=>({...e,photo:t,previewUrls:[...s],imgTitle:t.map((()=>"")),altName:t.map((()=>""))})))},accept:"image/*",multiple:!0,className:"mt-1 block w-full"}),t.jsx("div",{className:"mt-2 grid grid-cols-3 gap-4",children:r.previewUrls.map(((e,s)=>t.jsxs("div",{className:"space-y-2",children:[t.jsx("img",{src:e,alt:r.altName[s]||`Preview ${s+1}`,className:"w-24 h-24 object-cover rounded"}),t.jsx("input",{type:"text",placeholder:"Image Title",value:r.imgTitle[s]||"",onChange:e=>{const t=[...r.imgTitle];t[s]=e.target.value,l((e=>({...e,imgTitle:t})))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),t.jsx("input",{type:"text",placeholder:"Alt Text",value:r.altName[s]||"",onChange:e=>{const t=[...r.altName];t[s]=e.target.value,l((e=>({...e,altName:t})))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),t.jsx("button",{type:"button",onClick:()=>{l((e=>({...e,previewUrls:e.previewUrls.filter(((e,t)=>t!==s)),photo:Array.from(e.photo).filter(((e,t)=>t!==s)),imgTitle:e.imgTitle.filter(((e,t)=>t!==s)),altName:e.altName.filter(((e,t)=>t!==s))})))},className:"text-red-500",children:"Remove"})]},s)))})]}),t.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700",children:d&&d.length>0?"Update":"Submit"})]})})};export{r as default};
