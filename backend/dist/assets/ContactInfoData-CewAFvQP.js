import{c0 as g,c1 as h,c2 as b,j as l}from"./main-oLvhVZjp.js";import{c as n}from"./vendor-CxfDVdnA.js";const w=()=>{const[o,i]=n.useState({address:"",mobiles:[""],emails:[""],imgTitle:[""],altName:[""],photo:[],previewUrls:[]}),[d]=g(),[c]=h(),{data:m}=b();n.useEffect(()=>{if(m&&m.length>0){const a=m[0];i({address:a.address,mobiles:a.mobiles,emails:a.emails,imgTitle:a.imgTitle||[""],altName:a.altName||[""],photo:[],previewUrls:a.photo?a.photo.map(e=>`/api/image/download/${e}`):[]})}},[m]);const u=a=>{const e=Array.from(a.target.files),t=e.map(s=>URL.createObjectURL(s));i(s=>({...s,photo:e,previewUrls:[...t],imgTitle:e.map(()=>""),altName:e.map(()=>"")}))};n.useEffect(()=>()=>{o.previewUrls.forEach(a=>{a.startsWith("blob:")&&URL.revokeObjectURL(a)})},[o.previewUrls]);const p=async a=>{a.preventDefault();const e=new FormData;e.append("address",o.address),o.mobiles.forEach(t=>{e.append("mobiles[]",t)}),o.emails.forEach(t=>{e.append("emails[]",t)}),o.imgTitle.forEach((t,s)=>{e.append("imgTitle[]",t)}),o.altName.forEach((t,s)=>{e.append("altName[]",t)}),o.photo.length>0?o.photo.forEach(t=>{e.append("photo[]",t)}):m&&m[0]?.photo&&m[0].photo.forEach(t=>{e.append("photo[]",t)});try{m&&m.length>0?await c({id:m[0]._id,formData:e}).unwrap():await d(e).unwrap()}catch(t){console.error("Error:",t)}};return l.jsx("div",{className:"max-w-2xl mx-auto p-4",children:l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),l.jsx("textarea",{value:o.address,onChange:a=>i(e=>({...e,address:a.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Numbers"}),o.mobiles.map((a,e)=>l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("input",{type:"tel",value:a,onChange:t=>i(s=>{const r=[...s.mobiles];return r[e]=t.target.value,{...s,mobiles:r}}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),o.mobiles.length>1&&l.jsx("button",{type:"button",onClick:()=>i(t=>{const s=[...t.mobiles];return s.splice(e,1),{...t,mobiles:s}}),className:"text-red-500",children:"Remove"})]},e)),l.jsx("button",{type:"button",onClick:()=>i(a=>({...a,mobiles:[...a.mobiles,""]})),className:"mt-2 text-indigo-600",children:"Add Mobile"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emails"}),o.emails.map((a,e)=>l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("input",{type:"email",value:a,onChange:t=>i(s=>{const r=[...s.emails];return r[e]=t.target.value,{...s,emails:r}}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),o.emails.length>1&&l.jsx("button",{type:"button",onClick:()=>i(t=>{const s=[...t.emails];return s.splice(e,1),{...t,emails:s}}),className:"text-red-500",children:"Remove"})]},e)),l.jsx("button",{type:"button",onClick:()=>i(a=>({...a,emails:[...a.emails,""]})),className:"mt-2 text-indigo-600",children:"Add Email"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo Images"}),l.jsx("input",{type:"file",onChange:u,accept:"image/*",multiple:!0,className:"mt-1 block w-full"}),l.jsx("div",{className:"mt-2 grid grid-cols-3 gap-4",children:o.previewUrls.map((a,e)=>l.jsxs("div",{className:"space-y-2",children:[l.jsx("img",{src:a,alt:o.altName[e]||`Preview ${e+1}`,className:"w-24 h-24 object-cover rounded"}),l.jsx("input",{type:"text",placeholder:"Image Title",value:o.imgTitle[e]||"",onChange:t=>{const s=[...o.imgTitle];s[e]=t.target.value,i(r=>({...r,imgTitle:s}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),l.jsx("input",{type:"text",placeholder:"Alt Text",value:o.altName[e]||"",onChange:t=>{const s=[...o.altName];s[e]=t.target.value,i(r=>({...r,altName:s}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),l.jsx("button",{type:"button",onClick:()=>{i(t=>({...t,previewUrls:t.previewUrls.filter((s,r)=>r!==e),photo:Array.from(t.photo).filter((s,r)=>r!==e),imgTitle:t.imgTitle.filter((s,r)=>r!==e),altName:t.altName.filter((s,r)=>r!==e)}))},className:"text-red-500",children:"Remove"})]},e))})]}),l.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700",children:m&&m.length>0?"Update":"Submit"})]})})};export{w as default};
