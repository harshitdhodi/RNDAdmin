import{r as d,ev as u,ew as x,ex as g,j as e,ey as h,ao as f}from"./index-DIfLp59a-1768988441431.js";import{M as b}from"./map-pin-ibo9C8Lc-1768988441431.js";import{P as y}from"./phone-UQIQhTsY-1768988441431.js";const w=()=>{const[o,l]=d.useState({address:"",mobiles:[""],emails:[""],imgTitle:[""],altName:[""],photo:[],previewUrls:[],mapLink:""}),[m]=u(),[c]=x(),{data:r}=g();d.useEffect(()=>{if(r&&r.length>0){const s=r[0];l({address:s.address||"",mobiles:s.mobiles||[""],emails:s.emails||[""],imgTitle:s.imgTitle||[""],altName:s.altName||[""],photo:[],previewUrls:s.photo?s.photo.map(t=>`/api/image/download/${t}`):[],mapLink:s.mapLink||""})}},[r]),d.useEffect(()=>()=>{o.previewUrls.forEach(s=>{s.startsWith("blob:")&&URL.revokeObjectURL(s)})},[o.previewUrls]);const p=async s=>{var i;s.preventDefault();const t=new FormData;t.append("address",o.address),t.append("mapLink",o.mapLink),o.mobiles.forEach(a=>{t.append("mobiles[]",a)}),o.emails.forEach(a=>{t.append("emails[]",a)}),o.imgTitle.forEach((a,n)=>{t.append("imgTitle[]",a)}),o.altName.forEach((a,n)=>{t.append("altName[]",a)}),o.photo.length>0?o.photo.forEach(a=>{t.append("photo[]",a)}):r&&((i=r[0])!=null&&i.photo)&&r[0].photo.forEach(a=>{t.append("photo[]",a)});try{r&&r.length>0?(await c({id:r[0]._id,formData:t}).unwrap(),alert("Contact information updated successfully!")):(await m(t).unwrap(),alert("Contact information added successfully!"))}catch(a){console.error("Error:",a),alert("Error saving contact information. Please try again.")}};return e.jsx("div",{className:"min-h-screen ",children:e.jsxs("div",{className:"max-w-3xl ",children:[e.jsx("div",{className:"bg-white rounded-t-2xl  p-2 border-b-4 border-indigo-600",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Contact Information"})}),e.jsxs("div",{className:"bg-white rounded-b-2xl  p-5 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-semibold text-gray-700",children:[e.jsx(b,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Address"]}),e.jsx("textarea",{value:o.address,onChange:s=>l(t=>({...t,address:s.target.value})),rows:"3",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all outline-none",placeholder:"Enter your business address",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-semibold text-gray-700",children:[e.jsx(h,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Map Link"]}),e.jsx("input",{type:"url",value:o.mapLink,onChange:s=>l(t=>({...t,mapLink:s.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all outline-none",placeholder:"https://maps.google.com/..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-semibold text-gray-700",children:[e.jsx(y,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Mobile Numbers"]}),o.mobiles.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"tel",value:s,onChange:i=>l(a=>{const n=[...a.mobiles];return n[t]=i.target.value,{...a,mobiles:n}}),className:"flex-1 px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all outline-none",placeholder:"+91 XXXXX XXXXX",required:!0}),o.mobiles.length>1&&e.jsx("button",{type:"button",onClick:()=>l(i=>{const a=[...i.mobiles];return a.splice(t,1),{...i,mobiles:a}}),className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors font-medium",children:"Remove"})]},t)),e.jsxs("button",{type:"button",onClick:()=>l(s=>({...s,mobiles:[...s.mobiles,""]})),className:"text-indigo-600 hover:text-indigo-700 font-medium text-sm flex items-center gap-1",children:[e.jsx("span",{className:"text-xl",children:"+"})," Add Mobile Number"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-semibold text-gray-700",children:[e.jsx(f,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Email Addresses"]}),o.emails.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",value:s,onChange:i=>l(a=>{const n=[...a.emails];return n[t]=i.target.value,{...a,emails:n}}),className:"flex-1 px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all outline-none",placeholder:"contact@example.com",required:!0}),o.emails.length>1&&e.jsx("button",{type:"button",onClick:()=>l(i=>{const a=[...i.emails];return a.splice(t,1),{...i,emails:a}}),className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors font-medium",children:"Remove"})]},t)),e.jsxs("button",{type:"button",onClick:()=>l(s=>({...s,emails:[...s.emails,""]})),className:"text-indigo-600 hover:text-indigo-700 font-medium text-sm flex items-center gap-1",children:[e.jsx("span",{className:"text-xl",children:"+"})," Add Email Address"]})]}),e.jsx("button",{type:"button",onClick:p,className:"w-full bg-gradient-to-r from-indigo-600 to-blue-600 text-white py-4 px-6 rounded-lg hover:from-indigo-700 hover:to-blue-700 transition-all font-semibold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:r&&r.length>0?"âœ“ Update Contact Information":"+ Add Contact Information"})]})]})})};export{w as default};
