import{r as e,j as s}from"./react-BfBsRgn0.js";import{U as t,L as a,I as i,T as r,B as l}from"./index-cVSOkL6A.js";import{C as c,b as n,c as o,a as d}from"./card-DP-8QC8I.js";import{S as m,a as u,b as j,c as h,d as p}from"./select-DKOOCAeT.js";import{B as x}from"./BreadCrumb-D0swuSFA.js";import{S as y,C as g,a as v}from"./country-state-city-BE-JKyhi.js";import{B as f}from"./react-toastify-ChY2QQow.js";import{a as b}from"./react-router-DUJjWq5j.js";import"./classnames-C3ovBj6j.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./lucide-D6BDVLHE.js";import"./axios-BoylL8Pu.js";import"./@syncfusion-CXokIO9o.js";import"./cookie-BUTH-fPQ.js";const C=[{label:"Dashboard",href:"/dashboard"},{label:"Customer Table",href:"/customer-table"},{label:"Customer Form",href:null}];function N(){const[N,{isLoading:S}]=t(),[w,F]=e.useState({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",county:"",city:"",description:"",image:null}),[E,P]=e.useState([]),[k,U]=e.useState([]),[B,D]=e.useState([]),[V,q]=e.useState([]),I=b();e.useEffect((()=>{const e=v.getAllCountries();P(e)}),[]),e.useEffect((()=>{if(w.country){const e=y.getStatesOfCountry(w.country);U(e),F((e=>({...e,state:"",county:"",city:""})))}else U([])}),[w.country]),e.useEffect((()=>{if(w.country&&w.state){const e=g.getCitiesOfState(w.country,w.state);q(e),F((e=>({...e,city:""})))}else q([])}),[w.country,w.state]),e.useEffect((()=>{if(w.state){const e=L(w.state);D(e),F((e=>({...e,county:""})))}else D([])}),[w.state]);const L=e=>[{code:"county1",name:"County 1"},{code:"county2",name:"County 2"},{code:"county3",name:"County 3"}],O=e=>{const{id:s,value:t}=e.target;F((e=>({...e,[s]:t})))},A=(e,s)=>{F((t=>({...t,[s]:e})))};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"ml-1",children:s.jsx(x,{items:C})}),s.jsxs(c,{className:"w-full mt-4 mx-auto",children:[s.jsx(n,{children:s.jsx(o,{className:"text-xl text-purple-700",children:"Manage Customer"})}),s.jsx(d,{children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault();const s=["name","email","mobile"].filter((e=>!w[e]));if(s.length>0)return void f({title:"Validation Error",description:`Please fill in all required fields: ${s.join(", ")}`,variant:"destructive"});if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email))try{const e=new FormData;Object.keys(w).forEach((s=>{null!==w[s]&&("image"===s&&w[s]?e.append(s,w[s]):"description"===s?e.append(s,w[s]||""):e.append(s,w[s]))}));(await N(e)).data&&(f({title:"Success",description:"Customer added successfully"}),F({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",county:"",city:"",description:"",image:null}),I("/customer-table"))}catch(t){f({title:"Error",description:t.message||"Failed to add customer",variant:"destructive"})}else f({title:"Validation Error",description:"Please enter a valid email address",variant:"destructive"})},className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(a,{htmlFor:"name",children:["Customer Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(i,{id:"name",value:w.name,onChange:O,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"contactPerson",children:"Contact Person"}),s.jsx(i,{id:"contactPerson",value:w.contactPerson,onChange:O})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(a,{htmlFor:"email",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(i,{id:"email",type:"email",value:w.email,onChange:O,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(a,{htmlFor:"mobile",children:["Mobile Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(i,{id:"mobile",value:w.mobile,onChange:O,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"website",children:"Website"}),s.jsx(i,{id:"website",type:"url",value:w.website,onChange:O})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"country",children:"Country"}),s.jsxs(m,{value:w.country,onValueChange:e=>A(e,"country"),children:[s.jsx(u,{children:s.jsx(j,{placeholder:"Select Country"})}),s.jsx(h,{children:E.map((e=>s.jsx(p,{value:e.isoCode,children:e.name},e.isoCode)))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"state",children:"State/Province"}),s.jsxs(m,{value:w.state,onValueChange:e=>A(e,"state"),disabled:!w.country,children:[s.jsx(u,{children:s.jsx(j,{placeholder:"Select State"})}),s.jsx(h,{children:k.map((e=>s.jsx(p,{value:e.isoCode,children:e.name},e.isoCode)))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"city",children:"City"}),s.jsxs(m,{value:w.city,onValueChange:e=>A(e,"city"),disabled:!w.state,children:[s.jsx(u,{children:s.jsx(j,{placeholder:"Select City"})}),s.jsx(h,{children:V.map((e=>s.jsx(p,{value:e.name,children:e.name},e.name)))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"address",children:"Address"}),s.jsx(r,{id:"address",className:"min-h-[100px]",value:w.address,onChange:O})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{children:"Upload image"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-4 text-center",children:[s.jsx("div",{className:"w-32 h-32 mx-auto mb-4",children:s.jsx("img",{src:w.image?URL.createObjectURL(w.image):"/placeholder.svg",alt:"image preview",className:"w-full h-full object-contain"})}),s.jsx(l,{type:"button",variant:"outline",className:"bg-green-500 text-white hover:bg-green-600",onClick:()=>document.getElementById("imageUpload").click(),children:"Add image"}),s.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){if(!s.type.startsWith("image/"))return void f({title:"Invalid file type",description:"Please upload an image file",variant:"destructive"});if(s.size>5242880)return void f({title:"File too large",description:"Image size should be less than 5MB",variant:"destructive"});F((e=>({...e,image:s})))}},className:"hidden"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{htmlFor:"description",children:"Description"}),s.jsx(r,{id:"description",value:w.description,onChange:O,className:"min-h-[200px]",placeholder:"Enter customer description"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(l,{type:"submit",disabled:S,className:"bg-green-500 text-white hover:bg-green-600",children:S?"Saving...":"Save"}),s.jsx(l,{type:"button",variant:"destructive",onClick:()=>F({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",county:"",city:"",description:"",image:null}),children:"Cancel"})]})]})})]})]})}export{N as default};
