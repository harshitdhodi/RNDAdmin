import{ai as f,r as C,f as N,j as e,N as a,I as l,B as u}from"./index-DQEtGUrR-1762233513637.js";import{C as y,b as F,c as w,a as P}from"./card-BKWUOEKD-1762233513637.js";import{T as x}from"./textarea-BABDIE4Y-1762233513637.js";import{B as E}from"./BreadCrumb-PCE0f6ZT-1762233513637.js";import{B as c}from"./react-toastify.esm-45B1ystE-1762233513637.js";import"./chevron-right-DC9Wwm-_-1762233513637.js";const S=[{label:"Dashboard",href:"/dashboard"},{label:"Customer Table",href:"/customer-table"},{label:"Customer Form",href:null}];function M(){const[g,{isLoading:h}]=f(),[s,m]=C.useState({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",city:"",description:"",image:null}),j=N(),i=o=>{const{id:n,value:d}=o.target;m(p=>({...p,[n]:d}))},v=o=>{const n=o.target.files[0];if(n){if(!n.type.startsWith("image/")){c({title:"Invalid file type",description:"Please upload an image file",variant:"destructive"});return}if(n.size>5*1024*1024){c({title:"File too large",description:"Image size should be less than 5MB",variant:"destructive"});return}m(d=>({...d,image:n}))}},b=async o=>{o.preventDefault();const d=["name","email","mobile"].filter(r=>!s[r]);if(d.length>0){c({title:"Validation Error",description:`Please fill in all required fields: ${d.join(", ")}`,variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)){c({title:"Validation Error",description:"Please enter a valid email address",variant:"destructive"});return}try{const r=new FormData;Object.keys(s).forEach(t=>{s[t]!==null&&(t==="image"&&s[t]?r.append(t,s[t]):t==="description"?r.append(t,s[t]||""):r.append(t,s[t]))}),(await g(r)).data&&(c({title:"Success",description:"Customer added successfully"}),m({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",city:"",description:"",image:null}),j("/customer-table"))}catch(r){c({title:"Error",description:r.message||"Failed to add customer",variant:"destructive"}),console.error("Submission Error:",r)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(E,{items:S})}),e.jsxs(y,{className:"w-full mt-4 mx-auto",children:[e.jsx(F,{children:e.jsx(w,{className:"text-xl text-purple-700",children:"Manage Customer"})}),e.jsx(P,{children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"name",children:["Customer Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{id:"name",value:s.name,onChange:i,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"contactPerson",children:"Contact Person"}),e.jsx(l,{id:"contactPerson",value:s.contactPerson,onChange:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"email",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{id:"email",type:"email",value:s.email,onChange:i,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"mobile",children:["Mobile Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{id:"mobile",value:s.mobile,onChange:i,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"website",children:"Website"}),e.jsx(l,{id:"website",type:"url",value:s.website,onChange:i})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"country",children:"Country"}),e.jsx(l,{id:"country",value:s.country,onChange:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"state",children:"State/Province"}),e.jsx(l,{id:"state",value:s.state,onChange:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"city",children:"City"}),e.jsx(l,{id:"city",value:s.city,onChange:i})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"address",children:"Address"}),e.jsx(x,{id:"address",className:"min-h-[100px]",value:s.address,onChange:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Upload image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"w-32 h-32 mx-auto mb-4",children:e.jsx("img",{src:s.image?URL.createObjectURL(s.image):"/placeholder.svg",alt:"image preview",className:"w-full h-full object-contain"})}),e.jsx(u,{type:"button",variant:"outline",className:"bg-green-500 text-white hover:bg-green-600",onClick:()=>document.getElementById("imageUpload").click(),children:"Add image"}),e.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:v,className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"description",children:"Description"}),e.jsx(x,{id:"description",value:s.description,onChange:i,className:"min-h-[200px]",placeholder:"Enter customer description"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(u,{type:"submit",disabled:h,className:"bg-green-500 text-white hover:bg-green-600",children:h?"Saving...":"Save"}),e.jsx(u,{type:"button",variant:"destructive",onClick:()=>m({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",city:"",description:"",image:null}),children:"Cancel"})]})]})})]})]})}export{M as default};
