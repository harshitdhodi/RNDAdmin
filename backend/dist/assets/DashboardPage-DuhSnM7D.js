import{r as e,j as s}from"./react-BfBsRgn0.js";import{a as t}from"./axios-BoylL8Pu.js";import{m as r,C as a}from"./react-big-calendar-CR4KSVP7.js";import{h as i}from"./moment-f4tm6vQK.js";import{E as l}from"./event-modal-9ox9t2Rb.js";import{e as o,f as n}from"./index-mCSb4W1J.js";import{S as d,a as c,b as m,c as u,d as p}from"./select-BjvvJv_x.js";import{v as h}from"./uuid-CcFXr9u9.js";import{C as j}from"./chart.js-xiz89aMs.js";import{g as x,f as v}from"./date-fns-lDRECIiw.js";import"./classnames-C3ovBj6j.js";import"./@babel-BfC2A0EA.js";import"./invariant-CjUZpN_a.js";import"./uncontrollable-BR5JKnLC.js";import"./react-lifecycles-compat-vog91_k3.js";import"./prop-types-BgiiqXIo.js";import"./date-arithmetic-Jc2a8snn.js";import"./lodash-CtK3uT03.js";import"./dom-helpers-Bmb4RGVl.js";import"./react-overlays-DPFjoWFa.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";import"./@restart-B6pX58sT.js";import"./@popperjs-CBnz2Khg.js";import"./warning-t_yLeJPk.js";import"./memoize-one-Ds0C_khL.js";import"./dayjs-BpzBk2ID.js";import"./table-C5KT2_Ve.js";import"./lucide-D6BDVLHE.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./react-router-DUJjWq5j.js";import"./cookie-BUTH-fPQ.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./@kurkle-DKL8D26R.js";const g=()=>{const[r,a]=e.useState({customerCount:0,supplierCount:0,chemicalCount:0,inquiryCount:0});return e.useEffect((()=>{(async()=>{try{const e=await t.get("/api/count/dataCount");a(e.data)}catch(e){}})()}),[]),s.jsxs("div",{className:"p-1  mx-auto",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xl font-semibold text-purple-800 mb-4 pb-1 border-b border-purple-800",children:"Dashboard"})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-emerald-500 text-white p-6 rounded-md shadow-lg relative overflow-hidden",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:r.inquiryCount}),s.jsx("div",{className:"text-lg",children:"Total Inquiries"}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:s.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),s.jsxs("div",{className:"bg-amber-500 text-white p-6 rounded-md shadow-lg relative overflow-hidden",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:r.chemicalCount}),s.jsx("div",{className:"text-lg",children:"Total Chemicals"}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:s.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})]}),s.jsxs("div",{className:"bg-purple-600 text-white p-6 rounded-md shadow-lg relative overflow-hidden",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:r.supplierCount}),s.jsx("div",{className:"text-lg",children:"Total Suppliers"}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:s.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1zM8 11a1 1 0 100-2 1 1 0 000 2zm0 4a1 1 0 100-2 1 1 0 000 2zm9-11a1 1 0 011 1v10a1 1 0 01-1 1h-1V4h1z"})})})]}),s.jsxs("div",{className:"bg-blue-500 text-white p-6 rounded-md shadow-lg relative overflow-hidden",children:[s.jsx("div",{className:"text-4xl font-bold mb-2",children:r.customerCount}),s.jsx("div",{className:"text-lg",children:"Total Customers"}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:s.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})]})]})]})},f=({onToday:e,filter:t,onFilterChange:r,view:a,onViewChange:i})=>s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("h2",{className:"text-lg text-purple-800 mb-5 pb-1 font-semibold border-b border-purple-800",children:"Reminders"})}),s.jsx("div",{className:"mb-4 flex justify-between items-center",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(d,{value:t,onValueChange:r,children:[s.jsx(c,{className:"w-[180px]",children:s.jsx(m,{placeholder:"Filter events"})}),s.jsxs(u,{children:[s.jsx(p,{value:"all",children:"All Events"}),s.jsx(p,{value:"past",children:"Past Events"}),s.jsx(p,{value:"upcoming",children:"Upcoming Events"})]})]}),s.jsxs(d,{value:a,onValueChange:i,children:[s.jsx(c,{className:"w-[180px]",children:s.jsx(m,{placeholder:"Select view"})}),s.jsxs(u,{children:[s.jsx(p,{value:"month",children:"Month"}),s.jsx(p,{value:"week",children:"Week"}),s.jsx(p,{value:"day",children:"Day"}),s.jsx(p,{value:"agenda",children:"Agenda"})]})]})]})})]}),b=r(i),y=()=>{const[t,r]=e.useState("month"),[i,n]=e.useState(new Date),[d,c]=e.useState("all"),[m,u]=e.useState([]),[p,j]=e.useState(!1),[x,v]=e.useState(null),[g,y]=e.useState("add"),{data:w,isLoading:N}=o();e.useEffect((()=>{if(w){const e=w.data.map((e=>{var s;return{id:e._id,title:`${e.message} ${(null==(s=e.inquiryId)?void 0:s.name)?`- ${e.inquiryId.name}`:""}`,start:new Date(e.date),end:new Date(e.date),inquiryDetails:e.inquiryId||{}}}));u(e)}}),[w]);const C=e.useMemo((()=>{const e=new Date;switch(d){case"past":return m.filter((s=>s.end<e));case"upcoming":return m.filter((s=>s.start>=e));default:return m}}),[d,m]),M=e=>n(e);return s.jsxs("div",{className:"h-screen p-4",children:[s.jsx(f,{onToday:()=>M(new Date),filter:d,onFilterChange:c,view:t,onViewChange:r}),N?s.jsx("div",{children:"Loading follow-ups..."}):s.jsx(a,{localizer:b,events:C,startAccessor:"start",endAccessor:"end",style:{height:"calc(100vh - 100px)"},view:t,onView:r,date:i,onNavigate:M,onSelectSlot:e=>{v(null),y("add"),j(!0)},onSelectEvent:e=>{v(e),y("edit"),j(!0)},selectable:!0,eventPropGetter:e=>{var s;return{className:"custom-event",style:{backgroundColor:"completed"===(null==(s=e.inquiryDetails)?void 0:s.status)?"#4CAF50":"#2196F3"}}}}),s.jsx(l,{isOpen:p,onClose:()=>{j(!1),v(null)},event:x||{},onSave:e=>{u("add"===g?[...m,e]:m.map((s=>s.id===e.id?e:s)))},onDelete:e=>{u(m.filter((s=>s.id!==e))),j(!1)},onAddNew:()=>{v({id:h(),title:"",start:new Date,end:new Date}),y("add")},mode:g})]})},w=()=>{const t=e.useRef(null),r=e.useRef(null),[a,i]=e.useState(new Date),[l,o]=e.useState(0),{data:d,isLoading:c}=n();e.useEffect((()=>{if(!t.current)return;r.current&&r.current.destroy();const e=t.current.getContext("2d"),s=x(a),i=Array.from({length:s},(()=>0));d&&!c&&d.forEach((e=>{const s=new Date(e.createdAt);if(s.getFullYear()===a.getFullYear()&&s.getMonth()===a.getMonth()){const e=s.getDate()-1;i[e]+=1}}));const o=i.map((e=>e>=l?e:null));return r.current=new j(e,{type:"line",data:{labels:Array.from({length:s},((e,s)=>s+1)),datasets:[{label:"Number of Inquiries",data:o,borderColor:"rgb(173, 126, 230)",tension:.1,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Inquiries for ${v(a,"MMMM yyyy")}`}},scales:{x:{title:{display:!0,text:"Day of the Month"}},y:{beginAtZero:!0,title:{display:!0,text:"Number of Inquiries"}}}}}),()=>{r.current&&r.current.destroy()}}),[a,l,d,c]);return s.jsxs("div",{className:"w-full mt-10 p-4",children:[s.jsx("h2",{className:"text-lg text-purple-800 mb-5 pb-1 font-semibold border-b border-purple-800",children:"Monthly Inquiries"}),s.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[s.jsx("input",{type:"month",value:v(a,"yyyy-MM"),onChange:e=>{const[s,t]=e.target.value.split("-");i(new Date(s,t-1))},className:"border rounded p-2"}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"minInquiries",className:"mr-2",children:"Min Inquiries:"}),s.jsx("input",{type:"number",id:"minInquiries",value:l,onChange:e=>{o(parseInt(e.target.value,10))},min:"0",className:"border rounded p-2 w-20"})]})]}),s.jsx("div",{className:"w-full",style:{height:"60vh"},children:c?s.jsx("p",{children:"Loading inquiries..."}):s.jsx("canvas",{ref:t})})]})},N=()=>s.jsxs("div",{children:[s.jsx(g,{}),s.jsx(y,{}),s.jsx(w,{})]});export{N as default};
