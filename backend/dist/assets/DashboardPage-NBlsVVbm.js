import{r,j as e}from"./react-DKICu8bO.js";import{a as z}from"./axios-DXsv3KKR.js";import{m as L,C as T}from"./react-big-calendar-CHiv5mcr.js";import{h as R}from"./moment-C5S46NFB.js";import{E as B}from"./event-modal-DNIy7NsE.js";import{e as $,f as k}from"./index-Bbo1zcj1.js";import{S as C,a as M,b as S,c as D,d as v}from"./select-CnTZk46j.js";import{v as G}from"./uuid-Ch9TGLTe.js";import{C as H}from"./chart.js-DdUc1pND.js";import{g as O,f as q}from"./date-fns-C6XR31jv.js";import"./classnames-Bv6oJzD9.js";import"./@babel-C_xKm-6V.js";import"./invariant-Ck5ARPa0.js";import"./uncontrollable-Bo3XfoYL.js";import"./react-lifecycles-compat-CqhW3gjX.js";import"./prop-types-D44m66iB.js";import"./date-arithmetic-DrY26MJF.js";import"./lodash-BLBAyiDt.js";import"./dom-helpers-Dad5deF3.js";import"./react-overlays-b7rwL5AS.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./@restart-DQcojX5j.js";import"./@popperjs-DMGSESOy.js";import"./warning-CK2QPUtW.js";import"./memoize-one-BdPwpGay.js";import"./dayjs-DRQbrcnn.js";import"./table-nX7BFFdz.js";import"./lucide-D7hRWJEP.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./react-router-B9QVkYva.js";import"./cookie--_YQFYBD.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./@syncfusion-BIAkhmGL.js";import"./@kurkle-D8fDXNIl.js";const P=()=>{const[a,n]=r.useState({customerCount:0,supplierCount:0,chemicalCount:0,inquiryCount:0});return r.useEffect(()=>{(async()=>{try{const o=await z.get("/api/count/dataCount");console.log(o),n(o.data)}catch(o){console.error("Error fetching data count:",o)}})()},[]),e.jsxs("div",{className:"p-1  mx-auto",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-purple-800 mb-4 pb-1 border-b border-purple-800",children:"Dashboard"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-emerald-500 text-white p-6 rounded-md shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:a.inquiryCount}),e.jsx("div",{className:"text-lg",children:"Total Inquiries"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:e.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsxs("div",{className:"bg-amber-500 text-white p-6 rounded-md shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:a.chemicalCount}),e.jsx("div",{className:"text-lg",children:"Total Chemicals"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:e.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})]}),e.jsxs("div",{className:"bg-purple-600 text-white p-6 rounded-md shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:a.supplierCount}),e.jsx("div",{className:"text-lg",children:"Total Suppliers"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:e.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1zM8 11a1 1 0 100-2 1 1 0 000 2zm0 4a1 1 0 100-2 1 1 0 000 2zm9-11a1 1 0 011 1v10a1 1 0 01-1 1h-1V4h1z"})})})]}),e.jsxs("div",{className:"bg-blue-500 text-white p-6 rounded-md shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"text-4xl font-bold mb-2",children:a.customerCount}),e.jsx("div",{className:"text-lg",children:"Total Customers"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:e.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})]})]})]})},Q=({onToday:a,filter:n,onFilterChange:i,view:o,onViewChange:d})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("h2",{className:"text-lg text-purple-800 mb-5 pb-1 font-semibold border-b border-purple-800",children:"Reminders"})}),e.jsx("div",{className:"mb-4 flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(C,{value:n,onValueChange:i,children:[e.jsx(M,{className:"w-[180px]",children:e.jsx(S,{placeholder:"Filter events"})}),e.jsxs(D,{children:[e.jsx(v,{value:"all",children:"All Events"}),e.jsx(v,{value:"past",children:"Past Events"}),e.jsx(v,{value:"upcoming",children:"Upcoming Events"})]})]}),e.jsxs(C,{value:o,onValueChange:d,children:[e.jsx(M,{className:"w-[180px]",children:e.jsx(S,{placeholder:"Select view"})}),e.jsxs(D,{children:[e.jsx(v,{value:"month",children:"Month"}),e.jsx(v,{value:"week",children:"Week"}),e.jsx(v,{value:"day",children:"Day"}),e.jsx(v,{value:"agenda",children:"Agenda"})]})]})]})})]}),Y=L(R),_=()=>{const[a,n]=r.useState("month"),[i,o]=r.useState(new Date),[d,j]=r.useState("all"),[l,u]=r.useState([]),[b,f]=r.useState(!1),[h,c]=r.useState(null),[p,g]=r.useState("add"),{data:m,isLoading:x}=$();r.useEffect(()=>{if(m){const s=m.data.map(t=>{var N;return{id:t._id,title:`${t.message} ${(N=t.inquiryId)!=null&&N.name?`- ${t.inquiryId.name}`:""}`,start:new Date(t.date),end:new Date(t.date),inquiryDetails:t.inquiryId||{}}});u(s)}},[m]);const y=r.useMemo(()=>{const s=new Date;switch(d){case"past":return l.filter(t=>t.end<s);case"upcoming":return l.filter(t=>t.start>=s);default:return l}},[d,l]),w=s=>o(s),I=s=>{c(null),g("add"),f(!0)},E=s=>{c(s),g("edit"),f(!0)},A=s=>{u(p==="add"?[...l,s]:l.map(t=>t.id===s.id?s:t))},F=s=>{u(l.filter(t=>t.id!==s)),f(!1)},V=()=>{c({id:G(),title:"",start:new Date,end:new Date}),g("add")};return e.jsxs("div",{className:"h-screen p-4",children:[e.jsx(Q,{onToday:()=>w(new Date),filter:d,onFilterChange:j,view:a,onViewChange:n}),x?e.jsx("div",{children:"Loading follow-ups..."}):e.jsx(T,{localizer:Y,events:y,startAccessor:"start",endAccessor:"end",style:{height:"calc(100vh - 100px)"},view:a,onView:n,date:i,onNavigate:w,onSelectSlot:I,onSelectEvent:E,selectable:!0,eventPropGetter:s=>{var t;return{className:"custom-event",style:{backgroundColor:((t=s.inquiryDetails)==null?void 0:t.status)==="completed"?"#4CAF50":"#2196F3"}}}}),e.jsx(B,{isOpen:b,onClose:()=>{f(!1),c(null)},event:h||{},onSave:A,onDelete:F,onAddNew:V,mode:p})]})},U=()=>{const a=r.useRef(null),n=r.useRef(null),[i,o]=r.useState(new Date),[d,j]=r.useState(0),{data:l,isLoading:u}=k();r.useEffect(()=>{if(!a.current)return;n.current&&n.current.destroy();const h=a.current.getContext("2d"),c=O(i),p=Array.from({length:c},()=>0);l&&!u&&l.forEach(m=>{const x=new Date(m.createdAt);if(x.getFullYear()===i.getFullYear()&&x.getMonth()===i.getMonth()){const y=x.getDate()-1;p[y]+=1}});const g=p.map(m=>m>=d?m:null);return n.current=new H(h,{type:"line",data:{labels:Array.from({length:c},(m,x)=>x+1),datasets:[{label:"Number of Inquiries",data:g,borderColor:"rgb(173, 126, 230)",tension:.1,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Inquiries for ${q(i,"MMMM yyyy")}`}},scales:{x:{title:{display:!0,text:"Day of the Month"}},y:{beginAtZero:!0,title:{display:!0,text:"Number of Inquiries"}}}}}),()=>{n.current&&n.current.destroy()}},[i,d,l,u]);const b=h=>{const[c,p]=h.target.value.split("-");o(new Date(c,p-1))},f=h=>{j(parseInt(h.target.value,10))};return e.jsxs("div",{className:"w-full mt-10 p-4",children:[e.jsx("h2",{className:"text-lg text-purple-800 mb-5 pb-1 font-semibold border-b border-purple-800",children:"Monthly Inquiries"}),e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("input",{type:"month",value:q(i,"yyyy-MM"),onChange:b,className:"border rounded p-2"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"minInquiries",className:"mr-2",children:"Min Inquiries:"}),e.jsx("input",{type:"number",id:"minInquiries",value:d,onChange:f,min:"0",className:"border rounded p-2 w-20"})]})]}),e.jsx("div",{className:"w-full",style:{height:"60vh"},children:u?e.jsx("p",{children:"Loading inquiries..."}):e.jsx("canvas",{ref:a})})]})},We=()=>e.jsxs("div",{children:[e.jsx(P,{}),e.jsx(_,{}),e.jsx(U,{})]});export{We as default};
