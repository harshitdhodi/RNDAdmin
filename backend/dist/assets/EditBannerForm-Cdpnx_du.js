import{bJ as e,bK as a,j as i}from"./main-DeRxjK88.js";import{g as t,d as s,r as l,L as r}from"./vendor-router-Bu4EHm1B.js";import{R as m}from"./index-CJo0JxI7.js";/* empty css                   */import{a as n}from"./vendor-utils-BfOc9lHv.js";import{F as d}from"./index--6LMyILo.js";import{B as o}from"./Breadcrumb-Dmow3_cy.js";import{R as p}from"./HomeOutlined-s6g_p1dq.js";import{S as g}from"./index-j6PXCaBg.js";import{U as u,R as j}from"./index-D3J037dB.js";import{B as c}from"./index-lUiyPlMq.js";import{I as x}from"./index-BrOIVdwD.js";import{s as h}from"./index-lMP3hCbg.js";import"./vendor-react-CI5aWZjI.js";import"./isEqual-DOH0BpiM.js";import"./toArray-DkI11MDQ.js";import"./index-DRGG9HZA.js";import"./CheckCircleFilled-DiSUBvU5.js";import"./ExclamationCircleFilled-DZysw_83.js";import"./dropdown-B7KEEEnN.js";import"./EllipsisOutlined-L4j7-ai9.js";import"./getAllowClear-exXUluB6.js";import"./CheckOutlined-3fI3nOal.js";import"./Input-BufppJmu.js";import"./fade-C0XPHGae.js";import"./DeleteOutlined-BpoFncVM.js";import"./DownloadOutlined-DQEsT_id.js";import"./EyeOutlined-B2vwqoE1.js";import"./TextArea-BEMUKMsu.js";import"./InfoCircleFilled-D8dKuFWy.js";const{Option:f}=g,N=()=>{const{id:N}=t(),b=s(),[I]=d.useForm(),[S,F]=l.useState(!1),[v,y]=l.useState([]),{data:w,isLoading:E}=e(N),[P]=a();l.useEffect((()=>{(async()=>{try{const e=await n.get("/api/menulist/get-menu");e.data.success&&y(e.data.data)}catch(e){h.error("Failed to fetch menu list")}})()}),[]),l.useEffect((()=>{w&&I.setFieldsValue({title:w.title,altName:w.altName,details:w.details,imgName:w.imgName,pageSlug:w.pageSlug||"",image:w.image?[{name:w.imgName,url:`/api/image/download/${w.image}`}]:[]})}),[w,I]);return E?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{children:[i.jsxs(o,{style:{padding:"16px 24px"},children:[i.jsx(o.Item,{children:i.jsxs(r,{to:"/dashboard",children:[i.jsx(p,{})," Dashboard"]})}),i.jsx(o.Item,{children:i.jsx(r,{to:"/banner-table",children:"Banner Management"})}),i.jsx(o.Item,{children:"Edit Banner"})]}),i.jsxs("div",{style:{padding:"24px"},children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Edit Banner"}),i.jsxs(d,{form:I,layout:"vertical",onFinish:async e=>{try{if(!e.title?.trim())return void h.error("Title is required");if(!e.altName?.trim())return void h.error("Alt Name is required");if(!e.pageSlug)return void h.error("Page Slug is required");const a=new FormData;S&&e.image?.[0]?.originFileObj?(a.append("image",e.image[0].originFileObj),a.append("imgName",e.image[0].name)):a.append("imgName",e.imgName||w.imgName),a.append("title",e.title.trim()),a.append("altName",e.altName.trim()),a.append("details",e.details?.trim()||""),a.append("pageSlug",e.pageSlug),await P({id:N,bannerData:a}),h.success("Banner updated successfully"),b("/banner-table")}catch(a){h.error("Failed to update banner")}},initialValues:{title:w?.title||"",altName:w?.altName||"",details:w?.details||"",imgName:w?.imgName||"",pageSlug:w?.pageSlug||"",image:w?.image?[{name:w.imgName,url:`/api/image/download/${w.image}`}]:[]},children:[i.jsx(d.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Please select a Page Slug!"}],children:i.jsx(g,{placeholder:"Select Page Slug",children:v.map((e=>i.jsx(f,{value:e.parent.path,children:e.parent.name},e._id)))})}),i.jsx(d.Item,{name:"image",label:"Banner Image",valuePropName:"fileList",getValueFromEvent:e=>e&&e.fileList,children:i.jsx(u,{maxCount:1,listType:"picture",beforeUpload:()=>!1,onChange:e=>{F(!0),I.setFieldsValue({imgName:e.file.name,image:e.fileList})},defaultFileList:w?.image?[{name:w.imgName,url:`/api/image/download/${w.image}`}]:[],children:i.jsx(c,{icon:i.jsx(j,{}),children:S?"Change Image":"Upload New Image"})})}),i.jsx(d.Item,{name:"imgName",label:"Image Name",rules:[{required:!0,message:"Please input image name!"}],children:i.jsx(x,{disabled:S})}),i.jsx(d.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please input title!"}],children:i.jsx(x,{})}),i.jsx(d.Item,{name:"altName",label:"Alt Name",rules:[{required:!0,message:"Please input alt name!"}],children:i.jsx(x,{})}),i.jsx(d.Item,{name:"details",label:"Details",rules:[{message:"Please input details!"}],children:i.jsx(m,{theme:"snow"})}),i.jsx(d.Item,{children:i.jsx(c,{type:"primary",htmlType:"submit",children:"Update"})})]})]})]})};export{N as default};
//# sourceMappingURL=EditBannerForm-Cdpnx_du.js.map
