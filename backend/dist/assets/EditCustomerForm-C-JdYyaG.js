import{a7 as e,by as s,j as a,L as i,I as r,B as t}from"./main-DeRxjK88.js";import{g as l,d,r as n}from"./vendor-router-Bu4EHm1B.js";import{b as o}from"./index.esm-C1PzQRG-.js";import{t as c,o as m,a as h,s as x,l as p}from"./index-Db_ZYzj8.js";import{C as j,b as u,c as b,a as g}from"./card-RXDLfuok.js";import{T as y}from"./textarea-BwEsUAMy.js";import{S as f,a as v,b as N,c as C,d as w}from"./select-Dqodnixf.js";import{B as S}from"./BreadCrumb-PqVNrGAD.js";import{B as F}from"./react-toastify.esm-DbN0HGqG.js";import"./vendor-react-CI5aWZjI.js";import"./vendor-utils-BfOc9lHv.js";import"./Combination-CNfQ0noH.js";import"./index-Kj7Vjsi3.js";import"./check-CVm68GV7.js";import"./chevron-up-3rt5hBY6.js";import"./chevron-right-YTRb9aqn.js";const U=m({name:x().min(1,"Customer name is required"),contactPerson:x().optional(),email:x().email("Invalid email address"),mobile:x().min(1,"Mobile number is required"),website:x().url("Invalid URL").optional().or(p("")),address:x().optional(),country:x().optional(),state:x().optional(),city:x().optional(),description:x().optional(),image:h().optional()}),A=[{label:"Dashboard",href:"/dashboard"},{label:"Customer Table",href:"/customer-table"},{label:"Edit Customer",href:null}];function E(){const{id:m}=l(),{data:h,isLoading:x}=e(m),[p,{isLoading:E}]=s(),L=d(),[P]=n.useState([{isoCode:"US",name:"United States"},{isoCode:"CA",name:"Canada"},{isoCode:"UK",name:"United Kingdom"},{isoCode:"IN",name:"India"},{isoCode:"AU",name:"Australia"}]),I={US:[{isoCode:"NY",name:"New York"},{isoCode:"CA",name:"California"},{isoCode:"TX",name:"Texas"}],IN:[{isoCode:"MH",name:"Maharashtra"},{isoCode:"DL",name:"Delhi"},{isoCode:"KA",name:"Karnataka"}]},k={NY:[{name:"New York City"},{name:"Buffalo"}],CA:[{name:"Los Angeles"},{name:"San Francisco"}],MH:[{name:"Mumbai"},{name:"Pune"}]},[M,B]=n.useState([]),[D,V]=n.useState([]),{register:K,handleSubmit:T,watch:Y,setValue:H,reset:R,formState:{errors:q}}=o({resolver:c(U),defaultValues:{name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",city:"",description:"",image:null}}),z=Y("country"),O=Y("state"),W=Y("image");n.useEffect((()=>{if(z){B(I[z]||[]),h||(H("state",""),H("city",""))}else B([]),V([])}),[z,H,h]),n.useEffect((()=>{if(O){V(k[O]||[]),h||H("city","")}else V([])}),[O,H,h]),n.useEffect((()=>{if(h?.data){["name","contactPerson","email","mobile","website","address","country","state","city","description","image"].forEach((e=>{void 0!==h.data[e]&&H(e,h.data[e]||"")}))}}),[h,H]);return x?a.jsx("div",{children:"Loading..."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"ml-1",children:a.jsx(S,{items:A})}),a.jsxs(j,{className:"w-full mt-4 mx-auto",children:[a.jsx(u,{children:a.jsx(b,{className:"text-xl text-purple-700",children:"Edit Customer"})}),a.jsx(g,{children:a.jsxs("form",{onSubmit:T((async e=>{try{const s=new FormData;Object.keys(e).forEach((a=>{"image"!==a&&s.append(a,e[a]||"")})),e.image instanceof File&&s.append("image",e.image),s.append("id",m);await p({id:m,data:s}).unwrap();F.success("Customer updated successfully"),L("/customer-table")}catch(s){F.error(s.message||"Failed to update customer")}})),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(i,{htmlFor:"name",children:["Customer Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(r,{id:"name",...K("name"),className:q.name?"border-red-500":""}),q.name&&a.jsx("p",{className:"text-red-500 text-sm",children:q.name.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"contactPerson",children:"Contact Person"}),a.jsx(r,{id:"contactPerson",...K("contactPerson")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(i,{htmlFor:"email",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(r,{id:"email",type:"email",...K("email"),className:q.email?"border-red-500":""}),q.email&&a.jsx("p",{className:"text-red-500 text-sm",children:q.email.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(i,{htmlFor:"mobile",children:["Mobile Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(r,{id:"mobile",...K("mobile"),className:q.mobile?"border-red-500":""}),q.mobile&&a.jsx("p",{className:"text-red-500 text-sm",children:q.mobile.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"website",children:"Website"}),a.jsx(r,{id:"website",type:"url",...K("website"),className:q.website?"border-red-500":""}),q.website&&a.jsx("p",{className:"text-red-500 text-sm",children:q.website.message})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"country",children:"Country"}),a.jsxs(f,{value:z,onValueChange:e=>H("country",e),children:[a.jsx(v,{children:a.jsx(N,{placeholder:"Select Country"})}),a.jsx(C,{children:P.map((e=>a.jsx(w,{value:e.isoCode,children:e.name},e.isoCode)))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"state",children:"State/Province"}),a.jsxs(f,{value:O,onValueChange:e=>H("state",e),disabled:!z||0===M.length,children:[a.jsx(v,{children:a.jsx(N,{placeholder:"Select State"})}),a.jsx(C,{children:M.map((e=>a.jsx(w,{value:e.isoCode,children:e.name},e.isoCode)))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"city",children:"City"}),a.jsxs(f,{value:Y("city"),onValueChange:e=>H("city",e),disabled:!O||0===D.length,children:[a.jsx(v,{children:a.jsx(N,{placeholder:"Select City"})}),a.jsx(C,{children:D.map((e=>a.jsx(w,{value:e.name,children:e.name},e.name)))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"address",children:"Address"}),a.jsx(y,{id:"address",className:"min-h-[100px]",...K("address")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{children:"Upload image"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"w-32 h-32 mx-auto mb-4",children:a.jsx("img",{src:W instanceof File?URL.createObjectURL(W):W?`/api/logo/download/${W}`:"/placeholder.svg",alt:"image preview",className:"w-full h-full object-contain"})}),a.jsx(t,{type:"button",variant:"outline",className:"bg-green-500 text-white hover:bg-green-600",onClick:()=>document.getElementById("imageUpload").click(),children:"Add image"}),a.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){if(!s.type.startsWith("image/"))return void F.error("Please upload an image file");if(s.size>5242880)return void F.error("Image size should be less than 5MB");H("image",s)}},className:"hidden"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"description",children:"Description"}),a.jsx(y,{id:"description",...K("description"),className:"min-h-[200px]",placeholder:"Enter customer description"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(t,{type:"submit",disabled:E,className:"bg-green-500 text-white hover:bg-green-600",children:E?"Saving...":"Save"}),a.jsx(t,{type:"button",variant:"destructive",onClick:()=>L("/customer-table"),children:"Cancel"})]})]})})]})]})}export{E as default};
//# sourceMappingURL=EditCustomerForm-C-JdYyaG.js.map
