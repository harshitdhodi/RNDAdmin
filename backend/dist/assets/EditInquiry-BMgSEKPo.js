import{b7 as e,b8 as s,b4 as a,j as r,I as l,B as t}from"./main-BcUd3ASm.js";import{g as n,d as i,r as d}from"./vendor-router-CaZtIe2_.js";import{b as m}from"./index.esm-CJw2PcRb.js";import{S as o,a as c,b as j,c as h,d as x}from"./select-Dc7LnXRO.js";import{F as u,a as p,b,c as f,d as y,e as g}from"./form-ChijvnbD.js";import{B as N}from"./BreadCrumb-B5EzA35k.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";import"./index-CMYgmcqM.js";import"./index-BY97PVuz.js";import"./check-CxfHQWmE.js";import"./chevron-up-BAx2OvKy.js";import"./breadcrumb-DEvmmGzh.js";import"./chevron-right-C95tp0e6.js";const v=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}];function E({onClose:E}){const{id:q}=n(),I=i(),{data:C,isLoading:F}=e(q),[L,{isLoading:S}]=s(),{data:w,isLoading:k}=a(),B=m({defaultValues:{companyName:"",name:"",email:"",mobile:"",address:"",status:"New Inquiry"}});d.useEffect((()=>{C&&B.reset({companyName:C.companyName||"",name:C.name||"",email:C.email||"",mobile:C.mobile||"",address:C.address||"",status:C.status||"New Inquiry"})}),[C,B]);return F?r.jsx("div",{children:"Loading..."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"ml-1",children:r.jsx(N,{items:v})}),r.jsx(u,{...B,children:r.jsxs("form",{onSubmit:B.handleSubmit((async e=>{const s=(e=>{const s={};return(!e.companyName||e.companyName.length<2)&&(s.companyName="Company name must be at least 2 characters"),(!e.name||e.name.length<2)&&(s.name="Full name must be at least 2 characters"),e.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(s.email="Invalid email address"),e.mobile&&/^[0-9]{10}$/.test(e.mobile)||(s.mobile="Mobile number must be 10 digits"),(!e.address||e.address.length<2)&&(s.address="Address must be at least 2 characters"),e.status||(s.status="Please select a status"),s})(e);if(Object.keys(s).length>0)Object.keys(s).forEach((e=>{B.setError(e,{type:"manual",message:s[e]})}));else try{await L({id:q,...e}).unwrap();B.reset(),I("/inquiry-list")}catch(a){alert({title:"Error",description:a?.data?.message||"Failed to update inquiry",variant:"destructive"})}})),className:"space-y-4 p-4",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Update Inquiry"}),r.jsx(p,{control:B.control,name:"companyName",render:({field:e})=>r.jsxs(b,{children:[r.jsx(f,{children:"Company Name"}),r.jsx(y,{children:r.jsx(l,{placeholder:"Enter company name",...e})}),r.jsx(g,{})]})}),r.jsx(p,{control:B.control,name:"name",render:({field:e})=>r.jsxs(b,{children:[r.jsx(f,{children:"Full Name"}),r.jsx(y,{children:r.jsx(l,{placeholder:"Enter full name",...e})}),r.jsx(g,{})]})}),r.jsx(p,{control:B.control,name:"email",render:({field:e})=>r.jsxs(b,{children:[r.jsx(f,{children:"Email"}),r.jsx(y,{children:r.jsx(l,{type:"email",placeholder:"Enter email",...e})}),r.jsx(g,{})]})}),r.jsx(p,{control:B.control,name:"mobile",render:({field:e})=>r.jsxs(b,{children:[r.jsx(f,{children:"Mobile Number"}),r.jsx(y,{children:r.jsx(l,{type:"tel",placeholder:"Enter 10-digit mobile",...e})}),r.jsx(g,{})]})}),r.jsx(p,{control:B.control,name:"address",render:({field:e})=>r.jsxs(b,{children:[r.jsx(f,{children:"Address"}),r.jsx(y,{children:r.jsx(l,{placeholder:"Enter address",...e})}),r.jsx(g,{})]})}),r.jsx(p,{control:B.control,name:"status",render:({field:e})=>r.jsxs(b,{children:[r.jsx(f,{children:"Status"}),r.jsxs(o,{onValueChange:e.onChange,defaultValue:e.value,children:[r.jsx(y,{children:r.jsx(c,{children:r.jsx(j,{placeholder:"Select status"})})}),r.jsx(h,{children:w?.data?.map((e=>r.jsx(x,{value:e.status,children:e.status},e._id)))})]}),r.jsx(g,{})]})}),r.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:r.jsx(t,{type:"submit",disabled:S,children:S?"Updating...":"Update Inquiry"})})]})})]})}export{E as default};
//# sourceMappingURL=EditInquiry-BMgSEKPo.js.map
