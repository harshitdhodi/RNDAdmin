import{a as f,f as q,d7 as F,d8 as I,d4 as N,r as S,j as e,I as u,B as v}from"./index-DYP9jOq_-1769085494578.js";import{b as E}from"./index.esm-DbD0ubAy-1769085494578.js";import{S as C,a as L,b as B,c as w,d as M}from"./select-DEA066vB-1769085494578.js";import{F as T,a as n,b as i,c as l,d as o,e as d}from"./form-B3oYDcL5-1769085494578.js";import{t as U,o as V,s as m}from"./types-CvTCE4FT-1769085494578.js";import{B as A}from"./BreadCrumb-BDUP7MRS-1769085494578.js";import"./index-BxiZ1-by-1769085494578.js";import"./index-CjkySP9k-1769085494578.js";const G=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],P=V({companyName:m().min(2,{message:"Company name must be at least 2 characters"}),name:m().min(2,{message:"Full name must be at least 2 characters"}),email:m().email({message:"Invalid email address"}),mobile:m().regex(/^[0-9]{10}$/,{message:"Mobile number must be 10 digits"}),address:m().min(2,{message:"Address must be at least 2 characters"}),status:m({required_error:"Please select a status"})});function K({onClose:Q}){const{id:j}=f(),p=q(),{data:r,isLoading:b}=F(j),[y,{isLoading:h}]=I(),{data:x,isLoading:_}=N(),a=E({resolver:U(P),defaultValues:{companyName:"",name:"",email:"",mobile:"",address:"",status:"New Inquiry"}});S.useEffect(()=>{r&&a.reset({companyName:r.companyName||"",name:r.name||"",email:r.email||"",mobile:r.mobile||"",address:r.address||"",status:r.status||"New Inquiry"})},[r,a]);const g=async s=>{var c;try{const t=await y({id:j,...s}).unwrap();a.reset(),p("/inquiry-list")}catch(t){alert({title:"Error",description:((c=t==null?void 0:t.data)==null?void 0:c.message)||"Failed to update inquiry",variant:"destructive"})}};return b?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(A,{items:G})}),e.jsx(T,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(g),className:"space-y-4 p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Update Inquiry"}),e.jsx(n,{control:a.control,name:"companyName",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Company Name"}),e.jsx(o,{children:e.jsx(u,{placeholder:"Enter company name",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:a.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Full Name"}),e.jsx(o,{children:e.jsx(u,{placeholder:"Enter full name",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:a.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Email"}),e.jsx(o,{children:e.jsx(u,{type:"email",placeholder:"Enter email",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:a.control,name:"mobile",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Mobile Number"}),e.jsx(o,{children:e.jsx(u,{type:"tel",placeholder:"Enter 10-digit mobile",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:a.control,name:"address",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Address"}),e.jsx(o,{children:e.jsx(u,{placeholder:"Enter address",...s})}),e.jsx(d,{})]})}),e.jsx(n,{control:a.control,name:"status",render:({field:s})=>{var c;return e.jsxs(i,{children:[e.jsx(l,{children:"Status"}),e.jsxs(C,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(L,{children:e.jsx(B,{placeholder:"Select status"})})}),e.jsx(w,{children:(c=x==null?void 0:x.data)==null?void 0:c.map(t=>e.jsx(M,{value:t.status,children:t.status},t._id))})]}),e.jsx(d,{})]})}}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsx(v,{type:"submit",disabled:h,children:h?"Updating...":"Update Inquiry"})})]})})]})}export{K as default};
