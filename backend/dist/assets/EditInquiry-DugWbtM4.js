import{r as e,j as s}from"./react-BfBsRgn0.js";import{c as r}from"./react-hook-form-Dn0Bw783.js";import{ap as a,aq as i,am as t,I as l,B as o}from"./index-mCSb4W1J.js";import{S as m,a as n,b as d,c,d as j}from"./select-BjvvJv_x.js";import{F as u,a as p,b as x,c as h,d as f,e as b}from"./form-DdHzdJ01.js";import{o as y,s as g}from"./zod-CO6CETVj.js";import{t as v}from"./@hookform-DBV5tMOk.js";import{B as N}from"./BreadCrumb-DisBzgy2.js";import{b as q,a as I}from"./react-router-DUJjWq5j.js";import"./classnames-C3ovBj6j.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./lucide-D6BDVLHE.js";import"./axios-BoylL8Pu.js";import"./cookie-BUTH-fPQ.js";const k=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],E=y({companyName:g().min(2,{message:"Company name must be at least 2 characters"}),name:g().min(2,{message:"Full name must be at least 2 characters"}),email:g().email({message:"Invalid email address"}),mobile:g().regex(/^[0-9]{10}$/,{message:"Mobile number must be 10 digits"}),address:g().min(2,{message:"Address must be at least 2 characters"}),status:g({required_error:"Please select a status"})});function F({onClose:y}){const{id:g}=q(),F=I(),{data:w,isLoading:C}=a(g),[S,{isLoading:L}]=i(),{data:B,isLoading:U}=t(),V=r({resolver:v(E),defaultValues:{companyName:"",name:"",email:"",mobile:"",address:"",status:"New Inquiry"}});e.useEffect((()=>{w&&V.reset({companyName:w.companyName||"",name:w.name||"",email:w.email||"",mobile:w.mobile||"",address:w.address||"",status:w.status||"New Inquiry"})}),[w,V]);return C?s.jsx("div",{children:"Loading..."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"ml-1",children:s.jsx(N,{items:k})}),s.jsx(u,{...V,children:s.jsxs("form",{onSubmit:V.handleSubmit((async e=>{var s;try{await S({id:g,...e}).unwrap();V.reset(),F("/inquiry-list")}catch(r){alert({title:"Error",description:(null==(s=null==r?void 0:r.data)?void 0:s.message)||"Failed to update inquiry",variant:"destructive"})}})),className:"space-y-4 p-4",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Update Inquiry"}),s.jsx(p,{control:V.control,name:"companyName",render:({field:e})=>s.jsxs(x,{children:[s.jsx(h,{children:"Company Name"}),s.jsx(f,{children:s.jsx(l,{placeholder:"Enter company name",...e})}),s.jsx(b,{})]})}),s.jsx(p,{control:V.control,name:"name",render:({field:e})=>s.jsxs(x,{children:[s.jsx(h,{children:"Full Name"}),s.jsx(f,{children:s.jsx(l,{placeholder:"Enter full name",...e})}),s.jsx(b,{})]})}),s.jsx(p,{control:V.control,name:"email",render:({field:e})=>s.jsxs(x,{children:[s.jsx(h,{children:"Email"}),s.jsx(f,{children:s.jsx(l,{type:"email",placeholder:"Enter email",...e})}),s.jsx(b,{})]})}),s.jsx(p,{control:V.control,name:"mobile",render:({field:e})=>s.jsxs(x,{children:[s.jsx(h,{children:"Mobile Number"}),s.jsx(f,{children:s.jsx(l,{type:"tel",placeholder:"Enter 10-digit mobile",...e})}),s.jsx(b,{})]})}),s.jsx(p,{control:V.control,name:"address",render:({field:e})=>s.jsxs(x,{children:[s.jsx(h,{children:"Address"}),s.jsx(f,{children:s.jsx(l,{placeholder:"Enter address",...e})}),s.jsx(b,{})]})}),s.jsx(p,{control:V.control,name:"status",render:({field:e})=>{var r;return s.jsxs(x,{children:[s.jsx(h,{children:"Status"}),s.jsxs(m,{onValueChange:e.onChange,defaultValue:e.value,children:[s.jsx(f,{children:s.jsx(n,{children:s.jsx(d,{placeholder:"Select status"})})}),s.jsx(c,{children:null==(r=null==B?void 0:B.data)?void 0:r.map((e=>s.jsx(j,{value:e.status,children:e.status},e._id)))})]}),s.jsx(b,{})]})}}),s.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:s.jsx(o,{type:"submit",disabled:L,children:L?"Updating...":"Update Inquiry"})})]})})]})}export{F as default};
