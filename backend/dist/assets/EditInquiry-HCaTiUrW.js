import{be as f,bf as g,bb as q,j as e,I as c,B as F}from"./main-B_OYodTY.js";import{i as I,f as N,c as S}from"./vendor-CxfDVdnA.js";import{b as v}from"./index.esm-BeVsDzK4.js";import{S as E,a as C,b as L,c as B,d as w}from"./select-DTlpTADM.js";import{F as M,a as n,b as i,c as l,d as o,e as m}from"./form-CXlBcBr9.js";import{t as T,o as U,s as d}from"./index-BS-ryoxO.js";import{B as V}from"./BreadCrumb-CdH6IHXe.js";import"./Combination-DgqiAUoz.js";import"./index-BIwstZJs.js";import"./check-DEVVPDR5.js";import"./chevron-up-EpGLJbSm.js";import"./chevron-right-CO2XmaMg.js";const A=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],D=U({companyName:d().min(2,{message:"Company name must be at least 2 characters"}),name:d().min(2,{message:"Full name must be at least 2 characters"}),email:d().email({message:"Invalid email address"}),mobile:d().regex(/^[0-9]{10}$/,{message:"Mobile number must be 10 digits"}),address:d().min(2,{message:"Address must be at least 2 characters"}),status:d({required_error:"Please select a status"})});function Y({onClose:G}){const{id:u}=I(),j=N(),{data:r,isLoading:h}=f(u),[p,{isLoading:x}]=g(),{data:b,isLoading:P}=q(),a=v({resolver:T(D),defaultValues:{companyName:"",name:"",email:"",mobile:"",address:"",status:"New Inquiry"}});S.useEffect(()=>{r&&a.reset({companyName:r.companyName||"",name:r.name||"",email:r.email||"",mobile:r.mobile||"",address:r.address||"",status:r.status||"New Inquiry"})},[r,a]);const y=async s=>{try{const t=await p({id:u,...s}).unwrap();a.reset(),j("/inquiry-list")}catch(t){alert({title:"Error",description:t?.data?.message||"Failed to update inquiry",variant:"destructive"})}};return h?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(V,{items:A})}),e.jsx(M,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(y),className:"space-y-4 p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Update Inquiry"}),e.jsx(n,{control:a.control,name:"companyName",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Company Name"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Enter company name",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Full Name"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Enter full name",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Email"}),e.jsx(o,{children:e.jsx(c,{type:"email",placeholder:"Enter email",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"mobile",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Mobile Number"}),e.jsx(o,{children:e.jsx(c,{type:"tel",placeholder:"Enter 10-digit mobile",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"address",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Address"}),e.jsx(o,{children:e.jsx(c,{placeholder:"Enter address",...s})}),e.jsx(m,{})]})}),e.jsx(n,{control:a.control,name:"status",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Status"}),e.jsxs(E,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(C,{children:e.jsx(L,{placeholder:"Select status"})})}),e.jsx(B,{children:b?.data?.map(t=>e.jsx(w,{value:t.status,children:t.status},t._id))})]}),e.jsx(m,{})]})}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsx(F,{type:"submit",disabled:x,children:x?"Updating...":"Update Inquiry"})})]})})]})}export{Y as default};
