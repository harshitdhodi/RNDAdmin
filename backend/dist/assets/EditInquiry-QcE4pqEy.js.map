{"version":3,"file":"EditInquiry-QcE4pqEy.js","sources":["../../src/inquiry/EditInquiry.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n    Select, \n    SelectContent, \n    SelectItem, \n    SelectTrigger, \n    SelectValue \n} from \"@/components/ui/select\";\nimport { \n    Form, \n    FormControl, \n    FormField, \n    FormItem, \n    FormLabel, \n    FormMessage \n} from \"@/components/ui/form\";\nimport { useAddInquiryMutation, useGetInquiryByIdQuery, useUpdateInquiryMutation } from \"@/slice/inquiry/inquiry\";\nimport * as z from 'zod';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { useNavigate, useParams } from 'react-router-dom'; // Import useNavigate and useParams\nimport { BreadcrumbWithCustomSeparator } from '@/breadCrumb/BreadCrumb';\nimport { useGetAllStatusesQuery } from '@/slice/status/status';\n\nconst breadcrumbItems = [\n    { label: \"Dashboard\", href: \"/dashboard\" },\n    { label: \"Inquiry Table\", href: \"/inquiry-list\" },\n    { label: \"Inquiry Form\", href: null }, // No `href` indicates the current page\n]\n// Define validation schema\nconst inquirySchema = z.object({\n    companyName: z.string().min(2, { message: \"Company name must be at least 2 characters\" }),\n    name: z.string().min(2, { message: \"Full name must be at least 2 characters\" }),\n    email: z.string().email({ message: \"Invalid email address\" }),\n    mobile: z.string()\n        .regex(/^[0-9]{10}$/, { message: \"Mobile number must be 10 digits\" }),\n    address: z.string().min(2, { message: \"Address must be at least 2 characters\" }),\n    status: z.string({ required_error: \"Please select a status\" })\n});\n\nexport default function EditInquiryForm({ onClose }) {\n    const { id } = useParams();  // Use the id from route params\n    const navigate = useNavigate(); // Initialize useNavigate\n    const { data: inquiryData, isLoading: isFetching } = useGetInquiryByIdQuery(id); // Fetch inquiry data by id\n    const [updateInquiry, { isLoading }] = useUpdateInquiryMutation();\n    const { data: statusesData, isLoading: isLoadingStatuses } = useGetAllStatusesQuery();\n\n    // Initialize form with zod resolver\n    const form = useForm({\n        resolver: zodResolver(inquirySchema),\n        defaultValues: {\n            companyName: \"\",\n            name: \"\",\n            email: \"\",\n            mobile: \"\",\n            address: \"\",\n            status: \"New Inquiry\"\n        }\n    });\n\n    // Set form values when inquiry data is fetched\n    useEffect(() => {\n        if (inquiryData) {\n            form.reset({\n                companyName: inquiryData.companyName || \"\",\n                name: inquiryData.name || \"\",\n                email: inquiryData.email || \"\",\n                mobile: inquiryData.mobile || \"\",\n                address: inquiryData.address || \"\",\n                status: inquiryData.status || \"New Inquiry\"\n            });\n        }\n    }, [inquiryData, form]);\n\n    // Handle form submission\n    const onSubmit = async (data) => {\n        try {\n            // Perform update mutation\n            const response = await updateInquiry({ id, ...data }).unwrap();\n            \n            // Reset form\n            form.reset();\n\n            // Redirect to the inquiry list page\n            navigate('/inquiry-list');\n        } catch (error) {\n            // Handle error\n            alert({\n                title: \"Error\",\n                description: error?.data?.message || \"Failed to update inquiry\",\n                variant: \"destructive\"\n            });\n        }\n    };\n\n    if (isFetching) return <div>Loading...</div>;  // Loading state\n\n    return (\n        <>\n          <div className=\"ml-1\">\n                <BreadcrumbWithCustomSeparator items={breadcrumbItems} />\n\n            </div>\n        <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 p-4\">\n                <h2 className=\"text-xl font-semibold mb-4\">Update Inquiry</h2>\n                \n                <FormField\n                    control={form.control}\n                    name=\"companyName\"\n                    render={({ field }) => (\n                        <FormItem>\n                            <FormLabel>Company Name</FormLabel>\n                            <FormControl>\n                                <Input \n                                    placeholder=\"Enter company name\" \n                                    {...field} \n                                />\n                            </FormControl>\n                            <FormMessage />\n                        </FormItem>\n                    )}\n                />\n\n                <FormField\n                    control={form.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                        <FormItem>\n                            <FormLabel>Full Name</FormLabel>\n                            <FormControl>\n                                <Input \n                                    placeholder=\"Enter full name\" \n                                    {...field} \n                                />\n                            </FormControl>\n                            <FormMessage />\n                        </FormItem>\n                    )}\n                />\n\n                <FormField\n                    control={form.control}\n                    name=\"email\"\n                    render={({ field }) => (\n                        <FormItem>\n                            <FormLabel>Email</FormLabel>\n                            <FormControl>\n                                <Input \n                                    type=\"email\"\n                                    placeholder=\"Enter email\" \n                                    {...field} \n                                />\n                            </FormControl>\n                            <FormMessage />\n                        </FormItem>\n                    )}\n                />\n\n                <FormField\n                    control={form.control}\n                    name=\"mobile\"\n                    render={({ field }) => (\n                        <FormItem>\n                            <FormLabel>Mobile Number</FormLabel>\n                            <FormControl>\n                                <Input \n                                    type=\"tel\"\n                                    placeholder=\"Enter 10-digit mobile\" \n                                    {...field} \n                                />\n                            </FormControl>\n                            <FormMessage />\n                        </FormItem>\n                    )}\n                />\n\n                <FormField\n                    control={form.control}\n                    name=\"address\"\n                    render={({ field }) => (\n                        <FormItem>\n                            <FormLabel>Address</FormLabel>\n                            <FormControl>\n                                <Input \n                                    placeholder=\"Enter address\" \n                                    {...field} \n                                />\n                            </FormControl>\n                            <FormMessage />\n                        </FormItem>\n                    )}\n                />\n\n                <FormField\n                    control={form.control}\n                    name=\"status\"\n                    render={({ field }) => (\n                        <FormItem>\n                            <FormLabel>Status</FormLabel>\n                            <Select \n                                onValueChange={field.onChange} \n                                defaultValue={field.value}\n                            >\n                                <FormControl>\n                                    <SelectTrigger>\n                                        <SelectValue placeholder=\"Select status\" />\n                                    </SelectTrigger>\n                                </FormControl>\n                                <SelectContent>\n                                    {statusesData?.data?.map((statusItem) => (\n                                        <SelectItem key={statusItem._id} value={statusItem.status}>\n                                            {statusItem.status}\n                                        </SelectItem>\n                                    ))}\n                                </SelectContent>\n                            </Select>\n                            <FormMessage />\n                        </FormItem>\n                    )}\n                />\n\n                <div className=\"flex justify-end space-x-2 pt-4\">\n                    <Button \n                        type=\"submit\" \n                        disabled={isLoading}\n                    >\n                        {isLoading ? \"Updating...\" : \"Update Inquiry\"}\n                    </Button>\n                </div>\n            </form>\n        </Form>\n        </>\n    );\n}\n"],"names":["breadcrumbItems","label","href","inquirySchema","z.object","companyName","z.string","min","message","name","email","mobile","regex","address","status","required_error","EditInquiryForm","onClose","id","useParams","navigate","useNavigate","data","inquiryData","isLoading","isFetching","useGetInquiryByIdQuery","updateInquiry","useUpdateInquiryMutation","statusesData","isLoadingStatuses","useGetAllStatusesQuery","form","useForm","resolver","zodResolver","defaultValues","useEffect","reset","jsx","children","jsxs","Fragment","className","BreadcrumbWithCustomSeparator","items","Form","onSubmit","handleSubmit","async","unwrap","error","alert","title","description","variant","FormField","control","render","field","FormItem","FormLabel","FormControl","Input","placeholder","FormMessage","type","Select","onValueChange","onChange","defaultValue","value","SelectTrigger","SelectValue","SelectContent","map","statusItem","SelectItem","_id","Button","disabled"],"mappings":"yoBA0BA,MAAMA,EAAkB,CACpB,CAAEC,MAAO,YAAaC,KAAM,cAC5B,CAAED,MAAO,gBAAiBC,KAAM,iBAChC,CAAED,MAAO,eAAgBC,KAAM,OAG7BC,EAAgBC,EAAS,CAC3BC,YAAaC,IAAWC,IAAI,EAAG,CAAEC,QAAS,+CAC1CC,KAAMH,IAAWC,IAAI,EAAG,CAAEC,QAAS,4CACnCE,MAAOJ,IAAWI,MAAM,CAAEF,QAAS,0BACnCG,OAAQL,IACHM,MAAM,cAAe,CAAEJ,QAAS,oCACrCK,QAASP,IAAWC,IAAI,EAAG,CAAEC,QAAS,0CACtCM,OAAQR,EAAS,CAAES,eAAgB,6BAGf,SAAAC,GAAgBC,QAAEA,IAChC,MAAAC,GAAEA,GAAOC,IACTC,EAAWC,KACTC,KAAMC,EAAaC,UAAWC,GAAeC,EAAuBR,IACrES,GAAeH,UAAEA,IAAeI,KAC/BN,KAAMO,EAAcL,UAAWM,GAAsBC,IAGvDC,EAAOC,EAAQ,CACjBC,SAAUC,EAAYhC,GACtBiC,cAAe,CACX/B,YAAa,GACbI,KAAM,GACNC,MAAO,GACPC,OAAQ,GACRE,QAAS,GACTC,OAAQ,iBAKhBuB,EAAAA,WAAU,KACFd,GACAS,EAAKM,MAAM,CACPjC,YAAakB,EAAYlB,aAAe,GACxCI,KAAMc,EAAYd,MAAQ,GAC1BC,MAAOa,EAAYb,OAAS,GAC5BC,OAAQY,EAAYZ,QAAU,GAC9BE,QAASU,EAAYV,SAAW,GAChCC,OAAQS,EAAYT,QAAU,eACjC,GAEN,CAACS,EAAaS,IAuBjB,OAAIP,EAAoBc,EAAAA,IAAA,MAAA,CAAIC,SAAU,eAIhCC,EAAAA,KAAAC,WAAA,CAAAF,SAAA,CAAAD,EAAAA,IAAC,OAAII,UAAU,OACTH,eAACI,EAA8B,CAAAC,MAAO7C,MAG7CuC,EAAAA,IAAAO,EAAA,IAASd,EACNQ,SAACC,EAAAA,KAAA,OAAA,CAAKM,SAAUf,EAAKgB,cA7BZC,MAAO3B,IAChB,UAEuBK,EAAc,CAAET,QAAOI,IAAQ4B,SAGtDlB,EAAKM,QAGLlB,EAAS,uBACJ+B,GAECC,MAAA,CACFC,MAAO,QACPC,YAAaH,GAAO7B,MAAMd,SAAW,2BACrC+C,QAAS,eACZ,KAa4CZ,UAAU,gBACnDH,SAAA,CAACD,EAAAA,IAAA,KAAA,CAAGI,UAAU,6BAA6BH,SAAc,mBAEzDD,EAAAA,IAACiB,EAAA,CACGC,QAASzB,EAAKyB,QACdhD,KAAK,cACLiD,OAAQ,EAAGC,kBACNC,EACG,CAAApB,SAAA,CAAAD,EAAAA,IAACsB,GAAUrB,SAAY,uBACtBsB,EACG,CAAAtB,SAAAD,EAAAA,IAACwB,EAAA,CACGC,YAAY,wBACRL,YAGXM,EAAY,CAAA,QAKzB1B,EAAAA,IAACiB,EAAA,CACGC,QAASzB,EAAKyB,QACdhD,KAAK,OACLiD,OAAQ,EAAGC,kBACNC,EACG,CAAApB,SAAA,CAAAD,EAAAA,IAACsB,GAAUrB,SAAS,oBACnBsB,EACG,CAAAtB,SAAAD,EAAAA,IAACwB,EAAA,CACGC,YAAY,qBACRL,YAGXM,EAAY,CAAA,QAKzB1B,EAAAA,IAACiB,EAAA,CACGC,QAASzB,EAAKyB,QACdhD,KAAK,QACLiD,OAAQ,EAAGC,kBACNC,EACG,CAAApB,SAAA,CAAAD,EAAAA,IAACsB,GAAUrB,SAAK,gBACfsB,EACG,CAAAtB,SAAAD,EAAAA,IAACwB,EAAA,CACGG,KAAK,QACLF,YAAY,iBACRL,YAGXM,EAAY,CAAA,QAKzB1B,EAAAA,IAACiB,EAAA,CACGC,QAASzB,EAAKyB,QACdhD,KAAK,SACLiD,OAAQ,EAAGC,kBACNC,EACG,CAAApB,SAAA,CAAAD,EAAAA,IAACsB,GAAUrB,SAAa,wBACvBsB,EACG,CAAAtB,SAAAD,EAAAA,IAACwB,EAAA,CACGG,KAAK,MACLF,YAAY,2BACRL,YAGXM,EAAY,CAAA,QAKzB1B,EAAAA,IAACiB,EAAA,CACGC,QAASzB,EAAKyB,QACdhD,KAAK,UACLiD,OAAQ,EAAGC,kBACNC,EACG,CAAApB,SAAA,CAAAD,EAAAA,IAACsB,GAAUrB,SAAO,kBACjBsB,EACG,CAAAtB,SAAAD,EAAAA,IAACwB,EAAA,CACGC,YAAY,mBACRL,YAGXM,EAAY,CAAA,QAKzB1B,EAAAA,IAACiB,EAAA,CACGC,QAASzB,EAAKyB,QACdhD,KAAK,SACLiD,OAAQ,EAAGC,kBACNC,EACG,CAAApB,SAAA,CAAAD,EAAAA,IAACsB,GAAUrB,SAAM,WACjBC,EAAAA,KAAC0B,EAAA,CACGC,cAAeT,EAAMU,SACrBC,aAAcX,EAAMY,MAEpB/B,SAAA,CAACD,EAAAA,IAAAuB,EAAA,CACGtB,eAACgC,EACG,CAAAhC,SAAAD,EAAAA,IAACkC,GAAYT,YAAY,4BAGhCU,EACI,CAAAlC,SAAAX,GAAcP,MAAMqD,KAAKC,GACtBrC,MAACsC,EAAgC,CAAAN,MAAOK,EAAW9D,OAC9C0B,SAAAoC,EAAW9D,QADC8D,EAAWE,kBAMvCb,EAAY,CAAA,QAKzB1B,EAAAA,IAAC,MAAI,CAAAI,UAAU,kCACXH,SAAAD,EAAAA,IAACwC,EAAA,CACGb,KAAK,SACLc,SAAUxD,EAETgB,WAAY,cAAgB,4BAOrD"}