import{U as e,bu as s,j as r,I as a,B as l}from"./main-BQqr2_19.js";import{d as n,g as i,r as d}from"./vendor-router-DoRotgOs.js";import{b as t}from"./index.esm-CSDyVtrl.js";import{C as c,b as o,c as m,a as j}from"./card-CPQ_AIkA.js";import{F as x,a as p,b as h,c as u,d as b,e as f}from"./form-8DYzE22W.js";import{T as g}from"./textarea-tez6YR4q.js";import{B as y}from"./BreadCrumb-D7K0Zw6I.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";import"./breadcrumb-BHS-7goF.js";import"./chevron-right-DHWU52ll.js";const N=[{label:"Dashboard",href:"/dashboard"},{label:"Supplier Table",href:"/supplier-table"},{label:"Edit Supplier Form",href:null}];function v(){const v=n(),{id:w}=i(),{data:E,isLoading:S}=e(w),[C]=s(),[U,D]=d.useState(!1),[F,L]=d.useState(null),[P,_]=d.useState(null),B=t({defaultValues:{name:"",mobile:"",email:"",website:"",contact_person:"",address:"",country:"",city:"",description:"",image:null}});d.useEffect((()=>{E&&(B.reset({name:E.name||"",mobile:E.mobile||"",email:E.email||"",website:E.website||"",contact_person:E.contact_person||"",address:E.address||"",country:E.country||"",city:E.city||"",description:E.description||""}),E.image&&_(`/api/image/download/${E.image}`))}),[E,B]);const I=e=>{const s=e.target.files[0];s&&_(URL.createObjectURL(s)),B.setValue("image",e.target.files)};return S?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"ml-1",children:r.jsx(y,{items:N})}),r.jsxs(c,{className:"max-w-8xl mt-3 mx-auto",children:[r.jsx(o,{children:r.jsx(m,{className:"text-xl font-semibold",children:"Update Supplier"})}),r.jsxs(j,{children:[F&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:F}),r.jsx(x,{...B,children:r.jsxs("form",{onSubmit:B.handleSubmit((async function(e){if(w){D(!0),L(null);try{let s={...e};if(delete s.image,e.image&&e.image[0]){const r=new FormData;Object.keys(s).forEach((e=>{r.append(e,s[e])})),r.append("image",e.image[0]),await C({updatedSupplier:r,id:w}).unwrap()}else await C({updatedSupplier:s,id:w}).unwrap();v("/supplier-table")}catch(s){L(s.data?.message||"Failed to update supplier. Please try again.")}finally{D(!1)}}else L("No supplier ID found")})),className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(p,{control:B.control,name:"name",render:({field:e})=>r.jsxs(h,{children:[r.jsxs(u,{children:["Supplier Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(b,{children:r.jsx(a,{placeholder:"Enter supplier name",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:B.control,name:"contact_person",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Contact Person"}),r.jsx(b,{children:r.jsx(a,{placeholder:"Enter contact person",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:B.control,name:"email",render:({field:e})=>r.jsxs(h,{children:[r.jsxs(u,{children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(b,{children:r.jsx(a,{placeholder:"Enter email address",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:B.control,name:"website",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Website"}),r.jsx(b,{children:r.jsx(a,{placeholder:"Enter website URL",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:B.control,name:"mobile",render:({field:e})=>r.jsxs(h,{children:[r.jsxs(u,{children:["Mobile Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(b,{children:r.jsx(a,{placeholder:"Enter mobile number",...e})}),r.jsx(f,{})]})})]}),r.jsx(p,{control:B.control,name:"address",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Address"}),r.jsx(b,{children:r.jsx(g,{placeholder:"Enter address",...e})}),r.jsx(f,{})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(p,{control:B.control,name:"country",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Country"}),r.jsx(b,{children:r.jsx(a,{placeholder:"Enter country",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:B.control,name:"city",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"City"}),r.jsx(b,{children:r.jsx(a,{placeholder:"Enter city",...e})}),r.jsx(f,{})]})})]}),r.jsx(p,{control:B.control,name:"description",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Description"}),r.jsx(b,{children:r.jsx(g,{placeholder:"Enter description",...e})}),r.jsx(f,{})]})}),r.jsx(p,{control:B.control,name:"image",render:({field:e})=>r.jsxs(h,{children:[r.jsx(u,{children:"Upload Image"}),r.jsx(b,{children:r.jsx(a,{type:"file",onChange:I,accept:"image/*"})}),r.jsx(f,{}),P&&r.jsx("div",{className:"mt-4",children:r.jsx("img",{src:P,alt:"Preview",className:"h-32 w-32 object-cover border"})})]})}),r.jsx("div",{className:"flex gap-4",children:r.jsx(l,{type:"submit",className:"bg-green-500 hover:bg-green-600",disabled:U,children:U?"Saving...":"Save Changes"})})]})})]})]})]})}export{v as default};
//# sourceMappingURL=EditSupplierForm-Cz0d5zkC.js.map
