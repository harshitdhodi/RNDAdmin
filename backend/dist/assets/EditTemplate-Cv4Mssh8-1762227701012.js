import{a as f,f as N,bi as v,bj as E,bh as w,r as F,j as e}from"./index-Bdh4G8g5-1762227701012.js";import{b as S}from"./index.esm-D3ezSmyC-1762227701012.js";import{R as q}from"./index-BoqHRJl0-1762227701012.js";/* empty css                                 */import"./isEqual-DczKo39w-1762227701012.js";const Q=()=>{var n;const{id:d}=f(),u=N(),{register:l,handleSubmit:b,reset:m,setValue:o,formState:{errors:s}}=S(),[p,{isLoading:i}]=v(),{data:a,isLoading:x,error:c}=E(d,{skip:!d}),{data:r,isLoading:h}=w();console.log(r),F.useEffect(()=>{var t;a!=null&&a.data&&(m({name:a.data.name,subject:a.data.subject,body:a.data.body,category:((t=a.data.category)==null?void 0:t._id)||""}),o("body",a.data.body))},[a,m,o]);const j=async t=>{try{await p({id:d,...t}).unwrap(),u("/email-template-table")}catch(g){alert("Failed to update template: "+g.message)}},y=t=>{o("body",t)};return x?e.jsx("div",{children:"Loading template..."}):c?e.jsxs("div",{children:["Error fetching template: ",c.message]}):e.jsxs("div",{className:"p-4 mx-auto",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Edit Template"}),e.jsxs("form",{onSubmit:b(j),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"category",children:"Category"}),e.jsxs("select",{id:"category",...l("category",{required:"Category is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Select a category"}),!h&&(r==null?void 0:r.map(t=>e.jsx("option",{value:t._id,children:t.emailCategory},t._id)))]}),s.category&&e.jsx("p",{className:"text-red-500 text-sm",children:s.category.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"name",children:"Name"}),e.jsx("input",{id:"name",...l("name",{required:"Name is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template name"}),s.name&&e.jsx("p",{className:"text-red-500 text-sm",children:s.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"subject",children:"Subject"}),e.jsx("input",{id:"subject",...l("subject",{required:"Subject is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template subject"}),s.subject&&e.jsx("p",{className:"text-red-500 text-sm",children:s.subject.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"body",children:"Body"}),e.jsx(q,{value:((n=a==null?void 0:a.data)==null?void 0:n.body)||"",onChange:y,placeholder:"Enter template body",className:"w-full border border-gray-300 rounded px-3 py-2"}),s.body&&e.jsx("p",{className:"text-red-500 text-sm",children:s.body.message})]}),e.jsx("button",{type:"submit",className:`w-1/4 bg-blue-500 text-white px-4 py-2 rounded ${i?"opacity-50":""}`,disabled:i,children:i?"Updating...":"Update Template"})]})]})};export{Q as default};
