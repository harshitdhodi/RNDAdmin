import{b3 as j,b4 as f,b2 as N,j as e}from"./main-CHwjN9ww.js";import{i as v,f as E,c as w}from"./vendor-CgeupRFx.js";import{b as F}from"./index.esm-CAsSPsEb.js";import{R as S}from"./index-BV0thCfA.js";/* empty css                   */import"./isEqual-D1PYm16U.js";const Q=()=>{const{id:r}=v(),n=E(),{register:d,handleSubmit:u,reset:i,setValue:l,formState:{errors:t}}=F(),[p,{isLoading:o}]=j(),{data:a,isLoading:b,error:m}=f(r,{skip:!r}),{data:c,isLoading:x}=N();console.log(c),w.useEffect(()=>{a?.data&&(i({name:a.data.name,subject:a.data.subject,body:a.data.body,category:a.data.category?._id||""}),l("body",a.data.body))},[a,i,l]);const g=async s=>{try{await p({id:r,...s}).unwrap(),n("/email-template-table")}catch(y){alert("Failed to update template: "+y.message)}},h=s=>{l("body",s)};return b?e.jsx("div",{children:"Loading template..."}):m?e.jsxs("div",{children:["Error fetching template: ",m.message]}):e.jsxs("div",{className:"p-4 mx-auto",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Edit Template"}),e.jsxs("form",{onSubmit:u(g),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"category",children:"Category"}),e.jsxs("select",{id:"category",...d("category",{required:"Category is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Select a category"}),!x&&c?.map(s=>e.jsx("option",{value:s._id,children:s.emailCategory},s._id))]}),t.category&&e.jsx("p",{className:"text-red-500 text-sm",children:t.category.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"name",children:"Name"}),e.jsx("input",{id:"name",...d("name",{required:"Name is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template name"}),t.name&&e.jsx("p",{className:"text-red-500 text-sm",children:t.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"subject",children:"Subject"}),e.jsx("input",{id:"subject",...d("subject",{required:"Subject is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template subject"}),t.subject&&e.jsx("p",{className:"text-red-500 text-sm",children:t.subject.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"body",children:"Body"}),e.jsx(S,{value:a?.data?.body||"",onChange:h,placeholder:"Enter template body",className:"w-full border border-gray-300 rounded px-3 py-2"}),t.body&&e.jsx("p",{className:"text-red-500 text-sm",children:t.body.message})]}),e.jsx("button",{type:"submit",className:`w-1/4 bg-blue-500 text-white px-4 py-2 rounded ${o?"opacity-50":""}`,disabled:o,children:o?"Updating...":"Update Template"})]})]})};export{Q as default};
