import{r as f,j as e}from"./react-DKICu8bO.js";import{c as N}from"./react-hook-form-BpvdonxZ.js";import{ad as v,ae as E,ac as w}from"./index-CDFtkn6X.js";import{R as F}from"./react-quill-BTfuOY7l.js";import{b as S,a as q}from"./react-router-B9QVkYva.js";import"./classnames-Bv6oJzD9.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./lucide-D7hRWJEP.js";import"./axios-DXsv3KKR.js";import"./@syncfusion-BIAkhmGL.js";import"./cookie--_YQFYBD.js";import"./lodash-BLBAyiDt.js";import"./quill-BGoone1_.js";const le=()=>{var p;const{id:o}=S(),n=q(),{register:i,handleSubmit:u,reset:l,setValue:m,formState:{errors:a}}=N(),[b,{isLoading:d}]=v(),{data:t,isLoading:x,error:c}=E(o,{skip:!o}),{data:s,isLoading:h}=w();console.log(s),f.useEffect(()=>{var r;t!=null&&t.data&&(l({name:t.data.name,subject:t.data.subject,body:t.data.body,category:((r=t.data.category)==null?void 0:r._id)||""}),m("body",t.data.body))},[t,l,m]);const y=async r=>{try{await b({id:o,...r}).unwrap(),n("/email-template-table")}catch(j){alert("Failed to update template: "+j.message)}},g=r=>{m("body",r)};return x?e.jsx("div",{children:"Loading template..."}):c?e.jsxs("div",{children:["Error fetching template: ",c.message]}):e.jsxs("div",{className:"p-4 mx-auto",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Edit Template"}),e.jsxs("form",{onSubmit:u(y),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"category",children:"Category"}),e.jsxs("select",{id:"category",...i("category",{required:"Category is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Select a category"}),!h&&(s==null?void 0:s.map(r=>e.jsx("option",{value:r._id,children:r.emailCategory},r._id)))]}),a.category&&e.jsx("p",{className:"text-red-500 text-sm",children:a.category.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"name",children:"Name"}),e.jsx("input",{id:"name",...i("name",{required:"Name is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template name"}),a.name&&e.jsx("p",{className:"text-red-500 text-sm",children:a.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"subject",children:"Subject"}),e.jsx("input",{id:"subject",...i("subject",{required:"Subject is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template subject"}),a.subject&&e.jsx("p",{className:"text-red-500 text-sm",children:a.subject.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"body",children:"Body"}),e.jsx(F,{value:((p=t==null?void 0:t.data)==null?void 0:p.body)||"",onChange:g,placeholder:"Enter template body",className:"w-full border border-gray-300 rounded px-3 py-2"}),a.body&&e.jsx("p",{className:"text-red-500 text-sm",children:a.body.message})]}),e.jsx("button",{type:"submit",className:`w-1/4 bg-blue-500 text-white px-4 py-2 rounded ${d?"opacity-50":""}`,disabled:d,children:d?"Updating...":"Update Template"})]})]})};export{le as default};
