import{aY as e,aZ as a,aX as t,j as s}from"./main-BQqr2_19.js";import{g as r,d,r as l}from"./vendor-router-DoRotgOs.js";import{b as o}from"./index.esm-CSDyVtrl.js";import{R as i}from"./index-BEyUZcsN.js";/* empty css                   */import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";import"./isEqual-DwlFmuh_.js";const m=()=>{const{id:m}=r(),c=d(),{register:n,handleSubmit:b,reset:u,setValue:p,formState:{errors:x}}=o(),[j,{isLoading:y}]=e(),{data:h,isLoading:g,error:f}=a(m,{skip:!m}),{data:N,isLoading:v}=t();l.useEffect((()=>{h?.data&&(u({name:h.data.name,subject:h.data.subject,body:h.data.body,category:h.data.category?._id||""}),p("body",h.data.body))}),[h,u,p]);return g?s.jsx("div",{children:"Loading template..."}):f?s.jsxs("div",{children:["Error fetching template: ",f.message]}):s.jsxs("div",{className:"p-4 mx-auto",children:[s.jsx("h1",{className:"text-xl font-bold mb-4",children:"Edit Template"}),s.jsxs("form",{onSubmit:b((async e=>{try{await j({id:m,...e}).unwrap(),c("/email-template-table")}catch(a){alert("Failed to update template: "+a.message)}})),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"category",children:"Category"}),s.jsxs("select",{id:"category",...n("category",{required:"Category is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",children:[s.jsx("option",{value:"",children:"Select a category"}),!v&&N?.map((e=>s.jsx("option",{value:e._id,children:e.emailCategory},e._id)))]}),x.category&&s.jsx("p",{className:"text-red-500 text-sm",children:x.category.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"name",children:"Name"}),s.jsx("input",{id:"name",...n("name",{required:"Name is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template name"}),x.name&&s.jsx("p",{className:"text-red-500 text-sm",children:x.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"subject",children:"Subject"}),s.jsx("input",{id:"subject",...n("subject",{required:"Subject is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template subject"}),x.subject&&s.jsx("p",{className:"text-red-500 text-sm",children:x.subject.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"body",children:"Body"}),s.jsx(i,{value:h?.data?.body||"",onChange:e=>{p("body",e)},placeholder:"Enter template body",className:"w-full border border-gray-300 rounded px-3 py-2"}),x.body&&s.jsx("p",{className:"text-red-500 text-sm",children:x.body.message})]}),s.jsx("button",{type:"submit",className:"w-1/4 bg-blue-500 text-white px-4 py-2 rounded "+(y?"opacity-50":""),disabled:y,children:y?"Updating...":"Update Template"})]})]})};export{m as default};
//# sourceMappingURL=EditTemplate-nYDzfBL4.js.map
