import{r as e,j as s}from"./react-BfBsRgn0.js";import{c as t}from"./react-hook-form-Dn0Bw783.js";import{ae as r,af as a,ad as o}from"./index-cVSOkL6A.js";import{R as i}from"./react-quill-O9LY_HeH.js";import{b as l,a as d}from"./react-router-DUJjWq5j.js";import"./classnames-C3ovBj6j.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./lucide-D6BDVLHE.js";import"./axios-BoylL8Pu.js";import"./@syncfusion-CXokIO9o.js";import"./cookie-BUTH-fPQ.js";import"./lodash-CtK3uT03.js";import"./quill-CMG--X-K.js";const m=()=>{var m;const{id:c}=l(),n=d(),{register:p,handleSubmit:j,reset:u,setValue:x,formState:{errors:b}}=t(),[h,{isLoading:y}]=r(),{data:g,isLoading:f,error:v}=a(c,{skip:!c}),{data:N,isLoading:k}=o();e.useEffect((()=>{var e;(null==g?void 0:g.data)&&(u({name:g.data.name,subject:g.data.subject,body:g.data.body,category:(null==(e=g.data.category)?void 0:e._id)||""}),x("body",g.data.body))}),[g,u,x]);return f?s.jsx("div",{children:"Loading template..."}):v?s.jsxs("div",{children:["Error fetching template: ",v.message]}):s.jsxs("div",{className:"p-4 mx-auto",children:[s.jsx("h1",{className:"text-xl font-bold mb-4",children:"Edit Template"}),s.jsxs("form",{onSubmit:j((async e=>{try{await h({id:c,...e}).unwrap(),n("/email-template-table")}catch(s){alert("Failed to update template: "+s.message)}})),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"category",children:"Category"}),s.jsxs("select",{id:"category",...p("category",{required:"Category is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",children:[s.jsx("option",{value:"",children:"Select a category"}),!k&&(null==N?void 0:N.map((e=>s.jsx("option",{value:e._id,children:e.emailCategory},e._id))))]}),b.category&&s.jsx("p",{className:"text-red-500 text-sm",children:b.category.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"name",children:"Name"}),s.jsx("input",{id:"name",...p("name",{required:"Name is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template name"}),b.name&&s.jsx("p",{className:"text-red-500 text-sm",children:b.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"subject",children:"Subject"}),s.jsx("input",{id:"subject",...p("subject",{required:"Subject is required"}),className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"Enter template subject"}),b.subject&&s.jsx("p",{className:"text-red-500 text-sm",children:b.subject.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"body",children:"Body"}),s.jsx(i,{value:(null==(m=null==g?void 0:g.data)?void 0:m.body)||"",onChange:e=>{x("body",e)},placeholder:"Enter template body",className:"w-full border border-gray-300 rounded px-3 py-2"}),b.body&&s.jsx("p",{className:"text-red-500 text-sm",children:b.body.message})]}),s.jsx("button",{type:"submit",className:"w-1/4 bg-blue-500 text-white px-4 py-2 rounded "+(y?"opacity-50":""),disabled:y,children:y?"Updating...":"Update Template"})]})]})};export{m as default};
