import{aX as e,bP as s,j as a,B as r,bQ as t,bR as i,D as o,m as c,n as l,o as n,I as d,aG as m}from"./main-BQqr2_19.js";import{r as j}from"./vendor-router-DoRotgOs.js";import{C as h}from"./card-CPQ_AIkA.js";import{T as u}from"./table-C7XKYQT1.js";import{A as x,h as y,a as p,b as g,e as C,f,g as v}from"./alert-dialog-DKDaLIss.js";import{B as b}from"./react-toastify.esm-BNXCN5Br.js";import{P as w}from"./pencil-C2uD4Ipu.js";import{T as N}from"./trash-2-CkYKnG3D.js";import{F as E,a as S,b as k,c as A,d as P}from"./form-8DYzE22W.js";import{b as D}from"./index.esm-CSDyVtrl.js";import{P as F}from"./plus-C_FNkNo2.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";const z=({onEditClick:t})=>{const{data:i,isLoading:o}=e(),[c]=s(),l=[{header:"Category Name",accessorKey:"emailCategory"},{header:"Actions",accessorKey:"actions",cell:({row:e})=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx(r,{size:"icon",variant:"secondary",onClick:()=>t(e.original),children:a.jsx(w,{className:"h-4 w-4"})}),a.jsxs(x,{children:[a.jsx(y,{asChild:!0,children:a.jsx(r,{size:"icon",variant:"destructive",children:a.jsx(N,{className:"h-4 w-4"})})}),a.jsxs(p,{children:[a.jsx(g,{children:"Are you sure you want to delete this category?"}),a.jsxs(C,{children:[a.jsx(f,{children:"Cancel"}),a.jsx(v,{onClick:()=>(async e=>{try{await c(e).unwrap(),b({title:"Success",description:"Category deleted successfully"})}catch(s){b({title:"Error",description:"Failed to delete category",variant:"destructive"})}})(e.original._id),children:"Delete"})]})]})]})]})}];return a.jsx(h,{className:"p-5 space-y-4",children:a.jsx(u,{columns:l,data:i||[],isLoading:o})})},G=({visible:e,onClose:s,editingCategory:h})=>{const[u]=t(),[x]=i(),y=D({defaultValues:{emailCategory:h?.emailCategory||""}});j.useEffect((()=>{y.reset({emailCategory:h?.emailCategory||""})}),[h,y]);return a.jsx(o,{open:e,onOpenChange:s,children:a.jsxs(c,{children:[a.jsx(l,{children:a.jsx(n,{children:h?"Edit Category":"Add New Category"})}),a.jsx(E,{...y,children:a.jsxs("form",{onSubmit:y.handleSubmit((async e=>{try{h?(await x({id:h._id,data:e}).unwrap(),toast({title:"Success",description:"Category updated successfully"})):(await u(e).unwrap(),toast({title:"Success",description:"Category created successfully"})),s()}catch(a){toast({title:"Error",description:"Failed to save category",variant:"destructive"})}})),className:"space-y-4",children:[a.jsx(S,{control:y.control,name:"emailCategory",rules:{required:"Please enter category name"},render:({field:e})=>a.jsxs(k,{children:[a.jsx(A,{children:"Category Name"}),a.jsx(P,{children:a.jsx(d,{placeholder:"Enter category name",...e})})]})}),a.jsxs(m,{children:[a.jsx(r,{type:"button",variant:"secondary",onClick:s,children:"Cancel"}),a.jsx(r,{type:"submit",children:"Save"})]})]})})]})})},I=()=>{const[e,s]=j.useState(!1),[t,i]=j.useState(null);return a.jsxs(h,{className:"p-5 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Email Categories"}),a.jsxs(r,{onClick:()=>{i(null),s(!0)},children:[a.jsx(F,{className:"h-4 w-4 mr-2"})," Add New Category"]})]}),a.jsx(z,{onEditClick:e=>{i(e),s(!0)}}),e&&a.jsx(G,{visible:e,onClose:()=>{s(!1),i(null)},editingCategory:t})]})};export{I as default};
//# sourceMappingURL=EmailCategoryParent-49EtM72A.js.map
