import{cU as y,eq as g,j as e,bc as C,bm as p,be as u,cY as x,dn as h,cZ as j,dp as c,dP as d,er as f,es as E,dU as w,r as m,dm as b}from"./index-BtPp14pW-1769063468635.js";import{M}from"./index-8RcLposF-1769063468635.js";import{C as k}from"./index-G7MGcg5s-1769063468635.js";import"./index-Cmnm3Lnz-1769063468635.js";import"./Skeleton-BD2mo-1b-1769063468635.js";const F=({onEditClick:i})=>{const{data:a,isLoading:t}=y(),[s]=g(),n=async o=>{try{await s(o).unwrap(),c.success("Category deleted successfully")}catch{c.error("Failed to delete category")}},l=[{title:"Category Name",dataIndex:"emailCategory",key:"emailCategory"},{title:"Actions",key:"actions",render:(o,r)=>e.jsxs(p,{children:[e.jsx(u,{type:"primary",icon:e.jsx(x,{}),onClick:()=>i(r)}),e.jsx(h,{title:"Are you sure you want to delete this category?",onConfirm:()=>n(r._id),okText:"Yes",cancelText:"No",children:e.jsx(u,{type:"primary",danger:!0,icon:e.jsx(j,{})})})]})}];return e.jsx(C,{columns:l,dataSource:a,rowKey:"_id",loading:t,pagination:{pageSize:10,showSizeChanger:!0,showTotal:o=>`Total ${o} items`}})},I=({visible:i,onClose:a,editingCategory:t})=>{const[s]=d.useForm(),[n]=f(),[l]=E(),o=async r=>{try{t?(await l({id:t._id,data:r}).unwrap(),c.success("Category updated successfully")):(await n(r).unwrap(),c.success("Category created successfully")),a()}catch{c.error("Failed to save category")}};return e.jsx(M,{title:t?"Edit Category":"Add New Category",open:i,onCancel:a,onOk:()=>s.submit(),children:e.jsx(d,{form:s,layout:"vertical",onFinish:o,initialValues:t,children:e.jsx(d.Item,{name:"emailCategory",label:"Category Name",rules:[{required:!0,message:"Please enter category name"}],children:e.jsx(w,{placeholder:"Enter category name"})})})})},_=()=>{const[i,a]=m.useState(!1),[t,s]=m.useState(null),n=()=>{s(null),a(!0)},l=r=>{s(r),a(!0)},o=()=>{a(!1),s(null)};return e.jsxs(k,{title:"Email Categories",children:[e.jsx(u,{type:"primary",icon:e.jsx(b,{}),onClick:n,className:"mb-4",children:"Add New Category"}),e.jsx(F,{onEditClick:l}),i&&e.jsx(I,{visible:i,onClose:o,editingCategory:t})]})};export{_ as default};
