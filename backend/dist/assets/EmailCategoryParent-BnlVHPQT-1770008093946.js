import{cT as m,ep as g,j as e,bb as C,bl as p,bd as u,cX as x,dm as h,cY as j,dn as c,dO as d,eq as f,er as E,dT as w,r as y,dl as b}from"./index-s1lMi29O-1770008093946.js";import{M}from"./index-kgIDmFTL-1770008093946.js";import{C as k}from"./index-B3BiNW1L-1770008093946.js";import"./index-Coq7tTkU-1770008093946.js";import"./Skeleton-BPYue-2v-1770008093946.js";const T=({onEditClick:i})=>{const{data:a,isLoading:t}=m(),[s]=g(),l=async o=>{try{await s(o).unwrap(),c.success("Category deleted successfully")}catch{c.error("Failed to delete category")}},n=[{title:"Category Name",dataIndex:"emailCategory",key:"emailCategory"},{title:"Actions",key:"actions",render:(o,r)=>e.jsxs(p,{children:[e.jsx(u,{type:"primary",icon:e.jsx(x,{}),onClick:()=>i(r)}),e.jsx(h,{title:"Are you sure you want to delete this category?",onConfirm:()=>l(r._id),okText:"Yes",cancelText:"No",children:e.jsx(u,{type:"primary",danger:!0,icon:e.jsx(j,{})})})]})}];return e.jsx(C,{columns:n,dataSource:a,rowKey:"_id",loading:t,pagination:{pageSize:10,showSizeChanger:!0,showTotal:o=>`Total ${o} items`}})},F=({visible:i,onClose:a,editingCategory:t})=>{const[s]=d.useForm(),[l]=f(),[n]=E(),o=async r=>{try{t?(await n({id:t._id,data:r}).unwrap(),c.success("Category updated successfully")):(await l(r).unwrap(),c.success("Category created successfully")),a()}catch{c.error("Failed to save category")}};return e.jsx(M,{title:t?"Edit Category":"Add New Category",open:i,onCancel:a,onOk:()=>s.submit(),children:e.jsx(d,{form:s,layout:"vertical",onFinish:o,initialValues:t,children:e.jsx(d.Item,{name:"emailCategory",label:"Category Name",rules:[{required:!0,message:"Please enter category name"}],children:e.jsx(w,{placeholder:"Enter category name"})})})})},P=()=>{const[i,a]=y.useState(!1),[t,s]=y.useState(null),l=()=>{s(null),a(!0)},n=r=>{s(r),a(!0)},o=()=>{a(!1),s(null)};return e.jsxs(k,{title:"Email Categories",children:[e.jsx(u,{type:"primary",icon:e.jsx(b,{}),onClick:l,className:"mb-4",children:"Add New Category"}),e.jsx(T,{onEditClick:n}),i&&e.jsx(F,{visible:i,onClose:o,editingCategory:t})]})};export{P as default};
