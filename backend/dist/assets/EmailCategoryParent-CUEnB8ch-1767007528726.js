import{cT as y,eo as g,j as e,bc as C,bm as p,be as u,cX as x,dl as h,cY as j,dm as c,dN as d,ep as f,eq as E,dS as w,r as m,dk as b}from"./index-DgWUCWkU-1767007528726.js";import{M as k}from"./index-CpTzposP-1767007528726.js";import{C as M}from"./index-D-txuTFk-1767007528726.js";import"./index-DjAlXMiT-1767007528726.js";import"./Skeleton-DLtD-Vcf-1767007528726.js";const N=({onEditClick:i})=>{const{data:a,isLoading:t}=y(),[s]=g(),l=async o=>{try{await s(o).unwrap(),c.success("Category deleted successfully")}catch{c.error("Failed to delete category")}},n=[{title:"Category Name",dataIndex:"emailCategory",key:"emailCategory"},{title:"Actions",key:"actions",render:(o,r)=>e.jsxs(p,{children:[e.jsx(u,{type:"primary",icon:e.jsx(x,{}),onClick:()=>i(r)}),e.jsx(h,{title:"Are you sure you want to delete this category?",onConfirm:()=>l(r._id),okText:"Yes",cancelText:"No",children:e.jsx(u,{type:"primary",danger:!0,icon:e.jsx(j,{})})})]})}];return e.jsx(C,{columns:n,dataSource:a,rowKey:"_id",loading:t,pagination:{pageSize:10,showSizeChanger:!0,showTotal:o=>`Total ${o} items`}})},S=({visible:i,onClose:a,editingCategory:t})=>{const[s]=d.useForm(),[l]=f(),[n]=E(),o=async r=>{try{t?(await n({id:t._id,data:r}).unwrap(),c.success("Category updated successfully")):(await l(r).unwrap(),c.success("Category created successfully")),a()}catch{c.error("Failed to save category")}};return e.jsx(k,{title:t?"Edit Category":"Add New Category",open:i,onCancel:a,onOk:()=>s.submit(),children:e.jsx(d,{form:s,layout:"vertical",onFinish:o,initialValues:t,children:e.jsx(d.Item,{name:"emailCategory",label:"Category Name",rules:[{required:!0,message:"Please enter category name"}],children:e.jsx(w,{placeholder:"Enter category name"})})})})},P=()=>{const[i,a]=m.useState(!1),[t,s]=m.useState(null),l=()=>{s(null),a(!0)},n=r=>{s(r),a(!0)},o=()=>{a(!1),s(null)};return e.jsxs(M,{title:"Email Categories",children:[e.jsx(u,{type:"primary",icon:e.jsx(b,{}),onClick:l,className:"mb-4",children:"Add New Category"}),e.jsx(N,{onEditClick:n}),i&&e.jsx(S,{visible:i,onClose:o,editingCategory:t})]})};export{P as default};
