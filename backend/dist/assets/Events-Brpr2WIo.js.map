{"version":3,"file":"Events-Brpr2WIo.js","sources":["../../src/websiteBackend/event/Events.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card } from \"@/components/ui/card\";\r\n\r\nconst EventForm = () => {\r\n  const [events, setEvents] = useState(\"\");\r\n  const [eventId, setEventId] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchEvent = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(`/api/events/getEvent?t=${new Date().getTime()}`);\r\n      const eventData = response.data[0];\r\n      setEventId(eventData._id);\r\n      setEvents(eventData.events);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch event:\", error);\r\n      toast.error(\"Failed to fetch event.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEvent();\r\n  }, []);\r\n\r\n  const handleChange = (newContent) => {\r\n    setEvents(newContent);\r\n  };\r\n\r\n  const handleUpdate = async () => {\r\n    try {\r\n      if (!eventId) {\r\n        toast.error(\"No event ID available\");\r\n        return;\r\n      }\r\n      setLoading(true);\r\n      await axios.put(`/api/events/editEvent/${eventId}`, { events });\r\n      toast.success(\"Event updated successfully!\");\r\n      await fetchEvent();\r\n    } catch (error) {\r\n      console.error(\"Failed to update event:\", error);\r\n      toast.error(\"Failed to update event.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"p-6 max-w-2xl mx-auto\">\r\n      <h2 className=\"text-xl font-bold mb-4\">Edit Event</h2>\r\n\r\n      <div className=\"mb-4\">\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Event Description</label>\r\n        <ReactQuill \r\n          value={events} \r\n          onChange={handleChange} \r\n          modules={{ toolbar: [['bold', 'italic', 'underline'], [{ list: 'ordered' }, { list: 'bullet' }], ['link', 'image']] }} \r\n          className=\"border rounded-md\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex gap-3\">\r\n        <Button onClick={handleUpdate} disabled={loading}>\r\n          {loading ? \"Updating...\" : \"Update Event\"}\r\n        </Button>\r\n        <Button variant=\"outline\" onClick={fetchEvent} disabled={loading}>\r\n          {loading ? \"Refreshing...\" : \"Refresh Data\"}\r\n        </Button>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default EventForm;\r\n"],"names":["EventForm","events","setEvents","useState","eventId","setEventId","loading","setLoading","fetchEvent","async","eventData","axios","get","Date","getTime","data","_id","error","toast","useEffect","jsxs","Card","className","children","jsx","ReactQuill","value","onChange","newContent","modules","toolbar","list","Button","onClick","put","success","disabled","variant"],"mappings":"mXAQA,MAAMA,EAAY,KAChB,MAAOC,EAAQC,GAAaC,EAAAA,SAAS,KAC9BC,EAASC,GAAcF,EAAAA,SAAS,OAChCG,EAASC,GAAcJ,EAAAA,UAAS,GAEjCK,EAAaC,UACb,IACFF,GAAW,GACL,MACAG,SADiBC,EAAMC,IAAI,2BAAA,IAA8BC,MAAOC,cAC3CC,KAAK,GAChCV,EAAWK,EAAUM,KACrBd,EAAUQ,EAAUT,cACbgB,GAEPC,EAAMD,MAAM,yBAAwB,CACpC,QACAV,GAAW,EAAK,GAIpBY,EAAAA,WAAU,KACGX,GAAA,GACV,IAyBD,OAAAY,EAAAA,KAACC,EAAK,CAAAC,UAAU,wBACdC,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,yBAAyBC,SAAU,eAEjDH,EAAAA,KAAC,MAAI,CAAAE,UAAU,OACbC,SAAA,CAACC,EAAAA,IAAA,QAAA,CAAMF,UAAU,+CAA+CC,SAAiB,sBACjFC,EAAAA,IAACC,EAAA,CACCC,MAAOzB,EACP0B,SA9BcC,IACpB1B,EAAU0B,EAAU,EA8BdC,QAAS,CAAEC,QAAS,CAAC,CAAC,OAAQ,SAAU,aAAc,CAAC,CAAEC,KAAM,WAAa,CAAEA,KAAM,WAAa,CAAC,OAAQ,WAC1GT,UAAU,yBAIdF,EAAAA,KAAC,MAAI,CAAAE,UAAU,aACbC,SAAA,CAAAC,EAAAA,IAACQ,GAAOC,QAjCOxB,UACf,IACF,IAAKL,EAEH,YADAc,EAAMD,MAAM,yBAGdV,GAAW,SACLI,EAAMuB,IAAI,yBAAyB9B,IAAW,CAAEH,WACtDiB,EAAMiB,QAAQ,qCACR3B,UACCS,GAEPC,EAAMD,MAAM,0BAAyB,CACrC,QACAV,GAAW,EAAK,GAmBiB6B,SAAU9B,EACtCiB,SAAAjB,EAAU,cAAgB,iBAE7BkB,EAAAA,IAACQ,EAAO,CAAAK,QAAQ,UAAUJ,QAASzB,EAAY4B,SAAU9B,EACtDiB,SAAUjB,EAAA,gBAAkB,sBAGnC"}