import{r as s,j as t,c as v}from"./index-CRdG_42A-1744608040179.js";import{J as y}from"./jodit-react-B4WmN9VF-1744608040179.js";import{F as o}from"./index-n1YizhD--1744608040179.js";import{B as p}from"./index-DI_9E5ut-1744608040179.js";import{s as n}from"./index-BX_No8xo-1744608040179.js";import"./toArray-Bbgf03cS-1744608040179.js";import"./CheckCircleFilled-ChLXlquY-1744608040179.js";import"./ExclamationCircleFilled-B3z9dj68-1744608040179.js";import"./InfoCircleFilled-B6vtsR_8-1744608040179.js";const w=()=>{const[a]=o.useForm(),[c,d]=s.useState(""),[u,f]=s.useState(null),[m,r]=s.useState(!1),h=s.useRef(null),E={uploader:{insertImageAsBase64URI:!0},toolbarAdaptive:!1,toolbarSticky:!1,buttons:["bold","italic","underline","ul","ol","fontsize","paragraph","link","image","video","table","align","undo","redo"]},i=async()=>{try{r(!0);const l=(await v.get(`/api/events/getEvent?t=${new Date().getTime()}`)).data[0];f(l._id),d(l.events),a.setFieldsValue({events:l.events})}catch(e){console.error("Failed to fetch event:",e),n.error("Failed to fetch event.")}finally{r(!1)}};s.useEffect(()=>{i()},[a]);const g=async()=>{try{if(!u){n.error("No event ID available");return}r(!0),await v.put(`/api/events/editEvent/${u}`,{events:c}),n.success("Event updated successfully!"),await i()}catch(e){console.error("Failed to update event:",e),n.error("Failed to update event.")}finally{r(!1)}};return t.jsxs(o,{form:a,layout:"vertical",onFinish:g,name:"event_form",children:[t.jsx(o.Item,{name:"events",label:"Event Description",rules:[{required:!0,message:"Please input the event details!"}],children:t.jsx(y,{ref:h,value:c,config:E,onChange:e=>{d(e),a.setFieldsValue({events:e})}})}),t.jsxs(o.Item,{children:[t.jsx(p,{type:"primary",htmlType:"submit",loading:m,children:"Update Event"}),t.jsx(p,{onClick:i,className:"ml-2",loading:m,children:"Refresh Data"})]})]})};export{w as default};
