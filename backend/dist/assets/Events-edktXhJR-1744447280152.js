import{j as t,b as p}from"./main-CuiBl65R-1744447280152.js";import{c as s}from"./vendor-C9iLKeEQ-1744447280152.js";import{J as E}from"./jodit-react-CS_-vL61-1744447280152.js";import{F as o}from"./index-yBgiZpA_-1744447280152.js";import{B as v}from"./index-BASe7pQd-1744447280152.js";import{s as n}from"./index-DiO0HVuh-1744447280152.js";import"./toArray-Bbgf03cS-1744447280152.js";import"./CheckCircleFilled-BXipySGT-1744447280152.js";import"./ExclamationCircleFilled-CxUyat0W-1744447280152.js";import"./InfoCircleFilled-D0gqUfmi-1744447280152.js";const B=()=>{const[r]=o.useForm(),[c,d]=s.useState(""),[u,f]=s.useState(null),[m,a]=s.useState(!1),h=s.useRef(null),g={uploader:{insertImageAsBase64URI:!0},toolbarAdaptive:!1,toolbarSticky:!1,buttons:["bold","italic","underline","ul","ol","fontsize","paragraph","link","image","video","table","align","undo","redo"]},i=async()=>{try{a(!0);const l=(await p.get(`/api/events/getEvent?t=${new Date().getTime()}`)).data[0];f(l._id),d(l.events),r.setFieldsValue({events:l.events})}catch(e){console.error("Failed to fetch event:",e),n.error("Failed to fetch event.")}finally{a(!1)}};s.useEffect(()=>{i()},[r]);const y=async()=>{try{if(!u){n.error("No event ID available");return}a(!0),await p.put(`/api/events/editEvent/${u}`,{events:c}),n.success("Event updated successfully!"),await i()}catch(e){console.error("Failed to update event:",e),n.error("Failed to update event.")}finally{a(!1)}};return t.jsxs(o,{form:r,layout:"vertical",onFinish:y,name:"event_form",children:[t.jsx(o.Item,{name:"events",label:"Event Description",rules:[{required:!0,message:"Please input the event details!"}],children:t.jsx(E,{ref:h,value:c,config:g,onChange:e=>{d(e),r.setFieldsValue({events:e})}})}),t.jsxs(o.Item,{children:[t.jsx(v,{type:"primary",htmlType:"submit",loading:m,children:"Update Event"}),t.jsx(v,{onClick:i,style:{marginLeft:8},loading:m,children:"Refresh Data"})]})]})};export{B as default};
