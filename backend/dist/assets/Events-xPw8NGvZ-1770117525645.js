import{dO as r,r as s,j as t,bd as f,c as m,dn as o}from"./index-HVo_qOfp-1770117525645.js";import{J as y}from"./jodit-react-CTefNv3Q-1770117525645.js";const b=()=>{const[a]=r.useForm(),[c,d]=s.useState(""),[u,p]=s.useState(null),[v,n]=s.useState(!1),h=s.useRef(null),E={uploader:{insertImageAsBase64URI:!0},toolbarAdaptive:!1,toolbarSticky:!1,buttons:["bold","italic","underline","ul","ol","fontsize","paragraph","link","image","video","table","align","undo","redo"]},l=async()=>{try{n(!0);const i=(await m.get(`/api/events/getEvent?t=${new Date().getTime()}`)).data[0];p(i._id),d(i.events),a.setFieldsValue({events:i.events})}catch(e){console.error("Failed to fetch event:",e),o.error("Failed to fetch event.")}finally{n(!1)}};s.useEffect(()=>{l()},[a]);const g=async()=>{try{if(!u){o.error("No event ID available");return}n(!0),await m.put(`/api/events/editEvent/${u}`,{events:c}),o.success("Event updated successfully!"),await l()}catch(e){console.error("Failed to update event:",e),o.error("Failed to update event.")}finally{n(!1)}};return t.jsxs(r,{form:a,layout:"vertical",onFinish:g,name:"event_form",children:[t.jsx(r.Item,{name:"events",label:"Event Description",rules:[{required:!0,message:"Please input the event details!"}],children:t.jsx(y,{ref:h,value:c,config:E,onChange:e=>{d(e),a.setFieldsValue({events:e})}})}),t.jsxs(r.Item,{children:[t.jsx(f,{type:"primary",htmlType:"submit",loading:v,children:"Update Event"}),t.jsx(f,{onClick:l,className:"ml-2",loading:v,children:"Refresh Data"})]})]})};export{b as default};
