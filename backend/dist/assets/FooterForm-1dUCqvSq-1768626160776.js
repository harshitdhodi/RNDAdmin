import{f as w,a as L,r as k,j as e,aK as t,I as o,B as x,P as N,az as C,c as p}from"./index-BlNJerT2-1768626160776.js";import{T as H}from"./textarea-CvamapiW-1768626160776.js";const z=()=>{const u=w(),{id:h}=L(),[l,c]=k.useState({linkHeading:"",description:"",contactInfo:{address:"",phone:"",email:"",link:""},socialMedia:[],links:[]});k.useEffect(()=>{h&&(async()=>{var a,n,i,d;try{const r=(await p.get(`/api/footer/getById?id=${h}`)).data.data;c({linkHeading:r.linkHeading||"",description:r.description||"",contactInfo:{address:((a=r.contactInfo)==null?void 0:a.address)||"",phone:((n=r.contactInfo)==null?void 0:n.phone)||"",email:((i=r.contactInfo)==null?void 0:i.email)||"",link:((d=r.contactInfo)==null?void 0:d.link)||""},socialMedia:r.socialMedia||[],links:r.links||[]})}catch(m){console.error("Error fetching footer details:",m)}})()},[h]);const g=s=>{const{name:a,value:n}=s.target;c(i=>({...i,[a]:n}))},f=s=>{const{name:a,value:n}=s.target;c(i=>({...i,contactInfo:{...i.contactInfo,[a]:n}}))},b=()=>{c(s=>({...s,socialMedia:[...s.socialMedia,{platform:"",url:"",icon:""}]}))},y=s=>{c(a=>({...a,socialMedia:a.socialMedia.filter((n,i)=>i!==s)}))},j=(s,a)=>{const{name:n,value:i}=a.target,d=[...l.socialMedia];d[s][n]=i,c(m=>({...m,socialMedia:d}))},F=()=>{c(s=>({...s,links:[...s.links,{title:"",url:""}]}))},I=s=>{c(a=>({...a,links:a.links.filter((n,i)=>i!==s)}))},v=(s,a)=>{const{name:n,value:i}=a.target,d=[...l.links];d[s][n]=i,c(m=>({...m,links:d}))},M=async s=>{s.preventDefault();try{h?(await p.put(`/api/footer/update?id=${h}`,l),alert("Footer updated successfully!")):(await p.post("/api/footer/add",l),alert("Footer created successfully!")),u("/footer-table")}catch(a){console.error("Error saving footer:",a),alert("Failed to save footer.")}};return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto bg-white rounded-lg shadow mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:h?"Edit Footer":"Add New Footer"}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"General Information"}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"linkHeading",children:"Link Heading"}),e.jsx(o,{id:"linkHeading",name:"linkHeading",value:l.linkHeading,onChange:g})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(H,{id:"description",name:"description",value:l.description,onChange:g})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"address",children:"Address"}),e.jsx(o,{id:"address",name:"address",value:l.contactInfo.address,onChange:f})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"phone",children:"Phone"}),e.jsx(o,{id:"phone",name:"phone",value:l.contactInfo.phone,onChange:f})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",name:"email",value:l.contactInfo.email,onChange:f})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"link",children:"Contact Link (Map/Other)"}),e.jsx(o,{id:"link",name:"link",value:l.contactInfo.link,onChange:f})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Social Media"}),e.jsxs(x,{type:"button",size:"sm",onClick:b,children:[e.jsx(N,{className:"h-4 w-4 mr-1"})," Add"]})]}),l.socialMedia.map((s,a)=>e.jsxs("div",{className:"flex gap-4 items-end border p-4 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{children:"Platform"}),e.jsx(o,{name:"platform",value:s.platform,onChange:n=>j(a,n),placeholder:"e.g. Facebook"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{children:"URL"}),e.jsx(o,{name:"url",value:s.url,onChange:n=>j(a,n),placeholder:"https://..."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{children:"Icon Class"}),e.jsx(o,{name:"icon",value:s.icon,onChange:n=>j(a,n),placeholder:"fa-brands fa-facebook"})]}),e.jsx(x,{type:"button",variant:"destructive",size:"icon",onClick:()=>y(a),children:e.jsx(C,{className:"h-4 w-4"})})]},a))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quick Links"}),e.jsxs(x,{type:"button",size:"sm",onClick:F,children:[e.jsx(N,{className:"h-4 w-4 mr-1"})," Add"]})]}),l.links.map((s,a)=>e.jsxs("div",{className:"flex gap-4 items-end border p-4 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{children:"Title"}),e.jsx(o,{name:"title",value:s.title,onChange:n=>v(a,n),placeholder:"Link Title"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(t,{children:"URL"}),e.jsx(o,{name:"url",value:s.url,onChange:n=>v(a,n),placeholder:"/path"})]}),e.jsx(x,{type:"button",variant:"destructive",size:"icon",onClick:()=>I(a),children:e.jsx(C,{className:"h-4 w-4"})})]},a))]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>u("/footer-table"),children:"Cancel"}),e.jsx(x,{type:"submit",children:h?"Update Footer":"Create Footer"})]})]})]})};export{z as default};
