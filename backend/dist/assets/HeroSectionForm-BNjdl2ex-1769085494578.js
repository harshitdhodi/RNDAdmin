import{a as I,f as P,r as p,j as e,B as d,P as h,I as m,az as u,c as f}from"./index-DYP9jOq_-1769085494578.js";import{b as $,a as b}from"./index.esm-DbD0ubAy-1769085494578.js";import{T as B}from"./textarea-CG5Nnov3-1769085494578.js";import{F as D,c as r,a as n,b as l,d as o,e as c}from"./form-B3oYDcL5-1769085494578.js";import{C as U,b as H,c as O,a as R}from"./card-BufDvvTi-1769085494578.js";const W=()=>{const{id:x}=I(),g=P(),[N,y]=p.useState(!1),[v,k]=p.useState(null),i=$({defaultValues:{title:[{text:""}],subtitle:"",description:"",buttonText:"",buttonLink:"",image:null,marquee:[],socialMediaLinks:[]}}),{fields:S,append:w,remove:C}=b({control:i.control,name:"title"}),{fields:T,append:F,remove:M}=b({control:i.control,name:"marquee"}),{fields:q,append:E,remove:z}=b({control:i.control,name:"socialMediaLinks"});p.useEffect(()=>{x&&(async()=>{try{const s=await f.get(`/api/heroSection/${x}`),a=s.data.data||s.data;i.reset({title:Array.isArray(a.title)?a.title.map(j=>({text:j})):[{text:a.title||""}],subtitle:a.subtitle||"",description:a.description||"",buttonText:a.buttonText||"",buttonLink:a.buttonLink||"",marquee:a.marquee||[],socialMediaLinks:a.socialMediaLinks||[]}),a.imageUrl&&k(`/api/image/download/${a.imageUrl}`)}catch(s){console.error("Error fetching data:",s)}})()},[x,i]);const A=async t=>{y(!0);const s=new FormData;s.append("title",JSON.stringify(t.title.map(a=>a.text))),s.append("subtitle",t.subtitle),s.append("description",t.description),s.append("buttonText",t.buttonText),s.append("buttonLink",t.buttonLink),s.append("marquee",JSON.stringify(t.marquee)),s.append("socialMediaLinks",JSON.stringify(t.socialMediaLinks)),t.image&&t.image[0]&&s.append("photo",t.image[0]);try{x?await f.put(`/api/heroSection/${x}`,s,{headers:{"Content-Type":"multipart/form-data"}}):await f.post("/api/heroSection",s,{headers:{"Content-Type":"multipart/form-data"}}),g("/hero-section-table")}catch(a){console.error("Error saving data:",a)}finally{y(!1)}};return e.jsx("div",{className:"p-4",children:e.jsxs(U,{className:"max-w-2xl mx-auto",children:[e.jsx(H,{children:e.jsx(O,{children:x?"Edit Hero Section":"Add Hero Section"})}),e.jsx(R,{children:e.jsx(D,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(A),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(r,{children:"Titles"}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>w({text:""}),children:[e.jsx(h,{className:"h-4 w-4 mr-2"})," Add Title"]})]}),S.map((t,s)=>e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx(n,{control:i.control,name:`title.${s}.text`,render:({field:a})=>e.jsxs(l,{className:"flex-1",children:[e.jsx(o,{children:e.jsx(m,{placeholder:"Enter title",...a})}),e.jsx(c,{})]})}),e.jsx(d,{type:"button",variant:"destructive",size:"icon",onClick:()=>C(s),children:e.jsx(u,{className:"h-4 w-4"})})]},t.id))]}),e.jsx(n,{control:i.control,name:"subtitle",render:({field:t})=>e.jsxs(l,{children:[e.jsx(r,{children:"Subtitle"}),e.jsx(o,{children:e.jsx(m,{placeholder:"Enter subtitle",...t})}),e.jsx(c,{})]})}),e.jsx(n,{control:i.control,name:"description",render:({field:t})=>e.jsxs(l,{children:[e.jsx(r,{children:"Description"}),e.jsx(o,{children:e.jsx(B,{placeholder:"Enter description",...t})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{control:i.control,name:"buttonText",render:({field:t})=>e.jsxs(l,{children:[e.jsx(r,{children:"Button Text"}),e.jsx(o,{children:e.jsx(m,{placeholder:"Learn More",...t})}),e.jsx(c,{})]})}),e.jsx(n,{control:i.control,name:"buttonLink",render:({field:t})=>e.jsxs(l,{children:[e.jsx(r,{children:"Button Link"}),e.jsx(o,{children:e.jsx(m,{placeholder:"/about-us",...t})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Marquee Items"}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>F({title:""}),children:[e.jsx(h,{className:"h-4 w-4 mr-2"})," Add Item"]})]}),T.map((t,s)=>e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx(n,{control:i.control,name:`marquee.${s}.title`,render:({field:a})=>e.jsxs(l,{className:"flex-1",children:[e.jsx(r,{className:s!==0?"sr-only":"",children:"Text"}),e.jsx(o,{children:e.jsx(m,{placeholder:"Marquee text",...a})}),e.jsx(c,{})]})}),e.jsx(d,{type:"button",variant:"destructive",size:"icon",onClick:()=>M(s),children:e.jsx(u,{className:"h-4 w-4"})})]},t.id))]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Social Media Links"}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>E({platform:"",url:""}),children:[e.jsx(h,{className:"h-4 w-4 mr-2"})," Add Link"]})]}),q.map((t,s)=>e.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end relative pr-12",children:[e.jsx(n,{control:i.control,name:`socialMediaLinks.${s}.platform`,render:({field:a})=>e.jsxs(l,{children:[e.jsx(r,{className:s!==0?"sr-only":"",children:"Platform"}),e.jsx(o,{children:e.jsx(m,{placeholder:"e.g. Facebook",...a})}),e.jsx(c,{})]})}),e.jsx(n,{control:i.control,name:`socialMediaLinks.${s}.url`,render:({field:a})=>e.jsxs(l,{children:[e.jsx(r,{className:s!==0?"sr-only":"",children:"URL"}),e.jsx(o,{children:e.jsx(m,{placeholder:"https://...",...a})}),e.jsx(c,{})]})}),e.jsx(d,{type:"button",variant:"destructive",size:"icon",className:"absolute right-0 bottom-0",onClick:()=>z(s),children:e.jsx(u,{className:"h-4 w-4"})})]},t.id))]}),e.jsx(n,{control:i.control,name:"image",render:({field:{onChange:t,value:s,...a}})=>e.jsxs(l,{children:[e.jsx(r,{children:"Background Image"}),e.jsx(o,{children:e.jsx(m,{type:"file",accept:"image/*",onChange:j=>{const L=j.target.files[0];L&&(t(j.target.files),k(URL.createObjectURL(L)))},...a})}),v&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:v,alt:"Preview",className:"h-40 w-auto object-cover rounded border"})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>g("/hero-section-table"),children:"Cancel"}),e.jsx(d,{type:"submit",disabled:N,children:N?"Saving...":"Save"})]})]})})})]})})};export{W as default};
