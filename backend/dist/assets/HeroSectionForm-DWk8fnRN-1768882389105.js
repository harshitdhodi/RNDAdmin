import{a as E,f as I,r as j,j as e,I as d,B as x,P as k,az as v,c as p}from"./index-DZLYByy5-1768882389105.js";import{b as P,a as L}from"./index.esm-CX09CbC9-1768882389105.js";import{T as $}from"./textarea-B5u18t_7-1768882389105.js";import{F as z,a as i,b as n,c as o,d as l,e as c}from"./form-COw5XQ7J-1768882389105.js";import{C as B,b as D,c as U,a as A}from"./card-DV3cZo5K-1768882389105.js";const G=()=>{const{id:m}=E(),h=I(),[u,f]=j.useState(!1),[b,g]=j.useState(null),r=P({defaultValues:{title:"",subtitle:"",description:"",buttonText:"",buttonLink:"",image:null,marquee:[],socialMediaLinks:[]}}),{fields:S,append:w,remove:C}=L({control:r.control,name:"marquee"}),{fields:F,append:M,remove:T}=L({control:r.control,name:"socialMediaLinks"});j.useEffect(()=>{m&&(async()=>{try{const t=await p.get(`/api/heroSection/${m}`),a=t.data.data||t.data;r.reset({title:a.title||"",subtitle:a.subtitle||"",description:a.description||"",buttonText:a.buttonText||"",buttonLink:a.buttonLink||"",marquee:a.marquee||[],socialMediaLinks:a.socialMediaLinks||[]}),a.imageUrl&&g(`/api/image/download/${a.imageUrl}`)}catch(t){console.error("Error fetching data:",t)}})()},[m,r]);const q=async s=>{f(!0);const t=new FormData;t.append("title",s.title),t.append("subtitle",s.subtitle),t.append("description",s.description),t.append("buttonText",s.buttonText),t.append("buttonLink",s.buttonLink),t.append("marquee",JSON.stringify(s.marquee)),t.append("socialMediaLinks",JSON.stringify(s.socialMediaLinks)),s.image&&s.image[0]&&t.append("photo",s.image[0]);try{m?await p.put(`/api/heroSection/${m}`,t,{headers:{"Content-Type":"multipart/form-data"}}):await p.post("/api/heroSection",t,{headers:{"Content-Type":"multipart/form-data"}}),h("/hero-section-table")}catch(a){console.error("Error saving data:",a)}finally{f(!1)}};return e.jsx("div",{className:"p-4",children:e.jsxs(B,{className:"max-w-2xl mx-auto",children:[e.jsx(D,{children:e.jsx(U,{children:m?"Edit Hero Section":"Add Hero Section"})}),e.jsx(A,{children:e.jsx(z,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(q),className:"space-y-4",children:[e.jsx(i,{control:r.control,name:"title",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Title"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Enter title",...s})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"subtitle",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Subtitle"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Enter subtitle",...s})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"description",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Description"}),e.jsx(l,{children:e.jsx($,{placeholder:"Enter description",...s})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{control:r.control,name:"buttonText",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Button Text"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Learn More",...s})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:"buttonLink",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Button Link"}),e.jsx(l,{children:e.jsx(d,{placeholder:"/about-us",...s})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Marquee Items"}),e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>w({title:""}),children:[e.jsx(k,{className:"h-4 w-4 mr-2"})," Add Item"]})]}),S.map((s,t)=>e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx(i,{control:r.control,name:`marquee.${t}.title`,render:({field:a})=>e.jsxs(n,{className:"flex-1",children:[e.jsx(o,{className:t!==0?"sr-only":"",children:"Text"}),e.jsx(l,{children:e.jsx(d,{placeholder:"Marquee text",...a})}),e.jsx(c,{})]})}),e.jsx(x,{type:"button",variant:"destructive",size:"icon",onClick:()=>C(t),children:e.jsx(v,{className:"h-4 w-4"})})]},s.id))]}),e.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Social Media Links"}),e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>M({platform:"",url:""}),children:[e.jsx(k,{className:"h-4 w-4 mr-2"})," Add Link"]})]}),F.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end relative pr-12",children:[e.jsx(i,{control:r.control,name:`socialMediaLinks.${t}.platform`,render:({field:a})=>e.jsxs(n,{children:[e.jsx(o,{className:t!==0?"sr-only":"",children:"Platform"}),e.jsx(l,{children:e.jsx(d,{placeholder:"e.g. Facebook",...a})}),e.jsx(c,{})]})}),e.jsx(i,{control:r.control,name:`socialMediaLinks.${t}.url`,render:({field:a})=>e.jsxs(n,{children:[e.jsx(o,{className:t!==0?"sr-only":"",children:"URL"}),e.jsx(l,{children:e.jsx(d,{placeholder:"https://...",...a})}),e.jsx(c,{})]})}),e.jsx(x,{type:"button",variant:"destructive",size:"icon",className:"absolute right-0 bottom-0",onClick:()=>T(t),children:e.jsx(v,{className:"h-4 w-4"})})]},s.id))]}),e.jsx(i,{control:r.control,name:"image",render:({field:{onChange:s,value:t,...a}})=>e.jsxs(n,{children:[e.jsx(o,{children:"Background Image"}),e.jsx(l,{children:e.jsx(d,{type:"file",accept:"image/*",onChange:N=>{const y=N.target.files[0];y&&(s(N.target.files),g(URL.createObjectURL(y)))},...a})}),b&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:b,alt:"Preview",className:"h-40 w-auto object-cover rounded border"})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>h("/hero-section-table"),children:"Cancel"}),e.jsx(x,{type:"submit",disabled:u,children:u?"Saving...":"Save"})]})]})})})]})})};export{G as default};
