{"version":3,"file":"LogoForm-CkOlgfxQ.js","sources":["../../src/websiteBackend/companyLogo/LogoForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useUpdateLogoMutation, useGetLogoQuery } from '@/slice/logo/LogoSlice';\r\n\r\nconst LogoForm = () => {\r\n    const [updateLogo, { isLoading }] = useUpdateLogoMutation();\r\n    const { data: existingLogo, isFetching } = useGetLogoQuery();\r\n    \r\n    const [formData, setFormData] = useState({\r\n        headerLogo: null,\r\n        headerLogoName: '',\r\n        headerLogoAltName: '',\r\n        favIcon: null,\r\n        favIconName: '',\r\n        favIconAltName: ''\r\n    });\r\n\r\n    const [preview, setPreview] = useState({\r\n        headerLogo: null,\r\n        favIcon: null\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (existingLogo) {\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                headerLogoName: existingLogo.headerLogoName || '',\r\n                headerLogoAltName: existingLogo.headerLogoAltName || '',\r\n                favIconName: existingLogo.favIconName || '',\r\n                favIconAltName: existingLogo.favIconAltName || ''\r\n            }));\r\n            setPreview({\r\n                headerLogo: existingLogo.headerLogo ? `/api/logo/download/${existingLogo.headerLogo}` : null,\r\n                favIcon: existingLogo.favIcon ? `/api/logo/download/${existingLogo.favIcon}` : null\r\n            });\r\n        }\r\n    }, [existingLogo]);\r\n\r\n    const handleFileChange = (e, type) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setFormData(prev => ({ ...prev, [type]: file }));\r\n            setPreview(prev => ({ ...prev, [type]: URL.createObjectURL(file) }));\r\n        }\r\n    };\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const formDataToSend = new FormData();\r\n\r\n            Object.keys(formData).forEach(key => {\r\n                if (formData[key]) {\r\n                    formDataToSend.append(key, formData[key]);\r\n                }\r\n            });\r\n\r\n            await updateLogo(formDataToSend).unwrap();\r\n            alert('Logo updated successfully!');\r\n        } catch (err) {\r\n            console.error('Failed to update logo:', err);\r\n            alert('Failed to update logo. Please try again.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto p-6 bg-white shadow-md rounded-lg\">\r\n            <h2 className=\"text-2xl font-bold mb-6 text-gray-800 border-b pb-3\">Update Company Logo</h2>\r\n            \r\n            {isFetching ? (\r\n                <p className=\"text-gray-500\">Loading logo data...</p>\r\n            ) : (\r\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                    {[\r\n                        { label: 'Header Logo', name: 'headerLogo', previewKey: 'headerLogo' },\r\n                        { label: 'Favicon', name: 'favIcon', previewKey: 'favIcon' }\r\n                    ].map(({ label, name, previewKey }) => (\r\n                        <div key={name} className=\"bg-gray-50 p-6 rounded-lg border border-gray-200\">\r\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">{label}</label>\r\n                            <input \r\n                                type=\"file\" \r\n                                name={name} \r\n                                accept=\"image/*\" \r\n                                onChange={(e) => handleFileChange(e, name)} \r\n                                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:border file:border-gray-300 file:text-gray-700 file:bg-white hover:file:bg-gray-100\"\r\n                            />\r\n                            {preview[previewKey] && (\r\n                                <div className=\"mt-4 p-4 bg-white border border-gray-200 rounded-lg\">\r\n                                    <p className=\"text-sm text-gray-600 mb-2\">Preview:</p>\r\n                                    <img src={preview[previewKey]} alt={label || \"img\"} className=\"h-20 object-contain\" />\r\n                                </div>\r\n                            )}\r\n                            <input \r\n                                type=\"text\" \r\n                                name={`${name}Name`} \r\n                                value={formData[`${name}Name`]} \r\n                                onChange={handleInputChange} \r\n                                placeholder={`${label} Name`} \r\n                                className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-md focus:ring focus:ring-indigo-200\"\r\n                            />\r\n                            <input \r\n                                type=\"text\" \r\n                                name={`${name}AltName`} \r\n                                value={formData[`${name}AltName`]} \r\n                                onChange={handleInputChange} \r\n                                placeholder={`${label} Alt Name`} \r\n                                className=\"w-full px-4 py-2 mt-2 border border-gray-300 rounded-md focus:ring focus:ring-indigo-200\"\r\n                            />\r\n                        </div>\r\n                    ))}\r\n                    \r\n                    <button \r\n                        type=\"submit\" \r\n                        disabled={isLoading} \r\n                        className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-md transition duration-300\">\r\n                        {isLoading ? 'Updating...' : 'Update Logo'}\r\n                    </button>\r\n                </form>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LogoForm;\r\n"],"names":["LogoForm","updateLogo","isLoading","useUpdateLogoMutation","data","existingLogo","isFetching","useGetLogoQuery","formData","setFormData","useState","headerLogo","headerLogoName","headerLogoAltName","favIcon","favIconName","favIconAltName","preview","setPreview","useEffect","prev","handleInputChange","e","name","value","target","jsxs","className","children","jsx","onSubmit","async","preventDefault","formDataToSend","FormData","Object","keys","forEach","key","append","unwrap","alert","err","label","previewKey","map","type","accept","onChange","file","files","URL","createObjectURL","handleFileChange","src","alt","placeholder","disabled"],"mappings":"6KAGA,MAAMA,EAAW,KACb,MAAOC,GAAYC,UAAEA,IAAeC,KAC5BC,KAAMC,EAAcC,WAAAA,GAAeC,KAEpCC,EAAUC,GAAeC,WAAS,CACrCC,WAAY,KACZC,eAAgB,GAChBC,kBAAmB,GACnBC,QAAS,KACTC,YAAa,GACbC,eAAgB,MAGbC,EAASC,GAAcR,WAAS,CACnCC,WAAY,KACZG,QAAS,OAGbK,EAAAA,WAAU,KACFd,IACAI,GAAqBW,IAAA,IACdA,EACHR,eAAgBP,EAAaO,gBAAkB,GAC/CC,kBAAmBR,EAAaQ,mBAAqB,GACrDE,YAAaV,EAAaU,aAAe,GACzCC,eAAgBX,EAAaW,gBAAkB,OAExCE,EAAA,CACPP,WAAYN,EAAaM,WAAa,sBAAsBN,EAAaM,aAAe,KACxFG,QAAST,EAAaS,QAAU,sBAAsBT,EAAaS,UAAY,OAClF,GAEN,CAACT,IAEE,MAQAgB,EAAqBC,IACvB,MAAMC,KAAEA,EAAAC,MAAMA,GAAUF,EAAEG,OACdhB,GAAAW,QAAcA,EAAMG,CAACA,GAAOC,KAAQ,EAuBhD,OAAAE,EAAAA,KAAC,MAAI,CAAAC,UAAU,sDACXC,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,sDAAsDC,SAAmB,wBAEtFtB,EACGuB,EAAAA,IAAC,IAAE,CAAAF,UAAU,gBAAgBC,SAAA,yBAE7BF,EAAAA,KAAC,OAAK,CAAAI,SA1BGC,MAAOT,IACxBA,EAAEU,iBACE,IACM,MAAAC,EAAiB,IAAIC,SAE3BC,OAAOC,KAAK5B,GAAU6B,SAAeC,IAC7B9B,EAAS8B,IACTL,EAAeM,OAAOD,EAAK9B,EAAS8B,GAAI,UAI1CrC,EAAWgC,GAAgBO,SACjCC,MAAM,oCACDC,GAELD,MAAM,2CAA0C,GAWdd,UAAU,YACnCC,SAAA,CAAA,CACG,CAAEe,MAAO,cAAepB,KAAM,aAAcqB,WAAY,cACxD,CAAED,MAAO,UAAWpB,KAAM,UAAWqB,WAAY,YACnDC,KAAI,EAAGF,QAAOpB,OAAMqB,gBAClBlB,EAAAA,KAAC,MAAe,CAAAC,UAAU,mDACtBC,SAAA,CAACC,EAAAA,IAAA,QAAA,CAAMF,UAAU,iDAAkDC,SAAMe,IACzEd,EAAAA,IAAC,QAAA,CACGiB,KAAK,OACLvB,OACAwB,OAAO,UACPC,SAAW1B,GAlDd,EAACA,EAAGwB,KACzB,MAAMG,EAAO3B,EAAEG,OAAOyB,MAAM,GACxBD,IACYxC,GAAAW,QAAcA,EAAM0B,CAACA,GAAOG,MAC7B/B,GAAAE,QAAcA,EAAM0B,CAACA,GAAOK,IAAIC,gBAAgBH,OAAQ,EA8C9BI,CAAiB/B,EAAGC,GACrCI,UAAU,8JAEbV,EAAQ2B,IACJlB,EAAAA,KAAA,MAAA,CAAIC,UAAU,sDACXC,SAAA,CAACC,EAAAA,IAAA,IAAA,CAAEF,UAAU,6BAA6BC,SAAQ,aAClDC,EAAAA,IAAC,MAAI,CAAAyB,IAAKrC,EAAQ2B,GAAaW,IAAKZ,GAAS,MAAOhB,UAAU,2BAGtEE,EAAAA,IAAC,QAAA,CACGiB,KAAK,OACLvB,KAAM,GAAGA,QACTC,MAAOhB,EAAS,GAAGe,SACnByB,SAAU3B,EACVmC,YAAa,GAAGb,SAChBhB,UAAU,6FAEdE,EAAAA,IAAC,QAAA,CACGiB,KAAK,OACLvB,KAAM,GAAGA,WACTC,MAAOhB,EAAS,GAAGe,YACnByB,SAAU3B,EACVmC,YAAa,GAAGb,aAChBhB,UAAU,+FA7BRJ,KAkCdM,EAAAA,IAAC,SAAA,CACGiB,KAAK,SACLW,SAAUvD,EACVyB,UAAU,iHACTC,WAAY,cAAgB,qBAI7C"}