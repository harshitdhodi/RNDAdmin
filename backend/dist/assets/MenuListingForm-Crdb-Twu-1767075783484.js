import{r as m,dz as q,o as w,a as z,f as A,dO as t,ey as N,ez as B,eA as O,eB as F,j as e,dT as s,bm as x,be as h,dl as j}from"./index-netaHq-E-1767075783484.js";import{C as r}from"./index-CzYRMhdF-1767075783484.js";import"./Skeleton-BLUg8eck-1767075783484.js";var R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},U=function(d,n){return m.createElement(q,w({},d,{ref:n,icon:R}))},b=m.forwardRef(U);const V=()=>{const{id:a}=z(),d=A(),[n]=t.useForm(),{data:c,isLoading:g}=N(a,{skip:!a}),{refetch:C}=B(),[f]=O(),[M]=F();m.useEffect(()=>{c&&n.setFieldsValue(c.data)},[c,n]);const E=async i=>{a?await M({id:a,...i}):await f(i),await C(),d("/menu-listing-table")};return g?e.jsx("p",{children:"Loading..."}):e.jsx(r,{title:a?"Update Menu Listing":"Create Menu Listing",bordered:!1,children:e.jsxs(t,{form:n,layout:"vertical",onFinish:E,initialValues:{children:[]},children:[e.jsxs(r,{title:"Parent Menu",bordered:!0,className:"mb-5",children:[e.jsx(t.Item,{name:["parent","name"],label:"Name",rules:[{required:!0,message:"Please enter parent menu name"}],children:e.jsx(s,{placeholder:"Enter parent menu name"})}),e.jsx(t.Item,{name:["parent","path"],label:"Path",rules:[{required:!0,message:"Please enter parent menu path"}],children:e.jsx(s,{placeholder:"Enter parent menu path"})})]}),e.jsx(t.List,{name:"children",children:(i,{add:L,remove:y})=>e.jsxs(r,{title:"Children Menus",bordered:!0,children:[i.map(({key:I,name:l,...o})=>e.jsxs(r,{bordered:!0,className:"mb-4",children:[e.jsxs(x,{align:"baseline",children:[e.jsx(t.Item,{...o,name:[l,"name"],label:"Child Name",rules:[{required:!0,message:"Enter child name"}],children:e.jsx(s,{placeholder:"Enter child name"})}),e.jsx(t.Item,{...o,name:[l,"path"],label:"Child Path",rules:[{required:!0,message:"Enter child path"}],children:e.jsx(s,{placeholder:"Enter child path"})}),e.jsx(b,{onClick:()=>y(l)})]}),e.jsx(t.List,{name:[l,"subChildren"],children:(v,{add:k,remove:P})=>e.jsxs(r,{title:"Sub-Children",bordered:!0,children:[v.map(({key:S,name:u,...p})=>e.jsxs(x,{align:"baseline",children:[e.jsx(t.Item,{...p,name:[u,"name"],label:"Sub-Child Name",rules:[{required:!0,message:"Enter sub-child name"}],children:e.jsx(s,{placeholder:"Enter sub-child name"})}),e.jsx(t.Item,{...p,name:[u,"path"],label:"Sub-Child Path",rules:[{required:!0,message:"Enter sub-child path"}],children:e.jsx(s,{placeholder:"Enter sub-child path"})}),e.jsx(b,{onClick:()=>P(u)})]},S)),e.jsx(h,{type:"dashed",onClick:()=>k(),block:!0,icon:e.jsx(j,{}),children:"Add Sub-Child"})]})})]},I)),e.jsx(h,{type:"dashed",onClick:()=>L(),block:!0,icon:e.jsx(j,{}),children:"Add Child"})]})}),e.jsx(h,{type:"primary",htmlType:"submit",className:"mt-5",children:a?"Update":"Create"})]})})};export{V as default};
