import{a as S,f as A,dP as s,ez as N,eA as U,eB as v,eC as w,r as B,j as e,dU as t,bm as o,be as c,dm as p}from"./index-DYP9jOq_-1769085494578.js";import{C as n}from"./index-BJXuplrC-1769085494578.js";import{R as x}from"./MinusCircleOutlined-D6sOaqvE-1769085494578.js";import"./Skeleton-CWNXrLjr-1769085494578.js";const V=()=>{const{id:a}=S(),j=A(),[l]=s.useForm(),{data:d,isLoading:b}=N(a,{skip:!a}),{refetch:g}=U(),[C]=v(),[f]=w();B.useEffect(()=>{d&&l.setFieldsValue(d.data)},[d,l]);const L=async r=>{a?await f({id:a,...r}):await C(r),await g(),j("/menu-listing-table")};return b?e.jsx("p",{children:"Loading..."}):e.jsx(n,{title:a?"Update Menu Listing":"Create Menu Listing",bordered:!1,children:e.jsxs(s,{form:l,layout:"vertical",onFinish:L,initialValues:{children:[]},children:[e.jsxs(n,{title:"Parent Menu",bordered:!0,className:"mb-5",children:[e.jsx(s.Item,{name:["parent","name"],label:"Name",rules:[{required:!0,message:"Please enter parent menu name"}],children:e.jsx(t,{placeholder:"Enter parent menu name"})}),e.jsx(s.Item,{name:["parent","path"],label:"Path",rules:[{required:!0,message:"Please enter parent menu path"}],children:e.jsx(t,{placeholder:"Enter parent menu path"})})]}),e.jsx(s.List,{name:"children",children:(r,{add:M,remove:E})=>e.jsxs(n,{title:"Children Menus",bordered:!0,children:[r.map(({key:y,name:i,...h})=>e.jsxs(n,{bordered:!0,className:"mb-4",children:[e.jsxs(o,{align:"baseline",children:[e.jsx(s.Item,{...h,name:[i,"name"],label:"Child Name",rules:[{required:!0,message:"Enter child name"}],children:e.jsx(t,{placeholder:"Enter child name"})}),e.jsx(s.Item,{...h,name:[i,"path"],label:"Child Path",rules:[{required:!0,message:"Enter child path"}],children:e.jsx(t,{placeholder:"Enter child path"})}),e.jsx(x,{onClick:()=>E(i)})]}),e.jsx(s.List,{name:[i,"subChildren"],children:(I,{add:k,remove:P})=>e.jsxs(n,{title:"Sub-Children",bordered:!0,children:[I.map(({key:q,name:u,...m})=>e.jsxs(o,{align:"baseline",children:[e.jsx(s.Item,{...m,name:[u,"name"],label:"Sub-Child Name",rules:[{required:!0,message:"Enter sub-child name"}],children:e.jsx(t,{placeholder:"Enter sub-child name"})}),e.jsx(s.Item,{...m,name:[u,"path"],label:"Sub-Child Path",rules:[{required:!0,message:"Enter sub-child path"}],children:e.jsx(t,{placeholder:"Enter sub-child path"})}),e.jsx(x,{onClick:()=>P(u)})]},q)),e.jsx(c,{type:"dashed",onClick:()=>k(),block:!0,icon:e.jsx(p,{}),children:"Add Sub-Child"})]})})]},y)),e.jsx(c,{type:"dashed",onClick:()=>M(),block:!0,icon:e.jsx(p,{}),children:"Add Child"})]})}),e.jsx(c,{type:"primary",htmlType:"submit",className:"mt-5",children:a?"Update":"Create"})]})})};export{V as default};
