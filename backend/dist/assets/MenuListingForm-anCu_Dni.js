import{bX as e,bY as a,bZ as s,b_ as t,j as n,I as r,B as l}from"./main-BcUd3ASm.js";import{g as i,d as c,R as m,r as d}from"./vendor-router-CaZtIe2_.js";import{B as h}from"./react-toastify.esm-CrOn1nFw.js";import{C as o}from"./card-DKPCnjx_.js";import{M as p}from"./minus-CufnJqyo.js";import{P as u}from"./plus-DdATqG_B.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";const j=()=>{const{id:j}=i(),x=c(),{data:f,isLoading:g}=e(j,{skip:!j}),{refetch:b}=a(),[v]=s(),[C]=t(),[N,w]=m.useState({parent:{name:"",path:""},children:[]});d.useEffect((()=>{f&&w(f.data)}),[f]);const M=(e,a)=>{w((s=>({...s,[e]:a})))},y=(e,a,s)=>{const t=[...N.children];t[e][a]=s,w((e=>({...e,children:t})))};return g?n.jsx("p",{children:"Loading..."}):n.jsxs(o,{className:"p-6 max-w-2xl mx-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:j?"Update Menu Listing":"Create Menu Listing"}),n.jsxs(o,{className:"p-4 mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Parent Menu"}),n.jsx(r,{placeholder:"Enter parent menu name",value:N.parent.name,onChange:e=>M("parent",{...N.parent,name:e.target.value})}),n.jsx(r,{className:"mt-2",placeholder:"Enter parent menu path",value:N.parent.path,onChange:e=>M("parent",{...N.parent,path:e.target.value})})]}),n.jsxs(o,{className:"p-4 mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Children Menus"}),N.children.map(((e,a)=>n.jsx(o,{className:"p-3 mb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(r,{placeholder:"Enter child name",value:e.name,onChange:e=>y(a,"name",e.target.value)}),n.jsx(r,{placeholder:"Enter child path",value:e.path,onChange:e=>y(a,"path",e.target.value)}),n.jsx(l,{variant:"outline",onClick:()=>(e=>{w((a=>({...a,children:a.children.filter(((a,s)=>s!==e))})))})(a),children:n.jsx(p,{className:"w-4 h-4"})})]})},a))),n.jsxs(l,{variant:"outline",onClick:()=>{w((e=>({...e,children:[...e.children,{name:"",path:"",subChildren:[]}]})))},className:"w-full",children:[n.jsx(u,{className:"w-4 h-4 mr-2"})," Add Child"]})]}),n.jsx(l,{className:"w-full mt-4",onClick:async()=>{try{j?(await C({id:j,...N}),h.success("Menu updated successfully!")):(await v(N),h.success("Menu created successfully!")),await b(),x("/menu-listing-table")}catch(e){h.error("Failed to save menu.")}},children:j?"Update":"Create"})]})};export{j as default};
//# sourceMappingURL=MenuListingForm-anCu_Dni.js.map
