import{bY as e,b$ as s,j as a,B as t,S as i}from"./main-BQqr2_19.js";import{d as n,L as r,r as l,a as c}from"./vendor-router-DoRotgOs.js";import{B as d}from"./react-toastify.esm-BNXCN5Br.js";import{C as o}from"./card-CPQ_AIkA.js";import"./table-C7XKYQT1.js";import{P as m}from"./plus-C_FNkNo2.js";import{T as h}from"./trash-CQ6G8Kfo.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";const x=({title:e,onConfirm:s,children:i})=>{const[n,r]=l.useState(!1),d=()=>r(!1);return a.jsxs("div",{className:"relative inline-block",children:[a.jsx("span",{onClick:()=>r(!0),children:i}),n&&c.createPortal(a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:a.jsxs(o,{className:"p-5 w-80 text-center shadow-lg bg-white rounded-lg",children:[a.jsx("p",{className:"text-lg font-semibold",children:e}),a.jsxs("div",{className:"mt-4 flex justify-center gap-4",children:[a.jsx(t,{variant:"outline",onClick:d,children:"Cancel"}),a.jsx(t,{variant:"destructive",onClick:()=>{s(),d()},children:"Confirm"})]})]})}),document.body)]})},j=()=>{const{data:l,error:c,isLoading:j,refetch:p}=e(),[u]=s(),f=n(),b=e=>{f(`/menu-listing-form/${e}`)},y=async e=>{try{await u(e),d.success("Menu deleted successfully!"),p()}catch(s){d.error("Failed to delete menu")}};if(j)return a.jsx("p",{children:"Loading..."});if(c)return a.jsxs("p",{className:"text-red-500",children:["Error: ",c.message]});const N=(l?.data||[]).map((e=>({key:e._id,name:e.parent.name,path:e.parent.path,isParent:!0,children:e.children.length>0?e.children.map((e=>({key:e._id,name:`└── ${e.name}`,path:e.path,isParent:!1,children:e.subChildren?.length>0?e.subChildren.map((e=>({key:e._id,name:`    └── ${e.name}`,path:e.path,isParent:!1}))):void 0}))):void 0}))),v=[{title:"Name",dataIndex:"name",key:"name"},{title:"Path",dataIndex:"path",key:"path"},{title:"Actions",key:"actions",render:(e,s)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx(x,{title:"Are you sure?",onConfirm:()=>y(s.key),children:a.jsx(t,{variant:"destructive",size:"icon",children:a.jsx(h,{className:"w-4 h-4"})})}),!s.name.includes("└──")&&a.jsx(t,{variant:"outline",size:"icon",onClick:()=>b(s.key),children:a.jsx(i,{className:"w-4 h-4"})})]})}];return a.jsxs(o,{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Menu Listings"}),a.jsx(r,{to:"/menu-listing-form",children:a.jsxs(t,{children:[a.jsx(m,{className:"w-4 h-4 mr-2"})," Add Menu"]})})]}),a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsx("tr",{children:v.map((e=>a.jsx("th",{className:"border-b p-2 font-semibold",children:e.title},e.key)))})}),a.jsx("tbody",{children:N.map((e=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"p-2",children:e.name}),a.jsx("td",{className:"p-2",children:e.path}),a.jsx("td",{className:"p-2",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(x,{title:"Are you sure?",onConfirm:()=>y(e.key),children:a.jsx(t,{variant:"destructive",size:"icon",children:a.jsx(h,{className:"w-4 h-4"})})}),!e.name.includes("└──")&&a.jsx(t,{variant:"outline",size:"icon",onClick:()=>b(e.key),children:a.jsx(i,{className:"w-4 h-4 text-black"})})]})})]},e.key)))})]})]})};export{j as default};
//# sourceMappingURL=MenuListingTable-C1eIMaxg.js.map
