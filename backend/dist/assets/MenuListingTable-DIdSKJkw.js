import{bY as e,b$ as s,j as a,B as t,S as n}from"./main-BcUd3ASm.js";import{d as r,L as i,r as l,a as c}from"./vendor-router-CaZtIe2_.js";import{B as d}from"./react-toastify.esm-CrOn1nFw.js";import{C as o}from"./card-DKPCnjx_.js";import{T as m}from"./table-DnBX1p3B.js";import{P as h}from"./plus-DdATqG_B.js";import{T as x}from"./trash-Ca8SLLCq.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";const j=({title:e,onConfirm:s,children:n})=>{const[r,i]=l.useState(!1),d=()=>i(!1);return a.jsxs("div",{className:"relative inline-block",children:[a.jsx("span",{onClick:()=>i(!0),children:n}),r&&c.createPortal(a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:a.jsxs(o,{className:"p-5 w-80 text-center shadow-lg bg-white rounded-lg",children:[a.jsx("p",{className:"text-lg font-semibold",children:e}),a.jsxs("div",{className:"mt-4 flex justify-center gap-4",children:[a.jsx(t,{variant:"outline",onClick:d,children:"Cancel"}),a.jsx(t,{variant:"destructive",onClick:()=>{s(),d()},children:"Confirm"})]})]})}),document.body)]})},u=()=>{const{data:l,error:c,isLoading:u,refetch:p}=e(),[f]=s(),v=r();if(u)return a.jsx("p",{children:"Loading..."});if(c)return a.jsxs("p",{className:"text-red-500",children:["Error: ",c.message]});const y=(l?.data||[]).map((e=>({key:e._id,name:e.parent.name,path:e.parent.path,isParent:!0,children:e.children.length>0?e.children.map((e=>({key:e._id,name:`└── ${e.name}`,path:e.path,isParent:!1,children:e.subChildren?.length>0?e.subChildren.map((e=>({key:e._id,name:`    └── ${e.name}`,path:e.path,isParent:!1}))):void 0}))):void 0}))),b=[{title:"Name",dataIndex:"name",key:"name"},{title:"Path",dataIndex:"path",key:"path"},{title:"Actions",key:"actions",render:(e,s)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx(j,{title:"Are you sure?",onConfirm:()=>(async e=>{try{await f(e),d.success("Menu deleted successfully!"),p()}catch(s){d.error("Failed to delete menu")}})(s.key),children:a.jsx(t,{variant:"destructive",size:"icon",children:a.jsx(x,{className:"w-4 h-4"})})}),!s.name.includes("└──")&&a.jsx(t,{variant:"outline",size:"icon",onClick:()=>{return e=s.key,void v(`/menu-listing-form/${e}`);var e},children:a.jsx(n,{className:"w-4 h-4"})})]})}];return a.jsxs(o,{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Menu Listings"}),a.jsx(i,{to:"/menu-listing-form",children:a.jsxs(t,{children:[a.jsx(h,{className:"w-4 h-4 mr-2"})," Add Menu"]})})]}),a.jsx(m,{columns:b,dataSource:y,expandable:{defaultExpandAllRows:!1}})]})};export{u as default};
//# sourceMappingURL=MenuListingTable-DIdSKJkw.js.map
