{"version":3,"file":"NavigationLinkForm-CjIviKvP.js","sources":["../../src/websiteBackend/navigationLinks/NavigationLinkForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Breadcrumb } from \"@/components/ui/breadcrumb\";\r\nimport { useCreateNavigationLinkMutation, useUpdateNavigationLinkMutation, useGetNavigationLinkByIdQuery } from \"@/slice/navigationLink/navigationSlice\";\r\n\r\nconst NavigationLinkForm = () => {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n\r\n  const { data: navigationLink, isLoading } = useGetNavigationLinkByIdQuery(id, { skip: !id });\r\n  const [createNavigationLink] = useCreateNavigationLinkMutation();\r\n  const [updateNavigationLink] = useUpdateNavigationLinkMutation();\r\n  const [name, setName] = useState(\"\");\r\n  const [file, setFile] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (navigationLink) {\r\n      setName(navigationLink.name);\r\n      if (navigationLink.icon) {\r\n        setPreview(`/api/logo/download/${navigationLink.icon}`);\r\n      }\r\n    }\r\n  }, [navigationLink]);\r\n\r\n  const handleFileChange = (e) => {\r\n    const selectedFile = e.target.files[0];\r\n    setFile(selectedFile);\r\n    if (selectedFile) {\r\n      setPreview(URL.createObjectURL(selectedFile));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append(\"name\", name);\r\n    if (file) {\r\n      formData.append(\"icon\", file);\r\n    }\r\n    try {\r\n      if (id) {\r\n        await updateNavigationLink({ id, formData }).unwrap();\r\n        toast({ title: \"Success\", description: \"Navigation link updated successfully\", variant: \"success\" });\r\n      } else {\r\n        await createNavigationLink(formData).unwrap();\r\n        toast({ title: \"Success\", description: \"Navigation link created successfully\", variant: \"success\" });\r\n      }\r\n      navigate(\"/navigationLink\");\r\n    } catch (error) {\r\n      toast({ title: \"Error\", description: \"Failed to save navigation link\", variant: \"destructive\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"p-6 max-w-lg mx-auto\">\r\n      <Breadcrumb items={[\r\n        { label: \"Dashboard\", link: \"/dashboard\" },\r\n        { label: \"Navigation Links\", link: \"/navigationLink\" },\r\n        { label: id ? \"Edit Navigation Link\" : \"Add Navigation Link\" },\r\n      ]} className=\"mb-4\" />\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div>\r\n          <Label htmlFor=\"name\">Name</Label>\r\n          <Input id=\"name\" value={name} onChange={(e) => setName(e.target.value)} required />\r\n        </div>\r\n        <div>\r\n          <Label htmlFor=\"icon\">Icon</Label>\r\n          {preview && <img src={preview} alt=\"Preview\" className=\"w-16 h-16 mb-2\" />}\r\n          <input type=\"file\" id=\"icon\" accept=\"image/*\" onChange={handleFileChange} />\r\n        </div>\r\n        <Button type=\"submit\" disabled={isLoading} className=\"w-full\">\r\n          {id ? \"Update\" : \"Create\"}\r\n        </Button>\r\n      </form>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default NavigationLinkForm;\r\n"],"names":["NavigationLinkForm","navigate","useNavigate","id","useParams","data","navigationLink","isLoading","useGetNavigationLinkByIdQuery","skip","createNavigationLink","useCreateNavigationLinkMutation","updateNavigationLink","useUpdateNavigationLinkMutation","name","setName","useState","file","setFile","preview","setPreview","useEffect","icon","jsxs","Card","className","children","jsx","Breadcrumb","items","label","link","onSubmit","async","e","preventDefault","formData","FormData","append","unwrap","toast","title","description","variant","error","Label","htmlFor","Input","value","onChange","target","required","src","alt","type","accept","selectedFile","files","URL","createObjectURL","Button","disabled"],"mappings":"gVASA,MAAMA,EAAqB,KACzB,MAAMC,EAAWC,KACXC,GAAEA,GAAOC,KAEPC,KAAMC,EAAAC,UAAgBA,GAAcC,EAA8BL,EAAI,CAAEM,MAAON,KAChFO,GAAwBC,KACxBC,GAAwBC,KACxBC,EAAMC,GAAWC,EAAAA,SAAS,KAC1BC,EAAMC,GAAWF,EAAAA,SAAS,OAC1BG,EAASC,GAAcJ,EAAAA,SAAS,MAEvCK,EAAAA,WAAU,KACJf,IACFS,EAAQT,EAAeQ,MACnBR,EAAegB,MACNF,EAAA,sBAAsBd,EAAegB,QAClD,GAED,CAAChB,IAgCF,OAAAiB,EAAAA,KAACC,EAAK,CAAAC,UAAU,uBACdC,SAAA,CAAAC,MAACC,GAAWC,MAAO,CACjB,CAAEC,MAAO,YAAaC,KAAM,cAC5B,CAAED,MAAO,mBAAoBC,KAAM,mBACnC,CAAED,MAAO3B,EAAK,uBAAyB,wBACtCsB,UAAU,SACZF,EAAAA,KAAA,OAAA,CAAKS,SA5BWC,MAAOC,IAC1BA,EAAEC,iBACI,MAAAC,EAAW,IAAIC,SACZD,EAAAE,OAAO,OAAQxB,GACpBG,GACOmB,EAAAE,OAAO,OAAQrB,GAEtB,IACEd,SACIS,EAAqB,CAAET,KAAIiC,aAAYG,SAC7CC,MAAM,CAAEC,MAAO,UAAWC,YAAa,uCAAwCC,QAAS,oBAElFjC,EAAqB0B,GAAUG,SACrCC,MAAM,CAAEC,MAAO,UAAWC,YAAa,uCAAwCC,QAAS,aAE1F1C,EAAS,yBACF2C,GACPJ,MAAM,CAAEC,MAAO,QAASC,YAAa,iCAAkCC,QAAS,eAAe,GAWjElB,UAAU,YACtCC,SAAA,CAAAH,OAAC,MACC,CAAAG,SAAA,CAACC,EAAAA,IAAAkB,EAAA,CAAMC,QAAQ,OAAOpB,SAAI,SACzBC,EAAAA,IAAAoB,EAAA,CAAM5C,GAAG,OAAO6C,MAAOlC,EAAMmC,SAAWf,GAAMnB,EAAQmB,EAAEgB,OAAOF,OAAQG,UAAQ,cAEjF,MACC,CAAAzB,SAAA,CAACC,EAAAA,IAAAkB,EAAA,CAAMC,QAAQ,OAAOpB,SAAI,SACzBP,SAAY,MAAI,CAAAiC,IAAKjC,EAASkC,IAAI,UAAU5B,UAAU,mBACvDE,EAAAA,IAAC,SAAM2B,KAAK,OAAOnD,GAAG,OAAOoD,OAAO,UAAUN,SA5C5Bf,IACxB,MAAMsB,EAAetB,EAAEgB,OAAOO,MAAM,GACpCvC,EAAQsC,GACJA,GACSpC,EAAAsC,IAAIC,gBAAgBH,GAAa,OA0C1C7B,EAAAA,IAACiC,EAAO,CAAAN,KAAK,SAASO,SAAUtD,EAAWkB,UAAU,SAClDC,SAAKvB,EAAA,SAAW,gBAGvB"}