import{eu as n,f as k,a as F,fd as N,fe as y,ff as I,r as u,j as a,ey as t,L as p,b4 as g,e9 as c}from"./index-2kbH1bBb-1764732385455.js";import{I as b}from"./index-g1DPuVnD-1764732385455.js";import{U as w,R as U}from"./index-BNaGp7Vk-1764732385455.js";import"./TextArea-BKy-nqO8-1764732385455.js";import"./fade-D_zzDYw_-1764732385455.js";import"./useForceUpdate-CWyNYTn2-1764732385455.js";import"./DeleteOutlined-Dbls3UtD-1764732385455.js";import"./DownloadOutlined-BJlITzLl-1764732385455.js";import"./CheckOutlined-6aSt04rk-1764732385455.js";const A=()=>{const[o]=n.useForm(),h=k(),{id:e}=F(),{data:i,isLoading:f}=N(e,{skip:!e}),[x]=y(),[j]=I(),[r,d]=u.useState([]);u.useEffect(()=>{i&&(o.setFieldsValue(i),d([{url:`/api/logo/download/${i.icon}`,name:i.icon}]))},[i,o]);const v=async l=>{var m;const s=new FormData;s.append("name",l.name),(m=r[0])!=null&&m.originFileObj&&s.append("icon",r[0].originFileObj);try{e?(await j({id:e,formData:s}).unwrap(),c.success("Navigation link updated successfully")):(await x(s).unwrap(),c.success("Navigation link created successfully")),h("/navigationLink")}catch{c.error("Failed to save navigation link")}},L=({fileList:l})=>d(l);return a.jsxs(a.Fragment,{children:[a.jsxs(t,{className:"mb-4",children:[a.jsx(t.Item,{children:a.jsx(p,{to:"/dashboard",children:"Dashboard"})}),a.jsx(t.Item,{children:a.jsx(p,{to:"/navigationLink",children:"Navigation Links"})}),a.jsx(t.Item,{children:e?"Edit Navigation Link":"Add Navigation Link"})]}),a.jsxs(n,{form:o,layout:"vertical",onFinish:v,children:[a.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter the name"}],children:a.jsx(b,{})}),a.jsx(n.Item,{name:"icon",label:"Icon",rules:[{required:!0,message:"Please upload an icon"}],children:a.jsx(w,{listType:"picture",maxCount:1,fileList:r,beforeUpload:()=>!1,onChange:L,children:a.jsx(g,{icon:a.jsx(U,{}),children:"Upload Icon"})})}),a.jsx(n.Item,{children:a.jsx(g,{type:"primary",htmlType:"submit",loading:f,children:e?"Update":"Create"})})]})]})};export{A as default};
