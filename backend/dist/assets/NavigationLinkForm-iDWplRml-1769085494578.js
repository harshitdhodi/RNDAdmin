import{dP as n,f as k,a as F,eJ as N,eK as b,eL as y,r as m,j as a,dT as t,L as g,dU as I,dV as w,be as h,dW as U,dp as c}from"./index-DYP9jOq_-1769085494578.js";const P=()=>{const[o]=n.useForm(),p=k(),{id:e}=F(),{data:i,isLoading:x}=N(e,{skip:!e}),[j]=b(),[v]=y(),[r,d]=m.useState([]);m.useEffect(()=>{i&&(o.setFieldsValue(i),d([{url:`/api/logo/download/${i.icon}`,name:i.icon}]))},[i,o]);const L=async l=>{var u;const s=new FormData;s.append("name",l.name),(u=r[0])!=null&&u.originFileObj&&s.append("icon",r[0].originFileObj);try{e?(await v({id:e,formData:s}).unwrap(),c.success("Navigation link updated successfully")):(await j(s).unwrap(),c.success("Navigation link created successfully")),p("/navigationLink")}catch{c.error("Failed to save navigation link")}},f=({fileList:l})=>d(l);return a.jsxs(a.Fragment,{children:[a.jsxs(t,{className:"mb-4",children:[a.jsx(t.Item,{children:a.jsx(g,{to:"/dashboard",children:"Dashboard"})}),a.jsx(t.Item,{children:a.jsx(g,{to:"/navigationLink",children:"Navigation Links"})}),a.jsx(t.Item,{children:e?"Edit Navigation Link":"Add Navigation Link"})]}),a.jsxs(n,{form:o,layout:"vertical",onFinish:L,children:[a.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter the name"}],children:a.jsx(I,{})}),a.jsx(n.Item,{name:"icon",label:"Icon",rules:[{required:!0,message:"Please upload an icon"}],children:a.jsx(w,{listType:"picture",maxCount:1,fileList:r,beforeUpload:()=>!1,onChange:f,children:a.jsx(h,{icon:a.jsx(U,{}),children:"Upload Icon"})})}),a.jsx(n.Item,{children:a.jsx(h,{type:"primary",htmlType:"submit",loading:x,children:e?"Update":"Create"})})]})]})};export{P as default};
