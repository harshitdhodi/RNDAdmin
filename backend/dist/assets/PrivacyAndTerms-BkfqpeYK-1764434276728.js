import{f as F,r as i,j as e,L as k,c as l}from"./index-BERDrpO0-1764434276728.js";import{R as I}from"./index-Dq5yzCX1-1764434276728.js";/* empty css                                 */import{F as o}from"./index-BxYxzm5B-1764434276728.js";import{B as n}from"./Breadcrumb-CRFrI_TX-1764434276728.js";import{B as E}from"./index-DxvSlFWn-1764434276728.js";import{s as c}from"./index-ByDXPCwq-1764434276728.js";import"./isEqual-upHLRe1w-1764434276728.js";import"./toArray-Bbgf03cS-1764434276728.js";import"./CheckCircleFilled-B4tEAuFz-1764434276728.js";import"./ExclamationCircleFilled-C0F8cnAO-1764434276728.js";import"./dropdown-OyW6s8lc-1764434276728.js";import"./EllipsisOutlined-D_iExsl5-1764434276728.js";import"./InfoCircleFilled-CZgujJ0W-1764434276728.js";const Q=()=>{const y=F(),[s]=o.useForm(),[d,p]=i.useState(""),[u,h]=i.useState(!0),[m,v]=i.useState(!1),[f,g]=i.useState(null),x=i.useMemo(()=>({toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{align:[]}],[{color:[]},{background:[]}],["clean"]],clipboard:{matchVisual:!1}}),[]),P=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","align","color","background"];i.useEffect(()=>{(async()=>{try{const a=await l.get("/api/privacy");if(a.data.length>0){const r=a.data[0];p(r.privacyPolicy),g(r._id),s.setFieldsValue({privacyPolicy:r.privacyPolicy}),v(!0)}}catch{c.error("Failed to fetch privacy data")}finally{h(!1)}})()},[s]);const b=t=>{p(t),s.setFieldsValue({privacyPolicy:t})},j=async()=>{try{const t={privacyPolicy:d};m?(await l.put(`/api/privacy/${f}`,t),c.success("Privacy data updated successfully")):(await l.post("/api/privacy/add",t),c.success("Privacy data created successfully")),y("/privacypolicy-terms")}catch(t){c.error("Failed to save privacy data"),console.error("Error:",t)}};return u?e.jsx("p",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(n,{className:"mb-4",children:[e.jsx(n.Item,{children:e.jsx(k,{to:"/dashboard",children:"Dashboard"})}),e.jsx(n.Item,{children:"Privacy Form"})]}),e.jsxs(o,{form:s,layout:"vertical",onFinish:j,children:[e.jsx(o.Item,{name:"privacyPolicy",label:"Privacy Policy",rules:[{required:!0,message:"Please enter the privacy policy"},{validator:(t,a)=>{const r=a==null?void 0:a.replace(/<[^>]*>/g,"").trim();return!r||r===""?Promise.reject("Please enter the privacy policy"):Promise.resolve()}}],children:e.jsx(I,{theme:"snow",value:d,onChange:b,modules:x,formats:P,placeholder:"Start typing your privacy policy...",style:{height:"400px",marginBottom:"50px"}})}),e.jsx(o.Item,{children:e.jsx(E,{type:"primary",htmlType:"submit",children:m?"Update":"Save"})})]})]})};export{Q as default};
