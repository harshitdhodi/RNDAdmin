{"version":3,"file":"PrivacyAndTerms-DrDNiJAz.js","sources":["../../src/websiteBackend/privacy/PrivacyAndTerms.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Form, Button, message, Breadcrumb } from 'antd';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport JoditEditor from 'jodit-react';\r\nimport axios from 'axios';\r\n\r\nconst PrivacyForm = () => {\r\n  const navigate = useNavigate();\r\n  const [form] = Form.useForm();\r\n  const [privacyPolicy, setPrivacyPolicy] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isExistingData, setIsExistingData] = useState(false);\r\n  const [privacyId, setPrivacyId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchPrivacyData = async () => {\r\n      try {\r\n        const response = await axios.get('/api/privacy');\r\n        if (response.data.length > 0) {\r\n          const privacyData = response.data[0]; // Assuming the API returns an array with one object\r\n          setPrivacyPolicy(privacyData.privacyPolicy);\r\n          setPrivacyId(privacyData._id);\r\n          form.setFieldsValue({\r\n            privacyPolicy: privacyData.privacyPolicy,\r\n          });\r\n          setIsExistingData(true);\r\n        }\r\n      } catch (error) {\r\n        message.error('Failed to fetch privacy data');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPrivacyData();\r\n  }, [form]);\r\n\r\n  const handleFinish = async () => {\r\n    try {\r\n      if (isExistingData) {\r\n        await axios.put(`/api/privacy/${privacyId}`, { privacyPolicy });\r\n        message.success('Privacy data updated successfully');\r\n      } else {\r\n        await axios.post('/api/privacy/add', { privacyPolicy });\r\n        message.success('Privacy data created successfully');\r\n      }\r\n      navigate('/privacypolicy-terms');\r\n    } catch (error) {\r\n      message.error('Failed to save privacy data');\r\n    }\r\n  };\r\n\r\n  if (isLoading) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <>\r\n      <Breadcrumb style={{ marginBottom: '16px' }}>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/dashboard\">Dashboard</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item>Privacy Form</Breadcrumb.Item>\r\n      </Breadcrumb>\r\n      <Form form={form} layout=\"vertical\" onFinish={handleFinish}>\r\n        <Form.Item name=\"privacyPolicy\" label=\"Privacy Policy\" rules={[{ required: true, message: 'Please enter the privacy policy' }]}>\r\n          <JoditEditor\r\n            value={privacyPolicy}\r\n            onChange={(content) => setPrivacyPolicy(content)}\r\n          />\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            Save\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PrivacyForm;"],"names":["PrivacyForm","navigate","useNavigate","form","Form","useForm","privacyPolicy","setPrivacyPolicy","useState","isLoading","setIsLoading","isExistingData","setIsExistingData","privacyId","setPrivacyId","useEffect","async","response","axios","get","data","length","privacyData","_id","setFieldsValue","error","message","fetchPrivacyData","jsx","children","jsxs","Fragment","Breadcrumb","style","marginBottom","Item","Link","to","layout","onFinish","put","success","post","name","label","rules","required","JoditEditor","value","onChange","content","Button","type","htmlType"],"mappings":"uoBAMA,MAAMA,EAAc,KAClB,MAAMC,EAAWC,KACVC,GAAQC,EAAKC,WACbC,EAAeC,GAAoBC,EAAAA,SAAS,KAC5CC,EAAWC,GAAgBF,EAAAA,UAAS,IACpCG,EAAgBC,GAAqBJ,EAAAA,UAAS,IAC9CK,EAAWC,GAAgBN,EAAAA,SAAS,MAE3CO,EAAAA,WAAU,KACiBC,WACnB,IACF,MAAMC,QAAiBC,EAAMC,IAAI,gBAC7B,GAAAF,EAASG,KAAKC,OAAS,EAAG,CACtB,MAAAC,EAAcL,EAASG,KAAK,GAClCb,EAAiBe,EAAYhB,eAC7BQ,EAAaQ,EAAYC,KACzBpB,EAAKqB,eAAe,CAClBlB,cAAegB,EAAYhB,gBAE7BM,GAAkB,EAAI,QAEjBa,GACPC,EAAQD,MAAM,+BAA8B,CAC5C,QACAf,GAAa,EAAK,GAILiB,EAAA,GAChB,CAACxB,IAiBJ,OAAIM,EAAmBmB,EAAAA,IAAA,IAAA,CAAEC,SAAU,eAI/BC,EAAAA,KAAAC,WAAA,CAAAF,SAAA,CAAAC,EAAAA,KAACE,EAAW,CAAAC,MAAO,CAAEC,aAAc,QACjCL,SAAA,CAACD,EAAAA,IAAAI,EAAWG,KAAX,CACCN,SAAAD,EAAAA,IAACQ,GAAKC,GAAG,aAAaR,yBAEvBD,EAAAA,IAAAI,EAAWG,KAAX,CAAgBN,SAAY,2BAE9BzB,EAAK,CAAAD,OAAYmC,OAAO,WAAWC,SAzBnBvB,UACf,IACEL,SACIO,EAAMsB,IAAI,gBAAgB3B,IAAa,CAAEP,kBAC/CoB,EAAQe,QAAQ,6CAEVvB,EAAMwB,KAAK,mBAAoB,CAAEpC,kBACvCoB,EAAQe,QAAQ,sCAElBxC,EAAS,8BACFwB,GACPC,EAAQD,MAAM,8BAA6B,GAezCI,SAAA,CAAAD,EAAAA,IAACxB,EAAK+B,KAAL,CAAUQ,KAAK,gBAAgBC,MAAM,iBAAiBC,MAAO,CAAC,CAAEC,UAAU,EAAMpB,QAAS,oCACxFG,SAAAD,EAAAA,IAACmB,EAAA,CACCC,MAAO1C,EACP2C,SAAWC,GAAY3C,EAAiB2C,OAG5CtB,EAAAA,IAACxB,EAAK+B,KAAL,CACCN,SAAAD,EAAAA,IAACuB,EAAO,CAAAC,KAAK,UAAUC,SAAS,SAASxB,SAAA,gBAK/C"}