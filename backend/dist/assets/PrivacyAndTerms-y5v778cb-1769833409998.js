import{f as F,dP as c,r,j as e,dT as l,L as k,as as I,be as E,c as n,dp as o}from"./index-Bz9LGQy6-1769833409998.js";const D=()=>{const u=F(),[s]=c.useForm(),[d,y]=r.useState(""),[h,m]=r.useState(!0),[p,v]=r.useState(!1),[f,g]=r.useState(null),P=r.useMemo(()=>({toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{align:[]}],[{color:[]},{background:[]}],["clean"]],clipboard:{matchVisual:!1}}),[]),x=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","align","color","background"];r.useEffect(()=>{(async()=>{try{const t=await n.get("/api/privacy");if(t.data.length>0){const i=t.data[0];y(i.privacyPolicy),g(i._id),s.setFieldsValue({privacyPolicy:i.privacyPolicy}),v(!0)}}catch{o.error("Failed to fetch privacy data")}finally{m(!1)}})()},[s]);const b=a=>{y(a),s.setFieldsValue({privacyPolicy:a})},j=async()=>{try{const a={privacyPolicy:d};p?(await n.put(`/api/privacy/${f}`,a),o.success("Privacy data updated successfully")):(await n.post("/api/privacy/add",a),o.success("Privacy data created successfully")),u("/privacypolicy-terms")}catch(a){o.error("Failed to save privacy data"),console.error("Error:",a)}};return h?e.jsx("p",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{className:"mb-4",children:[e.jsx(l.Item,{children:e.jsx(k,{to:"/dashboard",children:"Dashboard"})}),e.jsx(l.Item,{children:"Privacy Form"})]}),e.jsxs(c,{form:s,layout:"vertical",onFinish:j,children:[e.jsx(c.Item,{name:"privacyPolicy",label:"Privacy Policy",rules:[{required:!0,message:"Please enter the privacy policy"},{validator:(a,t)=>{const i=t==null?void 0:t.replace(/<[^>]*>/g,"").trim();return!i||i===""?Promise.reject("Please enter the privacy policy"):Promise.resolve()}}],children:e.jsx(I,{theme:"snow",value:d,onChange:b,modules:P,formats:x,placeholder:"Start typing your privacy policy...",style:{height:"400px",marginBottom:"50px"}})}),e.jsx(c.Item,{children:e.jsx(E,{type:"primary",htmlType:"submit",children:p?"Update":"Save"})})]})]})};export{D as default};
