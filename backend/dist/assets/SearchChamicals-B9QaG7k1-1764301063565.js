import{R as o,j as e,B as b,r as g,aj as y,I as w}from"./index-DhlDUgTv-1764301063565.js";import{T,a as I,b as C,c as N,e as h,d as L}from"./table-DLlXm8vO-1764301063565.js";function P({chemicals:m,onRemoveChemical:u}){const[t,l]=o.useState(1),[n,c]=o.useState(10),[x,v]=o.useState(""),[p,r]=o.useState(""),i=m.filter(s=>s.name.toLowerCase().includes(x.toLowerCase())&&s.cas_number.toLowerCase().includes(p.toLowerCase())),S=Math.ceil(i.length/n),d=(t-1)*n,j=d+n,a=i.slice(d,j);return e.jsxs("div",{className:"border rounded-md mt-4",children:[e.jsxs(T,{children:[e.jsxs(I,{children:[e.jsxs(C,{children:[e.jsx(N,{children:"Chemical Name"}),e.jsx(N,{children:"CAS Number"})]}),e.jsxs(C,{children:[e.jsx(h,{children:e.jsx("input",{type:"text",placeholder:"Filter by Chemical Name",value:x,onChange:s=>v(s.target.value),className:"w-full border rounded px-2 py-1"})}),e.jsx(h,{children:e.jsx("input",{type:"text",placeholder:"Filter by CAS Number",value:p,onChange:s=>r(s.target.value),className:"w-full border rounded px-2 py-1"})})]})]}),e.jsx(L,{children:a.length===0?e.jsx(C,{children:e.jsx(h,{colSpan:2,className:"text-center",children:"No chemicals found."})}):a.map(s=>e.jsxs(C,{children:[e.jsx(h,{children:s.name}),e.jsx(h,{children:s.cas_number})]},s._id))})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Items per page:"," ",e.jsxs("select",{className:"border rounded",value:n,onChange:s=>c(Number(s.target.value)),children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>l(t-1),disabled:t===1,children:"Previous"}),e.jsx("span",{className:"flex items-center gap-1",children:e.jsxs("span",{className:"text-sm text-gray-500",children:[d+1," - ",Math.min(j,i.length)," of"," ",i.length]})}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>l(t+1),disabled:t===S,children:"Next"})]})]})]})}function R({onSelectSupplier:m}){const[u,t]=g.useState(""),[l,n]=g.useState(""),[c,x]=g.useState(null),[v,p]=g.useState([]),{data:r,isLoading:i}=y(l.charAt(0),{skip:l.length===0}),S=a=>{x(a),t(a.name),n(""),m(a)},d=a=>{const s=a.target.value;t(s),n(s)},j=a=>{p(s=>s.filter(f=>f.id!==a.id))};return e.jsxs("div",{className:"mt-4",children:[e.jsx(w,{placeholder:"Search Supplier",value:u,onChange:d,className:"w-full mb-4"}),i?e.jsx("div",{children:"Loading..."}):l&&r&&r.length>0&&e.jsx("ul",{className:"border bg-white rounded max-h-40 overflow-y-auto",children:r.map(a=>e.jsx("li",{onClick:()=>S(a),className:"p-2 hover:bg-gray-200 cursor-pointer",children:a.name},a.id))}),(r==null?void 0:r.length)===0&&!i&&l&&e.jsx("div",{className:"p-2 text-gray-500",children:"No Supplier found"}),e.jsx("div",{className:"mt-4",children:e.jsx(P,{chemicals:(c==null?void 0:c.chemical_ids)||[],onRemoveChemical:j})})]})}function B(){const[m,u]=o.useState(null),[t,l]=o.useState([]),n=c=>{u(c),l([])};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-purple-700",children:"Search Chemical By Supplier Name"}),e.jsx("div",{className:"space-y-4",children:e.jsx(R,{onSelectCustomer:n})})]})}export{B as default};
