import{r as m,j as e,a as _}from"./react-DKICu8bO.js";import{n as T,B as A,F as P,I as B}from"./index-CDFtkn6X.js";import{T as E,a as F,b as j,c as L,d as R,e as c}from"./table-BxxugdeG.js";import"./classnames-Bv6oJzD9.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./react-router-B9QVkYva.js";import"./cookie--_YQFYBD.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./lucide-D7hRWJEP.js";import"./axios-DXsv3KKR.js";import"./@syncfusion-BIAkhmGL.js";function z({selectedChemicalIds:l,onRemoveChemical:y}){const[i,r]=m.useState(1),[n,v]=m.useState(10),[p,x]=m.useState({name:"",email:"",mobile:""}),{data:g,error:h,isLoading:b}=T(l),d=t=>{const{name:C,value:s}=t.target;x({...p,[C]:s})},u=g?g.filter(t=>Object.entries(p).every(([C,s])=>{var a;return(a=t[C])==null?void 0:a.toString().toLowerCase().includes(s.toLowerCase())})):[],N=Math.ceil(u.length/n),S=(i-1)*n,o=S+n,f=u.slice(S,o);return e.jsxs("div",{className:"border rounded-md mt-4",children:[e.jsxs(E,{children:[e.jsx(F,{className:"bg-gray-200",children:e.jsxs(j,{children:[e.jsx(L,{children:"Name"}),e.jsx(L,{children:"Email"}),e.jsx(L,{children:"Mobile"})]})}),e.jsxs(R,{children:[e.jsxs(j,{children:[e.jsx(c,{children:e.jsx("input",{type:"text",name:"name",placeholder:"Filter by Name",value:p.name,onChange:d,className:"border rounded w-full px-2 py-1"})}),e.jsx(c,{children:e.jsx("input",{type:"text",name:"email",placeholder:"Filter by Email",value:p.email,onChange:d,className:"border rounded w-full px-2 py-1"})}),e.jsx(c,{children:e.jsx("input",{type:"text",name:"mobile",placeholder:"Filter by Mobile",value:p.mobile,onChange:d,className:"border rounded w-full px-2 py-1"})})]}),b&&e.jsx(j,{children:e.jsx(c,{colSpan:3,children:"Loading suppliers..."})}),h&&e.jsx(j,{children:e.jsx(c,{colSpan:3,className:"text-red-500",children:h.message})}),!b&&!h&&f.length===0&&e.jsx(j,{children:e.jsx(c,{colSpan:3,children:"No suppliers available."})}),f.map(t=>e.jsxs(j,{children:[e.jsx(c,{children:t.name}),e.jsx(c,{children:t.email}),e.jsx(c,{children:t.mobile})]},t._id))]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Items per page:",e.jsxs("select",{className:"border rounded",value:n,onChange:t=>v(Number(t.target.value)),children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{className:"",variant:"secondary",size:"sm",onClick:()=>r(i-1),disabled:i===1,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[S+1," - ",Math.min(o,u.length)," of ",u.length]}),e.jsx(A,{variant:"secondary",size:"sm",onClick:()=>r(i+1),disabled:i===N,children:"Next"})]})]})]})}function M({onSelectChemicals:l}){const[y,i]=m.useState(""),[r,n]=m.useState(""),[v,p]=m.useState(null),[x,g]=m.useState([]),[h,b]=m.useState([]),{data:d,isLoading:u,error:N}=P(r.charAt(0)||""),o=(Array.isArray(d)?d:d?[d]:[]).filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.cas_number&&s.cas_number.toLowerCase().includes(r.toLowerCase())),f=s=>{if(s&&!x.includes(s._id)){const a=[...h,s],w=[...x,s._id];p(s),b(a),g(w),i(""),n(""),l==null||l(a)}},t=s=>{const a=s.target.value;i(a),n(a)},C=s=>{const a=h.filter(I=>I._id!==s._id),w=x.filter(I=>I!==s._id);b(a),g(w),l==null||l(a)};return e.jsxs("div",{className:"mt-4",children:[e.jsx(B,{placeholder:"Search Chemical by Name or CAS Number",value:y,onChange:t,className:"w-full mb-4"}),u?e.jsx("div",{children:"Loading..."}):r&&o&&o.length>0&&e.jsx("ul",{className:"border bg-white rounded max-h-40 overflow-y-auto",children:o.map(s=>e.jsxs("li",{onClick:()=>f(s),className:"p-2 hover:bg-gray-200 cursor-pointer",children:[s.name," (CAS: ",s.cas_number||"N/A",")"]},s._id))}),N&&e.jsxs("div",{className:"p-2 text-red-500",children:["Error loading chemicals: ",N.toString()]}),(o==null?void 0:o.length)===0&&!u&&r&&e.jsx("div",{className:"p-2 text-gray-500",children:"No Chemical found"}),e.jsx("div",{className:"mt-4",children:e.jsx(z,{chemicals:h,selectedChemicalIds:x,onRemoveChemical:C})})]})}function je(){const[l,y]=_.useState(null),[i,r]=_.useState([]),n=v=>{y(v),r([])};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-purple-700",children:"Search Supplier By Chemical Name"}),e.jsx("div",{className:"space-y-4",children:e.jsx(M,{onSelectCustomer:n})})]})}export{je as default};
