import{r as e,j as s,a as r}from"./react-BfBsRgn0.js";import{n as a,B as l,F as i,I as t}from"./index-cVSOkL6A.js";import{T as n,a as o,b as c,c as d,d as m,e as j}from"./table-6AWYD7bR.js";import"./classnames-C3ovBj6j.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./react-router-DUJjWq5j.js";import"./cookie-BUTH-fPQ.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./lucide-D6BDVLHE.js";import"./axios-BoylL8Pu.js";import"./@syncfusion-CXokIO9o.js";function u({selectedChemicalIds:r,onRemoveChemical:i}){const[t,u]=e.useState(1),[h,x]=e.useState(10),[p,v]=e.useState({name:"",email:"",mobile:""}),{data:g,error:b,isLoading:N}=a(r),y=e=>{const{name:s,value:r}=e.target;v({...p,[s]:r})},f=g?g.filter((e=>Object.entries(p).every((([s,r])=>{var a;return null==(a=e[s])?void 0:a.toString().toLowerCase().includes(r.toLowerCase())})))):[],C=Math.ceil(f.length/h),S=(t-1)*h,w=S+h,_=f.slice(S,w);return s.jsxs("div",{className:"border rounded-md mt-4",children:[s.jsxs(n,{children:[s.jsx(o,{className:"bg-gray-200",children:s.jsxs(c,{children:[s.jsx(d,{children:"Name"}),s.jsx(d,{children:"Email"}),s.jsx(d,{children:"Mobile"})]})}),s.jsxs(m,{children:[s.jsxs(c,{children:[s.jsx(j,{children:s.jsx("input",{type:"text",name:"name",placeholder:"Filter by Name",value:p.name,onChange:y,className:"border rounded w-full px-2 py-1"})}),s.jsx(j,{children:s.jsx("input",{type:"text",name:"email",placeholder:"Filter by Email",value:p.email,onChange:y,className:"border rounded w-full px-2 py-1"})}),s.jsx(j,{children:s.jsx("input",{type:"text",name:"mobile",placeholder:"Filter by Mobile",value:p.mobile,onChange:y,className:"border rounded w-full px-2 py-1"})})]}),N&&s.jsx(c,{children:s.jsx(j,{colSpan:3,children:"Loading suppliers..."})}),b&&s.jsx(c,{children:s.jsx(j,{colSpan:3,className:"text-red-500",children:b.message})}),!N&&!b&&0===_.length&&s.jsx(c,{children:s.jsx(j,{colSpan:3,children:"No suppliers available."})}),_.map((e=>s.jsxs(c,{children:[s.jsx(j,{children:e.name}),s.jsx(j,{children:e.email}),s.jsx(j,{children:e.mobile})]},e._id)))]})]}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:["Items per page:",s.jsxs("select",{className:"border rounded",value:h,onChange:e=>x(Number(e.target.value)),children:[s.jsx("option",{value:10,children:"10"}),s.jsx("option",{value:20,children:"20"}),s.jsx("option",{value:50,children:"50"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(l,{className:"",variant:"secondary",size:"sm",onClick:()=>u(t-1),disabled:1===t,children:"Previous"}),s.jsxs("span",{className:"text-sm text-gray-500",children:[S+1," - ",Math.min(w,f.length)," of ",f.length]}),s.jsx(l,{variant:"secondary",size:"sm",onClick:()=>u(t+1),disabled:t===C,children:"Next"})]})]})]})}function h({onSelectChemicals:r}){const[a,l]=e.useState(""),[n,o]=e.useState(""),[c,d]=e.useState(null),[m,j]=e.useState([]),[h,x]=e.useState([]),{data:p,isLoading:v,error:g}=i(n.charAt(0)||""),b=(Array.isArray(p)?p:p?[p]:[]).filter((e=>e.name.toLowerCase().includes(n.toLowerCase())||e.cas_number&&e.cas_number.toLowerCase().includes(n.toLowerCase())));return s.jsxs("div",{className:"mt-4",children:[s.jsx(t,{placeholder:"Search Chemical by Name or CAS Number",value:a,onChange:e=>{const s=e.target.value;l(s),o(s)},className:"w-full mb-4"}),v?s.jsx("div",{children:"Loading..."}):n&&b&&b.length>0&&s.jsx("ul",{className:"border bg-white rounded max-h-40 overflow-y-auto",children:b.map((e=>s.jsxs("li",{onClick:()=>(e=>{if(e&&!m.includes(e._id)){const s=[...h,e],a=[...m,e._id];d(e),x(s),j(a),l(""),o(""),null==r||r(s)}})(e),className:"p-2 hover:bg-gray-200 cursor-pointer",children:[e.name," (CAS: ",e.cas_number||"N/A",")"]},e._id)))}),g&&s.jsxs("div",{className:"p-2 text-red-500",children:["Error loading chemicals: ",g.toString()]}),0===(null==b?void 0:b.length)&&!v&&n&&s.jsx("div",{className:"p-2 text-gray-500",children:"No Chemical found"}),s.jsx("div",{className:"mt-4",children:s.jsx(u,{chemicals:h,selectedChemicalIds:m,onRemoveChemical:e=>{const s=h.filter((s=>s._id!==e._id)),a=m.filter((s=>s!==e._id));x(s),j(a),null==r||r(s)}})})]})}function x(){const[e,a]=r.useState(null),[l,i]=r.useState([]);return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-purple-700",children:"Search Supplier By Chemical Name"}),s.jsx("div",{className:"space-y-4",children:s.jsx(h,{onSelectCustomer:e=>{a(e),i([])}})})]})}export{x as default};
