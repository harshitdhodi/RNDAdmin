import{r as T,j as e,B as _,K as P,I as R}from"./main-EFHZjs26-1744351735800.js";import{c as d,R as A}from"./vendor-CxfDVdnA-1744351735800.js";import{T as B,a as E,b as p,c as L,d as F,e as n}from"./table-DdRuJvLX-1744351735800.js";function z({selectedChemicalIds:j,onRemoveChemical:S}){const[t,l]=d.useState(1),[r,y]=d.useState(10),[o,x]=d.useState({name:"",email:"",mobile:""}),{data:C,error:m,isLoading:g}=T(j),i=a=>{const{name:b,value:s}=a.target;x({...o,[b]:s})},h=C?C.filter(a=>Object.entries(o).every(([b,s])=>a[b]?.toString().toLowerCase().includes(s.toLowerCase()))):[],v=Math.ceil(h.length/r),N=(t-1)*r,u=N+r,f=h.slice(N,u);return e.jsxs("div",{className:"border rounded-md mt-4",children:[e.jsxs(B,{children:[e.jsx(E,{className:"bg-gray-200",children:e.jsxs(p,{children:[e.jsx(L,{children:"Name"}),e.jsx(L,{children:"Email"}),e.jsx(L,{children:"Mobile"})]})}),e.jsxs(F,{children:[e.jsxs(p,{children:[e.jsx(n,{children:e.jsx("input",{type:"text",name:"name",placeholder:"Filter by Name",value:o.name,onChange:i,className:"border rounded w-full px-2 py-1"})}),e.jsx(n,{children:e.jsx("input",{type:"text",name:"email",placeholder:"Filter by Email",value:o.email,onChange:i,className:"border rounded w-full px-2 py-1"})}),e.jsx(n,{children:e.jsx("input",{type:"text",name:"mobile",placeholder:"Filter by Mobile",value:o.mobile,onChange:i,className:"border rounded w-full px-2 py-1"})})]}),g&&e.jsx(p,{children:e.jsx(n,{colSpan:3,children:"Loading suppliers..."})}),m&&e.jsx(p,{children:e.jsx(n,{colSpan:3,className:"text-red-500",children:m.message})}),!g&&!m&&f.length===0&&e.jsx(p,{children:e.jsx(n,{colSpan:3,children:"No suppliers available."})}),f.map(a=>e.jsxs(p,{children:[e.jsx(n,{children:a.name}),e.jsx(n,{children:a.email}),e.jsx(n,{children:a.mobile})]},a._id))]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Items per page:",e.jsxs("select",{className:"border rounded",value:r,onChange:a=>y(Number(a.target.value)),children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{className:"",variant:"secondary",size:"sm",onClick:()=>l(t-1),disabled:t===1,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[N+1," - ",Math.min(u,h.length)," of ",h.length]}),e.jsx(_,{variant:"secondary",size:"sm",onClick:()=>l(t+1),disabled:t===v,children:"Next"})]})]})]})}function M({onSelectChemicals:j}){const[S,t]=d.useState(""),[l,r]=d.useState(""),[y,o]=d.useState(null),[x,C]=d.useState([]),[m,g]=d.useState([]),{data:i,isLoading:h,error:v}=P(l.charAt(0)||""),u=(Array.isArray(i)?i:i?[i]:[]).filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.cas_number&&s.cas_number.toLowerCase().includes(l.toLowerCase())),f=s=>{if(s&&!x.includes(s._id)){const c=[...m,s],w=[...x,s._id];o(s),g(c),C(w),t(""),r(""),j?.(c)}},a=s=>{const c=s.target.value;t(c),r(c)},b=s=>{const c=m.filter(I=>I._id!==s._id),w=x.filter(I=>I!==s._id);g(c),C(w),j?.(c)};return e.jsxs("div",{className:"mt-4",children:[e.jsx(R,{placeholder:"Search Chemical by Name or CAS Number",value:S,onChange:a,className:"w-full mb-4"}),h?e.jsx("div",{children:"Loading..."}):l&&u&&u.length>0&&e.jsx("ul",{className:"border bg-white rounded max-h-40 overflow-y-auto",children:u.map(s=>e.jsxs("li",{onClick:()=>f(s),className:"p-2 hover:bg-gray-200 cursor-pointer",children:[s.name," (CAS: ",s.cas_number||"N/A",")"]},s._id))}),v&&e.jsxs("div",{className:"p-2 text-red-500",children:["Error loading chemicals: ",v.toString()]}),u?.length===0&&!h&&l&&e.jsx("div",{className:"p-2 text-gray-500",children:"No Chemical found"}),e.jsx("div",{className:"mt-4",children:e.jsx(z,{chemicals:m,selectedChemicalIds:x,onRemoveChemical:b})})]})}function H(){const[j,S]=A.useState(null),[t,l]=A.useState([]),r=y=>{S(y),l([])};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-purple-700",children:"Search Supplier By Chemical Name"}),e.jsx("div",{className:"space-y-4",children:e.jsx(M,{onSelectCustomer:r})})]})}export{H as default};
