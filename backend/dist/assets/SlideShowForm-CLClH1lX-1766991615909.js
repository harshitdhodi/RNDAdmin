import{r as n,f as I,j as e,dQ as s,L as p,dM as t,dR as g,dS as w,bd as u,dT as y,dl as d,c as N}from"./index-B-FS_WZa-1766991615909.js";import{C as S}from"./index-B0sPw6gu-1766991615909.js";import"./Skeleton-Ummp3xiR-1766991615909.js";const T=()=>{const[c,m]=n.useState(!1),[r,x]=n.useState([]),[h,o]=n.useState(null),j=I(),f=async a=>{if(r.length===0){d.error("Please upload an image.");return}const l=new FormData;l.append("image",r[0].originFileObj),l.append("altText",a.altText),l.append("title",a.title),m(!0);try{const i=await N.post("/api/slideShow/addimages",l,{headers:{"Content-Type":"multipart/form-data"}});d.success("Image uploaded successfully!"),j("/slideShow-table"),console.log("Response:",i.data)}catch(i){d.error("Failed to upload image."),console.error(i)}finally{m(!1),x([]),o(null)}},b=({fileList:a})=>{if(x(a.slice(-1)),a.length>0){const l=a[0].originFileObj;o(URL.createObjectURL(l))}else o(null)};return e.jsxs("div",{className:"flex flex-col items-center px-6",children:[e.jsxs(s,{className:"self-start mb-4 text-gray-600",children:[e.jsx(s.Item,{children:e.jsx(p,{to:"/dashboard",children:"Dashboard"})}),e.jsx(s.Item,{children:e.jsx(p,{to:"/slideShow-table",children:"SlideShow Table"})}),e.jsx(s.Item,{children:"Upload Image"})]}),e.jsxs(S,{className:"w-full max-w-4lg shadow-lg rounded-xl",children:[e.jsx("h2",{className:"text-xl font-semibold text-left mb-4",children:"Upload Image"}),e.jsxs(t,{layout:"vertical",onFinish:f,className:"w-full lg:w-1/2",children:[e.jsx(t.Item,{label:"Image Title",name:"title",rules:[{required:!0,message:"Please enter image title"}],children:e.jsx(g,{placeholder:"Enter image title"})}),e.jsx(t.Item,{label:"Alt Name",name:"altText",rules:[{required:!0,message:"Please enter alt text"}],children:e.jsx(g,{placeholder:"Enter alt text"})}),e.jsx(t.Item,{label:"Upload Image",children:e.jsx(w,{fileList:r,beforeUpload:()=>!1,maxCount:1,onChange:b,accept:"image/*",children:e.jsx(u,{icon:e.jsx(y,{}),children:"Select Image"})})}),h&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:h,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"})}),e.jsx(t.Item,{children:e.jsx(u,{type:"primary",htmlType:"submit",block:!0,loading:c,className:"mt-4",children:c?"Uploading...":"Upload Image"})})]})]})]})};export{T as default};
