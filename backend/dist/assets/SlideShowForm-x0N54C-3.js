import{j as e,I as s,L as a,a7 as l,X as t,B as r}from"./main-BQqr2_19.js";import{r as i,d,L as c}from"./vendor-router-DoRotgOs.js";import{a as n}from"./vendor-utils-CfKmydC0.js";import"./react-toastify.esm-BNXCN5Br.js";import{C as o,b as m,c as x,a as h}from"./card-CPQ_AIkA.js";import{F as j,a as p,b as u,c as f,d as g,e as b}from"./form-8DYzE22W.js";import{B as w,a as N,b as v,d as y,e as S}from"./breadcrumb-BHS-7goF.js";import{b as C}from"./index.esm-CSDyVtrl.js";import{U}from"./upload-BBhkcclE.js";import"./vendor-react-DD_RYU77.js";import"./chevron-right-DHWU52ll.js";const F=()=>{const[F,I]=i.useState(!1),[P,T]=i.useState(null),[k,D]=i.useState(null),G=d(),L=C({defaultValues:{title:"",altText:""}});return e.jsxs("div",{className:"flex flex-col items-center px-6",children:[e.jsx("div",{className:"w-full max-w-4xl mb-4",children:e.jsx(w,{className:"text-gray-600",children:e.jsxs(N,{children:[e.jsx(v,{children:e.jsx(y,{asChild:!0,children:e.jsx(c,{to:"/dashboard",children:"Dashboard"})})}),e.jsx(S,{}),e.jsx(v,{children:e.jsx(y,{asChild:!0,children:e.jsx(c,{to:"/slideShow-table",children:"SlideShow Table"})})}),e.jsx(S,{}),e.jsx(v,{children:e.jsx(y,{children:"Upload Image"})})]})})}),e.jsxs(o,{className:"w-full max-w-4xl shadow-lg rounded-xl",children:[e.jsx(m,{children:e.jsx(x,{className:"text-xl font-semibold",children:"Upload Image"})}),e.jsx(h,{children:e.jsx(j,{...L,children:e.jsxs("form",{onSubmit:L.handleSubmit((async e=>{if(!P)return void toast({variant:"destructive",title:"Validation Error",description:"Please upload an image."});const s=new FormData;s.append("image",P),s.append("altText",e.altText),s.append("title",e.title),I(!0);try{await n.post("/api/slideShow/addimages",s,{headers:{"Content-Type":"multipart/form-data"}});toast({title:"Success",description:"Image uploaded successfully!",variant:"default"}),G("/slideShow-table")}catch(a){toast({variant:"destructive",title:"Upload Failed",description:"Failed to upload image."})}finally{I(!1),T(null),D(null),L.reset()}})),className:"w-full lg:w-1/2 space-y-6",children:[e.jsx(p,{control:L.control,name:"title",rules:{required:"Please enter image title"},render:({field:a})=>e.jsxs(u,{children:[e.jsx(f,{children:"Image Title"}),e.jsx(g,{children:e.jsx(s,{placeholder:"Enter image title",...a})}),e.jsx(b,{})]})}),e.jsx(p,{control:L.control,name:"altText",rules:{required:"Please enter alt text"},render:({field:a})=>e.jsxs(u,{children:[e.jsx(f,{children:"Alt Name"}),e.jsx(g,{children:e.jsx(s,{placeholder:"Enter alt text",...a})}),e.jsx(b,{})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"image",children:"Upload Image"}),e.jsx("div",{className:"grid w-full items-center gap-1.5",children:e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"image-upload",className:l("flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer","hover:bg-gray-50 bg-gray-50 border-gray-300",k&&"border-blue-500 bg-blue-50"),children:[e.jsx("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:k?e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[e.jsx("img",{src:k,alt:"Preview",className:"max-h-24 max-w-full object-contain"}),e.jsx("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),T(null),D(null)},className:"absolute top-0 right-0 p-1 bg-red-100 rounded-full text-red-600 hover:bg-red-200",children:e.jsx(t,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-8 h-8 mb-2 text-gray-500"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"SVG, PNG, JPG or GIF"})]})}),e.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:e=>{const s=e.target.files?.[0];s&&(T(s),D(URL.createObjectURL(s)))},className:"hidden"})]})})})})]}),e.jsx(r,{type:"submit",className:"w-full",disabled:F,children:F?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Image"})]})})})]})]})};export{F as default};
//# sourceMappingURL=SlideShowForm-x0N54C-3.js.map
