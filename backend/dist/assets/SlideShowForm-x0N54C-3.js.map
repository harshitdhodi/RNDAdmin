{"version":3,"file":"SlideShowForm-x0N54C-3.js","sources":["../../src/website/componets/slideshow/SlideShowForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { Upload, X, Check, Image as ImageIcon } from \"lucide-react\";\r\nimport { useToast } from \"react-toastify\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport {\r\n  Breadcrumb,\r\n  BreadcrumbItem,\r\n  BreadcrumbLink,\r\n  BreadcrumbList,\r\n  BreadcrumbSeparator,\r\n} from \"@/components/ui/breadcrumb\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst ImageUploadForm = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [file, setFile] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n  const navigate = useNavigate();\r\n;\r\n\r\n  const form = useForm({\r\n    defaultValues: {\r\n      title: \"\",\r\n      altText: \"\",\r\n    },\r\n  });\r\n\r\n  const onSubmit = async (values) => {\r\n    if (!file) {\r\n      toast({\r\n        variant: \"destructive\",\r\n        title: \"Validation Error\",\r\n        description: \"Please upload an image.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n    formData.append(\"altText\", values.altText);\r\n    formData.append(\"title\", values.title);\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.post(\"/api/slideShow/addimages\", formData, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n      });\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Image uploaded successfully!\",\r\n        variant: \"default\",\r\n      });\r\n      navigate(\"/slideShow-table\");\r\n      console.log(\"Response:\", response.data);\r\n    } catch (error) {\r\n      toast({\r\n        variant: \"destructive\",\r\n        title: \"Upload Failed\",\r\n        description: \"Failed to upload image.\",\r\n      });\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n      setFile(null);\r\n      setPreview(null);\r\n      form.reset();\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const selectedFile = e.target.files?.[0];\r\n    if (selectedFile) {\r\n      setFile(selectedFile);\r\n      setPreview(URL.createObjectURL(selectedFile));\r\n    }\r\n  };\r\n\r\n  const removeFile = () => {\r\n    setFile(null);\r\n    setPreview(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center px-6\">\r\n      {/* Breadcrumb Navigation */}\r\n      <div className=\"w-full max-w-4xl mb-4\">\r\n        <Breadcrumb className=\"text-gray-600\">\r\n          <BreadcrumbList>\r\n            <BreadcrumbItem>\r\n              <BreadcrumbLink asChild>\r\n                <Link to=\"/dashboard\">Dashboard</Link>\r\n              </BreadcrumbLink>\r\n            </BreadcrumbItem>\r\n            <BreadcrumbSeparator />\r\n            <BreadcrumbItem>\r\n              <BreadcrumbLink asChild>\r\n                <Link to=\"/slideShow-table\">SlideShow Table</Link>\r\n              </BreadcrumbLink>\r\n            </BreadcrumbItem>\r\n            <BreadcrumbSeparator />\r\n            <BreadcrumbItem>\r\n              <BreadcrumbLink>Upload Image</BreadcrumbLink>\r\n            </BreadcrumbItem>\r\n          </BreadcrumbList>\r\n        </Breadcrumb>\r\n      </div>\r\n\r\n      <Card className=\"w-full max-w-4xl shadow-lg rounded-xl\">\r\n        <CardHeader>\r\n          <CardTitle className=\"text-xl font-semibold\">Upload Image</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"w-full lg:w-1/2 space-y-6\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"title\"\r\n                rules={{ required: \"Please enter image title\" }}\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Image Title</FormLabel>\r\n                    <FormControl>\r\n                      <Input placeholder=\"Enter image title\" {...field} />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"altText\"\r\n                rules={{ required: \"Please enter alt text\" }}\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Alt Name</FormLabel>\r\n                    <FormControl>\r\n                      <Input placeholder=\"Enter alt text\" {...field} />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"image\">Upload Image</Label>\r\n                <div className=\"grid w-full items-center gap-1.5\">\r\n                  <div className=\"mt-2\">\r\n                    <div className=\"flex items-center justify-center w-full\">\r\n                      <label\r\n                        htmlFor=\"image-upload\"\r\n                        className={cn(\r\n                          \"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer\",\r\n                          \"hover:bg-gray-50 bg-gray-50 border-gray-300\",\r\n                          preview && \"border-blue-500 bg-blue-50\"\r\n                        )}\r\n                      >\r\n                        <div className=\"flex flex-col items-center justify-center pt-5 pb-6\">\r\n                          {!preview ? (\r\n                            <>\r\n                              <Upload className=\"w-8 h-8 mb-2 text-gray-500\" />\r\n                              <p className=\"mb-2 text-sm text-gray-500\">\r\n                                <span className=\"font-semibold\">Click to upload</span> or drag and drop\r\n                              </p>\r\n                              <p className=\"text-xs text-gray-500\">SVG, PNG, JPG or GIF</p>\r\n                            </>\r\n                          ) : (\r\n                            <div className=\"relative w-full h-full flex items-center justify-center\">\r\n                              <img\r\n                                src={preview}\r\n                                alt=\"Preview\"\r\n                                className=\"max-h-24 max-w-full object-contain\"\r\n                              />\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={(e) => {\r\n                                  e.preventDefault();\r\n                                  e.stopPropagation();\r\n                                  removeFile();\r\n                                }}\r\n                                className=\"absolute top-0 right-0 p-1 bg-red-100 rounded-full text-red-600 hover:bg-red-200\"\r\n                              >\r\n                                <X className=\"h-4 w-4\" />\r\n                              </button>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        <input\r\n                          id=\"image-upload\"\r\n                          type=\"file\"\r\n                          accept=\"image/*\"\r\n                          onChange={handleFileChange}\r\n                          className=\"hidden\"\r\n                        />\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <Button \r\n                type=\"submit\" \r\n                className=\"w-full\"\r\n                disabled={loading}\r\n              >\r\n                {loading ? (\r\n                  <span className=\"flex items-center justify-center\">\r\n                    <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                    </svg>\r\n                    Uploading...\r\n                  </span>\r\n                ) : (\r\n                  \"Upload Image\"\r\n                )}\r\n              </Button>\r\n            </form>\r\n          </Form>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUploadForm;"],"names":["ImageUploadForm","loading","setLoading","useState","file","setFile","preview","setPreview","navigate","useNavigate","form","useForm","defaultValues","title","altText","jsxs","className","children","jsx","Breadcrumb","BreadcrumbList","BreadcrumbItem","BreadcrumbLink","asChild","Link","to","BreadcrumbSeparator","Card","CardHeader","CardTitle","CardContent","Form","onSubmit","handleSubmit","async","values","toast","variant","description","formData","FormData","append","axios","post","headers","error","reset","FormField","control","name","rules","required","render","field","FormItem","FormLabel","FormControl","Input","placeholder","FormMessage","Label","htmlFor","cn","src","alt","type","onClick","e","preventDefault","stopPropagation","X","Fragment","Upload","id","accept","onChange","selectedFile","target","files","URL","createObjectURL","Button","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d"],"mappings":"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"}