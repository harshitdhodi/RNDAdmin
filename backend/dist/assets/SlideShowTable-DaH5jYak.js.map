{"version":3,"file":"SlideShowTable-DaH5jYak.js","sources":["../../src/website/componets/slideshow/SlideShowTable.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Breadcrumb, BreadcrumbItem, BreadcrumbLink } from \"@/components/ui/breadcrumb\";\r\nimport { Dialog, DialogTrigger, DialogContent } from \"@/components/ui/dialog\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Pencil, Trash, Plus } from \"lucide-react\";\r\n\r\nconst SlideShowTable = () => {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.get(\"/api/slideShow/getAll\");\r\n      if (response.data && Array.isArray(response.data)) {\r\n        setData(response.data);\r\n      } else if (response.data?.data && Array.isArray(response.data.data)) {\r\n        setData(response.data.data);\r\n      } else {\r\n        throw new Error(\"Invalid response format\");\r\n      }\r\n    } catch (error) {\r\n      toast({ variant: \"destructive\", title: \"Failed to fetch slideshow data.\" });\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await axios.delete(`/api/slideShow/delete?id=${id}`);\r\n      toast({ title: \"Image deleted successfully!\" });\r\n      fetchData();\r\n    } catch (error) {\r\n      toast({ variant: \"destructive\", title: \"Failed to delete image.\" });\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center min-h-screen px-6\">\r\n      <div className=\"w-full mb-4 flex justify-between items-center\">\r\n        <Breadcrumb>\r\n          <BreadcrumbItem>\r\n            <BreadcrumbLink onClick={() => navigate(\"/dashboard\")}>\r\n              Dashboard\r\n            </BreadcrumbLink>\r\n          </BreadcrumbItem>\r\n          <BreadcrumbItem>Slideshow</BreadcrumbItem>\r\n        </Breadcrumb>\r\n        <Button onClick={() => navigate(\"/slideShow-form\")}>\r\n          <Plus className=\"w-4 h-4 mr-2\" /> Add Image\r\n        </Button>\r\n      </div>\r\n      <Card className=\"w-full max-w-7xl shadow-lg rounded-xl p-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Slideshow Images</h2>\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead>Image</TableHead>\r\n              <TableHead>Title</TableHead>\r\n              <TableHead>Alt Name</TableHead>\r\n              <TableHead>Actions</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {loading ? (\r\n              <TableRow>\r\n                <TableCell colSpan={4} className=\"text-center\">\r\n                  Loading...\r\n                </TableCell>\r\n              </TableRow>\r\n            ) : (\r\n              data.map((item) => (\r\n                <TableRow key={item._id}>\r\n                  <TableCell>\r\n                    {item.image ? (\r\n                      <img\r\n                        src={`/api/logo/download/${item.image}`}\r\n                        alt=\"Slide\"\r\n                        className=\"w-20 h-12 rounded-lg shadow object-contain\"\r\n                      />\r\n                    ) : (\r\n                      \"No Image\"\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell>{item.title}</TableCell>\r\n                  <TableCell>{item.altText}</TableCell>\r\n                  <TableCell>\r\n                    <div className=\"flex gap-3\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"icon\"\r\n                        onClick={() => navigate(`/edit-image/${item._id}`)}\r\n                      >\r\n                        <Pencil className=\"w-4 h-4\" />\r\n                      </Button>\r\n                      <Dialog>\r\n                        <DialogTrigger asChild>\r\n                          <Button variant=\"destructive\" size=\"icon\">\r\n                            <Trash className=\"w-4 h-4\" />\r\n                          </Button>\r\n                        </DialogTrigger>\r\n                        <DialogContent>\r\n                          <p>Are you sure you want to delete this image?</p>\r\n                          <div className=\"flex justify-end gap-3 mt-4\">\r\n                            <Button variant=\"outline\">Cancel</Button>\r\n                            <Button variant=\"destructive\" onClick={() => handleDelete(item._id)}>\r\n                              Yes, Delete\r\n                            </Button>\r\n                          </div>\r\n                        </DialogContent>\r\n                      </Dialog>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SlideShowTable;"],"names":["SlideShowTable","data","setData","useState","loading","setLoading","navigate","useNavigate","useEffect","fetchData","async","response","axios","get","Array","isArray","Error","error","toast","variant","title","jsxs","className","children","Breadcrumb","jsx","BreadcrumbItem","BreadcrumbLink","onClick","Button","Plus","Card","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","colSpan","map","item","image","src","alt","altText","size","_id","Pencil","Dialog","DialogTrigger","asChild","Trash","DialogContent","id","delete","handleDelete"],"mappings":"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"}