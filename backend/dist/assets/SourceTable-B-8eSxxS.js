import{bf as e,bg as s,bh as r,j as a,l as d,m as l,n as t,bi as c,B as i,bj as o,bc as n,bk as u,D as x,k as m}from"./main-DeRxjK88.js";import{r as h}from"./vendor-router-Bu4EHm1B.js";import{F as j,a as p}from"./index-342DWr9W.js";import{b}from"./index.esm-C1PzQRG-.js";import{P as f}from"./plus-CYGv-ui8.js";import"./vendor-react-CI5aWZjI.js";import"./vendor-utils-BfOc9lHv.js";import"./iconBase-B68H5GHp.js";const g=({closeModal:n,sourceToEdit:u=null})=>{const{register:x,handleSubmit:m,reset:j}=b({defaultValues:u?{name:u.source}:{}}),[p,{isLoading:f,isSuccess:g,isError:y}]=e(),[N,{isLoading:S,isSuccess:w,isError:E}]=s(u?._id),{data:v,isLoading:k}=r(u?._id,{skip:!u?._id});h.useEffect((()=>{v&&j({source:v.data.source})}),[v,j]);return k?a.jsx("p",{children:"Loading source data..."}):a.jsxs(d,{children:[a.jsxs(l,{children:[a.jsx(t,{children:u?"Edit Source":"Add Source"}),a.jsx(c,{children:u?"Update the existing source.":"Fill out the form below to add a new source."})]}),a.jsxs("form",{onSubmit:m((async e=>{try{u?await N({id:u._id,...e}).unwrap():await p(e).unwrap(),j(),n(),alert(u?"Source updated successfully!":"Source created successfully!")}catch(s){alert(u?"Failed to update source.":"Failed to create source.")}})),className:"space-y-4 p-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium",children:"Name"}),a.jsx("input",{id:"name",...x("source",{required:"Name is required"}),className:"w-full px-4 py-2 border rounded",placeholder:"Enter source name"})]}),a.jsx(i,{type:"submit",className:"w-full bg-blue-500 text-white rounded hover:bg-blue-600",disabled:f||S,children:f||S?"Submitting...":u?"Update":"Submit"}),g&&!u&&a.jsx("p",{className:"text-green-500",children:"Source added successfully!"}),w&&u&&a.jsx("p",{className:"text-green-500",children:"Source updated successfully!"}),(y||E)&&a.jsxs("p",{className:"text-red-500",children:["Error ",u?"updating":"adding"," source."]})]}),a.jsx(o,{})]})},y=()=>{const{data:e,isLoading:r,isError:d}=n(),[l]=u(),[t]=s(),[c,o]=h.useState(null),[b,y]=h.useState(!1),N=e?.data,S=()=>{o(null),y(!1)};return r?a.jsx("div",{children:"Loading..."}):d?a.jsx("div",{children:"Error fetching sources."}):a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Source List"}),a.jsxs(x,{children:[a.jsx(m,{asChild:!0,children:a.jsxs(i,{className:"gap-2",children:[a.jsx(f,{className:"h-4 w-4"}),"Add Source"]})}),a.jsx(g,{closeModal:S})]})]}),a.jsxs("table",{className:"table-auto border-collapse border border-gray-300 w-1/3 text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Name"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),a.jsx("tbody",{children:N?.map((e=>a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.source}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[a.jsx(j,{className:"inline-block mx-2 cursor-pointer text-blue-500",title:"Edit",onClick:()=>(e=>{o(e),y(!0)})(e)}),a.jsx(p,{className:"inline-block mx-2 cursor-pointer text-red-500",title:"Delete",onClick:()=>(async e=>{try{await l(e).unwrap(),alert("Source deleted successfully!")}catch(s){alert("Failed to delete source.")}})(e._id)})]})]},e._id)))})]}),a.jsx(x,{open:b,onOpenChange:S,children:a.jsx(g,{closeModal:S,sourceToEdit:c})})]})};export{y as SourceTable};
//# sourceMappingURL=SourceTable-B-8eSxxS.js.map
