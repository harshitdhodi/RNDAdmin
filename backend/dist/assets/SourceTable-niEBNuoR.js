import{r as h,j as e}from"./react-DKICu8bO.js";import{aq as w,ar as S,as as D,i as C,j as F,k as v,at as L,B as f,au as M,an as k,av as U,D as b,h as _}from"./index-Bbo1zcj1.js";import{b as A,c as q}from"./react-icons-CD_zxaLW.js";import{c as B}from"./react-hook-form-BpvdonxZ.js";import{h as O}from"./lucide-D7hRWJEP.js";import"./classnames-Bv6oJzD9.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./react-router-B9QVkYva.js";import"./cookie--_YQFYBD.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./axios-DXsv3KKR.js";import"./@syncfusion-BIAkhmGL.js";const g=({closeModal:a,sourceToEdit:r=null})=>{const{register:u,handleSubmit:p,reset:t}=B({defaultValues:r?{name:r.source}:{}}),[o,{isLoading:c,isSuccess:n,isError:i}]=w(),[x,{isLoading:d,isSuccess:l,isError:s}]=S(r==null?void 0:r._id),{data:m,isLoading:y}=D(r==null?void 0:r._id,{skip:!(r!=null&&r._id)});h.useEffect(()=>{m&&t({source:m.data.source})},[m,t]);const N=async j=>{try{r?await x({id:r._id,...j}).unwrap():await o(j).unwrap(),t(),a(),alert(r?"Source updated successfully!":"Source created successfully!")}catch{alert(r?"Failed to update source.":"Failed to create source.")}};return y?e.jsx("p",{children:"Loading source data..."}):e.jsxs(C,{children:[e.jsxs(F,{children:[e.jsx(v,{children:r?"Edit Source":"Add Source"}),e.jsx(L,{children:r?"Update the existing source.":"Fill out the form below to add a new source."})]}),e.jsxs("form",{onSubmit:p(N),className:"space-y-4 p-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium",children:"Name"}),e.jsx("input",{id:"name",...u("source",{required:"Name is required"}),className:"w-full px-4 py-2 border rounded",placeholder:"Enter source name"})]}),e.jsx(f,{type:"submit",className:"w-full bg-blue-500 text-white rounded hover:bg-blue-600",disabled:c||d,children:c||d?"Submitting...":r?"Update":"Submit"}),n&&!r&&e.jsx("p",{className:"text-green-500",children:"Source added successfully!"}),l&&r&&e.jsx("p",{className:"text-green-500",children:"Source updated successfully!"}),(i||s)&&e.jsxs("p",{className:"text-red-500",children:["Error ",r?"updating":"adding"," source."]})]}),e.jsx(M,{})]})},be=()=>{const{data:a,isLoading:r,isError:u}=k(),[p]=U();S();const[t,o]=h.useState(null),[c,n]=h.useState(!1),i=a==null?void 0:a.data,x=async s=>{try{await p(s).unwrap(),alert("Source deleted successfully!")}catch{alert("Failed to delete source.")}},d=s=>{o(s),n(!0)},l=()=>{o(null),n(!1)};return r?e.jsx("div",{children:"Loading..."}):u?e.jsx("div",{children:"Error fetching sources."}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Source List"}),e.jsxs(b,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(f,{className:"gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Add Source"]})}),e.jsx(g,{closeModal:l})]})]}),e.jsxs("table",{className:"table-auto border-collapse border border-gray-300 w-1/3 text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:i==null?void 0:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:s.source}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[e.jsx(A,{className:"inline-block mx-2 cursor-pointer text-blue-500",title:"Edit",onClick:()=>d(s)}),e.jsx(q,{className:"inline-block mx-2 cursor-pointer text-red-500",title:"Delete",onClick:()=>x(s._id)})]})]},s._id))})]}),e.jsx(b,{open:c,onOpenChange:l,children:e.jsx(g,{closeModal:l,sourceToEdit:t})})]})};export{be as SourceTable};
