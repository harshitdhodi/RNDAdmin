import{r as i,a as b,f as I,c as m,j as e,L as p,R as g}from"./index-AvdAxjwi-1762224740916.js";import{F as s}from"./index-CDA8Z_06-1762224740916.js";import{B as c}from"./Breadcrumb-DF-ylTer-1762224740916.js";import{S as h}from"./index-BAKTKeu_-1762224740916.js";import{I as n}from"./index-Bc5-c7H9-1762224740916.js";import{B as E}from"./index-BNjCHprG-1762224740916.js";import{s as u}from"./index-CEgoZqa6-1762224740916.js";import"./toArray-Bbgf03cS-1762224740916.js";import"./CheckCircleFilled-BHjkGU_u-1762224740916.js";import"./ExclamationCircleFilled-B0HZnULt-1762224740916.js";import"./dropdown--TBX5BBg-1762224740916.js";import"./EllipsisOutlined-DJfZCtUK-1762224740916.js";import"./TextArea-D4VAQdT0-1762224740916.js";import"./CheckOutlined-BAUQKw9U-1762224740916.js";import"./InfoCircleFilled-DioEOYse-1762224740916.js";const{Option:o}=h,V=()=>{const[l]=s.useForm(),[x,f]=i.useState([]),[j,y]=i.useState(!0),{id:r}=b(),M=I();i.useEffect(()=>{(async()=>{try{const a=await m.get("/api/menulist/get-menu");a.data&&Array.isArray(a.data.data)?f(a.data.data):console.error("Unexpected API response:",a.data)}catch(a){console.error("Error fetching menu list:",a)}finally{y(!1)}})()},[]),i.useEffect(()=>{r&&m.get(`/api/meta/get-meta/${r}`).then(t=>{if(t.data&&t.data.success){const a=t.data.data;l.setFieldsValue({pageName:a.pageName,pageSlug:a.pageSlug,metaTitle:a.metaTitle,metaDescription:a.metaDescription,metaKeyword:a.metaKeyword})}}).catch(t=>console.error("Error fetching meta data:",t))},[r,l]);const w=t=>t.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),N=t=>{const a=w(t);l.setFieldsValue({pageSlug:a})},S=async t=>{try{r?(await m.put(`/api/meta/update-meta/${r}`,t),u.success("Meta data updated successfully!")):(await m.post("/api/meta/add-meta",t),u.success("Meta data added successfully!"),l.resetFields()),M("/meta-table")}catch(a){u.error("Failed to save meta data."),console.error("Error:",a)}};return e.jsxs("div",{children:[e.jsxs(c,{className:"mb-5",children:[e.jsx(c.Item,{children:e.jsx(p,{to:"/dashboard",children:"Dashboard"})}),e.jsx(c.Item,{children:e.jsx(p,{to:"/meta-table",children:"Meta List"})}),e.jsx(c.Item,{children:r?"Edit Meta":"Add Meta"})]}),e.jsxs(s,{form:l,layout:"vertical",onFinish:S,className:"space-y-4",children:[e.jsx(s.Item,{name:"pageName",label:"Page Name",rules:[{required:!0,message:"Please select a page"}],children:e.jsxs(h,{placeholder:"Select a page",loading:j,onChange:N,className:"w-full",children:[e.jsx(o,{value:"Static Page",children:"Static Page"}),x.map(t=>e.jsxs(g.Fragment,{children:[e.jsx(o,{value:t.parent.name,className:"font-semibold",children:t.parent.name}),t.children.map(a=>e.jsxs(g.Fragment,{children:[e.jsxs(o,{value:a.name,className:"pl-5",children:["├── ",a.name]}),a.subChildren.map(d=>e.jsxs(o,{value:d.name,className:"pl-10",children:["├──── ",d.name]},d._id))]},a._id))]},t._id))]})}),e.jsx(s.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Slug is required"}],children:e.jsx(n,{placeholder:"Auto-generated slug",className:"w-full"})}),e.jsx(s.Item,{name:"metaTitle",label:"Meta Title",rules:[{required:!0,message:"Please enter meta title"}],children:e.jsx(n,{placeholder:"Enter Meta Title",className:"w-full"})}),e.jsx(s.Item,{name:"metaDescription",label:"Meta Description",rules:[{required:!0,message:"Please enter meta description"}],children:e.jsx(n.TextArea,{placeholder:"Enter Meta Description",rows:4,className:"w-full"})}),e.jsx(s.Item,{name:"metaKeyword",label:"Meta Keywords",rules:[{required:!0,message:"Please enter meta keywords"}],children:e.jsx(n,{placeholder:"Enter Meta Keywords",className:"w-full"})}),e.jsx(s.Item,{children:e.jsx("div",{className:"flex gap-4",children:e.jsx(E,{type:"primary",htmlType:"submit",children:r?"Update Meta":"Add Meta"})})})]})]})};export{V as default};
