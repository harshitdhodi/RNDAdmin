{"version":3,"file":"StaticMetaForm-BgmX6Kqa.js","sources":["../../src/websiteBackend/staticMetaKeyword/StaticMetaForm.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\r\nimport { Breadcrumb, BreadcrumbItem, BreadcrumbLink } from \"@/components/ui/breadcrumb\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst StaticMetaForm = () => {\r\n  const [menuList, setMenuList] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const form = useForm();\r\n\r\n  useEffect(() => {\r\n    const fetchMenus = async () => {\r\n      try {\r\n        const response = await axios.get(\"/api/menulist/get-menu\");\r\n        if (response.data && Array.isArray(response.data.data)) {\r\n          setMenuList(response.data.data);\r\n        } else {\r\n          console.error(\"Unexpected API response:\", response.data);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching menu list:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchMenus();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      axios.get(`/api/meta/get-meta/${id}`).then((response) => {\r\n        if (response.data?.success) {\r\n          form.reset(response.data.data);\r\n        }\r\n      }).catch(error => console.error(\"Error fetching meta data:\", error));\r\n    }\r\n  }, [id, form]);\r\n\r\n  const generateSlug = (pageName) => {\r\n    return pageName.toLowerCase().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\");\r\n  };\r\n\r\n  const handlePageChange = (value) => {\r\n    form.setValue(\"pageSlug\", generateSlug(value));\r\n  };\r\n\r\n  const onSubmit = async (values) => {\r\n    try {\r\n      if (id) {\r\n        await axios.put(`/api/meta/update-meta/${id}`, values);\r\n        toast.success(\"Meta data updated successfully!\");\r\n      } else {\r\n        await axios.post(\"/api/meta/add-meta\", values);\r\n        toast.success(\"Meta data added successfully!\");\r\n        form.reset();\r\n      }\r\n      navigate(\"/meta-table\");\r\n    } catch (error) {\r\n      toast.error(\"Failed to save meta data.\");\r\n      console.error(\"Error:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Breadcrumb>\r\n        <BreadcrumbItem>\r\n          <BreadcrumbLink as={Link} to=\"/dashboard\">Dashboard</BreadcrumbLink>\r\n        </BreadcrumbItem>\r\n        <BreadcrumbItem>\r\n          <BreadcrumbLink as={Link} to=\"/meta-table\">Meta List</BreadcrumbLink>\r\n        </BreadcrumbItem>\r\n        <BreadcrumbItem>{id ? \"Edit Meta\" : \"Add Meta\"}</BreadcrumbItem>\r\n      </Breadcrumb>\r\n\r\n      <Form {...form} onSubmit={form.handleSubmit(onSubmit)}>\r\n        <FormField control={form.control} name=\"pageName\" rules={{ required: \"Please select a page\" }}>\r\n          <FormItem>\r\n            <FormLabel>Page Name</FormLabel>\r\n            <Select onValueChange={handlePageChange} disabled={loading}>\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"Select a page\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"Static Page\">Static Page</SelectItem>\r\n                {menuList.map(menu => (\r\n                  <React.Fragment key={menu._id}>\r\n                    <SelectItem value={menu.parent.name}>{menu.parent.name}</SelectItem>\r\n                    {menu.children.map(child => (\r\n                      <React.Fragment key={child._id}>\r\n                        <SelectItem value={child.name}> ├── {child.name}</SelectItem>\r\n                        {child.subChildren.map(subChild => (\r\n                          <SelectItem key={subChild._id} value={subChild.name}> ├──── {subChild.name}</SelectItem>\r\n                        ))}\r\n                      </React.Fragment>\r\n                    ))}\r\n                  </React.Fragment>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n            <FormMessage />\r\n          </FormItem>\r\n        </FormField>\r\n\r\n        <FormField control={form.control} name=\"pageSlug\" rules={{ required: \"Slug is required\" }}>\r\n          <FormItem>\r\n            <FormLabel>Page Slug</FormLabel>\r\n            <FormControl>\r\n              <Input placeholder=\"Auto-generated slug\" />\r\n            </FormControl>\r\n            <FormMessage />\r\n          </FormItem>\r\n        </FormField>\r\n\r\n        <FormField control={form.control} name=\"metaTitle\" rules={{ required: \"Please enter meta title\" }}>\r\n          <FormItem>\r\n            <FormLabel>Meta Title</FormLabel>\r\n            <FormControl>\r\n              <Input placeholder=\"Enter Meta Title\" />\r\n            </FormControl>\r\n            <FormMessage />\r\n          </FormItem>\r\n        </FormField>\r\n\r\n        <FormField control={form.control} name=\"metaDescription\" rules={{ required: \"Please enter meta description\" }}>\r\n          <FormItem>\r\n            <FormLabel>Meta Description</FormLabel>\r\n            <FormControl>\r\n              <Textarea placeholder=\"Enter Meta Description\" rows={4} />\r\n            </FormControl>\r\n            <FormMessage />\r\n          </FormItem>\r\n        </FormField>\r\n\r\n        <FormField control={form.control} name=\"metaKeyword\" rules={{ required: \"Please enter meta keywords\" }}>\r\n          <FormItem>\r\n            <FormLabel>Meta Keywords</FormLabel>\r\n            <FormControl>\r\n              <Input placeholder=\"Enter Meta Keywords\" />\r\n            </FormControl>\r\n            <FormMessage />\r\n          </FormItem>\r\n        </FormField>\r\n\r\n        <Button type=\"submit\">{id ? \"Update Meta\" : \"Add Meta\"}</Button>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StaticMetaForm;"],"names":["StaticMetaForm","menuList","setMenuList","useState","loading","setLoading","id","useParams","navigate","useNavigate","form","useForm","useEffect","async","response","axios","get","data","Array","isArray","error","fetchMenus","then","success","reset","catch","children","jsxs","Breadcrumb","jsx","BreadcrumbItem","BreadcrumbLink","as","Link","to","Form","onSubmit","handleSubmit","values","put","toast","post","FormField","control","name","rules","required","FormItem","FormLabel","Select","onValueChange","value","setValue","toLowerCase","replace","disabled","SelectTrigger","SelectValue","placeholder","SelectContent","SelectItem","map","menu","React","Fragment","parent","child","subChildren","subChild","_id","FormMessage","FormControl","Input","Textarea","rows","Button","type"],"mappings":"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"}