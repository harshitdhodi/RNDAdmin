import{d as e,e as t,S as a,f as s,B as r,s as i}from"./antd-UGvrC4Tl.js";import{r as o,j as l,a as m}from"./react-BfBsRgn0.js";import{a as c}from"./axios-BoylL8Pu.js";import{b as d,a as p,L as n}from"./react-router-DUJjWq5j.js";import"./@ant-design-DttPmOfw.js";import"./rc-util-CQtTJgfq.js";import"./@babel-BfC2A0EA.js";import"./react-is-BaRe0U6l.js";import"./react-dom-DwrudmHt.js";import"./classnames-C3ovBj6j.js";import"./scheduler-BFk34ZWe.js";import"./@emotion-Czw0TW3x.js";import"./stylis-IVPcsLSI.js";import"./@ctrl-B2IeE8ye.js";import"./rc-motion-Cs3GDHoo.js";import"./@rc-component-BRPzBFoO.js";import"./rc-resize-observer-pLBfxqzk.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./ant-design-icons-DoIDTG1a.js";import"./rc-dialog-BZYed8xW.js";import"./rc-table-Cyp0j0g2.js";import"./rc-virtual-list-DeG6VQAs.js";import"./rc-tree-Ct99pdeQ.js";import"./rc-checkbox-bMXfL26q.js";import"./rc-pagination-CiqGXVR2.js";import"./rc-select-j7aSw-6E.js";import"./rc-overflow-CN2VNozo.js";import"./throttle-debounce-w9OM8Bxz.js";import"./rc-input-ByOKN0-r.js";import"./rc-tooltip-C0SbzfR_.js";import"./rc-notification-D3ebMW8F.js";import"./rc-image-CGWTMT4q.js";import"./rc-textarea-DZAOw23I.js";import"./copy-to-clipboard-Bgp_G7Oq.js";import"./toggle-selection-DUsDmMsR.js";import"./rc-upload-ClZE7meS.js";import"./rc-progress-bbq4uvV3.js";import"./rc-dropdown-DRLVnlhP.js";import"./rc-menu-CY_ke4Oh.js";import"./rc-field-form-C7q369ye.js";import"./scroll-into-view-if-needed-cNB78-hM.js";import"./compute-scroll-into-view-CJmtT4lq.js";import"./rc-picker-B5UDvhgZ.js";import"./rc-tabs-DirvITx8.js";import"./cookie-BUTH-fPQ.js";const{Option:j}=a,u=()=>{const[u]=e.useForm(),[g,h]=o.useState([]),[x,y]=o.useState(!0),{id:f}=d(),b=p();o.useEffect((()=>{(async()=>{try{const e=await c.get("/api/menulist/get-menu");e.data&&Array.isArray(e.data.data)&&h(e.data.data)}catch(e){}finally{y(!1)}})()}),[]),o.useEffect((()=>{f&&c.get(`/api/meta/get-meta/${f}`).then((e=>{if(e.data&&e.data.success){const t=e.data.data;u.setFieldsValue({pageName:t.pageName,pageSlug:t.pageSlug,metaTitle:t.metaTitle,metaDescription:t.metaDescription,metaKeyword:t.metaKeyword})}})).catch((e=>{}))}),[f,u]);return l.jsxs("div",{children:[l.jsxs(t,{style:{marginBottom:20},children:[l.jsx(t.Item,{children:l.jsx(n,{to:"/dashboard",children:"Dashboard"})}),l.jsx(t.Item,{children:l.jsx(n,{to:"/meta-table",children:"Meta List"})}),l.jsx(t.Item,{children:f?"Edit Meta":"Add Meta"})]}),l.jsxs(e,{form:u,layout:"vertical",onFinish:async e=>{try{f?(await c.put(`/api/meta/update-meta/${f}`,e),i.success("Meta data updated successfully!")):(await c.post("/api/meta/add-meta",e),i.success("Meta data added successfully!"),u.resetFields()),b("/meta-table")}catch(t){i.error("Failed to save meta data.")}},children:[l.jsx(e.Item,{name:"pageName",label:"Page Name",rules:[{required:!0,message:"Please select a page"}],children:l.jsxs(a,{placeholder:"Select a page",loading:x,onChange:e=>{const t=e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");u.setFieldsValue({pageSlug:t})},children:[l.jsx(j,{value:"Static Page",children:"Static Page"}),g.map((e=>l.jsxs(m.Fragment,{children:[l.jsx(j,{value:e.parent.name,style:{fontWeight:"bold"},children:e.parent.name}),e.children.map((e=>l.jsxs(m.Fragment,{children:[l.jsxs(j,{value:e.name,style:{paddingLeft:20},children:["├── ",e.name]}),e.subChildren.map((e=>l.jsxs(j,{value:e.name,style:{paddingLeft:40},children:["├──── ",e.name]},e._id)))]},e._id)))]},e._id)))]})}),l.jsx(e.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Slug is required"}],children:l.jsx(s,{placeholder:"Auto-generated slug"})}),l.jsx(e.Item,{name:"metaTitle",label:"Meta Title",rules:[{required:!0,message:"Please enter meta title"}],children:l.jsx(s,{placeholder:"Enter Meta Title"})}),l.jsx(e.Item,{name:"metaDescription",label:"Meta Description",rules:[{required:!0,message:"Please enter meta description"}],children:l.jsx(s.TextArea,{placeholder:"Enter Meta Description",rows:4})}),l.jsx(e.Item,{name:"metaKeyword",label:"Meta Keywords",rules:[{required:!0,message:"Please enter meta keywords"}],children:l.jsx(s,{placeholder:"Enter Meta Keywords"})}),l.jsx(e.Item,{children:l.jsx(r,{type:"primary",htmlType:"submit",children:f?"Update Meta":"Add Meta"})})]})]})};export{u as default};
