import{d as r,e as o,S as h,f as m,B as E,s as c}from"./antd-mtWlDmqY.js";import{r as l,j as e,a as u}from"./react-DKICu8bO.js";import{a as n}from"./axios-DXsv3KKR.js";import{b as I,a as P,L as g}from"./react-router-B9QVkYva.js";import"./@ant-design-jkdqJqTn.js";import"./rc-util-C9ihiQ8l.js";import"./@babel-C_xKm-6V.js";import"./react-is-NfUKNnIv.js";import"./react-dom-BBS6HuAW.js";import"./classnames-Bv6oJzD9.js";import"./scheduler-CKyTKYc2.js";import"./@emotion-CW87jbl0.js";import"./stylis-OW4gUFyn.js";import"./@ctrl-DOFZgDuz.js";import"./rc-motion-D0k58WYE.js";import"./@rc-component-DJY3KRXL.js";import"./rc-resize-observer-h7CJ_t66.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./ant-design-icons-CNhZ1eT-.js";import"./rc-dialog-CfVZmZCG.js";import"./rc-table-BJAsEMDh.js";import"./rc-virtual-list-OMMR-gr8.js";import"./rc-tree-aGCJh_41.js";import"./rc-checkbox-nRYcjTPl.js";import"./rc-pagination-ZKXeAm0h.js";import"./rc-select-RmeC3WgB.js";import"./rc-overflow-DEivB5rv.js";import"./throttle-debounce-CUWDS_la.js";import"./rc-input-CIUXRVU8.js";import"./rc-tooltip-Oavn6yow.js";import"./rc-notification-0md6QYDj.js";import"./rc-image-ClDwiN-j.js";import"./rc-textarea-CijmdGy3.js";import"./copy-to-clipboard-0rP7DRqq.js";import"./toggle-selection-DGa8lynz.js";import"./rc-upload-DlrdHvh1.js";import"./rc-progress-BVn0ZmF4.js";import"./rc-dropdown-D4AwxsUk.js";import"./rc-menu-MHhKtfoG.js";import"./rc-field-form-CVOtFEQA.js";import"./scroll-into-view-if-needed-BZeNfFF0.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./rc-picker-D0kXf0IF.js";import"./rc-tabs-XmQY-w_1.js";import"./cookie--_YQFYBD.js";const{Option:p}=h,fe=()=>{const[i]=r.useForm(),[x,j]=l.useState([]),[f,y]=l.useState(!0),{id:s}=I(),M=P();l.useEffect(()=>{(async()=>{try{const t=await n.get("/api/menulist/get-menu");t.data&&Array.isArray(t.data.data)?j(t.data.data):console.error("Unexpected API response:",t.data)}catch(t){console.error("Error fetching menu list:",t)}finally{y(!1)}})()},[]),l.useEffect(()=>{s&&n.get(`/api/meta/get-meta/${s}`).then(a=>{if(a.data&&a.data.success){const t=a.data.data;i.setFieldsValue({pageName:t.pageName,pageSlug:t.pageSlug,metaTitle:t.metaTitle,metaDescription:t.metaDescription,metaKeyword:t.metaKeyword})}}).catch(a=>console.error("Error fetching meta data:",a))},[s,i]);const S=a=>a.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),b=a=>{const t=S(a);i.setFieldsValue({pageSlug:t})},w=async a=>{try{s?(await n.put(`/api/meta/update-meta/${s}`,a),c.success("Meta data updated successfully!")):(await n.post("/api/meta/add-meta",a),c.success("Meta data added successfully!"),i.resetFields()),M("/meta-table")}catch(t){c.error("Failed to save meta data."),console.error("Error:",t)}};return e.jsxs("div",{children:[e.jsxs(o,{style:{marginBottom:20},children:[e.jsx(o.Item,{children:e.jsx(g,{to:"/dashboard",children:"Dashboard"})}),e.jsx(o.Item,{children:e.jsx(g,{to:"/meta-table",children:"Meta List"})}),e.jsx(o.Item,{children:s?"Edit Meta":"Add Meta"})]}),e.jsxs(r,{form:i,layout:"vertical",onFinish:w,children:[e.jsx(r.Item,{name:"pageName",label:"Page Name",rules:[{required:!0,message:"Please select a page"}],children:e.jsxs(h,{placeholder:"Select a page",loading:f,onChange:b,children:[e.jsx(p,{value:"Static Page",children:"Static Page"}),x.map(a=>e.jsxs(u.Fragment,{children:[e.jsx(p,{value:a.parent.name,style:{fontWeight:"bold"},children:a.parent.name}),a.children.map(t=>e.jsxs(u.Fragment,{children:[e.jsxs(p,{value:t.name,style:{paddingLeft:20},children:["├── ",t.name]}),t.subChildren.map(d=>e.jsxs(p,{value:d.name,style:{paddingLeft:40},children:["├──── ",d.name]},d._id))]},t._id))]},a._id))]})}),e.jsx(r.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Slug is required"}],children:e.jsx(m,{placeholder:"Auto-generated slug"})}),e.jsx(r.Item,{name:"metaTitle",label:"Meta Title",rules:[{required:!0,message:"Please enter meta title"}],children:e.jsx(m,{placeholder:"Enter Meta Title"})}),e.jsx(r.Item,{name:"metaDescription",label:"Meta Description",rules:[{required:!0,message:"Please enter meta description"}],children:e.jsx(m.TextArea,{placeholder:"Enter Meta Description",rows:4})}),e.jsx(r.Item,{name:"metaKeyword",label:"Meta Keywords",rules:[{required:!0,message:"Please enter meta keywords"}],children:e.jsx(m,{placeholder:"Enter Meta Keywords"})}),e.jsx(r.Item,{children:e.jsx(E,{type:"primary",htmlType:"submit",children:s?"Update Meta":"Add Meta"})})]})]})};export{fe as default};
