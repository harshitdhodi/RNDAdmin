import{b as l,j as e}from"./main-B5S868XV.js";import{c as o,i as w,f as E,L as u,R as g}from"./vendor-CxfDVdnA.js";import{F as r}from"./index-5D7tGdC1.js";import{B as n}from"./Breadcrumb-dG3P6DlV.js";import{S as h}from"./index-BPgn9bJi.js";import{I as m}from"./index-CRTB1A7p.js";import{B as F}from"./index-BYtgbzGG.js";import{s as p}from"./index-DFovcMEq.js";import"./toArray-Bbgf03cS.js";import"./CheckCircleFilled-CljqfpQt.js";import"./ExclamationCircleFilled-Be2YqnNu.js";import"./dropdown-ttkTMcA6.js";import"./EllipsisOutlined-6allWJRk.js";import"./TextArea-DlzOlFOd.js";import"./CheckOutlined-B2I8pZ-f.js";import"./InfoCircleFilled-Dj_rmDLl.js";const{Option:d}=h,$=()=>{const[i]=r.useForm(),[x,f]=o.useState([]),[j,y]=o.useState(!0),{id:s}=w(),M=E();o.useEffect(()=>{(async()=>{try{const t=await l.get("/api/menulist/get-menu");t.data&&Array.isArray(t.data.data)?f(t.data.data):console.error("Unexpected API response:",t.data)}catch(t){console.error("Error fetching menu list:",t)}finally{y(!1)}})()},[]),o.useEffect(()=>{s&&l.get(`/api/meta/get-meta/${s}`).then(a=>{if(a.data&&a.data.success){const t=a.data.data;i.setFieldsValue({pageName:t.pageName,pageSlug:t.pageSlug,metaTitle:t.metaTitle,metaDescription:t.metaDescription,metaKeyword:t.metaKeyword})}}).catch(a=>console.error("Error fetching meta data:",a))},[s,i]);const S=a=>a.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),b=a=>{const t=S(a);i.setFieldsValue({pageSlug:t})},I=async a=>{try{s?(await l.put(`/api/meta/update-meta/${s}`,a),p.success("Meta data updated successfully!")):(await l.post("/api/meta/add-meta",a),p.success("Meta data added successfully!"),i.resetFields()),M("/meta-table")}catch(t){p.error("Failed to save meta data."),console.error("Error:",t)}};return e.jsxs("div",{children:[e.jsxs(n,{style:{marginBottom:20},children:[e.jsx(n.Item,{children:e.jsx(u,{to:"/dashboard",children:"Dashboard"})}),e.jsx(n.Item,{children:e.jsx(u,{to:"/meta-table",children:"Meta List"})}),e.jsx(n.Item,{children:s?"Edit Meta":"Add Meta"})]}),e.jsxs(r,{form:i,layout:"vertical",onFinish:I,children:[e.jsx(r.Item,{name:"pageName",label:"Page Name",rules:[{required:!0,message:"Please select a page"}],children:e.jsxs(h,{placeholder:"Select a page",loading:j,onChange:b,children:[e.jsx(d,{value:"Static Page",children:"Static Page"}),x.map(a=>e.jsxs(g.Fragment,{children:[e.jsx(d,{value:a.parent.name,style:{fontWeight:"bold"},children:a.parent.name}),a.children.map(t=>e.jsxs(g.Fragment,{children:[e.jsxs(d,{value:t.name,style:{paddingLeft:20},children:["├── ",t.name]}),t.subChildren.map(c=>e.jsxs(d,{value:c.name,style:{paddingLeft:40},children:["├──── ",c.name]},c._id))]},t._id))]},a._id))]})}),e.jsx(r.Item,{name:"pageSlug",label:"Page Slug",rules:[{required:!0,message:"Slug is required"}],children:e.jsx(m,{placeholder:"Auto-generated slug"})}),e.jsx(r.Item,{name:"metaTitle",label:"Meta Title",rules:[{required:!0,message:"Please enter meta title"}],children:e.jsx(m,{placeholder:"Enter Meta Title"})}),e.jsx(r.Item,{name:"metaDescription",label:"Meta Description",rules:[{required:!0,message:"Please enter meta description"}],children:e.jsx(m.TextArea,{placeholder:"Enter Meta Description",rows:4})}),e.jsx(r.Item,{name:"metaKeyword",label:"Meta Keywords",rules:[{required:!0,message:"Please enter meta keywords"}],children:e.jsx(m,{placeholder:"Enter Meta Keywords"})}),e.jsx(r.Item,{children:e.jsx(F,{type:"primary",htmlType:"submit",children:s?"Update Meta":"Add Meta"})})]})]})};export{$ as default};
