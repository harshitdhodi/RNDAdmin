import{bf as s,bg as e,bh as t,j as a,m as r,n as l,o as d,bc as i,B as c,bd as o,b4 as n,bi as u,D as m,l as x,S as h}from"./main-BQqr2_19.js";import{r as j}from"./vendor-router-DoRotgOs.js";import{b}from"./index.esm-CSDyVtrl.js";import{P as p}from"./plus-C_FNkNo2.js";import{T as f}from"./trash-CQ6G8Kfo.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";const y=({closeModal:n,statusToEdit:u})=>{const{register:m,handleSubmit:x,reset:h,formState:{errors:p}}=b(),{data:f}=s(u?._id,{skip:!u}),[y,{isLoading:g,isSuccess:N,isError:S}]=e(),[w,{isLoading:E,isSuccess:v,isError:k}]=t(u?._id);return j.useEffect((()=>{(N||v)&&n()}),[N,v,n]),j.useEffect((()=>{const s=f||u;s&&h({status:s.status})}),[f,u,h]),a.jsxs(r,{children:[a.jsxs(l,{children:[a.jsx(d,{children:u?"Edit Status":"Add Status"}),a.jsx(i,{children:u?"Edit the status details below.":"Fill out the form below to create a new status."})]}),a.jsxs("form",{onSubmit:x((async s=>{try{u?await w({id:u._id,...s}).unwrap():await y(s).unwrap(),h()}catch(e){}})),className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium mb-2",children:"Status"}),a.jsx("input",{id:"status",...m("status",{required:"Status is required",minLength:{value:2,message:"Status must be at least 2 characters"}}),className:"w-full px-3 py-2 border rounded "+(p.status?"border-red-500":""),placeholder:"Enter status name"}),p.status&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.status.message})]}),a.jsx(c,{type:"submit",className:"w-full",disabled:g||E,children:g||E?"Submitting...":u?"Update":"Submit"}),(N||v)&&a.jsx("p",{className:"text-green-500",children:u?"Status updated successfully!":"Status added successfully!"}),(S||k)&&a.jsx("p",{className:"text-red-500",children:"Error processing status."})]}),a.jsx(o,{})]})},g=()=>{const{data:s,isLoading:e,isError:t}=n(),[r]=u(),[l,d]=j.useState(null),i=s?.data,o=()=>{d(null)};return e?a.jsx("div",{children:"Loading..."}):t?a.jsx("div",{children:"Error fetching statuses."}):a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Status List"}),a.jsxs(m,{children:[a.jsx(x,{asChild:!0,children:a.jsxs(c,{className:"gap-2",children:[a.jsx(p,{className:"h-4 w-4"}),"Add Status"]})}),a.jsx(y,{closeModal:o})]})]}),a.jsxs("table",{className:"table-auto border-collapse border border-gray-300 w-1/2 text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Name"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),a.jsx("tbody",{children:i?.map((s=>a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:s.status}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[a.jsx(h,{className:"inline-block mx-2 cursor-pointer text-blue-500",title:"Edit",onClick:()=>(s=>{d(s)})(s)}),a.jsx(f,{className:"inline-block mx-2 cursor-pointer text-red-500",title:"Delete",onClick:()=>(async s=>{try{await r(s).unwrap(),alert("Status deleted successfully!")}catch(e){alert("Failed to delete status.")}})(s._id)})]})]},s._id)))})]}),l&&a.jsx(m,{open:!0,onOpenChange:o,children:a.jsx(y,{closeModal:o,statusToEdit:l})})]})};export{g as StatusTable};
//# sourceMappingURL=StatusTable-BdkiuIpe.js.map
