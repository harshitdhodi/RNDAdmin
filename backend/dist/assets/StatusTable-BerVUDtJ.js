import{r as s,j as e}from"./react-BfBsRgn0.js";import{b as t,c as r}from"./react-icons-Dq16fPb9.js";import{ax as a,ay as i,az as l,i as o,j as d,k as c,au as n,B as m,av as u,am as j,aA as x,D as p,h}from"./index-mCSb4W1J.js";import{c as b}from"./react-hook-form-Dn0Bw783.js";import{h as f}from"./lucide-D6BDVLHE.js";import"./classnames-C3ovBj6j.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./react-router-DUJjWq5j.js";import"./cookie-BUTH-fPQ.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./axios-BoylL8Pu.js";const y=({closeModal:t,statusToEdit:r})=>{const{register:j,handleSubmit:x,reset:p,formState:{errors:h}}=b(),{data:f}=a(null==r?void 0:r._id,{skip:!r}),[y,{isLoading:g,isSuccess:N,isError:S}]=i(),[w,{isLoading:v,isSuccess:k,isError:E}]=l(null==r?void 0:r._id);return s.useEffect((()=>{(N||k)&&t()}),[N,k,t]),s.useEffect((()=>{const s=f||r;s&&p({status:s.status})}),[f,r,p]),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(c,{children:r?"Edit Status":"Add Status"}),e.jsx(n,{children:r?"Edit the status details below.":"Fill out the form below to create a new status."})]}),e.jsxs("form",{onSubmit:x((async s=>{try{r?await w({id:r._id,...s}).unwrap():await y(s).unwrap(),p()}catch(e){}})),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium mb-2",children:"Status"}),e.jsx("input",{id:"status",...j("status",{required:"Status is required",minLength:{value:2,message:"Status must be at least 2 characters"}}),className:"w-full px-3 py-2 border rounded "+(h.status?"border-red-500":""),placeholder:"Enter status name"}),h.status&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.status.message})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:g||v,children:g||v?"Submitting...":r?"Update":"Submit"}),(N||k)&&e.jsx("p",{className:"text-green-500",children:r?"Status updated successfully!":"Status added successfully!"}),(S||E)&&e.jsx("p",{className:"text-red-500",children:"Error processing status."})]}),e.jsx(u,{})]})},g=()=>{const{data:a,isLoading:i,isError:l}=j(),[o]=x(),[d,c]=s.useState(null),n=null==a?void 0:a.data,u=()=>{c(null)};return i?e.jsx("div",{children:"Loading..."}):l?e.jsx("div",{children:"Error fetching statuses."}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Status List"}),e.jsxs(p,{children:[e.jsx(h,{asChild:!0,children:e.jsxs(m,{className:"gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),"Add Status"]})}),e.jsx(y,{closeModal:u})]})]}),e.jsxs("table",{className:"table-auto border-collapse border border-gray-300 w-1/2 text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:null==n?void 0:n.map((s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:s.status}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[e.jsx(t,{className:"inline-block mx-2 cursor-pointer text-blue-500",title:"Edit",onClick:()=>(s=>{c(s)})(s)}),e.jsx(r,{className:"inline-block mx-2 cursor-pointer text-red-500",title:"Delete",onClick:()=>(async s=>{try{await o(s).unwrap(),alert("Status deleted successfully!")}catch(e){alert("Failed to delete status.")}})(s._id)})]})]},s._id)))})]}),d&&e.jsx(p,{open:!0,onOpenChange:u,children:e.jsx(y,{closeModal:u,statusToEdit:d})})]})};export{g as StatusTable};
