import{j as e,D as s,l as a,m as n,n as i,L as t,I as r,B as l,A as d,K as c,M as m,N as o}from"./main-DeRxjK88.js";import{r as h}from"./vendor-router-Bu4EHm1B.js";import{T as j,a as x,b as p,c as u,d as N,e as g}from"./table-Cj_y_WH9.js";import{P as f}from"./pencil-BIaIdPAC.js";import{T as v}from"./trash-2-B_xsoivv.js";import{C as w}from"./circle-plus-D30cqz7L.js";import"./vendor-react-CI5aWZjI.js";import"./vendor-utils-BfOc9lHv.js";function b({isOpen:d,onOpenChange:c,unitName:m,setUnitName:o,handleSubmit:h,title:j}){return e.jsx(s,{open:d,onOpenChange:c,children:e.jsxs(a,{children:[e.jsx(n,{children:e.jsx(i,{children:j})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"name",children:"Unit Name"}),e.jsx(r,{id:"name",value:m,onChange:e=>o(e.target.value),placeholder:"Enter unit name"})]}),e.jsx(l,{onClick:h,children:j})]})]})})}function C({units:s,openEditDialog:a,handleDelete:n}){return e.jsx("div",{className:"w-full max-w-4xl border shadow-md",children:e.jsxs(j,{children:[e.jsx(x,{children:e.jsxs(p,{children:[e.jsx(u,{className:"w-[200px]",children:"Action"}),e.jsx(u,{children:"Name"})]})}),e.jsx(N,{children:s.map((s=>e.jsxs(p,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{onClick:()=>a(s),className:"bg-green-500 hover:bg-green-600",size:"sm",children:[e.jsx(f,{className:"h-4 w-4"}),"Edit"]}),e.jsxs(l,{onClick:()=>n(s._id),variant:"destructive",size:"sm",children:[e.jsx(v,{className:"h-4 w-4"}),"Delete"]})]})}),e.jsx(g,{children:s.name})]},s.id)))})]})})}function U(){const{data:s=[],isLoading:a,isError:n,refetch:i}=d(),[t]=c(),[r]=m(),[j]=o(),[x,p]=h.useState(!1),[u,N]=h.useState(!1),[g,f]=h.useState(null),[v,U]=h.useState(""),E=async()=>{try{if(v){const e={name:v};g?._id?await r({id:g._id,updatedUnit:e}).unwrap():await t(e).unwrap(),U(""),f(null),p(!1),N(!1),i()}}catch(e){}};return a?e.jsx("div",{children:"Loading..."}):n?e.jsx("div",{children:"Error loading units"}):e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Units"}),e.jsx(b,{isOpen:x,onOpenChange:p,unitName:v,setUnitName:U,handleSubmit:E,title:"Add New Unit"}),e.jsxs(l,{className:"bg-purple-600 hover:bg-purple-700",onClick:()=>p(!0),children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Add Unit"]})]}),e.jsx(C,{units:s,openEditDialog:e=>{e&&e._id&&(U(e.name),f(e),N(!0))},handleDelete:async e=>{try{await j(e).unwrap(),i()}catch(s){}}}),e.jsx(b,{isOpen:u,onOpenChange:N,unitName:v,setUnitName:U,handleSubmit:E,title:"Edit Unit"})]})}export{U as default};
//# sourceMappingURL=UnitTable-CUkommCB.js.map
