import{j as e,r as c}from"./react-DKICu8bO.js";import{D,i as T,j as O,k as S,L as A,I as k,B as m,x as I,G as _,H,J as L}from"./index-CDFtkn6X.js";import{T as B,a as F,b as f,c as N,d as M,e as U}from"./table-BxxugdeG.js";import{q as P,j as z,m as G}from"./lucide-D7hRWJEP.js";import"./classnames-Bv6oJzD9.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./react-router-B9QVkYva.js";import"./cookie--_YQFYBD.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./axios-DXsv3KKR.js";import"./@syncfusion-BIAkhmGL.js";function b({isOpen:a,onOpenChange:n,unitName:r,setUnitName:t,handleSubmit:p,title:o}){return e.jsx(D,{open:a,onOpenChange:n,children:e.jsxs(T,{children:[e.jsx(O,{children:e.jsx(S,{children:o})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(A,{htmlFor:"name",children:"Unit Name"}),e.jsx(k,{id:"name",value:r,onChange:h=>t(h.target.value),placeholder:"Enter unit name"})]}),e.jsx(m,{onClick:p,children:o})]})]})})}function R({units:a,openEditDialog:n,handleDelete:r}){return e.jsx("div",{className:"w-full max-w-4xl border shadow-md",children:e.jsxs(B,{children:[e.jsx(F,{children:e.jsxs(f,{children:[e.jsx(N,{className:"w-[200px]",children:"Action"}),e.jsx(N,{children:"Name"})]})}),e.jsx(M,{children:a.map(t=>e.jsxs(f,{children:[e.jsx(U,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{onClick:()=>n(t),className:"bg-green-500 hover:bg-green-600",size:"sm",children:[e.jsx(P,{className:"h-4 w-4"}),"Edit"]}),e.jsxs(m,{onClick:()=>r(t._id),variant:"destructive",size:"sm",children:[e.jsx(z,{className:"h-4 w-4"}),"Delete"]})]})}),e.jsx(U,{children:t.name})]},t.id))})]})})}function ve(){const{data:a=[],isLoading:n,isError:r,refetch:t}=I(),[p]=_(),[o]=H(),[h]=L(),[v,x]=c.useState(!1),[w,u]=c.useState(!1),[i,j]=c.useState(null),[l,d]=c.useState(""),g=async()=>{try{if(l){const s={name:l};console.log("Saving unit:",{id:i==null?void 0:i._id,updatedUnit:s}),i!=null&&i._id?(console.log(l),await o({id:i._id,updatedUnit:s}).unwrap()):await p(s).unwrap(),d(""),j(null),x(!1),u(!1),t()}else console.error("Unit name is empty")}catch(s){console.error("Failed to save unit:",s)}},E=s=>{s&&s._id?(d(s.name),j(s),u(!0)):console.error("Invalid unit selected:",s)},C=async s=>{try{await h(s).unwrap(),t()}catch(y){console.error("Failed to delete unit:",y)}};return n?e.jsx("div",{children:"Loading..."}):r?e.jsx("div",{children:"Error loading units"}):e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Units"}),e.jsx(b,{isOpen:v,onOpenChange:x,unitName:l,setUnitName:d,handleSubmit:g,title:"Add New Unit"}),e.jsxs(m,{className:"bg-purple-600 hover:bg-purple-700",onClick:()=>x(!0),children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Add Unit"]})]}),e.jsx(R,{units:a,openEditDialog:E,handleDelete:C}),e.jsx(b,{isOpen:w,onOpenChange:u,unitName:l,setUnitName:d,handleSubmit:g,title:"Edit Unit"})]})}export{ve as default};
