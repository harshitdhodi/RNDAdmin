import{f as b,dL as y,r as h,j as e,aK as s,I as o,B as x,c as g}from"./index-BlNJerT2-1768626160776.js";import{T}from"./textarea-CvamapiW-1768626160776.js";const F=()=>{const u=b(),[j]=y(),d=j.get("id"),[t,m]=h.useState({heading:"",subheading:"",description:"",alt:"",imgTitle:"",video:null,image:null}),[c,p]=h.useState({video:null,image:null});h.useEffect(()=>{d&&(async()=>{try{const i=(await g.get(`/api/video/getVideoById?id=${d}`)).data;m({heading:i.heading,subheading:i.subheading,description:i.description,alt:i.alt,imgTitle:i.imgTitle,video:null,image:null}),p({video:i.video?`/uploads/${i.video}`:null,image:i.image?`/uploads/${i.image}`:null})}catch(a){console.error("Error fetching video details:",a)}})()},[d]);const r=n=>{const{name:a,value:i}=n.target;m(l=>({...l,[a]:i}))},v=n=>{const{name:a,files:i}=n.target;i&&i[0]&&(m(l=>({...l,[a]:i[0]})),p(l=>({...l,[a]:URL.createObjectURL(i[0])})))},f=async n=>{n.preventDefault();const a=new FormData;a.append("heading",t.heading),a.append("subheading",t.subheading),a.append("description",t.description),a.append("alt",t.alt),a.append("imgTitle",t.imgTitle),t.video&&a.append("video",t.video),t.image&&a.append("image",t.image);try{d?(await g.put(`/api/video/updateVideo?id=${d}`,a,{headers:{"Content-Type":"multipart/form-data"}}),alert("Video updated successfully!")):(await g.post("/api/video/createVideo",a,{headers:{"Content-Type":"multipart/form-data"}}),alert("Video created successfully!")),u("/video-table")}catch(i){console.error("Error saving video:",i),alert("Failed to save video.")}};return e.jsxs("div",{className:"p-6 max-w-2xl mx-auto bg-white rounded-lg shadow mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:d?"Edit Video":"Add New Video"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(s,{htmlFor:"heading",children:"Heading"}),e.jsx(o,{id:"heading",name:"heading",value:t.heading,onChange:r,required:!0})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"subheading",children:"Subheading"}),e.jsx(o,{id:"subheading",name:"subheading",value:t.subheading,onChange:r,required:!0})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"description",children:"Description"}),e.jsx(T,{id:"description",name:"description",value:t.description,onChange:r,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(s,{htmlFor:"alt",children:"Alt Text"}),e.jsx(o,{id:"alt",name:"alt",value:t.alt,onChange:r})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"imgTitle",children:"Image Title"}),e.jsx(o,{id:"imgTitle",name:"imgTitle",value:t.imgTitle,onChange:r})]})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"image",children:"Upload Image (Optional)"}),e.jsx(o,{id:"image",type:"file",name:"image",accept:"image/*",onChange:v}),c.image&&e.jsx("img",{src:c.image,alt:"Preview",className:"mt-2 h-32 object-cover rounded"})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"video",children:"Upload Video (Optional)"}),e.jsx(o,{id:"video",type:"file",name:"video",accept:"video/*",onChange:v}),c.video&&e.jsx("video",{src:c.video,controls:!0,className:"mt-2 h-32 object-cover rounded"})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>u("/video-table"),children:"Cancel"}),e.jsx(x,{type:"submit",children:d?"Update Video":"Create Video"})]})]})]})};export{F as default};
