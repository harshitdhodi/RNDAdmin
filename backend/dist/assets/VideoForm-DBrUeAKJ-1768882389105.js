import{f as y,dL as w,r as h,j as e,aK as n,I as l,as as F,B as j,c as m}from"./index-DZLYByy5-1768882389105.js";const V=()=>{const u=y(),[f]=w(),s=f.get("id"),[t,c]=h.useState({heading:"",slug:"",subheading:"",description:"",alt:"",imgTitle:"",video:null,image:null}),[g,p]=h.useState({video:null,image:null});h.useEffect(()=>{s&&(async()=>{try{const i=(await m.get(`/api/video/getVideoById?id=${s}`)).data;c({heading:i.heading,slug:i.slug||"",subheading:i.subheading,description:i.description,alt:i.alt,imgTitle:i.imgTitle,video:null,image:null}),p({video:i.video?`/uploads/${i.video}`:null,image:i.image?`/uploads/${i.image}`:null})}catch(a){console.error("Error fetching video details:",a)}})()},[s]);const o=d=>{const{name:a,value:i}=d.target;c(r=>{const x={...r,[a]:i};return a==="heading"&&!s&&(x.slug=i.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")),x})},b=d=>{c(a=>({...a,description:d}))},v=d=>{const{name:a,files:i}=d.target;i&&i[0]&&(c(r=>({...r,[a]:i[0]})),p(r=>({...r,[a]:URL.createObjectURL(i[0])})))},C=async d=>{d.preventDefault();const a=new FormData;a.append("heading",t.heading),a.append("slug",t.slug),a.append("subheading",t.subheading),a.append("description",t.description),a.append("alt",t.alt),a.append("imgTitle",t.imgTitle),t.video&&a.append("video",t.video),t.image&&a.append("image",t.image);try{s?(await m.put(`/api/video/updateVideo?id=${s}`,a,{headers:{"Content-Type":"multipart/form-data"}}),alert("Video updated successfully!")):(await m.post("/api/video/createVideo",a,{headers:{"Content-Type":"multipart/form-data"}}),alert("Video created successfully!")),u("/video-table")}catch(i){console.error("Error saving video:",i),alert("Failed to save video.")}};return e.jsxs("div",{className:"p-6 max-w-2xl mx-auto bg-white rounded-lg shadow mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:s?"Edit Video":"Add New Video"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"heading",children:"Heading"}),e.jsx(l,{id:"heading",name:"heading",value:t.heading,onChange:o,required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"slug",children:"Slug"}),e.jsx(l,{id:"slug",name:"slug",value:t.slug,onChange:o,required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"subheading",children:"Subheading"}),e.jsx(l,{id:"subheading",name:"subheading",value:t.subheading,onChange:o,required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(F,{theme:"snow",value:t.description,onChange:b,className:"h-60 mb-12"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"alt",children:"Alt Text"}),e.jsx(l,{id:"alt",name:"alt",value:t.alt,onChange:o})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"imgTitle",children:"Image Title"}),e.jsx(l,{id:"imgTitle",name:"imgTitle",value:t.imgTitle,onChange:o})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"image",children:"Upload Image (Optional)"}),e.jsx(l,{id:"image",type:"file",name:"image",accept:"image/*",onChange:v}),g.image&&e.jsx("img",{src:g.image,alt:"Preview",className:"mt-2 h-32 object-cover rounded"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"video",children:"Upload Video (Optional)"}),e.jsx(l,{id:"video",type:"file",name:"video",accept:"video/*",onChange:v}),g.video&&e.jsx("video",{src:g.video,controls:!0,className:"mt-2 h-32 object-cover rounded"})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>u("/video-table"),children:"Cancel"}),e.jsx(j,{type:"submit",children:s?"Update Video":"Create Video"})]})]})]})};export{V as default};
