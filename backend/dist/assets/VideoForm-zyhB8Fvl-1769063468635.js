import{f as N,dL as F,r as h,j as e,aK as l,I as n,as as T,B as j,c as m}from"./index-BtPp14pW-1769063468635.js";const E=()=>{const u=N(),[f]=F(),d=f.get("id"),[t,c]=h.useState({heading:"",slug:"",subheading:"",description:"",alt:"",imgTitle:"",video:null,image:null}),[g,p]=h.useState({video:null,image:null}),b={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["clean"]]},y=["header","bold","italic","underline","strike","list","bullet","align","link","image"];h.useEffect(()=>{d&&(async()=>{try{const i=(await m.get(`/api/video/getVideoById?id=${d}`)).data;c({heading:i.heading,slug:i.slug||"",subheading:i.subheading,description:i.description,alt:i.alt,imgTitle:i.imgTitle,video:null,image:null}),p({video:i.video?`/uploads/${i.video}`:null,image:i.image?`/uploads/${i.image}`:null})}catch(a){console.error("Error fetching video details:",a)}})()},[d]);const o=s=>{const{name:a,value:i}=s.target;c(r=>{const x={...r,[a]:i};return a==="heading"&&!d&&(x.slug=i.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")),x})},C=s=>{c(a=>({...a,description:s}))},v=s=>{const{name:a,files:i}=s.target;i&&i[0]&&(c(r=>({...r,[a]:i[0]})),p(r=>({...r,[a]:URL.createObjectURL(i[0])})))},w=async s=>{s.preventDefault();const a=new FormData;a.append("heading",t.heading),a.append("slug",t.slug),a.append("subheading",t.subheading),a.append("description",t.description),a.append("alt",t.alt),a.append("imgTitle",t.imgTitle),t.video&&a.append("video",t.video),t.image&&a.append("image",t.image);try{d?(await m.put(`/api/video/updateVideo?id=${d}`,a,{headers:{"Content-Type":"multipart/form-data"}}),alert("Video updated successfully!")):(await m.post("/api/video/createVideo",a,{headers:{"Content-Type":"multipart/form-data"}}),alert("Video created successfully!")),u("/video-table")}catch(i){console.error("Error saving video:",i),alert("Failed to save video.")}};return e.jsxs("div",{className:"p-6 max-w-3xl mx-auto bg-white rounded-lg shadow mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:d?"Edit Video":"Add New Video"}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"heading",children:"Heading *"}),e.jsx(n,{id:"heading",name:"heading",value:t.heading,onChange:o,placeholder:"Enter video heading",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"slug",children:"Slug *"}),e.jsx(n,{id:"slug",name:"slug",value:t.slug,onChange:o,placeholder:"url-friendly-slug",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from heading. Edit if needed."})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subheading",children:"Subheading *"}),e.jsx(n,{id:"subheading",name:"subheading",value:t.subheading,onChange:o,placeholder:"Enter video subheading",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:"Description *"}),e.jsx("div",{className:"mt-2",children:e.jsx(T,{theme:"snow",value:t.description,onChange:C,modules:b,formats:y,placeholder:"Write a detailed description...",style:{height:"250px",marginBottom:"50px"}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-8",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"alt",children:"Alt Text"}),e.jsx(n,{id:"alt",name:"alt",value:t.alt,onChange:o,placeholder:"Image alt text"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"imgTitle",children:"Image Title"}),e.jsx(n,{id:"imgTitle",name:"imgTitle",value:t.imgTitle,onChange:o,placeholder:"Image title"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"image",children:"Upload Image"}),e.jsx(n,{id:"image",type:"file",name:"image",accept:"image/*",onChange:v,className:"mt-2"}),g.image&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:g.image,alt:"Preview",className:"h-40 w-auto object-cover rounded border"})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"video",children:"Upload Video"}),e.jsx(n,{id:"video",type:"file",name:"video",accept:"video/*",onChange:v,className:"mt-2"}),g.video&&e.jsx("div",{className:"mt-3",children:e.jsx("video",{src:g.video,controls:!0,className:"h-40 w-auto object-cover rounded border"})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>u("/video-table"),children:"Cancel"}),e.jsx(j,{type:"submit",children:d?"Update Video":"Create Video"})]})]})]})};export{E as default};
