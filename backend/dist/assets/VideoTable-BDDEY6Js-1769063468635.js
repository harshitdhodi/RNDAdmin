import{r as i,f as g,j as e,B as a,P as N,aN as u,aH as y,az as f,c as x}from"./index-BtPp14pW-1769063468635.js";const w=()=>{const[n,h]=i.useState([]),[l,c]=i.useState(null),d=g(),o=async()=>{try{const s=await x.get("/api/video/getVideos");h(s.data)}catch(s){console.error("Error fetching videos:",s)}};i.useEffect(()=>{o()},[]);const m=async s=>{if(window.confirm("Are you sure you want to delete this video?"))try{await x.delete(`/api/video/deleteVideo?id=${s}`),o()}catch(t){console.error("Error deleting video:",t)}},p=s=>{d(`/video-form?id=${s}`)},j=(s,t=50)=>{const r=s.replace(/<[^>]*>/g,"");return r.length>t?r.substring(0,t)+"...":r};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Video Management"}),e.jsxs(a,{onClick:()=>d("/video-form"),children:[e.jsx(N,{className:"mr-2 h-4 w-4"})," Add New Video"]})]}),e.jsx("div",{className:"overflow-x-auto border rounded-lg shadow",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Heading"}),e.jsx("th",{className:"px-6 py-3",children:"Slug"}),e.jsx("th",{className:"px-6 py-3",children:"Subheading"}),e.jsx("th",{className:"px-6 py-3",children:"Description"}),e.jsx("th",{className:"px-6 py-3",children:"Image"}),e.jsx("th",{className:"px-6 py-3",children:"Video"}),e.jsx("th",{className:"px-6 py-3",children:"Actions"})]})}),e.jsx("tbody",{children:n.length>0?n.map(s=>e.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:s.heading}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:s.slug})}),e.jsx("td",{className:"px-6 py-4",children:s.subheading}),e.jsx("td",{className:"px-6 py-4 max-w-xs",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-700",children:j(s.description||"",40)}),s.description&&e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>c(s),className:"p-1 h-6",children:e.jsx(u,{className:"h-3 w-3"})})]})}),e.jsx("td",{className:"px-6 py-4",children:s.image?e.jsx("img",{src:`/api/uploads/${s.image}`,alt:s.alt||"Video Thumbnail",className:"h-16 w-24 object-cover rounded"}):e.jsx("span",{className:"text-gray-400",children:"No Image"})}),e.jsx("td",{className:"px-6 py-4",children:s.video?e.jsx("video",{src:`/api/video/download/${s.video}`,className:"h-16 w-24 object-cover rounded",controls:!0,preload:"metadata"}):e.jsx("span",{className:"text-gray-400",children:"No Video"})}),e.jsxs("td",{className:"px-6 py-4 flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>p(s._id),children:e.jsx(y,{className:"h-4 w-4 text-blue-600"})}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>m(s._id),children:e.jsx(f,{className:"h-4 w-4 text-red-600"})})]})]},s._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No videos found."})})})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>c(null),children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg max-w-2xl w-full mx-4 max-h-[80vh] overflow-auto",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:l.heading}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>c(null),className:"text-gray-500 hover:text-gray-700",children:"âœ•"})]}),e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:l.description}})]})})})]})};export{w as default};
