import{aP as g,c8 as x,j as e}from"./main-D56VxXD--1744353259833.js";import{c as m}from"./vendor-CxfDVdnA-1744353259833.js";import{F as t}from"./index-D0ZxqazJ-1744353259833.js";import{B as r}from"./Breadcrumb-DTbdUn4y-1744353259833.js";import{I as l}from"./index-Dp4H5u-3-1744353259833.js";import{B as j}from"./index-CeokfHxc-1744353259833.js";import{s as U}from"./index-X_CaSj2W-1744353259833.js";import"./toArray-Bbgf03cS-1744353259833.js";import"./CheckCircleFilled-CWFXdIKk-1744353259833.js";import"./ExclamationCircleFilled-Dex7AzLT-1744353259833.js";import"./dropdown-CHjX7P0V-1744353259833.js";import"./EllipsisOutlined-hl-4kO-l-1744353259833.js";import"./TextArea-S0pu2rHE-1744353259833.js";import"./InfoCircleFilled-D5d8VvU--1744353259833.js";const q=({onClose:d})=>{const[a]=t.useForm(),{data:s,isLoading:p,refetch:u}=g(),[c,{isLoading:h}]=x(),[i,f]=m.useState(null);m.useEffect(()=>{s&&s.length>0&&(a.setFieldsValue(s[0]),f(s[0]))},[s,a]);const I=async o=>{try{if(console.log("Updating WhatsUp Info with values:",o),!i||!i._id)throw new Error("Invalid initialValues: Missing _id");await c({id:i._id,...o}).unwrap(),await u(),U.success("WhatsUp Info updated successfully!"),a.resetFields(),d()}catch(n){console.log("Failed to save WhatsUp Info:",n),console.log(n.message||"Failed to update WhatsUp Info.")}};return p?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{children:[e.jsxs(r,{className:"mb-5",children:[e.jsx(r.Item,{children:"Home"}),e.jsx(r.Item,{children:"WhatsUp Info"})]}),e.jsxs(t,{form:a,layout:"vertical",initialValues:i,onFinish:I,children:[e.jsx(t.Item,{name:"message",label:"Message",rules:[{required:!0,message:"Please input the message!"}],children:e.jsx(l.TextArea,{})}),e.jsx(t.Item,{name:"number",label:"Number",rules:[{required:!0,message:"Please input the number!"},{pattern:/^[0-9]+$/,message:"Number must contain only digits!"}],children:e.jsx(l,{})}),e.jsx(t.Item,{children:e.jsx(j,{type:"primary",htmlType:"submit",loading:h,children:"Update"})})]})]})};export{q as default};
