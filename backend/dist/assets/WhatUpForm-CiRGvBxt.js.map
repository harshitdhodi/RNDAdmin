{"version":3,"file":"WhatUpForm-CiRGvBxt.js","sources":["../../src/websiteBackend/whatsUpInfo/WhatUpForm.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Form, Input, Button, message, Breadcrumb } from 'antd';\r\nimport { useGetWhatsUpInfoQuery, useUpdateWhatsUpInfoByIdMutation } from '@/slice/whatsUpInfo/WhatsUpInfo';\r\n\r\nconst WhatsUpInfoForm = ({ onClose }) => {\r\n    const [form] = Form.useForm();\r\n    const { data: whatsUpInfo, isLoading, refetch } = useGetWhatsUpInfoQuery();\r\n    const [updateWhatsUpInfoById, { isLoading: isUpdating }] = useUpdateWhatsUpInfoByIdMutation();\r\n    const [initialValues, setInitialValues] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (whatsUpInfo && whatsUpInfo.length > 0) {\r\n            form.setFieldsValue(whatsUpInfo[0]);\r\n            setInitialValues(whatsUpInfo[0]);\r\n        }\r\n    }, [whatsUpInfo, form]);\r\n\r\n    const onFinish = async (values) => {\r\n        try {\r\n            console.log('Updating WhatsUp Info with values:', values);\r\n\r\n            if (!initialValues || !initialValues._id) {\r\n                throw new Error(\"Invalid initialValues: Missing _id\");\r\n            }\r\n\r\n            await updateWhatsUpInfoById({ id: initialValues._id, ...values }).unwrap();\r\n            await refetch();\r\n            message.success('WhatsUp Info updated successfully!');\r\n            form.resetFields();\r\n            onClose();\r\n        } catch (error) {\r\n            console.log('Failed to save WhatsUp Info:', error);\r\n            console.log(error.message || 'Failed to update WhatsUp Info.');\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Breadcrumb className='mb-5'>\r\n                <Breadcrumb.Item>Home</Breadcrumb.Item>\r\n                <Breadcrumb.Item>WhatsUp Info</Breadcrumb.Item>\r\n                \r\n            </Breadcrumb>\r\n            <Form\r\n                form={form}\r\n                layout=\"vertical\"\r\n                initialValues={initialValues}\r\n                onFinish={onFinish}\r\n            >\r\n                <Form.Item\r\n                    name=\"message\"\r\n                    label=\"Message\"\r\n                    rules={[{ required: true, message: 'Please input the message!' }]}\r\n                >\r\n                    <Input.TextArea />\r\n                </Form.Item>\r\n\r\n                <Form.Item\r\n                    name=\"number\"\r\n                    label=\"Number\"\r\n                    rules={[\r\n                        { required: true, message: 'Please input the number!' },\r\n                        { pattern: /^[0-9]+$/, message: 'Number must contain only digits!' }\r\n                    ]}\r\n                >\r\n                    <Input />\r\n                </Form.Item>\r\n\r\n                <Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" loading={isUpdating}>\r\n                        Update\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default WhatsUpInfoForm;"],"names":["WhatsUpInfoForm","onClose","form","Form","useForm","data","whatsUpInfo","isLoading","refetch","useGetWhatsUpInfoQuery","updateWhatsUpInfoById","isUpdating","useUpdateWhatsUpInfoByIdMutation","initialValues","setInitialValues","useState","useEffect","length","setFieldsValue","jsx","children","jsxs","Breadcrumb","className","Item","layout","onFinish","async","values","_id","Error","id","unwrap","message","success","resetFields","error","name","label","rules","required","Input","TextArea","pattern","Button","type","htmlType","loading"],"mappings":"mvBAIA,MAAMA,EAAkB,EAAGC,cACvB,MAAOC,GAAQC,EAAKC,WACZC,KAAMC,EAAAC,UAAaA,EAAWC,QAAAA,GAAYC,KAC3CC,GAAyBH,UAAWI,IAAgBC,KACpDC,EAAeC,GAAoBC,EAAAA,SAAS,MAEnDC,EAAAA,WAAU,KACFV,GAAeA,EAAYW,OAAS,IAC/Bf,EAAAgB,eAAeZ,EAAY,IACfQ,EAAAR,EAAY,IAAE,GAEpC,CAACA,EAAaJ,IAqBjB,OAAIK,EACOY,EAAAA,IAAC,OAAIC,SAAU,sBAIrB,MACG,CAAAA,SAAA,CAACC,EAAAA,KAAAC,EAAA,CAAWC,UAAU,OAClBH,SAAA,CAACD,EAAAA,IAAAG,EAAWE,KAAX,CAAgBJ,SAAI,SACpBD,EAAAA,IAAAG,EAAWE,KAAX,CAAgBJ,SAAY,oBAGjCC,EAAAA,KAAClB,EAAA,CACGD,OACAuB,OAAO,WACPZ,gBACAa,SAlCKC,MAAOC,IAChB,IAGA,IAAKf,IAAkBA,EAAcgB,IAC3B,MAAA,IAAIC,MAAM,4CAGdpB,EAAsB,CAAEqB,GAAIlB,EAAcgB,OAAQD,IAAUI,eAC5DxB,IACNyB,EAAQC,QAAQ,sCAChBhC,EAAKiC,cACGlC,UACHmC,GAEwD,GAqBzDhB,SAAA,CAAAD,EAAAA,IAAChB,EAAKqB,KAAL,CACGa,KAAK,UACLC,MAAM,UACNC,MAAO,CAAC,CAAEC,UAAU,EAAMP,QAAS,8BAEnCb,SAAAD,EAAAA,IAACsB,EAAMC,SAAN,CAAe,KAGpBvB,EAAAA,IAAChB,EAAKqB,KAAL,CACGa,KAAK,SACLC,MAAM,SACNC,MAAO,CACH,CAAEC,UAAU,EAAMP,QAAS,4BAC3B,CAAEU,QAAS,WAAYV,QAAS,qCAGpCb,eAACqB,EAAM,CAAA,KAGVtB,EAAAA,IAAAhB,EAAKqB,KAAL,CACGJ,SAACD,EAAAA,IAAAyB,EAAA,CAAOC,KAAK,UAAUC,SAAS,SAASC,QAASpC,EAAYS,2BAK1E"}