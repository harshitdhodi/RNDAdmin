import{eu as t,bS as g,fa as x,r as l,j as e,ey as n,b4 as j,e9 as U}from"./index-2kbH1bBb-1764732385455.js";import{I as d}from"./index-g1DPuVnD-1764732385455.js";import"./TextArea-BKy-nqO8-1764732385455.js";const F=({onClose:u})=>{const[a]=t.useForm(),{data:s,isLoading:m,refetch:c}=g(),[p,{isLoading:h}]=x(),[i,f]=l.useState(null);l.useEffect(()=>{s&&s.length>0&&(a.setFieldsValue(s[0]),f(s[0]))},[s,a]);const I=async r=>{try{if(console.log("Updating WhatsUp Info with values:",r),!i||!i._id)throw new Error("Invalid initialValues: Missing _id");await p({id:i._id,...r}).unwrap(),await c(),U.success("WhatsUp Info updated successfully!"),a.resetFields(),u()}catch(o){console.log("Failed to save WhatsUp Info:",o),console.log(o.message||"Failed to update WhatsUp Info.")}};return m?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{children:[e.jsxs(n,{className:"mb-5",children:[e.jsx(n.Item,{children:"Home"}),e.jsx(n.Item,{children:"WhatsUp Info"})]}),e.jsxs(t,{form:a,layout:"vertical",initialValues:i,onFinish:I,children:[e.jsx(t.Item,{name:"message",label:"Message",rules:[{required:!0,message:"Please input the message!"}],children:e.jsx(d.TextArea,{})}),e.jsx(t.Item,{name:"number",label:"Number",rules:[{required:!0,message:"Please input the number!"},{pattern:/^[0-9]+$/,message:"Number must contain only digits!"}],children:e.jsx(d,{})}),e.jsx(t.Item,{children:e.jsx(j,{type:"primary",htmlType:"submit",loading:h,children:"Update"})})]})]})};export{F as default};
