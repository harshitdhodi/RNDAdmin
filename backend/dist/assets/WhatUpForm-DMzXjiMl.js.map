{"version":3,"file":"WhatUpForm-DMzXjiMl.js","sources":["../../src/websiteBackend/whatsUpInfo/WhatUpForm.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Breadcrumb } from '@/components/ui/breadcrumb';\r\nimport { toast } from 'react-toastify';\r\nimport { useGetWhatsUpInfoQuery, useUpdateWhatsUpInfoByIdMutation } from '@/slice/whatsUpInfo/WhatsUpInfo';\r\n\r\nconst WhatsUpInfoForm = ({ onClose }) => {\r\n    const { register, handleSubmit, setValue } = useForm();\r\n    const { data: whatsUpInfo, isLoading, refetch } = useGetWhatsUpInfoQuery();\r\n    const [updateWhatsUpInfoById, { isLoading: isUpdating }] = useUpdateWhatsUpInfoByIdMutation();\r\n\r\n    useEffect(() => {\r\n        if (whatsUpInfo && whatsUpInfo.length > 0) {\r\n            setValue(\"message\", whatsUpInfo[0].message);\r\n            setValue(\"number\", whatsUpInfo[0].number);\r\n        }\r\n    }, [whatsUpInfo, setValue]);\r\n\r\n    const onSubmit = async (values) => {\r\n        try {\r\n            if (!whatsUpInfo || whatsUpInfo.length === 0 || !whatsUpInfo[0]._id) {\r\n                throw new Error(\"Invalid data: Missing _id\");\r\n            }\r\n\r\n            await updateWhatsUpInfoById({ id: whatsUpInfo[0]._id, ...values }).unwrap();\r\n            await refetch();\r\n            toast.success('WhatsUp Info updated successfully!');\r\n            onClose();\r\n        } catch (error) {\r\n            console.error('Failed to update WhatsUp Info:', error);\r\n            toast.error(error.message || 'Failed to update WhatsUp Info.');\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Breadcrumb className=\"mb-5\">\r\n                <Breadcrumb.Item>Home</Breadcrumb.Item>\r\n                <Breadcrumb.Item>WhatsUp Info</Breadcrumb.Item>\r\n            </Breadcrumb>\r\n\r\n            <form className=\"space-y-4\" onSubmit={handleSubmit(onSubmit)}>\r\n                <div>\r\n                    <label className=\"block text-sm font-medium\">Message</label>\r\n                    <Textarea {...register(\"message\", { required: \"Please input the message!\" })} />\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"block text-sm font-medium\">Number</label>\r\n                    <Input\r\n                        {...register(\"number\", {\r\n                            required: \"Please input the number!\",\r\n                            pattern: { value: /^[0-9]+$/, message: \"Number must contain only digits!\" },\r\n                        })}\r\n                    />\r\n                </div>\r\n\r\n                <Button type=\"submit\" disabled={isUpdating} className=\"mt-2\">\r\n                    {isUpdating ? \"Updating...\" : \"Update\"}\r\n                </Button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default WhatsUpInfoForm;\r\n"],"names":["WhatsUpInfoForm","onClose","register","handleSubmit","setValue","useForm","data","whatsUpInfo","isLoading","refetch","useGetWhatsUpInfoQuery","updateWhatsUpInfoById","isUpdating","useUpdateWhatsUpInfoByIdMutation","useEffect","length","message","number","jsx","children","jsxs","Breadcrumb","className","Item","onSubmit","async","values","_id","Error","id","unwrap","toast","success","error","Textarea","required","Input","pattern","value","Button","type","disabled"],"mappings":"wZASA,MAAMA,EAAkB,EAAGC,cACvB,MAAMC,SAAEA,EAAAC,aAAUA,EAAcC,SAAAA,GAAaC,KACrCC,KAAMC,EAAAC,UAAaA,EAAWC,QAAAA,GAAYC,KAC3CC,GAAyBH,UAAWI,IAAgBC,IAE3DC,EAAAA,WAAU,KACFP,GAAeA,EAAYQ,OAAS,IACpCX,EAAS,UAAWG,EAAY,GAAGS,SACnCZ,EAAS,SAAUG,EAAY,GAAGU,QAAM,GAE7C,CAACV,EAAaH,IAkBjB,OAAII,EACOU,EAAAA,IAAC,OAAIC,SAAU,sBAIrB,MACG,CAAAA,SAAA,CAACC,EAAAA,KAAAC,EAAA,CAAWC,UAAU,OAClBH,SAAA,CAACD,EAAAA,IAAAG,EAAWE,KAAX,CAAgBJ,SAAI,SACpBD,EAAAA,IAAAG,EAAWE,KAAX,CAAgBJ,SAAY,2BAGhC,OAAK,CAAAG,UAAU,YAAYE,SAAUrB,GA3B7BsB,MAAOC,IAChB,IACI,IAACnB,GAAsC,IAAvBA,EAAYQ,SAAiBR,EAAY,GAAGoB,IACtD,MAAA,IAAIC,MAAM,mCAGdjB,EAAsB,CAAEkB,GAAItB,EAAY,GAAGoB,OAAQD,IAAUI,eAC7DrB,IACNsB,EAAMC,QAAQ,sCACN/B,UACHgC,GAECF,EAAAE,MAAMA,EAAMjB,SAAW,iCAAgC,KAgBzDG,SAAA,CAAAC,OAAC,MACG,CAAAD,SAAA,CAACD,EAAAA,IAAA,QAAA,CAAMI,UAAU,4BAA4BH,SAAO,YACpDD,MAACgB,MAAahC,EAAS,UAAW,CAAEiC,SAAU,0CAGjD,MACG,CAAAhB,SAAA,CAACD,EAAAA,IAAA,QAAA,CAAMI,UAAU,4BAA4BH,SAAM,WACnDD,EAAAA,IAACkB,EAAA,IACOlC,EAAS,SAAU,CACnBiC,SAAU,2BACVE,QAAS,CAAEC,MAAO,WAAYtB,QAAS,2CAKnDE,EAAAA,IAACqB,EAAO,CAAAC,KAAK,SAASC,SAAU7B,EAAYU,UAAU,OACjDH,SAAaP,EAAA,cAAgB,gBAG1C"}