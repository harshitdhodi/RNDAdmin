import{f as y,a as f,ca as b,cb as C,cc as I,r as E,j as e}from"./index-hVri1bw9-1764395594329.js";import{F as t}from"./index-C07QsCy_-1764395594329.js";import{B as L}from"./Breadcrumb-BbK0fJvT-1764395594329.js";import{C as F}from"./index-iMxZYubD-1764395594329.js";import{S as p}from"./index-5fCYg7FX-1764395594329.js";import{I as c}from"./index-yr2eBg36-1764395594329.js";import{B as m}from"./index-Vz4GTmeV-1764395594329.js";import{s as d}from"./index-B44g-h7k-1764395594329.js";import"./toArray-Bbgf03cS-1764395594329.js";import"./CheckCircleFilled-FHAo7tTs-1764395594329.js";import"./ExclamationCircleFilled-BjQh_O2k-1764395594329.js";import"./dropdown-DmNOe_LX-1764395594329.js";import"./EllipsisOutlined-kjtz1ZDr-1764395594329.js";import"./Skeleton-D3YPxazm-1764395594329.js";import"./PlusOutlined-ByY_Cxs8-1764395594329.js";import"./TextArea-0a4D3yre-1764395594329.js";import"./CheckOutlined-DJDmJSRr-1764395594329.js";import"./InfoCircleFilled-DGIFRtU_-1764395594329.js";const{Option:u}=p,D=()=>{const[o]=t.useForm(),n=y(),{id:l}=f(),s=!!l,[x]=b(),[h]=C(),{data:r,isLoading:j}=I(l,{skip:!s});E.useEffect(()=>{s&&(r!=null&&r.data)&&o.setFieldsValue(r.data)},[r,o,s]);const g=async a=>{try{s?(await h({id:l,data:a}).unwrap(),d.success("Location updated successfully!")):(await x(a).unwrap(),d.success("Location added successfully!")),n("/worldwide-table")}catch(i){d.error(i.message||"Something went wrong")}};return e.jsxs("div",{className:"p-5",children:[e.jsx(L,{items:[{title:e.jsx("span",{onClick:()=>n("/dashboard"),className:"cursor-pointer text-blue-500",children:"Dashboard"})},{title:e.jsx("span",{onClick:()=>n("/worldwide-table"),className:"cursor-pointer text-blue-500",children:"Worldwide Locations"})},{title:s?"Edit Location":"Add Location"}],className:"mb-4"}),e.jsx(F,{title:s?"Edit Location":"Add New Location",children:e.jsxs(t,{form:o,layout:"vertical",onFinish:g,initialValues:{category:"international"},children:[e.jsx(t.Item,{name:"category",label:"Category",rules:[{required:!0,message:"Please select a category"}],children:e.jsxs(p,{children:[e.jsx(u,{value:"international",children:"International"}),e.jsx(u,{value:"india",children:"India"})]})}),e.jsx(t.Item,{name:"name",label:"Country Name",rules:[{required:!0,message:"Please enter country name"}],children:e.jsx(c,{})}),e.jsx(t.Item,{noStyle:!0,shouldUpdate:(a,i)=>a.category!==i.category,children:({getFieldValue:a})=>a("category")==="india"&&e.jsxs(e.Fragment,{children:[e.jsx(t.Item,{name:"state",label:"State",rules:[{required:!0,message:"Please enter state"}],children:e.jsx(c,{})}),e.jsx(t.Item,{name:"cities",label:"Cities (Enter up to 5 cities, one per line)",rules:[{required:!0,message:"Please enter at least one city"}],children:e.jsx(c.TextArea,{rows:5,placeholder:"Enter cities, one per line",onChange:i=>{const w=i.target.value.split(`
`).slice(0,5);o.setFieldsValue({cities:w})}})})]})}),e.jsx(t.Item,{children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(m,{type:"primary",htmlType:"submit",loading:j,children:s?"Update":"Submit"}),e.jsx(m,{onClick:()=>n("/worldwide-table"),children:"Cancel"})]})})]})})]})};export{D as default};
