import{bK as e,bL as s,bM as r,j as a,I as i,B as t}from"./main-BQqr2_19.js";import{d as n,g as c,r as o}from"./vendor-router-DoRotgOs.js";import{b as l}from"./index.esm-CSDyVtrl.js";import{B as d}from"./react-toastify.esm-BNXCN5Br.js";import{C as j,b as m,c as x,a as h}from"./card-CPQ_AIkA.js";import{T as u}from"./textarea-tez6YR4q.js";import{F as p,a as f,b,c as y,d as g,e as w}from"./form-8DYzE22W.js";import{S as v,a as L,b as C,c as N,d as E}from"./select-DFtFguEc.js";import{B as S,b as k,d as A}from"./breadcrumb-BHS-7goF.js";import"./vendor-react-DD_RYU77.js";import"./vendor-utils-CfKmydC0.js";import"./index-BYajCL7Y.js";import"./index-LwoRh43N.js";import"./check-C21vIO_I.js";import"./chevron-up-CiFYhtWl.js";import"./chevron-right-DHWU52ll.js";const P=()=>{const P=n(),{id:q}=c(),I=!!q,V=l({defaultValues:{category:"international",name:"",state:"",cities:""}}),[B,{isLoading:D}]=e(),[F,{isLoading:K}]=s(),{data:M,isLoading:J}=r(q,{skip:!I});o.useEffect((()=>{if(I&&M?.data){const e={...M.data};Array.isArray(e.cities)&&(e.cities=e.cities.join("\n")),V.reset(e)}}),[M,V,I]);const Q=D||K||J,T="india"===V.watch("category");return a.jsxs("div",{className:"p-6",children:[a.jsxs(S,{className:"mb-4",children:[a.jsx(k,{children:a.jsx(A,{onClick:()=>P("/dashboard"),className:"cursor-pointer",children:"Dashboard"})}),a.jsx(k,{children:a.jsx(A,{onClick:()=>P("/worldwide-table"),className:"cursor-pointer",children:"Worldwide Locations"})}),a.jsx(k,{children:I?"Edit Location":"Add Location"})]}),a.jsxs(j,{children:[a.jsx(m,{children:a.jsx(x,{children:I?"Edit Location":"Add New Location"})}),a.jsx(h,{children:a.jsx(p,{...V,children:a.jsxs("form",{onSubmit:V.handleSubmit((async e=>{try{const s={...e};s.cities&&(s.cities=s.cities.split("\n").filter((e=>""!==e.trim())).slice(0,5)),I?(await F({id:q,data:s}).unwrap(),d.success("Location updated successfully!")):(await B(s).unwrap(),d.success("Location added successfully!")),P("/worldwide-table")}catch(s){d.error(s.message||"Something went wrong")}})),className:"space-y-6",children:[a.jsx(f,{control:V.control,name:"category",render:({field:e})=>a.jsxs(b,{children:[a.jsx(y,{children:"Category"}),a.jsxs(v,{onValueChange:e.onChange,defaultValue:e.value,value:e.value,children:[a.jsx(g,{children:a.jsx(L,{children:a.jsx(C,{placeholder:"Select category"})})}),a.jsxs(N,{children:[a.jsx(E,{value:"international",children:"International"}),a.jsx(E,{value:"india",children:"India"})]})]}),a.jsx(w,{})]})}),a.jsx(f,{control:V.control,name:"name",rules:{required:"Please enter country name"},render:({field:e})=>a.jsxs(b,{children:[a.jsx(y,{children:"Country Name"}),a.jsx(g,{children:a.jsx(i,{placeholder:"Enter country name",...e})}),a.jsx(w,{})]})}),T&&a.jsxs(a.Fragment,{children:[a.jsx(f,{control:V.control,name:"state",rules:{required:"Please enter state"},render:({field:e})=>a.jsxs(b,{children:[a.jsx(y,{children:"State"}),a.jsx(g,{children:a.jsx(i,{placeholder:"Enter state",...e})}),a.jsx(w,{})]})}),a.jsx(f,{control:V.control,name:"cities",rules:{required:"Please enter at least one city"},render:({field:e})=>a.jsxs(b,{children:[a.jsx(y,{children:"Cities (Enter up to 5 cities, one per line)"}),a.jsx(g,{children:a.jsx(u,{placeholder:"Enter cities, one per line",className:"min-h-32",...e})}),a.jsx(w,{})]})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(t,{type:"submit",disabled:Q,children:I?"Update":"Submit"}),a.jsx(t,{variant:"outline",type:"button",onClick:()=>P("/worldwide-table"),children:"Cancel"})]})]})})})]})]})};export{P as default};
//# sourceMappingURL=WorldWideForm-Ch0sBuMG.js.map
