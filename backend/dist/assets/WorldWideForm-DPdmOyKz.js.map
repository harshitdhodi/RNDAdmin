{"version":3,"file":"WorldWideForm-DPdmOyKz.js","sources":["../../src/websiteBackend/worldwideTables/WorldWideForm.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Form, Input, Select, Button, Card, Breadcrumb, message } from 'antd';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { \n    useCreateWorldwideMutation,\n    useUpdateWorldwideMutation,\n    useGetWorldwideByIdQuery\n} from '../../slice/worldwide/worldwide';\n\nconst { Option } = Select;\n\nconst WorldwideForm = () => {\n    const [form] = Form.useForm();\n    const navigate = useNavigate();\n    const { id } = useParams();\n    const isEditMode = !!id;\n\n    const [createWorldwide] = useCreateWorldwideMutation();\n    const [updateWorldwide] = useUpdateWorldwideMutation();\n    const { data: editData, isLoading: isLoadingEdit } = useGetWorldwideByIdQuery(id, {\n        skip: !isEditMode\n    });\n\n    // Set form values when editing\n    useEffect(() => {\n        if (isEditMode && editData?.data) {\n            form.setFieldsValue(editData.data);\n        }\n    }, [editData, form, isEditMode]);\n\n    const onFinish = async (values) => {\n        try {\n            if (isEditMode) {\n                await updateWorldwide({ id, data: values }).unwrap();\n                message.success('Location updated successfully!');\n            } else {\n                await createWorldwide(values).unwrap();\n                message.success('Location added successfully!');\n            }\n            navigate('/worldwide-table');\n        } catch (error) {\n            message.error(error.message || 'Something went wrong');\n        }\n    };\n\n    return (\n        <div style={{ padding: '20px' }}>\n            <Breadcrumb\n                items={[\n                    { \n                        title: <span onClick={() => navigate('/dashboard')} style={{ cursor: 'pointer' }}>\n                            Dashboard\n                        </span>\n                    },\n                    { \n                        title: <span onClick={() => navigate('/worldwide-table')} style={{ cursor: 'pointer' }}>\n                            Worldwide Locations\n                        </span>\n                    },\n                    { title: isEditMode ? 'Edit Location' : 'Add Location' }\n                ]}\n                style={{ marginBottom: '16px' }}\n            />\n\n            <Card title={isEditMode ? 'Edit Location' : 'Add New Location'}>\n                <Form\n                    form={form}\n                    layout=\"vertical\"\n                    onFinish={onFinish}\n                    initialValues={{ category: 'international' }}\n                >\n                    <Form.Item\n                        name=\"category\"\n                        label=\"Category\"\n                        rules={[{ required: true, message: 'Please select a category' }]}\n                    >\n                        <Select>\n                            <Option value=\"international\">International</Option>\n                            <Option value=\"india\">India</Option>\n                        </Select>\n                    </Form.Item>\n\n                    <Form.Item\n                        name=\"name\"\n                        label=\"Country Name\"\n                        rules={[{ required: true, message: 'Please enter country name' }]}\n                    >\n                        <Input />\n                    </Form.Item>\n\n                    <Form.Item\n                        noStyle\n                        shouldUpdate={(prevValues, currentValues) => \n                            prevValues.category !== currentValues.category\n                        }\n                    >\n                        {({ getFieldValue }) => \n                            getFieldValue('category') === 'india' && (\n                                <>\n                                    <Form.Item\n                                        name=\"state\"\n                                        label=\"State\"\n                                        rules={[{ required: true, message: 'Please enter state' }]}\n                                    >\n                                        <Input />\n                                    </Form.Item>\n\n                                    <Form.Item\n                                        name=\"cities\"\n                                        label=\"Cities (Enter up to 5 cities, one per line)\"\n                                        rules={[{ required: true, message: 'Please enter at least one city' }]}\n                                    >\n                                        <Input.TextArea \n                                            rows={5}\n                                            placeholder=\"Enter cities, one per line\"\n                                            onChange={(e) => {\n                                                const cities = e.target.value.split('\\n').slice(0, 5);\n                                                form.setFieldsValue({ cities });\n                                            }}\n                                        />\n                                    </Form.Item>\n                                </>\n                            )\n                        }\n                    </Form.Item>\n\n                    <Form.Item>\n                        <Button type=\"primary\" htmlType=\"submit\" loading={isLoadingEdit}>\n                            {isEditMode ? 'Update' : 'Submit'}\n                        </Button>\n                        <Button \n                            style={{ marginLeft: '10px' }}\n                            onClick={() => navigate('/worldwide-table')}\n                        >\n                            Cancel\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Card>\n        </div>\n    );\n};\n\nexport default WorldwideForm;\n"],"names":["Option","Select","WorldwideForm","form","Form","useForm","navigate","useNavigate","id","useParams","isEditMode","createWorldwide","useCreateWorldwideMutation","updateWorldwide","useUpdateWorldwideMutation","data","editData","isLoading","isLoadingEdit","useGetWorldwideByIdQuery","skip","useEffect","setFieldsValue","style","padding","children","jsx","Breadcrumb","items","title","onClick","cursor","marginBottom","Card","jsxs","layout","onFinish","async","values","unwrap","message","success","error","initialValues","category","Item","name","label","rules","required","value","Input","noStyle","shouldUpdate","prevValues","currentValues","getFieldValue","Fragment","TextArea","rows","placeholder","onChange","e","cities","target","split","slice","Button","type","htmlType","loading","marginLeft"],"mappings":"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"}