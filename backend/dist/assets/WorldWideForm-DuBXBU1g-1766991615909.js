import{dM as t,f as y,a as b,e3 as f,e4 as C,e5 as I,r as E,j as e,dQ as L,bk as p,dR as d,bd as u,dl as c}from"./index-B-FS_WZa-1766991615909.js";import{C as N}from"./index-B0sPw6gu-1766991615909.js";import"./Skeleton-Ummp3xiR-1766991615909.js";const{Option:m}=p,k=()=>{const[n]=t.useForm(),l=y(),{id:o}=b(),s=!!o,[x]=f(),[h]=C(),{data:i,isLoading:j}=I(o,{skip:!s});E.useEffect(()=>{s&&(i!=null&&i.data)&&n.setFieldsValue(i.data)},[i,n,s]);const g=async a=>{try{s?(await h({id:o,data:a}).unwrap(),c.success("Location updated successfully!")):(await x(a).unwrap(),c.success("Location added successfully!")),l("/worldwide-table")}catch(r){c.error(r.message||"Something went wrong")}};return e.jsxs("div",{className:"p-5",children:[e.jsx(L,{items:[{title:e.jsx("span",{onClick:()=>l("/dashboard"),className:"cursor-pointer text-blue-500",children:"Dashboard"})},{title:e.jsx("span",{onClick:()=>l("/worldwide-table"),className:"cursor-pointer text-blue-500",children:"Worldwide Locations"})},{title:s?"Edit Location":"Add Location"}],className:"mb-4"}),e.jsx(N,{title:s?"Edit Location":"Add New Location",children:e.jsxs(t,{form:n,layout:"vertical",onFinish:g,initialValues:{category:"international"},children:[e.jsx(t.Item,{name:"category",label:"Category",rules:[{required:!0,message:"Please select a category"}],children:e.jsxs(p,{children:[e.jsx(m,{value:"international",children:"International"}),e.jsx(m,{value:"india",children:"India"})]})}),e.jsx(t.Item,{name:"name",label:"Country Name",rules:[{required:!0,message:"Please enter country name"}],children:e.jsx(d,{})}),e.jsx(t.Item,{noStyle:!0,shouldUpdate:(a,r)=>a.category!==r.category,children:({getFieldValue:a})=>a("category")==="india"&&e.jsxs(e.Fragment,{children:[e.jsx(t.Item,{name:"state",label:"State",rules:[{required:!0,message:"Please enter state"}],children:e.jsx(d,{})}),e.jsx(t.Item,{name:"cities",label:"Cities (Enter up to 5 cities, one per line)",rules:[{required:!0,message:"Please enter at least one city"}],children:e.jsx(d.TextArea,{rows:5,placeholder:"Enter cities, one per line",onChange:r=>{const w=r.target.value.split(`
`).slice(0,5);n.setFieldsValue({cities:w})}})})]})}),e.jsx(t.Item,{children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(u,{type:"primary",htmlType:"submit",loading:j,children:s?"Update":"Submit"}),e.jsx(u,{onClick:()=>l("/worldwide-table"),children:"Cancel"})]})})]})})]})};export{k as default};
