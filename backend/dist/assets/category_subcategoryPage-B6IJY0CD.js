import{j as e,r as s}from"./react-BfBsRgn0.js";import{L as a,a as t,b as r,u as l}from"./react-router-DUJjWq5j.js";import{C as c}from"./checkbox-B8LshQKf.js";import{C as i,a as n}from"./card-DP-8QC8I.js";import{X as o}from"./lucide-D6BDVLHE.js";import{P as m}from"./prop-types-BgiiqXIo.js";import{T as d,a as u,b as x,c as h,d as g,e as p}from"./table-6AWYD7bR.js";import{S as j,a as b,b as N,c as y,d as f}from"./select-DKOOCAeT.js";import{aa as S}from"./index-cVSOkL6A.js";import{a as v}from"./axios-BoylL8Pu.js";import"./classnames-C3ovBj6j.js";import"./cookie-BUTH-fPQ.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./@syncfusion-CXokIO9o.js";const C=e=>e?e.split(/[-\s]+/).map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "):"";function w({chemicalName:s,categorySlug:t,categoryName:r,slug2:l,subsubCategorySlug:c}){return e.jsx("nav",{className:"text-sm mb-6 border-b-2 pb-3",children:e.jsxs("ol",{className:"list-none p-0 inline-flex",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(a,{to:"/",className:"text-[15px]",children:"Home"}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(a,{to:"/categories",className:"text-[15px]",children:"Products"}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-[15px]",children:e.jsx(a,{to:`/${t}`,className:"text-black",children:C(r)})}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsx("li",{className:"flex items-center",children:e.jsx("span",{className:"text-[15px]",children:e.jsx(a,{to:`/chemicals/${l}`,className:"text-black",children:C(l)})})}),c&&e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"mx-2",children:"››"}),e.jsx("span",{className:"text-[15px] text-orange-600",children:C(c)})]})]})})}function k({chemicals:s,categorySlug:a,selectedSubCategories:r,selectedGrades:l,setSelectedSubCategories:m,setSelectedGrades:d,subsubCategorySlug:u,categoryName:x}){const h=s.reduce(((e,s)=>{const a=s.grade||"Other";return e[a]=(e[a]||0)+1,e}),{}),g=t(),p=s.reduce(((e,s)=>{const a=s.subSubCategorySlug||"Uncategorized";return e[a]=(e[a]||0)+1,e}),{}),j=e=>e.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");return u?r.includes(u):r.includes(a),e.jsx(i,{className:"md:col-span-1 bg-[#dee8ff] rounded-none p-3",children:e.jsxs(n,{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-normal mb-4",children:"Your Selections"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Categories:"}),e.jsxs("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{children:u?`${u} (${s.length})`:`${j(a)} (${s.length})`}),e.jsx("button",{onClick:()=>{g(`/${x}`),m([]),d([])},className:"ml-2 text-white bg-red-600 mr-2  w-4 pb-2 h-4",children:e.jsx(o,{size:16})})]}),r.map((s=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:j(s)}),e.jsx("button",{onClick:()=>(e=>{m((s=>s.filter((s=>s!==e))))})(s),className:"ml-2 text-white bg-red-600   w-4 pb-2 h-4",children:e.jsx(o,{size:16})})]},s)))]})]}),l.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Grades:"}),e.jsx("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:l.map((s=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:s}),e.jsx("button",{onClick:()=>(e=>{alert("hii"),d((s=>s.filter((s=>s!==e)))),setTimeout((()=>{g(`/chemicals/${a}`)}),0)})(s),className:"text-gray-600 hover:text-red-600",children:e.jsx(o,{size:16})})]},s)))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Categories"}),e.jsx("div",{className:"space-y-2",children:Object.entries(p).map((([s,a])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{id:s,checked:u?s===u:r.includes(s),onCheckedChange:e=>((e,s)=>{m(e?e=>[...e,s]:e=>e.filter((e=>e!==s)))})(e,s)}),e.jsxs("label",{htmlFor:s,className:"text-sm",children:[j(s)," (",a,")"]})]},s)))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Grades"}),e.jsx("div",{className:"space-y-2",children:Object.entries(h).map((([s,a])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{id:s,checked:l.includes(s),onCheckedChange:e=>((e,s)=>{d(e?e=>[...e,s]:e=>e.filter((e=>e!==s)))})(e,s)}),e.jsxs("label",{htmlFor:s,className:"text-sm",children:[s," (",a,")"]})]},s)))})]})]})]})})}const _=({chemicals:a,isLoading:r,msds:l,specs:c,error:i})=>{const n=t(),[o,m]=s.useState(1),[S,v]=s.useState(5);if(r)return e.jsx("div",{className:"p-4 text-center",children:"Loading..."});if(i)return e.jsxs("div",{className:"p-4 text-center text-red-500",children:["Error fetching chemicals: ",i]});if(0===a.length)return e.jsx("div",{className:"p-4 text-center",children:"No products found."});const C=o*S,w=C-S,k=a.slice(w,C),_=Math.ceil(a.length/S);return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-4 py-1 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Items per page:"}),e.jsxs(j,{value:S.toString(),onValueChange:e=>{v(Number(e)),m(1)},children:[e.jsx(b,{className:"w-[60px] bg-white border-gray-200 hover:border-gray-300",children:e.jsx(N,{})}),e.jsx(y,{children:[5,10,20,30,40,50].map((s=>e.jsx(f,{className:"w-[60px]",value:s.toString(),children:s},s)))})]})]}),e.jsxs("div",{className:"text-gray-600 font-medium",children:["Showing ",e.jsx("span",{className:"text-gray-900",children:w+1})," to ",e.jsx("span",{className:"text-gray-900",children:Math.min(C,a.length)})," of ",e.jsx("span",{className:"text-gray-900",children:a.length})," items"]})]}),e.jsxs(d,{children:[e.jsx(u,{children:e.jsxs(x,{className:"bg-[#264796] hover:bg-[#264796]",children:[e.jsx(h,{className:"text-white",children:"Product Code"}),e.jsx(h,{className:"text-white",children:"Product Name"}),e.jsx(h,{className:"text-white",children:"CAS"}),e.jsx(h,{className:"text-white",children:"TDS"}),e.jsx(h,{className:"text-white",children:"MSDS"})]})}),e.jsx(g,{children:k.map(((s,a)=>e.jsxs(x,{className:a%2!=0?"bg-[#93aff0]/60 hover:bg-[#93aff0]/60":"",children:[e.jsx(p,{children:s.auto_p_code}),e.jsx(p,{className:"text-blue-900",children:e.jsx("button",{className:"text-blue-900 hover:no-underline",onClick:()=>(e=>{const s=e.replace(/\s+/g,"-").toLowerCase();n(`/${s}`)})(s.slug),children:s.name})}),e.jsx(p,{className:"text-blue-900",children:s.cas}),e.jsx(p,{className:"text-blue-900",children:s.specs?e.jsx("button",{className:"text-blue-900 hover:underline",onClick:()=>{var e;(e=s.specs)&&window.open(`/api/image/specs/view/${e}`,"_blank")},children:"Specs"}):"Specs"}),e.jsx(p,{className:"text-blue-900",children:s.msds?e.jsx("button",{className:"text-blue-900 hover:underline",onClick:()=>{var e;(e=s.msds)&&window.open(`/api/image/msds/view/${e}`,"_blank")},children:"MSDS"}):"MSDS"})]},s.auto_p_code)))})]}),e.jsx("div",{className:"flex justify-end gap-1.5 mt-6",children:[...Array(_)].map(((s,a)=>e.jsx("button",{onClick:()=>{m(a+1)},className:"px-4 py-2 border rounded-md transition-colors duration-200 "+(o===a+1?"bg-[#264796] text-white border-[#264796] hover:bg-[#1e357a]":"text-gray-700 border-gray-200 hover:bg-gray-50 hover:border-gray-300"),children:a+1},a+1)))})]})};_.propTypes={chemicals:m.array.isRequired,isLoading:m.bool.isRequired,error:m.string};const $=({categorySlug:s,subsubCategorySlug:a})=>{const{data:t,error:r,isLoading:l}=S(s);if(l)return e.jsx("p",{children:"Loading..."});if(r)return e.jsx("p",{children:"Error loading category data."});if(!t)return e.jsx("p",{children:"Category Not Found"});const{category:c,details:i,photo:n}=t,o=a?a.charAt(0).toUpperCase()+a.slice(1):c;return e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:o}),!a&&e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsx("div",{className:"w-full md:w-1/4",children:e.jsx("img",{src:`/api/logo/download/${n}`,alt:c,className:"w-full object-contain"})}),e.jsx("div",{className:"w-full md:w-3/4",children:e.jsx("p",{className:"text-gray-700 text-justify",children:i})})]})]})};function A(){const{chemicals:a,slug:t,subsubCategorySlug:c}=r(),[i,n]=s.useState([]),[o,m]=s.useState([]),[d,u]=s.useState([]),[x,h]=s.useState([]),[g,p]=s.useState(!0),[j,b]=s.useState(null),N=l();let y="";(N.pathname.startsWith("/chemicals")||N.pathname.startsWith("/microbiology")||N.pathname.startsWith("/plant-culture-tested-chemical")||N.pathname.startsWith("/cell-culture-tested-chemical"))&&(N.pathname.startsWith("/chemicals")?y="Fine Chemicals":N.pathname.startsWith("/microbiology")?y="MicroBiology Products":N.pathname.startsWith("/plant-culture-tested-chemical")?y="Plant Culture Tested Chemical":N.pathname.startsWith("/cell-culture-tested-chemical")&&(y="Cell Culture Tested Chemical"));const{chemicalName:f,subCategoryName:S}=N.state||{};s.useEffect((()=>{(a&&t||c)&&(async()=>{var e,s;try{let e;p(!0),b(null),e=c?await v.get("/api/chemical/getChemicalBysubsubCategorySlug",{params:{slug:c}}):await v.get("/api/chemical/getChemical",{params:{categoryslug:a,subcategoryslug:t}});const s=e.data;n(Array.isArray(s)?s:[]),m(Array.isArray(s)?s:[])}catch(r){b((null==(s=null==(e=r.response)?void 0:e.data)?void 0:s.message)||"An error occurred while fetching chemicals")}finally{p(!1)}})()}),[a,t,c]),s.useEffect((()=>{(()=>{let e=[...i];d.length>0&&(e=e.filter((e=>d.includes(e.subSubCategorySlug)))),x.length>0&&(e=e.filter((e=>x.includes(e.grade)))),m(e)})()}),[i,d,x]);const C=o.map((e=>{var s;return{id:e._id,name:e.name,slug:e.slug,auto_p_code:e.auto_p_code,molecularFormula:e.molecular_formula,molecularWeight:e.molecular_weight,category:e.categorySlug,subCategory:e.subCategorySlug,subSubCategory:e.subSubCategorySlug,unit:e.unit,cas:e.cas_number,msds:e.msds,specs:e.specs,image:(null==(s=e.images)?void 0:s.length)>0?e.images[0]:null}}));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-7xl mx-auto py-4 mb-10",children:[e.jsx(w,{chemicalName:f,slug2:t,categoryName:y,subCategoryName:S,subsubCategorySlug:c,categorySlug:a,subCategorySlug:t}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsx(k,{chemicals:i,categorySlug:t,selectedSubCategories:d,selectedGrades:x,setSelectedSubCategories:u,setSelectedGrades:h,subsubCategorySlug:c,categoryName:a}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx($,{categorySlug:t,subsubCategorySlug:c}),e.jsx(_,{chemicals:C,isLoading:g,error:j,subsubCategorySlug:c})]})]})]})})}$.propTypes={categorySlug:m.string.isRequired,subsubCategorySlug:m.string};export{A as default};
