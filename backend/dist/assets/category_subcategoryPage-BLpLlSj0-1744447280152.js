import{j as e,X as $,aV as M,b as L}from"./main-CuiBl65R-1744447280152.js";import{L as _,f as D,c as j,i as R,u as B}from"./vendor-C9iLKeEQ-1744447280152.js";import{C as F}from"./checkbox-B5_yOwYf-1744447280152.js";import{C as O,a as z}from"./card-N6jj2GhE-1744447280152.js";import{P as T}from"./index-Cx4FKMlN-1744447280152.js";import{T as U,a as q,b as I,c as P,d as H,e as k}from"./table-DEEIn3Z8-1744447280152.js";import{S as V,a as G,b as Q,c as X,d as Y}from"./select-JUTv4TS8-1744447280152.js";import"./index-CQ9A5EyY-1744447280152.js";import"./check-BB3Iq3Th-1744447280152.js";import"./Combination-DyKxFJA2-1744447280152.js";import"./chevron-up-BYb3Nwr--1744447280152.js";const A=t=>t?t.split(/[-\s]+/).map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"";function J({chemicalName:t,categorySlug:l,categoryName:c,slug2:m,subsubCategorySlug:o}){return console.log(c),e.jsx("nav",{className:"text-sm mb-6 border-b-2 pb-3",children:e.jsxs("ol",{className:"list-none p-0 inline-flex",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(_,{to:"/",className:"text-[15px]",children:"Home"}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(_,{to:"/categories",className:"text-[15px]",children:"Products"}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-[15px]",children:e.jsx(_,{to:`/${l}`,className:"text-black",children:A(c)})}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsx("li",{className:"flex items-center",children:e.jsx("span",{className:"text-[15px]",children:e.jsx(_,{to:`/chemicals/${m}`,className:"text-black",children:A(m)})})}),o&&e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"mx-2",children:"››"}),e.jsx("span",{className:"text-[15px] text-orange-600",children:A(o)})]})]})})}function K({chemicals:t,categorySlug:l,selectedSubCategories:c,selectedGrades:m,setSelectedSubCategories:o,setSelectedGrades:u,subsubCategorySlug:d,categoryName:p}){const g=t.reduce((a,r)=>{const s=r.grade||"Other";return a[s]=(a[s]||0)+1,a},{}),f=D(),y=t.reduce((a,r)=>{const s=r.subSubCategorySlug||"Uncategorized";return a[s]=(a[s]||0)+1,a},{}),N=a=>a.split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),C=(a,r)=>{o(a?s=>[...s,r]:s=>s.filter(i=>i!==r))},w=(a,r)=>{u(a?s=>[...s,r]:s=>s.filter(i=>i!==r))},v=()=>{f(`/${p}`),o([]),u([])},x=a=>{o(r=>r.filter(s=>s!==a))},S=a=>{alert("hii"),u(r=>r.filter(s=>s!==a)),setTimeout(()=>{f(`/chemicals/${l}`)},0)};return d?c.includes(d):c.includes(l),e.jsx(O,{className:"md:col-span-1 bg-[#dee8ff] rounded-none p-3",children:e.jsxs(z,{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-normal mb-4",children:"Your Selections"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Categories:"}),e.jsxs("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{children:d?`${d} (${t.length})`:`${N(l)} (${t.length})`}),e.jsx("button",{onClick:v,className:"ml-2 text-white bg-red-600 mr-2  w-4 pb-2 h-4",children:e.jsx($,{size:16})})]}),c.map(a=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:N(a)}),e.jsx("button",{onClick:()=>x(a),className:"ml-2 text-white bg-red-600   w-4 pb-2 h-4",children:e.jsx($,{size:16})})]},a))]})]}),m.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Grades:"}),e.jsx("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:m.map(a=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:a}),e.jsx("button",{onClick:()=>S(a),className:"text-gray-600 hover:text-red-600",children:e.jsx($,{size:16})})]},a))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Categories"}),e.jsx("div",{className:"space-y-2",children:Object.entries(y).map(([a,r])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{id:a,checked:d?a===d:c.includes(a),onCheckedChange:s=>C(s,a)}),e.jsxs("label",{htmlFor:a,className:"text-sm",children:[N(a)," (",r,")"]})]},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Grades"}),e.jsx("div",{className:"space-y-2",children:Object.entries(g).map(([a,r])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{id:a,checked:m.includes(a),onCheckedChange:s=>w(s,a)}),e.jsxs("label",{htmlFor:a,className:"text-sm",children:[a," (",r,")"]})]},a))})]})]})]})})}const W=({chemicals:t,isLoading:l,msds:c,specs:m,error:o})=>{const u=D(),[d,p]=j.useState(1),[g,f]=j.useState(5);if(console.log(t),l)return e.jsx("div",{className:"p-4 text-center",children:"Loading..."});if(o)return e.jsxs("div",{className:"p-4 text-center text-red-500",children:["Error fetching chemicals: ",o]});if(t.length===0)return e.jsx("div",{className:"p-4 text-center",children:"No products found."});const y=d*g,N=y-g,C=t.slice(N,y),w=Math.ceil(t.length/g),v=s=>{const i=s.replace(/\s+/g,"-").toLowerCase();console.log(`Redirecting to: /${i}`),u(`/${i}`)},x=s=>{s&&window.open(`/api/image/specs/view/${s}`,"_blank")},S=s=>{s&&window.open(`/api/image/msds/view/${s}`,"_blank")},a=s=>{p(s)},r=s=>{f(Number(s)),p(1)};return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-4 py-1 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Items per page:"}),e.jsxs(V,{value:g.toString(),onValueChange:r,children:[e.jsx(G,{className:"w-[60px] bg-white border-gray-200 hover:border-gray-300",children:e.jsx(Q,{})}),e.jsx(X,{children:[5,10,20,30,40,50].map(s=>e.jsx(Y,{className:"w-[60px]",value:s.toString(),children:s},s))})]})]}),e.jsxs("div",{className:"text-gray-600 font-medium",children:["Showing ",e.jsx("span",{className:"text-gray-900",children:N+1})," to ",e.jsx("span",{className:"text-gray-900",children:Math.min(y,t.length)})," of ",e.jsx("span",{className:"text-gray-900",children:t.length})," items"]})]}),e.jsxs(U,{children:[e.jsx(q,{children:e.jsxs(I,{className:"bg-[#264796] hover:bg-[#264796]",children:[e.jsx(P,{className:"text-white",children:"Product Code"}),e.jsx(P,{className:"text-white",children:"Product Name"}),e.jsx(P,{className:"text-white",children:"CAS"}),e.jsx(P,{className:"text-white",children:"TDS"}),e.jsx(P,{className:"text-white",children:"MSDS"})]})}),e.jsx(H,{children:C.map((s,i)=>e.jsxs(I,{className:i%2!==0?"bg-[#93aff0]/60 hover:bg-[#93aff0]/60":"",children:[e.jsx(k,{children:s.auto_p_code}),e.jsx(k,{className:"text-blue-900",children:e.jsx("button",{className:"text-blue-900 hover:no-underline",onClick:()=>v(s.slug),children:s.name})}),e.jsx(k,{className:"text-blue-900",children:s.cas}),e.jsx(k,{className:"text-blue-900",children:s.specs?e.jsx("button",{className:"text-blue-900 hover:underline",onClick:()=>x(s.specs),children:"Specs"}):"Specs"}),e.jsx(k,{className:"text-blue-900",children:s.msds?e.jsx("button",{className:"text-blue-900 hover:underline",onClick:()=>S(s.msds),children:"MSDS"}):"MSDS"})]},s.auto_p_code))})]}),e.jsx("div",{className:"flex justify-end gap-1.5 mt-6",children:[...Array(w)].map((s,i)=>e.jsx("button",{onClick:()=>a(i+1),className:`px-4 py-2 border rounded-md transition-colors duration-200 ${d===i+1?"bg-[#264796] text-white border-[#264796] hover:bg-[#1e357a]":"text-gray-700 border-gray-200 hover:bg-gray-50 hover:border-gray-300"}`,children:i+1},i+1))})]})};W.propTypes={chemicals:T.array.isRequired,isLoading:T.bool.isRequired,error:T.string};const E=({categorySlug:t,subsubCategorySlug:l})=>{const{data:c,error:m,isLoading:o}=M(t);if(console.log(c),o)return e.jsx("p",{children:"Loading..."});if(m)return e.jsx("p",{children:"Error loading category data."});if(!c)return e.jsx("p",{children:"Category Not Found"});const{category:u,details:d,photo:p}=c,g=l?l.charAt(0).toUpperCase()+l.slice(1):u;return e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:g}),!l&&e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsx("div",{className:"w-full md:w-1/4",children:e.jsx("img",{src:`/api/logo/download/${p}`,alt:u||"hey",className:"w-full object-contain"})}),e.jsx("div",{className:"w-full md:w-3/4",children:e.jsx("p",{className:"text-gray-700 text-justify",children:d})})]})]})};E.propTypes={categorySlug:T.string.isRequired,subsubCategorySlug:T.string};function de(){const{chemicals:t,slug:l,subsubCategorySlug:c}=R();console.log({chemicals:t,slug:l,subsubCategorySlug:c});const[m,o]=j.useState([]),[u,d]=j.useState([]),[p,g]=j.useState([]),[f,y]=j.useState([]),[N,C]=j.useState(!0),[w,v]=j.useState(null),x=B(),S=x.pathname.startsWith("/chemicals")||x.pathname.startsWith("/microbiology")||x.pathname.startsWith("/plant-culture-tested-chemical")||x.pathname.startsWith("/cell-culture-tested-chemical");let a="";S&&(x.pathname.startsWith("/chemicals")?a="Fine Chemicals":x.pathname.startsWith("/microbiology")?a="MicroBiology Products":x.pathname.startsWith("/plant-culture-tested-chemical")?a="Plant Culture Tested Chemical":x.pathname.startsWith("/cell-culture-tested-chemical")&&(a="Cell Culture Tested Chemical"));const{chemicalName:r,subCategoryName:s}=x.state||{};j.useEffect(()=>{(t&&l||c)&&(async()=>{try{C(!0),v(null);let h;c?h=await L.get("/api/chemical/getChemicalBysubsubCategorySlug",{params:{slug:c}}):h=await L.get("/api/chemical/getChemical",{params:{categoryslug:t,subcategoryslug:l}});const b=h.data;o(Array.isArray(b)?b:[]),d(Array.isArray(b)?b:[])}catch(h){console.error("API Error:",h),v(h.response?.data?.message||"An error occurred while fetching chemicals")}finally{C(!1)}})()},[t,l,c]),j.useEffect(()=>{(()=>{let h=[...m];p.length>0&&(h=h.filter(b=>p.includes(b.subSubCategorySlug))),f.length>0&&(h=h.filter(b=>f.includes(b.grade))),d(h)})()},[m,p,f]);const i=u.map(n=>({id:n._id,name:n.name,slug:n.slug,auto_p_code:n.auto_p_code,molecularFormula:n.molecular_formula,molecularWeight:n.molecular_weight,category:n.categorySlug,subCategory:n.subCategorySlug,subSubCategory:n.subSubCategorySlug,unit:n.unit,cas:n.cas_number,msds:n.msds,specs:n.specs,image:n.images?.length>0?n.images[0]:null}));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-7xl mx-auto py-4 mb-10",children:[e.jsx(J,{chemicalName:r,slug2:l,categoryName:a,subCategoryName:s,subsubCategorySlug:c,categorySlug:t,subCategorySlug:l}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsx(K,{chemicals:m,categorySlug:l,selectedSubCategories:p,selectedGrades:f,setSelectedSubCategories:g,setSelectedGrades:y,subsubCategorySlug:c,categoryName:t}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(E,{categorySlug:l,subsubCategorySlug:c}),e.jsx(W,{chemicals:i,isLoading:N,error:w,subsubCategorySlug:c})]})]})]})})}export{de as default};
