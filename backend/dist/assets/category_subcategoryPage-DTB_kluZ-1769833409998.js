import{j as e,L,f as E,aL as A,r as j,C as _,c2 as B,a as O,i as z,c as I}from"./index-Bz9LGQy6-1769833409998.js";import{C as D}from"./checkbox-wdHeYXKV-1769833409998.js";import{C as U,a as q}from"./card-BAodk89K-1769833409998.js";import{T as H,a as G,b as W,c as k,d as V,e as T}from"./table-CguyRssc-1769833409998.js";import{S as Q,a as X,b as Y,c as J,d as K}from"./select-Dcv52KWQ-1769833409998.js";import"./index-DyHHWIte-1769833409998.js";import"./index-Bcyj91ik-1769833409998.js";const F=t=>t?t.split(/[-\s]+/).map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"";function Z({chemicalName:t,categorySlug:l,categoryName:c,slug2:m,subsubCategorySlug:o}){return console.log(c),e.jsx("nav",{className:"text-sm mb-6 border-b-2 pb-3",children:e.jsxs("ol",{className:"list-none p-0 inline-flex",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(L,{to:"/",className:"text-[15px]",children:"Home"}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(L,{to:"/categories",className:"text-[15px]",children:"Products"}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-[15px]",children:e.jsx(L,{to:`/${l}`,className:"text-black",children:F(c)})}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsx("li",{className:"flex items-center",children:e.jsx("span",{className:"text-[15px]",children:e.jsx(L,{to:`/chemicals/${m}`,className:"text-black",children:F(m)})})}),o&&e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"mx-2",children:"››"}),e.jsx("span",{className:"text-[15px] text-orange-600",children:F(o)})]})]})})}function ee({chemicals:t,categorySlug:l,selectedSubCategories:c,selectedGrades:m,setSelectedSubCategories:o,setSelectedGrades:h,subsubCategorySlug:d,categoryName:u}){const g=t.reduce((a,r)=>{const s=r.grade||"Other";return a[s]=(a[s]||0)+1,a},{}),f=E(),b=t.reduce((a,r)=>{const s=r.subSubCategorySlug||"Uncategorized";return a[s]=(a[s]||0)+1,a},{}),N=a=>a.split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),y=(a,r)=>{o(a?s=>[...s,r]:s=>s.filter(i=>i!==r))},S=(a,r)=>{h(a?s=>[...s,r]:s=>s.filter(i=>i!==r))},C=()=>{f(`/${u}`),o([]),h([])},x=a=>{o(r=>r.filter(s=>s!==a))},P=a=>{alert("hii"),h(r=>r.filter(s=>s!==a)),setTimeout(()=>{f(`/chemicals/${l}`)},0)};return d?c.includes(d):c.includes(l),e.jsx(U,{className:"md:col-span-1 bg-[#dee8ff] rounded-none p-3",children:e.jsxs(q,{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-normal mb-4",children:"Your Selections"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Categories:"}),e.jsxs("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{children:d?`${d} (${t.length})`:`${N(l)} (${t.length})`}),e.jsx("button",{onClick:C,className:"ml-2 text-white bg-red-600 mr-2  w-4 pb-2 h-4",children:e.jsx(A,{size:16})})]}),c.map(a=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:N(a)}),e.jsx("button",{onClick:()=>x(a),className:"ml-2 text-white bg-red-600   w-4 pb-2 h-4",children:e.jsx(A,{size:16})})]},a))]})]}),m.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Grades:"}),e.jsx("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:m.map(a=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:a}),e.jsx("button",{onClick:()=>P(a),className:"text-gray-600 hover:text-red-600",children:e.jsx(A,{size:16})})]},a))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Categories"}),e.jsx("div",{className:"space-y-2",children:Object.entries(b).map(([a,r])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{id:a,checked:d?a===d:c.includes(a),onCheckedChange:s=>y(s,a)}),e.jsxs("label",{htmlFor:a,className:"text-sm",children:[N(a)," (",r,")"]})]},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Grades"}),e.jsx("div",{className:"space-y-2",children:Object.entries(g).map(([a,r])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{id:a,checked:m.includes(a),onCheckedChange:s=>S(s,a)}),e.jsxs("label",{htmlFor:a,className:"text-sm",children:[a," (",r,")"]})]},a))})]})]})]})})}const M=({chemicals:t,isLoading:l,msds:c,specs:m,error:o})=>{const h=E(),[d,u]=j.useState(1),[g,f]=j.useState(5);if(console.log(t),l)return e.jsx("div",{className:"p-4 text-center",children:"Loading..."});if(o)return e.jsxs("div",{className:"p-4 text-center text-red-500",children:["Error fetching chemicals: ",o]});if(t.length===0)return e.jsx("div",{className:"p-4 text-center",children:"No products found."});const b=d*g,N=b-g,y=t.slice(N,b),S=Math.ceil(t.length/g),C=s=>{const i=s.replace(/\s+/g,"-").toLowerCase();console.log(`Redirecting to: /${i}`),h(`/${i}`)},x=s=>{s&&window.open(`/api/image/specs/view/${s}`,"_blank")},P=s=>{s&&window.open(`/api/image/msds/view/${s}`,"_blank")},a=s=>{u(s)},r=s=>{f(Number(s)),u(1)};return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-4 py-1 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Items per page:"}),e.jsxs(Q,{value:g.toString(),onValueChange:r,children:[e.jsx(X,{className:"w-[60px] bg-white border-gray-200 hover:border-gray-300",children:e.jsx(Y,{})}),e.jsx(J,{children:[5,10,20,30,40,50].map(s=>e.jsx(K,{className:"w-[60px]",value:s.toString(),children:s},s))})]})]}),e.jsxs("div",{className:"text-gray-600 font-medium",children:["Showing ",e.jsx("span",{className:"text-gray-900",children:N+1})," to ",e.jsx("span",{className:"text-gray-900",children:Math.min(b,t.length)})," of ",e.jsx("span",{className:"text-gray-900",children:t.length})," items"]})]}),e.jsxs(H,{children:[e.jsx(G,{children:e.jsxs(W,{className:"bg-[#264796] hover:bg-[#264796]",children:[e.jsx(k,{className:"text-white",children:"Product Code"}),e.jsx(k,{className:"text-white",children:"Product Name"}),e.jsx(k,{className:"text-white",children:"CAS"}),e.jsx(k,{className:"text-white",children:"TDS"}),e.jsx(k,{className:"text-white",children:"MSDS"})]})}),e.jsx(V,{children:y.map((s,i)=>e.jsxs(W,{className:i%2!==0?"bg-[#93aff0]/60 hover:bg-[#93aff0]/60":"",children:[e.jsx(T,{children:s.auto_p_code}),e.jsx(T,{className:"text-blue-900",children:e.jsx("button",{className:"text-blue-900 hover:no-underline",onClick:()=>C(s.slug),children:s.name})}),e.jsx(T,{className:"text-blue-900",children:s.cas}),e.jsx(T,{className:"text-blue-900",children:s.specs?e.jsx("button",{className:"text-blue-900 hover:underline",onClick:()=>x(s.specs),children:"Specs"}):"Specs"}),e.jsx(T,{className:"text-blue-900",children:s.msds?e.jsx("button",{className:"text-blue-900 hover:underline",onClick:()=>P(s.msds),children:"MSDS"}):"MSDS"})]},s.auto_p_code))})]}),e.jsx("div",{className:"flex justify-end gap-1.5 mt-6",children:[...Array(S)].map((s,i)=>e.jsx("button",{onClick:()=>a(i+1),className:`px-4 py-2 border rounded-md transition-colors duration-200 ${d===i+1?"bg-[#264796] text-white border-[#264796] hover:bg-[#1e357a]":"text-gray-700 border-gray-200 hover:bg-gray-50 hover:border-gray-300"}`,children:i+1},i+1))})]})};M.propTypes={chemicals:_.array.isRequired,isLoading:_.bool.isRequired,error:_.string};const R=({categorySlug:t,subsubCategorySlug:l})=>{const{data:c,error:m,isLoading:o}=B(t);if(console.log(c),o)return e.jsx("p",{children:"Loading..."});if(m)return e.jsx("p",{children:"Error loading category data."});if(!c)return e.jsx("p",{children:"Category Not Found"});const{category:h,details:d,photo:u}=c,g=l?l.charAt(0).toUpperCase()+l.slice(1):h;return e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:g}),!l&&e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsx("div",{className:"w-full md:w-1/4",children:e.jsx("img",{src:`/api/logo/download/${u}`,alt:h||"hey",className:"w-full object-contain"})}),e.jsx("div",{className:"w-full md:w-3/4",children:e.jsx("p",{className:"text-gray-700 text-justify",children:d})})]})]})};R.propTypes={categorySlug:_.string.isRequired,subsubCategorySlug:_.string};function ie(){const{chemicals:t,slug:l,subsubCategorySlug:c}=O();console.log({chemicals:t,slug:l,subsubCategorySlug:c});const[m,o]=j.useState([]),[h,d]=j.useState([]),[u,g]=j.useState([]),[f,b]=j.useState([]),[N,y]=j.useState(!0),[S,C]=j.useState(null),x=z(),P=x.pathname.startsWith("/chemicals")||x.pathname.startsWith("/microbiology")||x.pathname.startsWith("/plant-culture-tested-chemical")||x.pathname.startsWith("/cell-culture-tested-chemical");let a="";P&&(x.pathname.startsWith("/chemicals")?a="Fine Chemicals":x.pathname.startsWith("/microbiology")?a="MicroBiology Products":x.pathname.startsWith("/plant-culture-tested-chemical")?a="Plant Culture Tested Chemical":x.pathname.startsWith("/cell-culture-tested-chemical")&&(a="Cell Culture Tested Chemical"));const{chemicalName:r,subCategoryName:s}=x.state||{};j.useEffect(()=>{(t&&l||c)&&(async()=>{var p,v;try{y(!0),C(null);let w;c?w=await I.get("/api/chemical/getChemicalBysubsubCategorySlug",{params:{slug:c}}):w=await I.get("/api/chemical/getChemical",{params:{categoryslug:t,subcategoryslug:l}});const $=w.data;o(Array.isArray($)?$:[]),d(Array.isArray($)?$:[])}catch(w){console.error("API Error:",w),C(((v=(p=w.response)==null?void 0:p.data)==null?void 0:v.message)||"An error occurred while fetching chemicals")}finally{y(!1)}})()},[t,l,c]),j.useEffect(()=>{(()=>{let p=[...m];u.length>0&&(p=p.filter(v=>u.includes(v.subSubCategorySlug))),f.length>0&&(p=p.filter(v=>f.includes(v.grade))),d(p)})()},[m,u,f]);const i=h.map(n=>{var p;return{id:n._id,name:n.name,slug:n.slug,auto_p_code:n.auto_p_code,molecularFormula:n.molecular_formula,molecularWeight:n.molecular_weight,category:n.categorySlug,subCategory:n.subCategorySlug,subSubCategory:n.subSubCategorySlug,unit:n.unit,cas:n.cas_number,msds:n.msds,specs:n.specs,image:((p=n.images)==null?void 0:p.length)>0?n.images[0]:null}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-7xl mx-auto py-4 mb-10",children:[e.jsx(Z,{chemicalName:r,slug2:l,categoryName:a,subCategoryName:s,subsubCategorySlug:c,categorySlug:t,subCategorySlug:l}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsx(ee,{chemicals:m,categorySlug:l,selectedSubCategories:u,selectedGrades:f,setSelectedSubCategories:g,setSelectedGrades:b,subsubCategorySlug:c,categoryName:t}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(R,{categorySlug:l,subsubCategorySlug:c}),e.jsx(M,{chemicals:i,isLoading:N,error:S,subsubCategorySlug:c})]})]})]})})}export{ie as default};
