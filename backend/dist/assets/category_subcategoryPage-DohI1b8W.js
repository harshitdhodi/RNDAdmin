import{j as e,X as s,aX as a}from"./main-DeRxjK88.js";import{L as t,d as l,r,g as c,u as i}from"./vendor-router-Bu4EHm1B.js";import{C as n}from"./checkbox-BgMhpwnf.js";import{C as d,a as o}from"./card-RXDLfuok.js";import{P as m}from"./index-B-CvGcig.js";import{T as x,a as h,b as u,c as g,d as p,e as j}from"./table-Cj_y_WH9.js";import{S as b,a as N,b as y,c as f,d as S}from"./select-Dqodnixf.js";import{a as C}from"./vendor-utils-BfOc9lHv.js";import"./vendor-react-CI5aWZjI.js";import"./index-Kj7Vjsi3.js";import"./check-CVm68GV7.js";import"./Combination-CNfQ0noH.js";import"./chevron-up-3rt5hBY6.js";const v=e=>e?e.split(/[-\s]+/).map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "):"";function w({chemicalName:s,categorySlug:a,categoryName:l,slug2:r,subsubCategorySlug:c}){return e.jsx("nav",{className:"text-sm mb-6 border-b-2 pb-3",children:e.jsxs("ol",{className:"list-none p-0 inline-flex",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(t,{to:"/",className:"text-[15px]",children:"Home"}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(t,{to:"/categories",className:"text-[15px]",children:"Products"}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-[15px]",children:e.jsx(t,{to:`/${a}`,className:"text-black",children:v(l)})}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsx("li",{className:"flex items-center",children:e.jsx("span",{className:"text-[15px]",children:e.jsx(t,{to:`/chemicals/${r}`,className:"text-black",children:v(r)})})}),c&&e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"mx-2",children:"››"}),e.jsx("span",{className:"text-[15px] text-orange-600",children:v(c)})]})]})})}function k({chemicals:a,categorySlug:t,selectedSubCategories:r,selectedGrades:c,setSelectedSubCategories:i,setSelectedGrades:m,subsubCategorySlug:x,categoryName:h}){const u=a.reduce(((e,s)=>{const a=s.grade||"Other";return e[a]=(e[a]||0)+1,e}),{}),g=l(),p=a.reduce(((e,s)=>{const a=s.subSubCategorySlug||"Uncategorized";return e[a]=(e[a]||0)+1,e}),{}),j=e=>e.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");return x?r.includes(x):r.includes(t),e.jsx(d,{className:"md:col-span-1 bg-[#dee8ff] rounded-none p-3",children:e.jsxs(o,{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-normal mb-4",children:"Your Selections"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Categories:"}),e.jsxs("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{children:x?`${x} (${a.length})`:`${j(t)} (${a.length})`}),e.jsx("button",{onClick:()=>{g(`/${h}`),i([]),m([])},className:"ml-2 text-white bg-red-600 mr-2  w-4 pb-2 h-4",children:e.jsx(s,{size:16})})]}),r.map((a=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:j(a)}),e.jsx("button",{onClick:()=>(e=>{i((s=>s.filter((s=>s!==e))))})(a),className:"ml-2 text-white bg-red-600   w-4 pb-2 h-4",children:e.jsx(s,{size:16})})]},a)))]})]}),c.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Grades:"}),e.jsx("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:c.map((a=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:a}),e.jsx("button",{onClick:()=>(e=>{alert("hii"),m((s=>s.filter((s=>s!==e)))),setTimeout((()=>{g(`/chemicals/${t}`)}),0)})(a),className:"text-gray-600 hover:text-red-600",children:e.jsx(s,{size:16})})]},a)))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Categories"}),e.jsx("div",{className:"space-y-2",children:Object.entries(p).map((([s,a])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{id:s,checked:x?s===x:r.includes(s),onCheckedChange:e=>((e,s)=>{i(e?e=>[...e,s]:e=>e.filter((e=>e!==s)))})(e,s)}),e.jsxs("label",{htmlFor:s,className:"text-sm",children:[j(s)," (",a,")"]})]},s)))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Grades"}),e.jsx("div",{className:"space-y-2",children:Object.entries(u).map((([s,a])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{id:s,checked:c.includes(s),onCheckedChange:e=>((e,s)=>{m(e?e=>[...e,s]:e=>e.filter((e=>e!==s)))})(e,s)}),e.jsxs("label",{htmlFor:s,className:"text-sm",children:[s," (",a,")"]})]},s)))})]})]})]})})}const _=({chemicals:s,isLoading:a,msds:t,specs:c,error:i})=>{const n=l(),[d,o]=r.useState(1),[m,C]=r.useState(5);if(a)return e.jsx("div",{className:"p-4 text-center",children:"Loading..."});if(i)return e.jsxs("div",{className:"p-4 text-center text-red-500",children:["Error fetching chemicals: ",i]});if(0===s.length)return e.jsx("div",{className:"p-4 text-center",children:"No products found."});const v=d*m,w=v-m,k=s.slice(w,v),_=Math.ceil(s.length/m);return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-4 py-1 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Items per page:"}),e.jsxs(b,{value:m.toString(),onValueChange:e=>{C(Number(e)),o(1)},children:[e.jsx(N,{className:"w-[60px] bg-white border-gray-200 hover:border-gray-300",children:e.jsx(y,{})}),e.jsx(f,{children:[5,10,20,30,40,50].map((s=>e.jsx(S,{className:"w-[60px]",value:s.toString(),children:s},s)))})]})]}),e.jsxs("div",{className:"text-gray-600 font-medium",children:["Showing ",e.jsx("span",{className:"text-gray-900",children:w+1})," to ",e.jsx("span",{className:"text-gray-900",children:Math.min(v,s.length)})," of ",e.jsx("span",{className:"text-gray-900",children:s.length})," items"]})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsxs(u,{className:"bg-[#264796] hover:bg-[#264796]",children:[e.jsx(g,{className:"text-white",children:"Product Code"}),e.jsx(g,{className:"text-white",children:"Product Name"}),e.jsx(g,{className:"text-white",children:"CAS"}),e.jsx(g,{className:"text-white",children:"TDS"}),e.jsx(g,{className:"text-white",children:"MSDS"})]})}),e.jsx(p,{children:k.map(((s,a)=>e.jsxs(u,{className:a%2!=0?"bg-[#93aff0]/60 hover:bg-[#93aff0]/60":"",children:[e.jsx(j,{children:s.auto_p_code}),e.jsx(j,{className:"text-blue-900",children:e.jsx("button",{className:"text-blue-900 hover:no-underline",onClick:()=>(e=>{const s=e.replace(/\s+/g,"-").toLowerCase();n(`/${s}`)})(s.slug),children:s.name})}),e.jsx(j,{className:"text-blue-900",children:s.cas}),e.jsx(j,{className:"text-blue-900",children:s.specs?e.jsx("button",{className:"text-blue-900 hover:underline",onClick:()=>{var e;(e=s.specs)&&window.open(`/api/image/specs/view/${e}`,"_blank")},children:"Specs"}):"Specs"}),e.jsx(j,{className:"text-blue-900",children:s.msds?e.jsx("button",{className:"text-blue-900 hover:underline",onClick:()=>{var e;(e=s.msds)&&window.open(`/api/image/msds/view/${e}`,"_blank")},children:"MSDS"}):"MSDS"})]},s.auto_p_code)))})]}),e.jsx("div",{className:"flex justify-end gap-1.5 mt-6",children:[...Array(_)].map(((s,a)=>e.jsx("button",{onClick:()=>{o(a+1)},className:"px-4 py-2 border rounded-md transition-colors duration-200 "+(d===a+1?"bg-[#264796] text-white border-[#264796] hover:bg-[#1e357a]":"text-gray-700 border-gray-200 hover:bg-gray-50 hover:border-gray-300"),children:a+1},a+1)))})]})};_.propTypes={chemicals:m.array.isRequired,isLoading:m.bool.isRequired,error:m.string};const $=({categorySlug:s,subsubCategorySlug:t})=>{const{data:l,error:r,isLoading:c}=a(s);if(c)return e.jsx("p",{children:"Loading..."});if(r)return e.jsx("p",{children:"Error loading category data."});if(!l)return e.jsx("p",{children:"Category Not Found"});const{category:i,details:n,photo:d}=l,o=t?t.charAt(0).toUpperCase()+t.slice(1):i;return e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:o}),!t&&e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsx("div",{className:"w-full md:w-1/4",children:e.jsx("img",{src:`/api/logo/download/${d}`,alt:i||"hey",className:"w-full object-contain"})}),e.jsx("div",{className:"w-full md:w-3/4",children:e.jsx("p",{className:"text-gray-700 text-justify",children:n})})]})]})};function A(){const{chemicals:s,slug:a,subsubCategorySlug:t}=c(),[l,n]=r.useState([]),[d,o]=r.useState([]),[m,x]=r.useState([]),[h,u]=r.useState([]),[g,p]=r.useState(!0),[j,b]=r.useState(null),N=i();let y="";(N.pathname.startsWith("/chemicals")||N.pathname.startsWith("/microbiology")||N.pathname.startsWith("/plant-culture-tested-chemical")||N.pathname.startsWith("/cell-culture-tested-chemical"))&&(N.pathname.startsWith("/chemicals")?y="Fine Chemicals":N.pathname.startsWith("/microbiology")?y="MicroBiology Products":N.pathname.startsWith("/plant-culture-tested-chemical")?y="Plant Culture Tested Chemical":N.pathname.startsWith("/cell-culture-tested-chemical")&&(y="Cell Culture Tested Chemical"));const{chemicalName:f,subCategoryName:S}=N.state||{};r.useEffect((()=>{(s&&a||t)&&(async()=>{try{let e;p(!0),b(null),e=t?await C.get("/api/chemical/getChemicalBysubsubCategorySlug",{params:{slug:t}}):await C.get("/api/chemical/getChemical",{params:{categoryslug:s,subcategoryslug:a}});const l=e.data;n(Array.isArray(l)?l:[]),o(Array.isArray(l)?l:[])}catch(e){b(e.response?.data?.message||"An error occurred while fetching chemicals")}finally{p(!1)}})()}),[s,a,t]),r.useEffect((()=>{(()=>{let e=[...l];m.length>0&&(e=e.filter((e=>m.includes(e.subSubCategorySlug)))),h.length>0&&(e=e.filter((e=>h.includes(e.grade)))),o(e)})()}),[l,m,h]);const v=d.map((e=>({id:e._id,name:e.name,slug:e.slug,auto_p_code:e.auto_p_code,molecularFormula:e.molecular_formula,molecularWeight:e.molecular_weight,category:e.categorySlug,subCategory:e.subCategorySlug,subSubCategory:e.subSubCategorySlug,unit:e.unit,cas:e.cas_number,msds:e.msds,specs:e.specs,image:e.images?.length>0?e.images[0]:null})));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-7xl mx-auto py-4 mb-10",children:[e.jsx(w,{chemicalName:f,slug2:a,categoryName:y,subCategoryName:S,subsubCategorySlug:t,categorySlug:s,subCategorySlug:a}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsx(k,{chemicals:l,categorySlug:a,selectedSubCategories:m,selectedGrades:h,setSelectedSubCategories:x,setSelectedGrades:u,subsubCategorySlug:t,categoryName:s}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx($,{categorySlug:a,subsubCategorySlug:t}),e.jsx(_,{chemicals:v,isLoading:g,error:j,subsubCategorySlug:t})]})]})]})})}$.propTypes={categorySlug:m.string.isRequired,subsubCategorySlug:m.string};export{A as default};
//# sourceMappingURL=category_subcategoryPage-DohI1b8W.js.map
