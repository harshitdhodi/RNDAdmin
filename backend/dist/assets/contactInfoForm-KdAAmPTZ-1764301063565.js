import{r as x,cm as y,j as t,X as c}from"./index-DhlDUgTv-1764301063565.js";const C=()=>{const[l,n]=x.useState({photo:[],imgTitle:[""],altName:[""],address:"",mobiles:[""],emails:[""]}),[b,d]=x.useState([""]),[h,u]=x.useState([]),[N]=y(),j=(a,e)=>{const s=a.target.files[0];if(s){const i=[...b];i[e]=s.name,d(i);const r=[...h];r[e]=s,u(r)}},g=async a=>{a.preventDefault();try{const e=new FormData;h.forEach((s,i)=>{s&&e.append("photo",s)}),e.append("imgTitle",JSON.stringify(l.imgTitle.filter(s=>s))),e.append("altName",JSON.stringify(l.altName.filter(s=>s))),e.append("address",l.address),e.append("mobiles",JSON.stringify(l.mobiles.filter(s=>s))),e.append("emails",JSON.stringify(l.emails.filter(s=>s))),await N(e).unwrap(),n({photo:[],imgTitle:[""],altName:[""],address:"",mobiles:[""],emails:[""]}),d([""]),u([])}catch(e){console.error("Failed to add user:",e)}},p=(a,e,s)=>{n(i=>({...i,[a]:i[a].map((r,f)=>f===e?s:r)}))},o=a=>{n(e=>({...e,[a]:[...e[a],""]})),a==="photo"&&(d(e=>[...e,""]),u(e=>[...e,null]))},m=(a,e)=>{n(s=>({...s,[a]:s[a].filter((i,r)=>r!==e)})),a==="photo"&&(d(s=>s.filter((i,r)=>r!==e)),u(s=>s.filter((i,r)=>r!==e)))};return t.jsx("div",{className:"max-w-2xl mx-auto p-6",children:t.jsxs("form",{onSubmit:g,className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Photos"}),b.map((a,e)=>t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx("input",{type:"file",onChange:s=>j(s,e),accept:"image/jpeg,image/png,image/gif,image/webp",className:"flex-1 p-2 border rounded",required:!0}),a&&t.jsx("span",{className:"text-sm text-gray-500",children:a}),e>0&&t.jsx("button",{type:"button",onClick:()=>m("photo",e),className:"p-2 text-red-500",children:t.jsx(c,{size:20})})]},e)),t.jsx("button",{type:"button",onClick:()=>o("photo"),className:"text-sm text-blue-500",children:"+ Add another photo"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Image Titles"}),l.imgTitle.map((a,e)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:a,onChange:s=>p("imgTitle",e,s.target.value),placeholder:"Enter image title",className:"flex-1 p-2 border rounded",required:!0}),e>0&&t.jsx("button",{type:"button",onClick:()=>m("imgTitle",e),className:"p-2 text-red-500",children:t.jsx(c,{size:20})})]},e)),t.jsx("button",{type:"button",onClick:()=>o("imgTitle"),className:"text-sm text-blue-500",children:"+ Add another title"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Alternative Names"}),l.altName.map((a,e)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:a,onChange:s=>p("altName",e,s.target.value),placeholder:"Enter alternative name",className:"flex-1 p-2 border rounded",required:!0}),e>0&&t.jsx("button",{type:"button",onClick:()=>m("altName",e),className:"p-2 text-red-500",children:t.jsx(c,{size:20})})]},e)),t.jsx("button",{type:"button",onClick:()=>o("altName"),className:"text-sm text-blue-500",children:"+ Add another name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium",children:"Address"}),t.jsx("input",{type:"text",value:l.address,onChange:a=>n(e=>({...e,address:a.target.value})),placeholder:"Enter address",className:"w-full p-2 border rounded",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Mobile Numbers"}),l.mobiles.map((a,e)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"tel",value:a,onChange:s=>p("mobiles",e,s.target.value),placeholder:"Enter mobile number",className:"flex-1 p-2 border rounded",required:!0}),e>0&&t.jsx("button",{type:"button",onClick:()=>m("mobiles",e),className:"p-2 text-red-500",children:t.jsx(c,{size:20})})]},e)),t.jsx("button",{type:"button",onClick:()=>o("mobiles"),className:"text-sm text-blue-500",children:"+ Add another mobile"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium",children:"Email Addresses"}),l.emails.map((a,e)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"email",value:a,onChange:s=>p("emails",e,s.target.value),placeholder:"Enter email address",className:"flex-1 p-2 border rounded",required:!0,pattern:"^\\S+@\\S+\\.\\S+$"}),e>0&&t.jsx("button",{type:"button",onClick:()=>m("emails",e),className:"p-2 text-red-500",children:t.jsx(c,{size:20})})]},e)),t.jsx("button",{type:"button",onClick:()=>o("emails"),className:"text-sm text-blue-500",children:"+ Add another email"})]}),t.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600",children:"Submit"})]})})};export{C as default};
