{"version":3,"file":"contactInfoForm-cw6akBzg.js","sources":["../../src/websiteBackend/contactInfo/contactInfoForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { X } from 'lucide-react';\r\nimport { useAddUserMutation } from '@/slice/contactInfo/contactInfo';\r\n\r\nconst ContactForm = () => {\r\n  const [formData, setFormData] = useState({\r\n    photo: [],\r\n    imgTitle: [''],\r\n    altName: [''],\r\n    address: '',\r\n    mobiles: [''],\r\n    emails: ['']\r\n  });\r\n\r\n  const [fileNames, setFileNames] = useState(['']);\r\n  const [files, setFiles] = useState([]); // Store actual files\r\n  const [addUser] = useAddUserMutation();\r\n\r\n  const handleFileChange = (e, index) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      // Update file names for display\r\n      const newFileNames = [...fileNames];\r\n      newFileNames[index] = file.name;\r\n      setFileNames(newFileNames);\r\n\r\n      // Store the actual file\r\n      const newFiles = [...files];\r\n      newFiles[index] = file;\r\n      setFiles(newFiles);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      // Create FormData object\r\n      const formDataToSend = new FormData();\r\n\r\n      // Append files\r\n      files.forEach((file, index) => {\r\n        if (file) {\r\n          formDataToSend.append('photo', file);\r\n        }\r\n      });\r\n\r\n      // Append other form data\r\n      formDataToSend.append('imgTitle', JSON.stringify(formData.imgTitle.filter(t => t)));\r\n      formDataToSend.append('altName', JSON.stringify(formData.altName.filter(n => n)));\r\n      formDataToSend.append('address', formData.address);\r\n      formDataToSend.append('mobiles', JSON.stringify(formData.mobiles.filter(m => m)));\r\n      formDataToSend.append('emails', JSON.stringify(formData.emails.filter(e => e)));\r\n\r\n      await addUser(formDataToSend).unwrap();\r\n      \r\n      // Reset form after successful submission\r\n      setFormData({\r\n        photo: [],\r\n        imgTitle: [''],\r\n        altName: [''],\r\n        address: '',\r\n        mobiles: [''],\r\n        emails: ['']\r\n      });\r\n      setFileNames(['']);\r\n      setFiles([]);\r\n    } catch (error) {\r\n      console.error('Failed to add user:', error);\r\n    }\r\n  };\r\n\r\n  const handleArrayInput = (field, index, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: prev[field].map((item, i) => i === index ? value : item)\r\n    }));\r\n  };\r\n\r\n  const addArrayField = (field) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: [...prev[field], '']\r\n    }));\r\n    if (field === 'photo') {\r\n      setFileNames(prev => [...prev, '']);\r\n      setFiles(prev => [...prev, null]);\r\n    }\r\n  };\r\n\r\n  const removeArrayField = (field, index) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: prev[field].filter((_, i) => i !== index)\r\n    }));\r\n    if (field === 'photo') {\r\n      setFileNames(prev => prev.filter((_, i) => i !== index));\r\n      setFiles(prev => prev.filter((_, i) => i !== index));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto p-6\">\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* Photos Section */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-medium\">Photos</label>\r\n          {fileNames.map((fileName, index) => (\r\n            <div key={index} className=\"flex gap-2 items-center\">\r\n              <input\r\n                type=\"file\"\r\n                onChange={(e) => handleFileChange(e, index)}\r\n                accept=\"image/jpeg,image/png,image/gif,image/webp\"\r\n                className=\"flex-1 p-2 border rounded\"\r\n                required\r\n              />\r\n              {fileName && (\r\n                <span className=\"text-sm text-gray-500\">\r\n                  {fileName}\r\n                </span>\r\n              )}\r\n              {index > 0 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => removeArrayField('photo', index)}\r\n                  className=\"p-2 text-red-500\"\r\n                >\r\n                  <X size={20} />\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => addArrayField('photo')}\r\n            className=\"text-sm text-blue-500\"\r\n          >\r\n            + Add another photo\r\n          </button>\r\n        </div>\r\n\r\n        {/* Rest of the form fields remain the same */}\r\n        {/* Image Titles */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-medium\">Image Titles</label>\r\n          {formData.imgTitle.map((title, index) => (\r\n            <div key={index} className=\"flex gap-2\">\r\n              <input\r\n                type=\"text\"\r\n                value={title}\r\n                onChange={(e) => handleArrayInput('imgTitle', index, e.target.value)}\r\n                placeholder=\"Enter image title\"\r\n                className=\"flex-1 p-2 border rounded\"\r\n                required\r\n              />\r\n              {index > 0 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => removeArrayField('imgTitle', index)}\r\n                  className=\"p-2 text-red-500\"\r\n                >\r\n                  <X size={20} />\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => addArrayField('imgTitle')}\r\n            className=\"text-sm text-blue-500\"\r\n          >\r\n            + Add another title\r\n          </button>\r\n        </div>\r\n\r\n        {/* Alt Names */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-medium\">Alternative Names</label>\r\n          {formData.altName.map((name, index) => (\r\n            <div key={index} className=\"flex gap-2\">\r\n              <input\r\n                type=\"text\"\r\n                value={name}\r\n                onChange={(e) => handleArrayInput('altName', index, e.target.value)}\r\n                placeholder=\"Enter alternative name\"\r\n                className=\"flex-1 p-2 border rounded\"\r\n                required\r\n              />\r\n              {index > 0 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => removeArrayField('altName', index)}\r\n                  className=\"p-2 text-red-500\"\r\n                >\r\n                  <X size={20} />\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => addArrayField('altName')}\r\n            className=\"text-sm text-blue-500\"\r\n          >\r\n            + Add another name\r\n          </button>\r\n        </div>\r\n\r\n        {/* Address */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium\">Address</label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.address}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, address: e.target.value }))}\r\n            placeholder=\"Enter address\"\r\n            className=\"w-full p-2 border rounded\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        {/* Mobile Numbers */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-medium\">Mobile Numbers</label>\r\n          {formData.mobiles.map((mobile, index) => (\r\n            <div key={index} className=\"flex gap-2\">\r\n              <input\r\n                type=\"tel\"\r\n                value={mobile}\r\n                onChange={(e) => handleArrayInput('mobiles', index, e.target.value)}\r\n                placeholder=\"Enter mobile number\"\r\n                className=\"flex-1 p-2 border rounded\"\r\n                required\r\n              />\r\n              {index > 0 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => removeArrayField('mobiles', index)}\r\n                  className=\"p-2 text-red-500\"\r\n                >\r\n                  <X size={20} />\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => addArrayField('mobiles')}\r\n            className=\"text-sm text-blue-500\"\r\n          >\r\n            + Add another mobile\r\n          </button>\r\n        </div>\r\n\r\n        {/* Email Addresses */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-medium\">Email Addresses</label>\r\n          {formData.emails.map((email, index) => (\r\n            <div key={index} className=\"flex gap-2\">\r\n              <input\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={(e) => handleArrayInput('emails', index, e.target.value)}\r\n                placeholder=\"Enter email address\"\r\n                className=\"flex-1 p-2 border rounded\"\r\n                required\r\n                pattern=\"^\\S+@\\S+\\.\\S+$\"\r\n              />\r\n              {index > 0 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => removeArrayField('emails', index)}\r\n                  className=\"p-2 text-red-500\"\r\n                >\r\n                  <X size={20} />\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => addArrayField('emails')}\r\n            className=\"text-sm text-blue-500\"\r\n          >\r\n            + Add another email\r\n          </button>\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600\"\r\n        >\r\n          Submit\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactForm;"],"names":["ContactForm","formData","setFormData","useState","photo","imgTitle","altName","address","mobiles","emails","fileNames","setFileNames","files","setFiles","addUser","useAddUserMutation","handleArrayInput","field","index","value","prev","map","item","i","addArrayField","removeArrayField","filter","_","jsx","className","children","onSubmit","async","e","preventDefault","formDataToSend","FormData","forEach","file","append","JSON","stringify","t","n","m","unwrap","error","jsxs","fileName","type","onChange","target","newFileNames","name","newFiles","handleFileChange","accept","required","onClick","X","size","title","placeholder","mobile","email","pattern"],"mappings":"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"}