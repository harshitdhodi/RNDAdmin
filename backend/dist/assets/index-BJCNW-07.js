import{o as T}from"./toArray-CgZcBx3z.js";import{c as s,b as x}from"./vendor-DNXw0_ws.js";import{a3 as D,p as Ne,H as Se,x as ke,B as ne,a4 as Re,s as H,a5 as oe,a6 as Me,C as z,h as le,c as I,a7 as Fe,a8 as Be,a9 as Ae,aa as L,n as Le,a0 as ze,d as Q,ab as re,ac as We,q as De,ad as He,ae as Ve,af as _e,a2 as qe}from"./index-Dx4ajweK.js";import{R as Qe}from"./CheckCircleFilled-B9cYDV8S.js";import{R as Xe}from"./ExclamationCircleFilled-Dpe_HOR5.js";import{R as Ge}from"./InfoCircleFilled-Ce7fYp6d.js";import{A as se}from"./ActionButton-DLMmUlA7.js";import{u as ae,D as Ue,p as Ze,a as Ye,P as Je}from"./index-BPXp0nzG.js";import{S as Ke}from"./Skeleton-CvnQqXwz.js";import{w as et}from"./dropdown-CuRJ2VRe.js";function tt(){const[e,n]=s.useState([]),l=s.useCallback(t=>(n(o=>[].concat(T(o),[t])),()=>{n(o=>o.filter(a=>a!==t))}),[]);return[e,l]}const F=x.createContext({}),{Provider:ce}=F,X=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:l,isSilent:t,mergedOkCancel:o,rootPrefixCls:a,close:u,onCancel:i,onConfirm:c}=s.useContext(F);return o?x.createElement(se,{isSilent:t,actionFn:i,close:function(){u==null||u.apply(void 0,arguments),c==null||c(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${a}-btn`},l):null},G=()=>{const{autoFocusButton:e,close:n,isSilent:l,okButtonProps:t,rootPrefixCls:o,okTextLocale:a,okType:u,onConfirm:i,onOk:c}=s.useContext(F);return x.createElement(se,{isSilent:l,type:u||"primary",actionFn:c,close:function(){n==null||n.apply(void 0,arguments),i==null||i(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},a)};function U(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function Z(e){const{closable:n,closeIcon:l}=e||{};return x.useMemo(()=>{if(!n&&(n===!1||l===!1||l===null))return!1;if(n===void 0&&l===void 0)return null;let t={closeIcon:typeof l!="boolean"&&l!==null?l:void 0};return n&&typeof n=="object"&&(t=Object.assign(Object.assign({},t),n)),t},[n,l])}function Y(){const e={};for(var n=arguments.length,l=new Array(n),t=0;t<n;t++)l[t]=arguments[t];return l.forEach(o=>{o&&Object.keys(o).forEach(a=>{o[a]!==void 0&&(e[a]=o[a])})}),e}const nt={};function ot(e,n){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nt;const t=Z(e),o=Z(n),a=typeof t!="boolean"?!!(t!=null&&t.disabled):!1,u=x.useMemo(()=>Object.assign({closeIcon:x.createElement(D,null)},l),[l]),i=x.useMemo(()=>t===!1?!1:t?Y(u,o,t):o===!1?!1:o?Y(u,o):u.closable?u:!1,[t,o,u]);return x.useMemo(()=>{if(i===!1)return[!1,null,a];const{closeIconRender:c}=u,{closeIcon:C}=i;let r=C;if(r!=null){c&&(r=c(C));const f=Ne(i,!0);Object.keys(f).length&&(r=x.isValidElement(r)?x.cloneElement(r,f):x.createElement("span",Object.assign({},f),r))}return[!0,r,a]},[i,u])}const lt=()=>Se()&&window.document.documentElement;function J(){}const rt=s.createContext({add:J,remove:J});function st(e){const n=s.useContext(rt),l=s.useRef(null);return ke(o=>{if(o){const a=e?o.querySelector(e):o;n.add(a),l.current=a}else n.remove(l.current)})}const K=()=>{const{cancelButtonProps:e,cancelTextLocale:n,onCancel:l}=s.useContext(F);return x.createElement(ne,Object.assign({onClick:l},e),n)},ee=()=>{const{confirmLoading:e,okButtonProps:n,okType:l,okTextLocale:t,onOk:o}=s.useContext(F);return x.createElement(ne,Object.assign({},Re(l),{loading:e,onClick:o},n),t)};function ie(e,n){return x.createElement("span",{className:`${e}-close-x`},n||x.createElement(D,{className:`${e}-close-icon`}))}const ue=e=>{const{okText:n,okType:l="primary",cancelText:t,confirmLoading:o,onOk:a,onCancel:u,okButtonProps:i,cancelButtonProps:c,footer:C}=e,[r]=H("Modal",oe()),f=n||(r==null?void 0:r.okText),d=t||(r==null?void 0:r.cancelText),p={confirmLoading:o,okButtonProps:i,cancelButtonProps:c,okTextLocale:f,cancelTextLocale:d,okType:l,onOk:a,onCancel:u},y=x.useMemo(()=>p,T(Object.values(p)));let m;return typeof C=="function"||typeof C>"u"?(m=x.createElement(x.Fragment,null,x.createElement(K,null),x.createElement(ee,null)),typeof C=="function"&&(m=C(m,{OkBtn:ee,CancelBtn:K})),m=x.createElement(ce,{value:y},m)):m=C,x.createElement(Me,{disabled:!1},m)};var at=function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};let W;const ct=e=>{W={x:e.pageX,y:e.pageY},setTimeout(()=>{W=null},100)};lt()&&document.documentElement.addEventListener("click",ct,!0);const fe=e=>{var n;const{getPopupContainer:l,getPrefixCls:t,direction:o,modal:a}=s.useContext(z),u=M=>{const{onCancel:S}=e;S==null||S(M)},i=M=>{const{onOk:S}=e;S==null||S(M)},{prefixCls:c,className:C,rootClassName:r,open:f,wrapClassName:d,centered:p,getContainer:y,focusTriggerAfterClose:m=!0,style:g,visible:b,width:v=520,footer:E,classNames:O,styles:P,children:w,loading:N}=e,j=at(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),h=t("modal",c),R=t(),A=le(h),[Pe,V,he]=ae(h,A),Ee=I(d,{[`${h}-centered`]:!!p,[`${h}-wrap-rtl`]:o==="rtl"}),$e=E!==null&&!N?s.createElement(ue,Object.assign({},e,{onOk:i,onCancel:u})):null,[_,q,je]=ot(U(e),U(a),{closable:!0,closeIcon:s.createElement(D,{className:`${h}-close-icon`}),closeIconRender:M=>ie(h,M)}),Ie=st(`.${h}-content`),[Te,we]=Fe("Modal",j.zIndex);return Pe(s.createElement(Be,{form:!0,space:!0},s.createElement(Ae.Provider,{value:we},s.createElement(Ue,Object.assign({width:v},j,{zIndex:Te,getContainer:y===void 0?l:y,prefixCls:h,rootClassName:I(V,r,he,A),footer:$e,visible:f??b,mousePosition:(n=j.mousePosition)!==null&&n!==void 0?n:W,onClose:u,closable:_&&{disabled:je,closeIcon:q},closeIcon:q,focusTriggerAfterClose:m,transitionName:L(R,"zoom",e.transitionName),maskTransitionName:L(R,"fade",e.maskTransitionName),className:I(V,C,a==null?void 0:a.className),style:Object.assign(Object.assign({},a==null?void 0:a.style),g),classNames:Object.assign(Object.assign(Object.assign({},a==null?void 0:a.classNames),O),{wrapper:I(Ee,O==null?void 0:O.wrapper)}),styles:Object.assign(Object.assign({},a==null?void 0:a.styles),P),panelRef:Ie}),N?s.createElement(Ke,{active:!0,title:!1,paragraph:{rows:4},className:`${h}-body-skeleton`}):w))))},it=e=>{const{componentCls:n,titleFontSize:l,titleLineHeight:t,modalConfirmIconSize:o,fontSize:a,lineHeight:u,modalTitleHeight:i,fontHeight:c,confirmBodyPadding:C}=e,r=`${n}-confirm`;return{[r]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${r}-body-wrapper`]:Object.assign({},ze()),[`&${n} ${n}-body`]:{padding:C},[`${r}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(c).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(i).sub(o).equal()).div(2).equal()}},[`${r}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${Q(e.marginSM)})`},[`${e.iconCls} + ${r}-paragraph`]:{maxWidth:`calc(100% - ${Q(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${r}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:l,lineHeight:t},[`${r}-content`]:{color:e.colorText,fontSize:a,lineHeight:u},[`${r}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${r}-error ${r}-body > ${e.iconCls}`]:{color:e.colorError},[`${r}-warning ${r}-body > ${e.iconCls},
        ${r}-confirm ${r}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${r}-info ${r}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${r}-success ${r}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},ut=Le(["Modal","confirm"],e=>{const n=Ze(e);return[it(n)]},Ye,{order:-1e3});var ft=function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};function de(e){const{prefixCls:n,icon:l,okText:t,cancelText:o,confirmPrefixCls:a,type:u,okCancel:i,footer:c,locale:C}=e,r=ft(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=l;if(!l&&l!==null)switch(u){case"info":f=s.createElement(Ge,null);break;case"success":f=s.createElement(Qe,null);break;case"error":f=s.createElement(We,null);break;default:f=s.createElement(Xe,null)}const d=i??u==="confirm",p=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[y]=H("Modal"),m=C||y,g=t||(d?m==null?void 0:m.okText:m==null?void 0:m.justOkText),b=o||(m==null?void 0:m.cancelText),v=Object.assign({autoFocusButton:p,cancelTextLocale:b,okTextLocale:g,mergedOkCancel:d},r),E=s.useMemo(()=>v,T(Object.values(v))),O=s.createElement(s.Fragment,null,s.createElement(X,null),s.createElement(G,null)),P=e.title!==void 0&&e.title!==null,w=`${a}-body`;return s.createElement("div",{className:`${a}-body-wrapper`},s.createElement("div",{className:I(w,{[`${w}-has-title`]:P})},f,s.createElement("div",{className:`${a}-paragraph`},P&&s.createElement("span",{className:`${a}-title`},e.title),s.createElement("div",{className:`${a}-content`},e.content))),c===void 0||typeof c=="function"?s.createElement(ce,{value:E},s.createElement("div",{className:`${a}-btns`},typeof c=="function"?c(O,{OkBtn:G,CancelBtn:X}):O)):c,s.createElement(ut,{prefixCls:n}))}const dt=e=>{const{close:n,zIndex:l,afterClose:t,open:o,keyboard:a,centered:u,getContainer:i,maskStyle:c,direction:C,prefixCls:r,wrapClassName:f,rootPrefixCls:d,bodyStyle:p,closable:y=!1,closeIcon:m,modalRender:g,focusTriggerAfterClose:b,onConfirm:v,styles:E}=e,O=`${r}-confirm`,P=e.width||416,w=e.style||{},N=e.mask===void 0?!0:e.mask,j=e.maskClosable===void 0?!1:e.maskClosable,h=I(O,`${O}-${e.type}`,{[`${O}-rtl`]:C==="rtl"},e.className),[,R]=De(),A=s.useMemo(()=>l!==void 0?l:R.zIndexPopupBase+He,[l,R]);return s.createElement(fe,{prefixCls:r,className:h,wrapClassName:I({[`${O}-centered`]:!!e.centered},f),onCancel:()=>{n==null||n({triggerCancel:!0}),v==null||v(!1)},open:o,title:"",footer:null,transitionName:L(d||"","zoom",e.transitionName),maskTransitionName:L(d||"","fade",e.maskTransitionName),mask:N,maskClosable:j,style:w,styles:Object.assign({body:p,mask:c},E),width:P,zIndex:A,afterClose:t,keyboard:a,centered:u,getContainer:i,closable:y,closeIcon:m,modalRender:g,focusTriggerAfterClose:b},s.createElement(de,Object.assign({},e,{confirmPrefixCls:O})))},me=e=>{const{rootPrefixCls:n,iconPrefixCls:l,direction:t,theme:o}=e;return s.createElement(re,{prefixCls:n,iconPrefixCls:l,direction:t,theme:o},s.createElement(dt,Object.assign({},e)))},k=[];let Ce="";function ge(){return Ce}const mt=e=>{var n,l;const{prefixCls:t,getContainer:o,direction:a}=e,u=oe(),i=s.useContext(z),c=ge()||i.getPrefixCls(),C=t||`${c}-modal`;let r=o;return r===!1&&(r=void 0),x.createElement(me,Object.assign({},e,{rootPrefixCls:c,prefixCls:C,iconPrefixCls:i.iconPrefixCls,theme:i.theme,direction:a??i.direction,locale:(l=(n=i.locale)===null||n===void 0?void 0:n.Modal)!==null&&l!==void 0?l:u,getContainer:r}))};function B(e){const n=_e(),l=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:c,open:!0}),o,a;function u(){for(var r,f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];if(d.some(g=>g==null?void 0:g.triggerCancel)){var m;(r=e.onCancel)===null||r===void 0||(m=r).call.apply(m,[e,()=>{}].concat(T(d.slice(1))))}for(let g=0;g<k.length;g++)if(k[g]===c){k.splice(g,1);break}a()}function i(r){clearTimeout(o),o=setTimeout(()=>{const f=n.getPrefixCls(void 0,ge()),d=n.getIconPrefixCls(),p=n.getTheme(),y=x.createElement(mt,Object.assign({},r));a=Ve()(x.createElement(re,{prefixCls:f,iconPrefixCls:d,theme:p},n.holderRender?n.holderRender(y):y),l)})}function c(){for(var r=arguments.length,f=new Array(r),d=0;d<r;d++)f[d]=arguments[d];t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),u.apply(this,f)}}),t.visible&&delete t.visible,i(t)}function C(r){typeof r=="function"?t=r(t):t=Object.assign(Object.assign({},t),r),i(t)}return i(t),k.push(c),{destroy:c,update:C}}function be(e){return Object.assign(Object.assign({},e),{type:"warning"})}function ve(e){return Object.assign(Object.assign({},e),{type:"info"})}function pe(e){return Object.assign(Object.assign({},e),{type:"success"})}function xe(e){return Object.assign(Object.assign({},e),{type:"error"})}function ye(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Ct(e){let{rootPrefixCls:n}=e;Ce=n}var gt=function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};const bt=(e,n)=>{var l,{afterClose:t,config:o}=e,a=gt(e,["afterClose","config"]);const[u,i]=s.useState(!0),[c,C]=s.useState(o),{direction:r,getPrefixCls:f}=s.useContext(z),d=f("modal"),p=f(),y=()=>{var v;t(),(v=c.afterClose)===null||v===void 0||v.call(c)},m=function(){var v;i(!1);for(var E=arguments.length,O=new Array(E),P=0;P<E;P++)O[P]=arguments[P];if(O.some(j=>j==null?void 0:j.triggerCancel)){var N;(v=c.onCancel)===null||v===void 0||(N=v).call.apply(N,[c,()=>{}].concat(T(O.slice(1))))}};s.useImperativeHandle(n,()=>({destroy:m,update:v=>{C(E=>Object.assign(Object.assign({},E),v))}}));const g=(l=c.okCancel)!==null&&l!==void 0?l:c.type==="confirm",[b]=H("Modal",qe.Modal);return s.createElement(me,Object.assign({prefixCls:d,rootPrefixCls:p},c,{close:m,open:u,afterClose:y,okText:c.okText||(g?b==null?void 0:b.okText:b==null?void 0:b.justOkText),direction:c.direction||r,cancelText:c.cancelText||(b==null?void 0:b.cancelText)},a))},vt=s.forwardRef(bt);let te=0;const pt=s.memo(s.forwardRef((e,n)=>{const[l,t]=tt();return s.useImperativeHandle(n,()=>({patchElement:t}),[]),s.createElement(s.Fragment,null,l)}));function xt(){const e=s.useRef(null),[n,l]=s.useState([]);s.useEffect(()=>{n.length&&(T(n).forEach(u=>{u()}),l([]))},[n]);const t=s.useCallback(a=>function(i){var c;te+=1;const C=s.createRef();let r;const f=new Promise(g=>{r=g});let d=!1,p;const y=s.createElement(vt,{key:`modal-${te}`,config:a(i),ref:C,afterClose:()=>{p==null||p()},isSilent:()=>d,onConfirm:g=>{r(g)}});return p=(c=e.current)===null||c===void 0?void 0:c.patchElement(y),p&&k.push(p),{destroy:()=>{function g(){var b;(b=C.current)===null||b===void 0||b.destroy()}C.current?g():l(b=>[].concat(T(b),[g]))},update:g=>{function b(){var v;(v=C.current)===null||v===void 0||v.update(g)}C.current?b():l(v=>[].concat(T(v),[b]))},then:g=>(d=!0,f.then(g))}},[]);return[s.useMemo(()=>({info:t(ve),success:t(pe),error:t(xe),warning:t(be),confirm:t(ye)}),[]),s.createElement(pt,{key:"modal-holder",ref:e})]}var yt=function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};const Ot=e=>{const{prefixCls:n,className:l,closeIcon:t,closable:o,type:a,title:u,children:i,footer:c}=e,C=yt(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:r}=s.useContext(z),f=r(),d=n||r("modal"),p=le(f),[y,m,g]=ae(d,p),b=`${d}-confirm`;let v={};return a?v={closable:o??!1,title:"",footer:"",children:s.createElement(de,Object.assign({},e,{prefixCls:d,confirmPrefixCls:b,rootPrefixCls:f,content:i}))}:v={closable:o??!0,title:u,footer:c!==null&&s.createElement(ue,Object.assign({},e)),children:i},y(s.createElement(Je,Object.assign({prefixCls:d,className:I(m,`${d}-pure-panel`,a&&b,a&&`${b}-${a}`,l,g,p)},C,{closeIcon:ie(d,t),closable:o},v)))},Pt=et(Ot);function Oe(e){return B(be(e))}const $=fe;$.useModal=xt;$.info=function(n){return B(ve(n))};$.success=function(n){return B(pe(n))};$.error=function(n){return B(xe(n))};$.warning=Oe;$.warn=Oe;$.confirm=function(n){return B(ye(n))};$.destroyAll=function(){for(;k.length;){const n=k.pop();n&&n()}};$.config=Ct;$._InternalPanelDoNotUseOrYouWillBeFired=Pt;export{$ as M};
