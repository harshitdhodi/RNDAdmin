const e={x:!1,y:!1};function n(){return e.x||e.y}function t(e,n){const t=function(e){if(e instanceof Element)return[e];if("string"==typeof e){const n=document.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e)}(e),r=new AbortController;return[t,{passive:!0,...n,signal:r.signal},()=>r.abort()]}function r(e){return t=>{"touch"===t.pointerType||n()||e(t)}}function o(e,n,o={}){const[i,s,a]=t(e,o),u=r((e=>{const{target:t}=e,o=n(e);if(!o||!t)return;const i=r((e=>{o(e),t.removeEventListener("pointerleave",i)}));t.addEventListener("pointerleave",i,s)}));return i.forEach((e=>{e.addEventListener("pointerenter",u,s)})),a}const i=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,s=new WeakSet;function a(e){return n=>{"Enter"===n.key&&e(n)}}function u(e,n){e.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const c=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const d=(e,n)=>!!n&&(e===n||d(e,n.parentElement));function l(e){return i(e)&&!n()}function f(e,n,r={}){const[o,i,f]=t(e,r),E=e=>{const t=e.currentTarget;if(!l(e)||s.has(t))return;s.add(t);const o=n(e),a=(e,n)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",c),l(e)&&s.has(t)&&(s.delete(t),o&&o(e,{success:n}))},u=e=>{a(e,r.useGlobalTarget||d(t,e.target))},c=e=>{a(e,!1)};window.addEventListener("pointerup",u,i),window.addEventListener("pointercancel",c,i)};return o.forEach((e=>{(function(e){return c.has(e.tagName)||-1!==e.tabIndex})(e)||(e.tabIndex=0);(r.useGlobalTarget?window:e).addEventListener("pointerdown",E,i),e.addEventListener("focus",(e=>((e,n)=>{const t=e.currentTarget;if(!t)return;const r=a((()=>{if(s.has(t))return;u(t,"down");const e=a((()=>{u(t,"up")}));t.addEventListener("keyup",e,n),t.addEventListener("blur",(()=>u(t,"cancel")),n)}));t.addEventListener("keydown",r,n),t.addEventListener("blur",(()=>t.removeEventListener("keydown",r)),n)})(e,i)),i)})),f}function E(n){return"x"===n||"y"===n?e[n]?null:(e[n]=!0,()=>{e[n]=!1}):e.x||e.y?null:(e.x=e.y=!0,()=>{e.x=e.y=!1})}export{o as h,i,f as p,E as s};
