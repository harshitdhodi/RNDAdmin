import{e as $,b as k,g as ot,c as z,d as $e,_ as Lt,a as _t,k as Dt}from"./@babel-C_xKm-6V.js";import{c as De}from"./classnames-Bv6oJzD9.js";import{R as lt}from"./rc-resize-observer-h7CJ_t66.js";import{x as A,P as Tt,u as Se,d as Qe}from"./rc-util-C9ihiQ8l.js";import{r as t}from"./react-DKICu8bO.js";import{r as et}from"./react-dom-BBS6HuAW.js";var st=t.forwardRef(function(e,c){var v=e.height,a=e.offsetY,f=e.offsetX,d=e.children,s=e.prefixCls,i=e.onInnerResize,M=e.innerProps,h=e.rtl,R=e.extra,n={},m={display:"flex",flexDirection:"column"};return a!==void 0&&(n={height:v,position:"relative",overflow:"hidden"},m=$($({},m),{},k(k(k(k(k({transform:"translateY(".concat(a,"px)")},h?"marginRight":"marginLeft",-f),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(lt,{onResize:function(S){var o=S.offsetHeight;o&&i&&i()}},t.createElement("div",ot({style:m,className:De(k({},"".concat(s,"-holder-inner"),s)),ref:c},M),d,R)))});st.displayName="Filler";function zt(e){var c=e.children,v=e.setRef,a=t.useCallback(function(f){v(f)},[]);return t.cloneElement(c,{ref:a})}function Ct(e,c,v,a,f,d,s,i){var M=i.getKey;return e.slice(c,v+1).map(function(h,R){var n=c+R,m=s(h,n,{style:{width:a},offsetX:f}),u=M(h);return t.createElement(zt,{key:u,setRef:function(o){return d(h,o)}},m)})}function It(e,c,v){var a=e.length,f=c.length,d,s;if(a===0&&f===0)return null;a<f?(d=e,s=c):(d=c,s=e);var i={__EMPTY_ITEM__:!0};function M(S){return S!==void 0?v(S):i}for(var h=null,R=Math.abs(a-f)!==1,n=0;n<s.length;n+=1){var m=M(d[n]),u=M(s[n]);if(m!==u){h=n,R=R||m!==M(s[n+1]);break}}return h===null?null:{index:h,multiple:R}}function Ht(e,c,v){var a=t.useState(e),f=z(a,2),d=f[0],s=f[1],i=t.useState(null),M=z(i,2),h=M[0],R=M[1];return t.useEffect(function(){var n=It(d||[],e||[],c);(n==null?void 0:n.index)!==void 0&&R(e[n.index]),s(e)},[e]),[h]}var tt=(typeof navigator>"u"?"undefined":$e(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const ct=function(e,c,v,a){var f=t.useRef(!1),d=t.useRef(null);function s(){clearTimeout(d.current),f.current=!0,d.current=setTimeout(function(){f.current=!1},50)}var i=t.useRef({top:e,bottom:c,left:v,right:a});return i.current.top=e,i.current.bottom=c,i.current.left=v,i.current.right=a,function(M,h){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=M?h<0&&i.current.left||h>0&&i.current.right:h<0&&i.current.top||h>0&&i.current.bottom;return R&&n?(clearTimeout(d.current),f.current=!1):(!n||f.current)&&s(),!f.current&&n}};function Pt(e,c,v,a,f,d,s){var i=t.useRef(0),M=t.useRef(null),h=t.useRef(null),R=t.useRef(!1),n=ct(c,v,a,f);function m(g,E){if(A.cancel(M.current),!n(!1,E)){var x=g;if(!x._virtualHandled)x._virtualHandled=!0;else return;i.current+=E,h.current=E,tt||x.preventDefault(),M.current=A(function(){var X=R.current?10:1;s(i.current*X,!1),i.current=0})}}function u(g,E){s(E,!0),tt||g.preventDefault()}var S=t.useRef(null),o=t.useRef(null);function p(g){if(e){A.cancel(o.current),o.current=A(function(){S.current=null},2);var E=g.deltaX,x=g.deltaY,X=g.shiftKey,P=E,w=x;(S.current==="sx"||!S.current&&X&&x&&!E)&&(P=x,w=0,S.current="sx");var F=Math.abs(P),T=Math.abs(w);S.current===null&&(S.current=d&&F>T?"x":"y"),S.current==="y"?m(g,w):u(g,P)}}function y(g){e&&(R.current=g.detail===h.current)}return[p,y]}function Nt(e,c,v,a){var f=t.useMemo(function(){return[new Map,[]]},[e,v.id,a]),d=z(f,2),s=d[0],i=d[1],M=function(R){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,m=s.get(R),u=s.get(n);if(m===void 0||u===void 0)for(var S=e.length,o=i.length;o<S;o+=1){var p,y=e[o],g=c(y);s.set(g,o);var E=(p=v.get(g))!==null&&p!==void 0?p:a;if(i[o]=(i[o-1]||0)+E,g===R&&(m=o),g===n&&(u=o),m!==void 0&&u!==void 0)break}return{top:i[m-1]||0,bottom:i[u]}};return M}var Ot=function(){function e(){_t(this,e),k(this,"maps",void 0),k(this,"id",0),this.maps=Object.create(null)}return Lt(e,[{key:"set",value:function(v,a){this.maps[v]=a,this.id+=1}},{key:"get",value:function(v){return this.maps[v]}}]),e}();function rt(e){var c=parseFloat(e);return isNaN(c)?0:c}function kt(e,c,v){var a=t.useState(0),f=z(a,2),d=f[0],s=f[1],i=t.useRef(new Map),M=t.useRef(new Ot),h=t.useRef();function R(){A.cancel(h.current)}function n(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R();var S=function(){i.current.forEach(function(p,y){if(p&&p.offsetParent){var g=Tt(p),E=g.offsetHeight,x=getComputedStyle(g),X=x.marginTop,P=x.marginBottom,w=rt(X),F=rt(P),T=E+w+F;M.current.get(y)!==T&&M.current.set(y,T)}}),s(function(p){return p+1})};u?S():h.current=A(S)}function m(u,S){var o=e(u);i.current.get(o),S?(i.current.set(o,S),n()):i.current.delete(o)}return t.useEffect(function(){return R},[]),[m,n,M.current,d]}var nt=14/15;function $t(e,c,v){var a=t.useRef(!1),f=t.useRef(0),d=t.useRef(0),s=t.useRef(null),i=t.useRef(null),M,h=function(u){if(a.current){var S=Math.ceil(u.touches[0].pageX),o=Math.ceil(u.touches[0].pageY),p=f.current-S,y=d.current-o,g=Math.abs(p)>Math.abs(y);g?f.current=S:d.current=o;var E=v(g,g?p:y,!1,u);E&&u.preventDefault(),clearInterval(i.current),E&&(i.current=setInterval(function(){g?p*=nt:y*=nt;var x=Math.floor(g?p:y);(!v(g,x,!0)||Math.abs(x)<=.1)&&clearInterval(i.current)},16))}},R=function(){a.current=!1,M()},n=function(u){M(),u.touches.length===1&&!a.current&&(a.current=!0,f.current=Math.ceil(u.touches[0].pageX),d.current=Math.ceil(u.touches[0].pageY),s.current=u.target,s.current.addEventListener("touchmove",h,{passive:!1}),s.current.addEventListener("touchend",R,{passive:!0}))};M=function(){s.current&&(s.current.removeEventListener("touchmove",h),s.current.removeEventListener("touchend",R))},Se(function(){return e&&c.current.addEventListener("touchstart",n,{passive:!0}),function(){var m;(m=c.current)===null||m===void 0||m.removeEventListener("touchstart",n),M(),clearInterval(i.current)}},[e])}function at(e){return Math.floor(Math.pow(e,.5))}function ke(e,c){var v="touches"in e?e.touches[0]:e;return v[c?"pageX":"pageY"]-window[c?"scrollX":"scrollY"]}function Ft(e,c,v){t.useEffect(function(){var a=c.current;if(e&&a){var f=!1,d,s,i=function(){A.cancel(d)},M=function m(){i(),d=A(function(){v(s),m()})},h=function(u){var S=u;S._virtualHandled||(S._virtualHandled=!0,f=!0)},R=function(){f=!1,i()},n=function(u){if(f){var S=ke(u,!1),o=a.getBoundingClientRect(),p=o.top,y=o.bottom;if(S<=p){var g=p-S;s=-at(g),M()}else if(S>=y){var E=S-y;s=at(E),M()}else i()}};return a.addEventListener("mousedown",h),a.ownerDocument.addEventListener("mouseup",R),a.ownerDocument.addEventListener("mousemove",n),function(){a.removeEventListener("mousedown",h),a.ownerDocument.removeEventListener("mouseup",R),a.ownerDocument.removeEventListener("mousemove",n),i()}}},[e])}var Yt=10;function Xt(e,c,v,a,f,d,s,i){var M=t.useRef(),h=t.useState(null),R=z(h,2),n=R[0],m=R[1];return Se(function(){if(n&&n.times<Yt){if(!e.current){m(function(C){return $({},C)});return}d();var u=n.targetAlign,S=n.originAlign,o=n.index,p=n.offset,y=e.current.clientHeight,g=!1,E=u,x=null;if(y){for(var X=u||S,P=0,w=0,F=0,T=Math.min(c.length-1,o),G=0;G<=T;G+=1){var j=f(c[G]);w=P;var Q=v.get(j);F=w+(Q===void 0?a:Q),P=F}for(var ee=X==="top"?p:y-p,Y=T;Y>=0;Y-=1){var re=f(c[Y]),N=v.get(re);if(N===void 0){g=!0;break}if(ee-=N,ee<=0)break}switch(X){case"top":x=w-p;break;case"bottom":x=F-y+p;break;default:{var q=e.current.scrollTop,W=q+y;w<q?E="top":F>W&&(E="bottom")}}x!==null&&s(x),x!==n.lastTop&&(g=!0)}g&&m($($({},n),{},{times:n.times+1,targetAlign:E,lastTop:x}))}},[n,e.current]),function(u){if(u==null){i();return}if(A.cancel(M.current),typeof u=="number")s(u);else if(u&&$e(u)==="object"){var S,o=u.align;"index"in u?S=u.index:S=c.findIndex(function(g){return f(g)===u.key});var p=u.offset,y=p===void 0?0:p;m({times:0,index:S,offset:y,originAlign:o})}}}var it=t.forwardRef(function(e,c){var v=e.prefixCls,a=e.rtl,f=e.scrollOffset,d=e.scrollRange,s=e.onStartMove,i=e.onStopMove,M=e.onScroll,h=e.horizontal,R=e.spinSize,n=e.containerSize,m=e.style,u=e.thumbStyle,S=t.useState(!1),o=z(S,2),p=o[0],y=o[1],g=t.useState(null),E=z(g,2),x=E[0],X=E[1],P=t.useState(null),w=z(P,2),F=w[0],T=w[1],G=!a,j=t.useRef(),Q=t.useRef(),ee=t.useState(!1),Y=z(ee,2),re=Y[0],N=Y[1],q=t.useRef(),W=function(){clearTimeout(q.current),N(!0),q.current=setTimeout(function(){N(!1)},3e3)},C=d-n||0,oe=n-R||0,_=t.useMemo(function(){if(f===0||C===0)return 0;var O=f/C;return O*oe},[f,C,oe]),J=function(L){L.stopPropagation(),L.preventDefault()},ne=t.useRef({top:_,dragging:p,pageY:x,startTop:F});ne.current={top:_,dragging:p,pageY:x,startTop:F};var ae=function(L){y(!0),X(ke(L,h)),T(ne.current.top),s(),L.stopPropagation(),L.preventDefault()};t.useEffect(function(){var O=function(ie){ie.preventDefault()},L=j.current,V=Q.current;return L.addEventListener("touchstart",O,{passive:!1}),V.addEventListener("touchstart",ae,{passive:!1}),function(){L.removeEventListener("touchstart",O),V.removeEventListener("touchstart",ae)}},[]);var ge=t.useRef();ge.current=C;var le=t.useRef();le.current=oe,t.useEffect(function(){if(p){var O,L=function(ie){var se=ne.current,pe=se.dragging,Me=se.pageY,be=se.startTop;A.cancel(O);var Ee=j.current.getBoundingClientRect(),te=n/(h?Ee.width:Ee.height);if(pe){var ce=(ke(ie,h)-Me)*te,fe=be;!G&&h?fe-=ce:fe+=ce;var ye=ge.current,xe=le.current,Te=xe?fe/xe:0,U=Math.ceil(Te*ye);U=Math.max(U,0),U=Math.min(U,ye),O=A(function(){M(U,h)})}},V=function(){y(!1),i()};return window.addEventListener("mousemove",L,{passive:!0}),window.addEventListener("touchmove",L,{passive:!0}),window.addEventListener("mouseup",V,{passive:!0}),window.addEventListener("touchend",V,{passive:!0}),function(){window.removeEventListener("mousemove",L),window.removeEventListener("touchmove",L),window.removeEventListener("mouseup",V),window.removeEventListener("touchend",V),A.cancel(O)}}},[p]),t.useEffect(function(){return W(),function(){clearTimeout(q.current)}},[f]),t.useImperativeHandle(c,function(){return{delayHidden:W}});var I="".concat(v,"-scrollbar"),B={position:"absolute",visibility:re?null:"hidden"},K={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return h?(B.height=8,B.left=0,B.right=0,B.bottom=0,K.height="100%",K.width=R,G?K.left=_:K.right=_):(B.width=8,B.top=0,B.bottom=0,G?B.right=0:B.left=0,K.width="100%",K.height=R,K.top=_),t.createElement("div",{ref:j,className:De(I,k(k(k({},"".concat(I,"-horizontal"),h),"".concat(I,"-vertical"),!h),"".concat(I,"-visible"),re)),style:$($({},B),m),onMouseDown:J,onMouseMove:W},t.createElement("div",{ref:Q,className:De("".concat(I,"-thumb"),k({},"".concat(I,"-thumb-moving"),p)),style:$($({},K),u),onMouseDown:ae}))}),Wt=20;function ut(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=e/c*e;return isNaN(v)&&(v=0),v=Math.max(v,Wt),Math.floor(v)}var Bt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Vt=[],At={overflowY:"auto",overflowAnchor:"none"};function jt(e,c){var v=e.prefixCls,a=v===void 0?"rc-virtual-list":v,f=e.className,d=e.height,s=e.itemHeight,i=e.fullHeight,M=i===void 0?!0:i,h=e.style,R=e.data,n=e.children,m=e.itemKey,u=e.virtual,S=e.direction,o=e.scrollWidth,p=e.component,y=p===void 0?"div":p,g=e.onScroll,E=e.onVirtualScroll,x=e.onVisibleChange,X=e.innerProps,P=e.extraRender,w=e.styles,F=Dt(e,Bt),T=t.useCallback(function(l){return typeof m=="function"?m(l):l==null?void 0:l[m]},[m]),G=kt(T),j=z(G,4),Q=j[0],ee=j[1],Y=j[2],re=j[3],N=!!(u!==!1&&d&&s),q=t.useMemo(function(){return Object.values(Y.maps).reduce(function(l,r){return l+r},0)},[Y.id,Y.maps]),W=N&&R&&(Math.max(s*R.length,q)>d||!!o),C=S==="rtl",oe=De(a,k({},"".concat(a,"-rtl"),C),f),_=R||Vt,J=t.useRef(),ne=t.useRef(),ae=t.useRef(),ge=t.useState(0),le=z(ge,2),I=le[0],B=le[1],K=t.useState(0),O=z(K,2),L=O[0],V=O[1],Re=t.useState(!1),ie=z(Re,2),se=ie[0],pe=ie[1],Me=function(){pe(!0)},be=function(){pe(!1)},Ee={getKey:T};function te(l){B(function(r){var b;typeof l=="function"?b=l(r):b=l;var D=St(b);return J.current.scrollTop=D,D})}var ce=t.useRef({start:0,end:_.length}),fe=t.useRef(),ye=Ht(_,T),xe=z(ye,1),Te=xe[0];fe.current=Te;var U=t.useMemo(function(){if(!N)return{scrollHeight:void 0,start:0,end:_.length-1,offset:void 0};if(!W){var l;return{scrollHeight:((l=ne.current)===null||l===void 0?void 0:l.offsetHeight)||0,start:0,end:_.length-1,offset:void 0}}for(var r=0,b,D,H,qe=_.length,me=0;me<qe;me+=1){var xt=_[me],wt=T(xt),Je=Y.get(wt),Oe=r+(Je===void 0?s:Je);Oe>=I&&b===void 0&&(b=me,D=r),Oe>I+d&&H===void 0&&(H=me),r=Oe}return b===void 0&&(b=0,D=0,H=Math.ceil(d/s)),H===void 0&&(H=_.length-1),H=Math.min(H+1,_.length-1),{scrollHeight:r,start:b,end:H,offset:D}},[W,N,I,_,re,d]),ue=U.scrollHeight,ve=U.start,de=U.end,Fe=U.offset;ce.current.start=ve,ce.current.end=de;var ft=t.useState({width:0,height:d}),Ye=z(ft,2),Z=Ye[0],vt=Ye[1],dt=function(r){vt({width:r.offsetWidth,height:r.offsetHeight})},Xe=t.useRef(),We=t.useRef(),ht=t.useMemo(function(){return ut(Z.width,o)},[Z.width,o]),mt=t.useMemo(function(){return ut(Z.height,ue)},[Z.height,ue]),ze=ue-d,Ce=t.useRef(ze);Ce.current=ze;function St(l){var r=l;return Number.isNaN(Ce.current)||(r=Math.min(r,Ce.current)),r=Math.max(r,0),r}var we=I<=0,Le=I>=ze,Be=L<=0,Ve=L>=o,gt=ct(we,Le,Be,Ve),Ie=function(){return{x:C?-L:L,y:I}},He=t.useRef(Ie()),_e=Qe(function(l){if(E){var r=$($({},Ie()),l);(He.current.x!==r.x||He.current.y!==r.y)&&(E(r),He.current=r)}});function Ae(l,r){var b=l;r?(et.flushSync(function(){V(b)}),_e()):te(b)}function Rt(l){var r=l.currentTarget.scrollTop;r!==I&&te(r),g==null||g(l),_e()}var Pe=function(r){var b=r,D=o?o-Z.width:0;return b=Math.max(b,0),b=Math.min(b,D),b},pt=Qe(function(l,r){r?(et.flushSync(function(){V(function(b){var D=b+(C?-l:l);return Pe(D)})}),_e()):te(function(b){var D=b+l;return D})}),Mt=Pt(N,we,Le,Be,Ve,!!o,pt),je=z(Mt,2),Ne=je[0],Ke=je[1];$t(N,J,function(l,r,b,D){var H=D;return gt(l,r,b)?!1:!H||!H._virtualHandled?(H&&(H._virtualHandled=!0),Ne({preventDefault:function(){},deltaX:l?r:0,deltaY:l?0:r}),!0):!1}),Ft(W,J,function(l){te(function(r){return r+l})}),Se(function(){function l(b){var D=we&&b.detail<0,H=Le&&b.detail>0;N&&!D&&!H&&b.preventDefault()}var r=J.current;return r.addEventListener("wheel",Ne,{passive:!1}),r.addEventListener("DOMMouseScroll",Ke,{passive:!0}),r.addEventListener("MozMousePixelScroll",l,{passive:!1}),function(){r.removeEventListener("wheel",Ne),r.removeEventListener("DOMMouseScroll",Ke),r.removeEventListener("MozMousePixelScroll",l)}},[N,we,Le]),Se(function(){if(o){var l=Pe(L);V(l),_e({x:l})}},[Z.width,o]);var Ue=function(){var r,b;(r=Xe.current)===null||r===void 0||r.delayHidden(),(b=We.current)===null||b===void 0||b.delayHidden()},Ge=Xt(J,_,Y,s,T,function(){return ee(!0)},te,Ue);t.useImperativeHandle(c,function(){return{nativeElement:ae.current,getScrollInfo:Ie,scrollTo:function(r){function b(D){return D&&$e(D)==="object"&&("left"in D||"top"in D)}b(r)?(r.left!==void 0&&V(Pe(r.left)),Ge(r.top)):Ge(r)}}}),Se(function(){if(x){var l=_.slice(ve,de+1);x(l,_)}},[ve,de,_]);var bt=Nt(_,T,Y,s),Et=P==null?void 0:P({start:ve,end:de,virtual:W,offsetX:L,offsetY:Fe,rtl:C,getSize:bt}),yt=Ct(_,ve,de,o,L,Q,n,Ee),he=null;d&&(he=$(k({},M?"height":"maxHeight",d),At),N&&(he.overflowY="hidden",o&&(he.overflowX="hidden"),se&&(he.pointerEvents="none")));var Ze={};return C&&(Ze.dir="rtl"),t.createElement("div",ot({ref:ae,style:$($({},h),{},{position:"relative"}),className:oe},Ze,F),t.createElement(lt,{onResize:dt},t.createElement(y,{className:"".concat(a,"-holder"),style:he,ref:J,onScroll:Rt,onMouseEnter:Ue},t.createElement(st,{prefixCls:a,height:ue,offsetX:L,offsetY:Fe,scrollWidth:o,onInnerResize:ee,ref:ne,innerProps:X,rtl:C,extra:Et},yt))),W&&ue>d&&t.createElement(it,{ref:Xe,prefixCls:a,scrollOffset:I,scrollRange:ue,rtl:C,onScroll:Ae,onStartMove:Me,onStopMove:be,spinSize:mt,containerSize:Z.height,style:w==null?void 0:w.verticalScrollBar,thumbStyle:w==null?void 0:w.verticalScrollBarThumb}),W&&o>Z.width&&t.createElement(it,{ref:We,prefixCls:a,scrollOffset:L,scrollRange:o,rtl:C,onScroll:Ae,onStartMove:Me,onStopMove:be,spinSize:ht,containerSize:Z.width,horizontal:!0,style:w==null?void 0:w.horizontalScrollBar,thumbStyle:w==null?void 0:w.horizontalScrollBarThumb}))}var Kt=t.forwardRef(jt);Kt.displayName="List";export{Kt as L};
