import{r as e,a as t}from"./react-BfBsRgn0.js";import{f as n,a as r,l as o}from"./dom-helpers-Bmb4RGVl.js";import"./invariant-CjUZpN_a.js";import"./react-lifecycles-compat-vog91_k3.js";import{R as i}from"./react-dom-DwrudmHt.js";import{r as a,g as s}from"./@babel-BfC2A0EA.js";import{P as u}from"./prop-types-BgiiqXIo.js";import{u as l,a as c,b as f,c as p}from"./@restart-B6pX58sT.js";import{p as d,h as m,a as v,c as b,e as y,o as g,f as E,b as w,d as h,g as C}from"./@popperjs-CBnz2Khg.js";import{w as j}from"./warning-t_yLeJPk.js";var x=d({defaultModifiers:[m,v,b,y,g,E,w,h]}),O=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},A={name:"applyStyles",enabled:!1},k={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,n=e.reference,r=e.popper;if("removeAttribute"in n){var o=(n.getAttribute("aria-describedby")||"").split(",").filter((function(e){return e.trim()!==r.id}));o.length?n.setAttribute("aria-describedby",o.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(e){var t,n=e.state.elements,r=n.popper,o=n.reference,i=null==(t=r.getAttribute("role"))?void 0:t.toLowerCase();if(r.id&&"tooltip"===i&&"setAttribute"in o){var a=o.getAttribute("aria-describedby");if(a&&-1!==a.split(",").indexOf(r.id))return;o.setAttribute("aria-describedby",a?a+","+r.id:r.id)}}},P=[];const R=function(e){return n(function(e){return e&&"setState"in e?i.findDOMNode(e):null!=e?e:null}(e))};var S=function(){};var D=function(e){return e&&("current"in e?e.current:e)};function M(e){var t,n,r,o,i,a=e.enabled,u=e.enableEvents,l=e.placement,c=e.flip,f=e.offset,p=e.fixed,d=e.containerPadding,m=e.arrowElement,v=e.popperConfig,b=void 0===v?{}:v,y=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach((function(e){t[e.name]=e})),t):e||t}(b.modifiers);return s({},b,{placement:l,enabled:a,strategy:p?"fixed":b.strategy,modifiers:(i=s({},y,{eventListeners:{enabled:u},preventOverflow:s({},y.preventOverflow,{options:d?s({padding:d},null==(t=y.preventOverflow)?void 0:t.options):null==(n=y.preventOverflow)?void 0:n.options}),offset:{options:s({offset:f},null==(r=y.offset)?void 0:r.options)},arrow:s({},y.arrow,{enabled:!!m,options:s({},null==(o=y.arrow)?void 0:o.options,{element:m})}),flip:s({enabled:!!c},y.flip)}),void 0===i&&(i={}),Array.isArray(i)?i:Object.keys(i).map((function(e){return i[e].name=e,i[e]})))})}var T=function(e){var t;return"undefined"==typeof document?null:null==e?n().body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function K(t,n){var r=e.useState((function(){return T(t)})),o=r[0],i=r[1];if(!o){var a=T(t);a&&i(a)}return e.useEffect((function(){}),[n,o]),e.useEffect((function(){var e=T(t);e!==o&&i(e)}),[t,o]),o}var q=t.forwardRef((function(n,u){var d=n.flip,m=n.offset,v=n.placement,b=n.containerPadding,y=void 0===b?5:b,g=n.popperConfig,E=void 0===g?{}:g,w=n.transition,h=f(),C=h[0],T=h[1],q=f(),U=q[0],H=q[1],L=p(T,u),N=K(n.container),B=K(n.target),W=e.useState(!n.show),z=W[0],F=W[1],G=function(t,n,r){var o=void 0===r?{}:r,i=o.enabled,u=void 0===i||i,c=o.placement,f=void 0===c?"bottom":c,p=o.strategy,d=void 0===p?"absolute":p,m=o.modifiers,v=void 0===m?P:m,b=a(o,["enabled","placement","strategy","modifiers"]),y=e.useRef(),g=e.useCallback((function(){var e;null==(e=y.current)||e.update()}),[]),E=e.useCallback((function(){var e;null==(e=y.current)||e.forceUpdate()}),[]),w=l(e.useState({placement:f,update:g,forceUpdate:E,attributes:{},styles:{popper:O(d),arrow:{}}})),h=w[0],C=w[1],j=e.useMemo((function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,n={},r={};Object.keys(t.elements).forEach((function(e){n[e]=t.styles[e],r[e]=t.attributes[e]})),C({state:t,styles:n,attributes:r,update:g,forceUpdate:E,placement:t.placement})}}}),[g,E,C]);return e.useEffect((function(){y.current&&u&&y.current.setOptions({placement:f,strategy:d,modifiers:[].concat(v,[j,A])})}),[d,f,j,u]),e.useEffect((function(){if(u&&null!=t&&null!=n)return y.current=x(t,n,s({},b,{placement:f,strategy:d,modifiers:[].concat(v,[k,j])})),function(){null!=y.current&&(y.current.destroy(),y.current=void 0,C((function(e){return s({},e,{attributes:{},styles:{popper:O(d)}})})))}}),[u,t,n]),h}(B,C,M({placement:v,enableEvents:!!n.show,containerPadding:y||5,flip:d,offset:m,arrowElement:U,popperConfig:E})),I=G.styles,J=G.attributes,Q=a(G,["styles","attributes"]);n.show?z&&F(!1):n.transition||z||F(!0);var V,X,Y,Z,$,_,ee,te,ne,re,oe,ie,ae=n.show||w&&!z;if(V=C,X=n.onHide,Y={disabled:!n.rootClose||n.rootCloseDisabled,clickTrigger:n.rootCloseEvent},$=(Z=void 0===Y?{}:Y).disabled,_=Z.clickTrigger,ee=void 0===_?"click":_,te=e.useRef(!1),ne=X||S,re=e.useCallback((function(e){var t,n,o=D(V);j(!!o,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),te.current=!(o&&(n=e,!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey))&&function(e){return 0===e.button}(e)&&!r(o,null!=(t=null==e.composedPath?void 0:e.composedPath()[0])?t:e.target))}),[V]),oe=c((function(e){te.current||ne(e)})),ie=c((function(e){27===e.keyCode&&ne(e)})),e.useEffect((function(){if(!$&&null!=V){var e=window.event,t=R(D(V)),n=o(t,ee,re,!0),r=o(t,ee,(function(t){t!==e?oe(t):e=void 0})),i=o(t,"keyup",(function(t){t!==e?ie(t):e=void 0})),a=[];return"ontouchstart"in t.documentElement&&(a=[].slice.call(t.body.children).map((function(e){return o(e,"mousemove",S)}))),function(){n(),r(),i(),a.forEach((function(e){return e()}))}}}),[V,$,ee,re,oe,ie]),!ae)return null;var se=n.children(s({},Q,{show:!!n.show,props:s({},J.popper,{style:I.popper,ref:L}),arrowProps:s({},J.arrow,{style:I.arrow,ref:H})}));if(w){var ue=n.onExit,le=n.onExiting,ce=n.onEnter,fe=n.onEntering,pe=n.onEntered;se=t.createElement(w,{in:n.show,appear:!0,onExit:ue,onExiting:le,onExited:function(){F(!0),n.onExited&&n.onExited.apply(n,arguments)},onEnter:ce,onEntering:fe,onEntered:pe},se)}return N?i.createPortal(se,N):null}));q.displayName="Overlay",q.propTypes={show:u.bool,placement:u.oneOf(C),target:u.any,container:u.any,flip:u.bool,children:u.func.isRequired,containerPadding:u.number,popperConfig:u.object,rootClose:u.bool,rootCloseEvent:u.oneOf(["click","mousedown"]),rootCloseDisabled:u.bool,onHide:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o;return e.rootClose?(o=u.func).isRequired.apply(o,[e].concat(n)):u.func.apply(u,[e].concat(n))},transition:u.elementType,onEnter:u.func,onEntering:u.func,onEntered:u.func,onExit:u.func,onExiting:u.func,onExited:u.func};export{q as O};
