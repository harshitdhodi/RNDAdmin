import{a as g}from"./react-DKICu8bO.js";import{i as N}from"./invariant-Ck5ARPa0.js";import{s as S,r as W,g as h}from"./@babel-C_xKm-6V.js";import{p as F}from"./react-lifecycles-compat-CqhW3gjX.js";var D=function(){};function L(r,c){var s={};return Object.keys(r).forEach(function(b){s[R(b)]=D}),s}function T(r,c){return r[c]!==void 0}function R(r){return"default"+r.charAt(0).toUpperCase()+r.substr(1)}function M(r){return!!r&&(typeof r!="function"||r.prototype&&r.prototype.isReactComponent)}var q="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function I(r,c,s){s===void 0&&(s=[]);var b=r.displayName||r.name||"Component",x=M(r),d=Object.keys(c),_=d.map(R);x||!s.length||N(!1);var l=function(o){S(a,o);function a(){for(var n,i=arguments.length,p=new Array(i),f=0;f<i;f++)p[f]=arguments[f];n=o.call.apply(o,[this].concat(p))||this,n.handlers=Object.create(null),d.forEach(function(t){var e=c[t],P=function(O){if(n.props[e]){var U;n._notifying=!0;for(var j=arguments.length,C=new Array(j>1?j-1:0),y=1;y<j;y++)C[y-1]=arguments[y];(U=n.props)[e].apply(U,[O].concat(C)),n._notifying=!1}n.unmounted||n.setState(function(w){var E,A=w.values;return{values:h(Object.create(null),A,(E={},E[t]=O,E))}})};n.handlers[e]=P}),s.length&&(n.attachRef=function(t){n.inner=t});var v=Object.create(null);return d.forEach(function(t){v[t]=n.props[R(t)]}),n.state={values:v,prevProps:{}},n}var u=a.prototype;return u.shouldComponentUpdate=function(){return!this._notifying},a.getDerivedStateFromProps=function(i,p){var f=p.values,v=p.prevProps,t={values:h(Object.create(null),f),prevProps:{}};return d.forEach(function(e){t.prevProps[e]=i[e],!T(i,e)&&T(v,e)&&(t.values[e]=i[R(e)])}),t},u.componentWillUnmount=function(){this.unmounted=!0},u.render=function(){var i=this,p=this.props,f=p.innerRef,v=W(p,["innerRef"]);_.forEach(function(e){delete v[e]});var t={};return d.forEach(function(e){var P=i.props[e];t[e]=P!==void 0?P:i.state.values[e]}),g.createElement(r,h({},v,t,this.handlers,{ref:f||this.attachRef}))},a}(g.Component);F(l),l.displayName="Uncontrolled("+b+")",l.propTypes=h({innerRef:function(){}},L(c)),s.forEach(function(o){l.prototype[o]=function(){var u;return(u=this.inner)[o].apply(u,arguments)}});var m=l;return g.forwardRef&&(m=g.forwardRef(function(o,a){return g.createElement(l,h({},o,{innerRef:a,__source:{fileName:q,lineNumber:128},__self:this}))}),m.propTypes=l.propTypes),m.ControlledComponent=r,m.deferControlTo=function(o,a,u){return a===void 0&&(a={}),I(o,h({},c,a),u)},m}export{I as u};
