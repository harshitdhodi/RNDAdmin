import{c as fr}from"./classnames-Bv6oJzD9.js";import{r as s}from"./react-DKICu8bO.js";import{c as Zr,u as Y,g as ut,a as st,r as $n,s as Gr,b as Yn,d as ze,i as ft,e as ct,f as lt,h as vt,j as Mn,k as dt,l as xn,m as ht,n as mt}from"./rc-util-C9ihiQ8l.js";import{h as Xn,i as pn,a as Rn,_ as Nn,k as An,e as D,d as Fe,c as $,f as Ae,b as Be,j as Ln,l as gt,g as Pr}from"./@babel-C_xKm-6V.js";import{F as et}from"./@ant-design-jkdqJqTn.js";import{r as rt}from"./react-dom-BBS6HuAW.js";import{R as nt}from"./rc-resize-observer-h7CJ_t66.js";import{C as tt}from"./rc-motion-D0k58WYE.js";var yt=["b"],bt=["v"],Sn=function(e){return Math.round(Number(e||0))},wt=function(e){if(e instanceof et)return e;if(e&&Fe(e)==="object"&&"h"in e&&"b"in e){var r=e,t=r.b,a=An(r,yt);return D(D({},a),{},{v:t})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},kn=function(n){Xn(r,n);var e=pn(r);function r(t){return Rn(this,r),e.call(this,wt(t))}return Nn(r,[{key:"toHsbString",value:function(){var a=this.toHsb(),i=Sn(a.s*100),o=Sn(a.b*100),u=Sn(a.h),v=a.a,g="hsb(".concat(u,", ").concat(i,"%, ").concat(o,"%)"),m="hsba(".concat(u,", ").concat(i,"%, ").concat(o,"%, ").concat(v.toFixed(v===0?0:2),")");return v===1?g:m}},{key:"toHsb",value:function(){var a=this.toHsv(),i=a.v,o=An(a,bt);return D(D({},o),{},{b:i,a:this.a})}}]),r}(et),Ct=function(e){return e instanceof kn?e:new kn(e)};Ct("#1677ff");var at=s.createContext(null),Hn=[];function St(n,e){var r=s.useState(function(){if(!Zr())return null;var c=document.createElement("div");return c}),t=$(r,1),a=t[0],i=s.useRef(!1),o=s.useContext(at),u=s.useState(Hn),v=$(u,2),g=v[0],m=v[1],l=o||(i.current?void 0:function(c){m(function(C){var f=[c].concat(Ae(C));return f})});function y(){a.parentElement||document.body.appendChild(a),i.current=!0}function h(){var c;(c=a.parentElement)===null||c===void 0||c.removeChild(a),i.current=!1}return Y(function(){return n?o?o(y):y():h(),h},[n]),Y(function(){g.length&&(g.forEach(function(c){return c()}),m(Hn))},[g]),[a,l]}function Pt(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Mt="rc-util-locker-".concat(Date.now()),jn=0;function xt(n){var e=!!n,r=s.useState(function(){return jn+=1,"".concat(Mt,"_").concat(jn)}),t=$(r,1),a=t[0];Y(function(){if(e){var i=ut(document.body).width,o=Pt();st(`
html body {
  overflow-y: hidden;
  `.concat(o?"width: calc(100% - ".concat(i,"px);"):"",`
}`),a)}else $n(a);return function(){$n(a)}},[e,a])}var qt=!1;function Ft(n){return qt}var Vn=function(e){return e===!1?!1:!Zr()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},it=s.forwardRef(function(n,e){var r=n.open,t=n.autoLock,a=n.getContainer;n.debug;var i=n.autoDestroy,o=i===void 0?!0:i,u=n.children,v=s.useState(r),g=$(v,2),m=g[0],l=g[1],y=m||r;s.useEffect(function(){(o||r)&&l(r)},[r,o]);var h=s.useState(function(){return Vn(a)}),c=$(h,2),C=c[0],f=c[1];s.useEffect(function(){var X=Vn(a);f(X??null)});var M=St(y&&!C),S=$(M,2),P=S[0],F=S[1],q=C??P;xt(t&&r&&Zr()&&(q===P||q===document.body));var b=null;if(u&&Gr(u)&&e){var L=u;b=L.ref}var B=Yn(b,e);if(!y||!Zr()||C===void 0)return null;var j=q===!1||Ft(),I=u;return e&&(I=s.cloneElement(u,{ref:B})),s.createElement(at.Provider,{value:F},j?I:rt.createPortal(I,q))});function qn(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Fn=qn();var Et=/%[sdj%]/g,Dt=function(){};function En(n){if(!n||!n.length)return null;var e={};return n.forEach(function(r){var t=r.field;e[t]=e[t]||[],e[t].push(r)}),e}function ae(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];var a=0,i=r.length;if(typeof n=="function")return n.apply(null,r);if(typeof n=="string"){var o=n.replace(Et,function(u){if(u==="%%")return"%";if(a>=i)return u;switch(u){case"%s":return String(r[a++]);case"%d":return Number(r[a++]);case"%j":try{return JSON.stringify(r[a++])}catch{return"[Circular]"}break;default:return u}});return o}return n}function Rt(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function z(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||Rt(e)&&typeof n=="string"&&!n)}function Nt(n,e,r){var t=[],a=0,i=n.length;function o(u){t.push.apply(t,Ae(u||[])),a++,a===i&&r(t)}n.forEach(function(u){e(u,o)})}function Wn(n,e,r){var t=0,a=n.length;function i(o){if(o&&o.length){r(o);return}var u=t;t=t+1,u<a?e(n[u],i):r([])}i([])}function At(n){var e=[];return Object.keys(n).forEach(function(r){e.push.apply(e,Ae(n[r]||[]))}),e}var _n=function(n){Xn(r,n);var e=pn(r);function r(t,a){var i;return Rn(this,r),i=e.call(this,"Async Validation Error"),Be(Ln(i),"errors",void 0),Be(Ln(i),"fields",void 0),i.errors=t,i.fields=a,i}return Nn(r)}(gt(Error));function Tt(n,e,r,t,a){if(e.first){var i=new Promise(function(y,h){var c=function(M){return t(M),M.length?h(new _n(M,En(M))):y(a)},C=At(n);Wn(C,r,c)});return i.catch(function(y){return y}),i}var o=e.firstFields===!0?Object.keys(n):e.firstFields||[],u=Object.keys(n),v=u.length,g=0,m=[],l=new Promise(function(y,h){var c=function(f){if(m.push.apply(m,f),g++,g===v)return t(m),m.length?h(new _n(m,En(m))):y(a)};u.length||(t(m),y(a)),u.forEach(function(C){var f=n[C];o.indexOf(C)!==-1?Wn(f,r,c):Nt(f,r,c)})});return l.catch(function(y){return y}),l}function $t(n){return!!(n&&n.message!==void 0)}function Lt(n,e){for(var r=n,t=0;t<e.length;t++){if(r==null)return r;r=r[e[t]]}return r}function zn(n,e){return function(r){var t;return n.fullFields?t=Lt(e,n.fullFields):t=e[r.field||n.fullField],$t(r)?(r.field=r.field||n.fullField,r.fieldValue=t,r):{message:typeof r=="function"?r():r,fieldValue:t,field:r.field||n.fullField}}}function Bn(n,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var t=e[r];Fe(t)==="object"&&Fe(n[r])==="object"?n[r]=D(D({},n[r]),t):n[r]=t}}return n}var ur="enum",kt=function(e,r,t,a,i){e[ur]=Array.isArray(e[ur])?e[ur]:[],e[ur].indexOf(r)===-1&&a.push(ae(i.messages[ur],e.fullField,e[ur].join(", ")))},Ht=function(e,r,t,a,i){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||a.push(ae(i.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(r)||a.push(ae(i.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},jt=function(e,r,t,a,i){var o=typeof e.len=="number",u=typeof e.min=="number",v=typeof e.max=="number",g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=r,l=null,y=typeof r=="number",h=typeof r=="string",c=Array.isArray(r);if(y?l="number":h?l="string":c&&(l="array"),!l)return!1;c&&(m=r.length),h&&(m=r.replace(g,"_").length),o?m!==e.len&&a.push(ae(i.messages[l].len,e.fullField,e.len)):u&&!v&&m<e.min?a.push(ae(i.messages[l].min,e.fullField,e.min)):v&&!u&&m>e.max?a.push(ae(i.messages[l].max,e.fullField,e.max)):u&&v&&(m<e.min||m>e.max)&&a.push(ae(i.messages[l].range,e.fullField,e.min,e.max))},ot=function(e,r,t,a,i,o){e.required&&(!t.hasOwnProperty(e.field)||z(r,o||e.type))&&a.push(ae(i.messages.required,e.fullField))},Qr;const Vt=function(){if(Qr)return Qr;var n="[a-fA-F\\d:]",e=function(b){return b&&b.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(n,")|(?<=").concat(n,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",t="[a-fA-F\\d]{1,4}",a=["(?:".concat(t,":){7}(?:").concat(t,"|:)"),"(?:".concat(t,":){6}(?:").concat(r,"|:").concat(t,"|:)"),"(?:".concat(t,":){5}(?::").concat(r,"|(?::").concat(t,"){1,2}|:)"),"(?:".concat(t,":){4}(?:(?::").concat(t,"){0,1}:").concat(r,"|(?::").concat(t,"){1,3}|:)"),"(?:".concat(t,":){3}(?:(?::").concat(t,"){0,2}:").concat(r,"|(?::").concat(t,"){1,4}|:)"),"(?:".concat(t,":){2}(?:(?::").concat(t,"){0,3}:").concat(r,"|(?::").concat(t,"){1,5}|:)"),"(?:".concat(t,":){1}(?:(?::").concat(t,"){0,4}:").concat(r,"|(?::").concat(t,"){1,6}|:)"),"(?::(?:(?::".concat(t,"){0,5}:").concat(r,"|(?::").concat(t,"){1,7}|:))")],i="(?:%[0-9a-zA-Z]{1,})?",o="(?:".concat(a.join("|"),")").concat(i),u=new RegExp("(?:^".concat(r,"$)|(?:^").concat(o,"$)")),v=new RegExp("^".concat(r,"$")),g=new RegExp("^".concat(o,"$")),m=function(b){return b&&b.exact?u:new RegExp("(?:".concat(e(b)).concat(r).concat(e(b),")|(?:").concat(e(b)).concat(o).concat(e(b),")"),"g")};m.v4=function(q){return q&&q.exact?v:new RegExp("".concat(e(q)).concat(r).concat(e(q)),"g")},m.v6=function(q){return q&&q.exact?g:new RegExp("".concat(e(q)).concat(o).concat(e(q)),"g")};var l="(?:(?:[a-z]+:)?//)",y="(?:\\S+(?::\\S*)?@)?",h=m.v4().source,c=m.v6().source,C="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",f="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",M="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",S="(?::\\d{2,5})?",P='(?:[/?#][^\\s"]*)?',F="(?:".concat(l,"|www\\.)").concat(y,"(?:localhost|").concat(h,"|").concat(c,"|").concat(C).concat(f).concat(M,")").concat(S).concat(P);return Qr=new RegExp("(?:^".concat(F,"$)"),"i"),Qr};var In={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Sr={integer:function(e){return Sr.number(e)&&parseInt(e,10)===e},float:function(e){return Sr.number(e)&&!Sr.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return Fe(e)==="object"&&!Sr.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(In.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Vt())},hex:function(e){return typeof e=="string"&&!!e.match(In.hex)}},Wt=function(e,r,t,a,i){if(e.required&&r===void 0){ot(e,r,t,a,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],u=e.type;o.indexOf(u)>-1?Sr[u](r)||a.push(ae(i.messages.types[u],e.fullField,e.type)):u&&Fe(r)!==e.type&&a.push(ae(i.messages.types[u],e.fullField,e.type))},_t=function(e,r,t,a,i){(/^\s+$/.test(r)||r==="")&&a.push(ae(i.messages.whitespace,e.fullField))};const x={required:ot,whitespace:_t,type:Wt,range:jt,enum:kt,pattern:Ht};var zt=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r)&&!e.required)return t();x.required(e,r,a,o,i)}t(o)},Bt=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(r==null&&!e.required)return t();x.required(e,r,a,o,i,"array"),r!=null&&(x.type(e,r,a,o,i),x.range(e,r,a,o,i))}t(o)},It=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r)&&!e.required)return t();x.required(e,r,a,o,i),r!==void 0&&x.type(e,r,a,o,i)}t(o)},Ut=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r,"date")&&!e.required)return t();if(x.required(e,r,a,o,i),!z(r,"date")){var v;r instanceof Date?v=r:v=new Date(r),x.type(e,v,a,o,i),v&&x.range(e,v.getTime(),a,o,i)}}t(o)},Jt="enum",Qt=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r)&&!e.required)return t();x.required(e,r,a,o,i),r!==void 0&&x[Jt](e,r,a,o,i)}t(o)},Zt=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r)&&!e.required)return t();x.required(e,r,a,o,i),r!==void 0&&(x.type(e,r,a,o,i),x.range(e,r,a,o,i))}t(o)},Gt=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r)&&!e.required)return t();x.required(e,r,a,o,i),r!==void 0&&(x.type(e,r,a,o,i),x.range(e,r,a,o,i))}t(o)},Kt=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r)&&!e.required)return t();x.required(e,r,a,o,i),r!==void 0&&x.type(e,r,a,o,i)}t(o)},Ot=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(r===""&&(r=void 0),z(r)&&!e.required)return t();x.required(e,r,a,o,i),r!==void 0&&(x.type(e,r,a,o,i),x.range(e,r,a,o,i))}t(o)},Yt=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r)&&!e.required)return t();x.required(e,r,a,o,i),r!==void 0&&x.type(e,r,a,o,i)}t(o)},Xt=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r,"string")&&!e.required)return t();x.required(e,r,a,o,i),z(r,"string")||x.pattern(e,r,a,o,i)}t(o)},pt=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r)&&!e.required)return t();x.required(e,r,a,o,i),z(r)||x.type(e,r,a,o,i)}t(o)},ea=function(e,r,t,a,i){var o=[],u=Array.isArray(r)?"array":Fe(r);x.required(e,r,a,o,i,u),t(o)},ra=function(e,r,t,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(z(r,"string")&&!e.required)return t();x.required(e,r,a,o,i,"string"),z(r,"string")||(x.type(e,r,a,o,i),x.range(e,r,a,o,i),x.pattern(e,r,a,o,i),e.whitespace===!0&&x.whitespace(e,r,a,o,i))}t(o)},Pn=function(e,r,t,a,i){var o=e.type,u=[],v=e.required||!e.required&&a.hasOwnProperty(e.field);if(v){if(z(r,o)&&!e.required)return t();x.required(e,r,a,u,i,o),z(r,o)||x.type(e,r,a,u,i)}t(u)};const Mr={string:ra,method:Kt,number:Ot,boolean:It,regexp:pt,integer:Gt,float:Zt,array:Bt,object:Yt,enum:Qt,pattern:Xt,date:Ut,url:Pn,hex:Pn,email:Pn,required:ea,any:zt};var Kr=function(){function n(e){Rn(this,n),Be(this,"rules",null),Be(this,"_messages",Fn),this.define(e)}return Nn(n,[{key:"define",value:function(r){var t=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(Fe(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(a){var i=r[a];t.rules[a]=Array.isArray(i)?i:[i]})}},{key:"messages",value:function(r){return r&&(this._messages=Bn(qn(),r)),this._messages}},{key:"validate",value:function(r){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},o=r,u=a,v=i;if(typeof u=="function"&&(v=u,u={}),!this.rules||Object.keys(this.rules).length===0)return v&&v(null,o),Promise.resolve(o);function g(c){var C=[],f={};function M(P){if(Array.isArray(P)){var F;C=(F=C).concat.apply(F,Ae(P))}else C.push(P)}for(var S=0;S<c.length;S++)M(c[S]);C.length?(f=En(C),v(C,f)):v(null,o)}if(u.messages){var m=this.messages();m===Fn&&(m=qn()),Bn(m,u.messages),u.messages=m}else u.messages=this.messages();var l={},y=u.keys||Object.keys(this.rules);y.forEach(function(c){var C=t.rules[c],f=o[c];C.forEach(function(M){var S=M;typeof S.transform=="function"&&(o===r&&(o=D({},o)),f=o[c]=S.transform(f),f!=null&&(S.type=S.type||(Array.isArray(f)?"array":Fe(f)))),typeof S=="function"?S={validator:S}:S=D({},S),S.validator=t.getValidationMethod(S),S.validator&&(S.field=c,S.fullField=S.fullField||c,S.type=t.getType(S),l[c]=l[c]||[],l[c].push({rule:S,value:f,source:o,field:c}))})});var h={};return Tt(l,u,function(c,C){var f=c.rule,M=(f.type==="object"||f.type==="array")&&(Fe(f.fields)==="object"||Fe(f.defaultField)==="object");M=M&&(f.required||!f.required&&c.value),f.field=c.field;function S(L,B){return D(D({},B),{},{fullField:"".concat(f.fullField,".").concat(L),fullFields:f.fullFields?[].concat(Ae(f.fullFields),[L]):[L]})}function P(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=Array.isArray(L)?L:[L];!u.suppressWarning&&B.length&&n.warning("async-validator:",B),B.length&&f.message!==void 0&&(B=[].concat(f.message));var j=B.map(zn(f,o));if(u.first&&j.length)return h[f.field]=1,C(j);if(!M)C(j);else{if(f.required&&!c.value)return f.message!==void 0?j=[].concat(f.message).map(zn(f,o)):u.error&&(j=[u.error(f,ae(u.messages.required,f.field))]),C(j);var I={};f.defaultField&&Object.keys(c.value).map(function(W){I[W]=f.defaultField}),I=D(D({},I),c.rule.fields);var X={};Object.keys(I).forEach(function(W){var V=I[W],ve=Array.isArray(V)?V:[V];X[W]=ve.map(S.bind(null,W))});var ie=new n(X);ie.messages(u.messages),c.rule.options&&(c.rule.options.messages=u.messages,c.rule.options.error=u.error),ie.validate(c.value,c.rule.options||u,function(W){var V=[];j&&j.length&&V.push.apply(V,Ae(j)),W&&W.length&&V.push.apply(V,Ae(W)),C(V.length?V:null)})}}var F;if(f.asyncValidator)F=f.asyncValidator(f,c.value,P,c.source,u);else if(f.validator){try{F=f.validator(f,c.value,P,c.source,u)}catch(L){var q,b;(q=(b=console).error)===null||q===void 0||q.call(b,L),u.suppressValidatorError||setTimeout(function(){throw L},0),P(L.message)}F===!0?P():F===!1?P(typeof f.message=="function"?f.message(f.fullField||f.field):f.message||"".concat(f.fullField||f.field," fails")):F instanceof Array?P(F):F instanceof Error&&P(F.message)}F&&F.then&&F.then(function(){return P()},function(L){return P(L)})},function(c){g(c)},o)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Mr.hasOwnProperty(r.type))throw new Error(ae("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var t=Object.keys(r),a=t.indexOf("message");return a!==-1&&t.splice(a,1),t.length===1&&t[0]==="required"?Mr.required:Mr[this.getType(r)]||void 0}}]),n}();Be(Kr,"register",function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Mr[e]=r});Be(Kr,"warning",Dt);Be(Kr,"messages",Fn);Be(Kr,"validators",Mr);function Ma(n){var e=s.createContext(void 0),r=function(a){var i=a.value,o=a.children,u=s.useRef(i);u.current=i;var v=s.useState(function(){return{getValue:function(){return u.current},listeners:new Set}}),g=$(v,1),m=g[0];return Y(function(){rt.unstable_batchedUpdates(function(){m.listeners.forEach(function(l){l(i)})})},[i]),s.createElement(e.Provider,{value:m},o)};return{Context:e,Provider:r,defaultValue:n}}function xa(n,e){var r=ze(typeof e=="function"?e:function(l){if(e===void 0)return l;if(!Array.isArray(e))return l[e];var y={};return e.forEach(function(h){y[h]=l[h]}),y}),t=s.useContext(n==null?void 0:n.Context),a=t||{},i=a.listeners,o=a.getValue,u=s.useRef();u.current=r(t?o():n==null?void 0:n.defaultValue);var v=s.useState({}),g=$(v,2),m=g[1];return Y(function(){if(!t)return;function l(y){var h=r(y);ft(u.current,h,!0)||m({})}return i.add(l),function(){i.delete(l)}},[t]),u.current}function qa(){var n=s.createContext(null);function e(){return s.useContext(n)}function r(a,i){var o=Gr(a),u=function(g,m){var l=o?{ref:m}:{},y=s.useRef(0),h=s.useRef(g),c=e();return c!==null?s.createElement(a,Pr({},g,l)):((!i||i(h.current,g))&&(y.current+=1),h.current=g,s.createElement(n.Provider,{value:y.current},s.createElement(a,Pr({},g,l))))};return o?s.forwardRef(u):u}function t(a,i){var o=Gr(a),u=function(g,m){var l=o?{ref:m}:{};return e(),s.createElement(a,Pr({},g,l))};return o?s.memo(s.forwardRef(u),i):s.memo(u,i)}return{makeImmutable:r,responseImmutable:t,useImmutableMark:e}}function na(n){var e=n.prefixCls,r=n.align,t=n.arrow,a=n.arrowPos,i=t||{},o=i.className,u=i.content,v=a.x,g=v===void 0?0:v,m=a.y,l=m===void 0?0:m,y=s.useRef();if(!r||!r.points)return null;var h={position:"absolute"};if(r.autoArrow!==!1){var c=r.points[0],C=r.points[1],f=c[0],M=c[1],S=C[0],P=C[1];f===S||!["t","b"].includes(f)?h.top=l:f==="t"?h.top=0:h.bottom=0,M===P||!["l","r"].includes(M)?h.left=g:M==="l"?h.left=0:h.right=0}return s.createElement("div",{ref:y,className:fr("".concat(e,"-arrow"),o),style:h},u)}function ta(n){var e=n.prefixCls,r=n.open,t=n.zIndex,a=n.mask,i=n.motion;return a?s.createElement(tt,Pr({},i,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(o){var u=o.className;return s.createElement("div",{style:{zIndex:t},className:fr("".concat(e,"-mask"),u)})}):null}var aa=s.memo(function(n){var e=n.children;return e},function(n,e){return e.cache}),ia=s.forwardRef(function(n,e){var r=n.popup,t=n.className,a=n.prefixCls,i=n.style,o=n.target,u=n.onVisibleChanged,v=n.open,g=n.keepDom,m=n.fresh,l=n.onClick,y=n.mask,h=n.arrow,c=n.arrowPos,C=n.align,f=n.motion,M=n.maskMotion,S=n.forceRender,P=n.getPopupContainer,F=n.autoDestroy,q=n.portal,b=n.zIndex,L=n.onMouseEnter,B=n.onMouseLeave,j=n.onPointerEnter,I=n.onPointerDownCapture,X=n.ready,ie=n.offsetX,W=n.offsetY,V=n.offsetR,ve=n.offsetB,ee=n.onAlign,Ee=n.onPrepare,J=n.stretch,Z=n.targetWidth,E=n.targetHeight,Ie=typeof r=="function"?r():r,de=v||g,Q=(P==null?void 0:P.length)>0,R=s.useState(!P||!Q),re=$(R,2),Ue=re[0],cr=re[1];if(Y(function(){!Ue&&Q&&o&&cr(!0)},[Ue,Q,o]),!Ue)return null;var we="auto",ne={left:"-1000vw",top:"-1000vh",right:we,bottom:we};if(X||!v){var Te,Je=C.points,oe=C.dynamicInset||((Te=C._experimental)===null||Te===void 0?void 0:Te.dynamicInset),Ce=oe&&Je[0][1]==="r",he=oe&&Je[0][0]==="b";Ce?(ne.right=V,ne.left=we):(ne.left=ie,ne.right=we),he?(ne.bottom=ve,ne.top=we):(ne.top=W,ne.bottom=we)}var p={};return J&&(J.includes("height")&&E?p.height=E:J.includes("minHeight")&&E&&(p.minHeight=E),J.includes("width")&&Z?p.width=Z:J.includes("minWidth")&&Z&&(p.minWidth=Z)),v||(p.pointerEvents="none"),s.createElement(q,{open:S||de,getContainer:P&&function(){return P(o)},autoDestroy:F},s.createElement(ta,{prefixCls:a,open:v,zIndex:b,mask:y,motion:M}),s.createElement(nt,{onResize:ee,disabled:!v},function(lr){return s.createElement(tt,Pr({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:S,leavedClassName:"".concat(a,"-hidden")},f,{onAppearPrepare:Ee,onEnterPrepare:Ee,visible:v,onVisibleChanged:function(ue){var Se;f==null||(Se=f.onVisibleChanged)===null||Se===void 0||Se.call(f,ue),u(ue)}}),function($e,ue){var Se=$e.className,Qe=$e.style,G=fr(a,Se,t);return s.createElement("div",{ref:ct(lr,e,ue),className:G,style:D(D(D(D({"--arrow-x":"".concat(c.x||0,"px"),"--arrow-y":"".concat(c.y||0,"px")},ne),p),Qe),{},{boxSizing:"border-box",zIndex:b},i),onMouseEnter:L,onMouseLeave:B,onPointerEnter:j,onClick:l,onPointerDownCapture:I},h&&s.createElement(na,{prefixCls:a,arrow:h,arrowPos:c,align:C}),s.createElement(aa,{cache:!v&&!m},Ie))})}))}),oa=s.forwardRef(function(n,e){var r=n.children,t=n.getTriggerDOMNode,a=Gr(r),i=s.useCallback(function(u){lt(e,t?t(u):u)},[t]),o=Yn(i,vt(r));return a?s.cloneElement(r,{ref:o}):r}),Un=s.createContext(null);function Jn(n){return n?Array.isArray(n)?n:[n]:[]}function ua(n,e,r,t){return s.useMemo(function(){var a=Jn(r??e),i=Jn(t??e),o=new Set(a),u=new Set(i);return n&&(o.has("hover")&&(o.delete("hover"),o.add("click")),u.has("hover")&&(u.delete("hover"),u.add("click"))),[o,u]},[n,e,r,t])}function sa(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?n[0]===e[0]:n[0]===e[0]&&n[1]===e[1]}function fa(n,e,r,t){for(var a=r.points,i=Object.keys(n),o=0;o<i.length;o+=1){var u,v=i[o];if(sa((u=n[v])===null||u===void 0?void 0:u.points,a,t))return"".concat(e,"-placement-").concat(v)}return""}function Qn(n,e,r,t){return e||(r?{motionName:"".concat(n,"-").concat(r)}:t?{motionName:t}:null)}function qr(n){return n.ownerDocument.defaultView}function Dn(n){for(var e=[],r=n==null?void 0:n.parentElement,t=["hidden","scroll","clip","auto"];r;){var a=qr(r).getComputedStyle(r),i=a.overflowX,o=a.overflowY,u=a.overflow;[i,o,u].some(function(v){return t.includes(v)})&&e.push(r),r=r.parentElement}return e}function xr(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(n)?e:n}function Cr(n){return xr(parseFloat(n),0)}function Zn(n,e){var r=D({},n);return(e||[]).forEach(function(t){if(!(t instanceof HTMLBodyElement||t instanceof HTMLHtmlElement)){var a=qr(t).getComputedStyle(t),i=a.overflow,o=a.overflowClipMargin,u=a.borderTopWidth,v=a.borderBottomWidth,g=a.borderLeftWidth,m=a.borderRightWidth,l=t.getBoundingClientRect(),y=t.offsetHeight,h=t.clientHeight,c=t.offsetWidth,C=t.clientWidth,f=Cr(u),M=Cr(v),S=Cr(g),P=Cr(m),F=xr(Math.round(l.width/c*1e3)/1e3),q=xr(Math.round(l.height/y*1e3)/1e3),b=(c-C-S-P)*F,L=(y-h-f-M)*q,B=f*q,j=M*q,I=S*F,X=P*F,ie=0,W=0;if(i==="clip"){var V=Cr(o);ie=V*F,W=V*q}var ve=l.x+I-ie,ee=l.y+B-W,Ee=ve+l.width+2*ie-I-X-b,J=ee+l.height+2*W-B-j-L;r.left=Math.max(r.left,ve),r.top=Math.max(r.top,ee),r.right=Math.min(r.right,Ee),r.bottom=Math.min(r.bottom,J)}}),r}function Gn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(e),t=r.match(/^(.*)\%$/);return t?n*(parseFloat(t[1])/100):parseFloat(r)}function Kn(n,e){var r=e||[],t=$(r,2),a=t[0],i=t[1];return[Gn(n.width,a),Gn(n.height,i)]}function On(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[n[0],n[1]]}function sr(n,e){var r=e[0],t=e[1],a,i;return r==="t"?i=n.y:r==="b"?i=n.y+n.height:i=n.y+n.height/2,t==="l"?a=n.x:t==="r"?a=n.x+n.width:a=n.x+n.width/2,{x:a,y:i}}function _e(n,e){var r={t:"b",b:"t",l:"r",r:"l"};return n.map(function(t,a){return a===e?r[t]||"c":t}).join("")}function ca(n,e,r,t,a,i,o){var u=s.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[t]||{}}),v=$(u,2),g=v[0],m=v[1],l=s.useRef(0),y=s.useMemo(function(){return e?Dn(e):[]},[e]),h=s.useRef({}),c=function(){h.current={}};n||c();var C=ze(function(){if(e&&r&&n){let le=function(or,Ve){var We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fr,wr=R.x+or,Ir=R.y+Ve,yn=wr+Ce,bn=Ir+oe,wn=Math.max(wr,We.left),d=Math.max(Ir,We.top),w=Math.min(yn,We.right),k=Math.min(bn,We.bottom);return Math.max(0,(w-wn)*(k-d))},Br=function(){Oe=R.y+T,Ye=Oe+oe,Re=R.x+N,nr=Re+Ce};var S,P,F,q,b=e,L=b.ownerDocument,B=qr(b),j=B.getComputedStyle(b),I=j.width,X=j.height,ie=j.position,W=b.style.left,V=b.style.top,ve=b.style.right,ee=b.style.bottom,Ee=b.style.overflow,J=D(D({},a[t]),i),Z=L.createElement("div");(S=b.parentElement)===null||S===void 0||S.appendChild(Z),Z.style.left="".concat(b.offsetLeft,"px"),Z.style.top="".concat(b.offsetTop,"px"),Z.style.position=ie,Z.style.height="".concat(b.offsetHeight,"px"),Z.style.width="".concat(b.offsetWidth,"px"),b.style.left="0",b.style.top="0",b.style.right="auto",b.style.bottom="auto",b.style.overflow="hidden";var E;if(Array.isArray(r))E={x:r[0],y:r[1],width:0,height:0};else{var Ie,de,Q=r.getBoundingClientRect();Q.x=(Ie=Q.x)!==null&&Ie!==void 0?Ie:Q.left,Q.y=(de=Q.y)!==null&&de!==void 0?de:Q.top,E={x:Q.x,y:Q.y,width:Q.width,height:Q.height}}var R=b.getBoundingClientRect();R.x=(P=R.x)!==null&&P!==void 0?P:R.left,R.y=(F=R.y)!==null&&F!==void 0?F:R.top;var re=L.documentElement,Ue=re.clientWidth,cr=re.clientHeight,we=re.scrollWidth,ne=re.scrollHeight,Te=re.scrollTop,Je=re.scrollLeft,oe=R.height,Ce=R.width,he=E.height,p=E.width,lr={left:0,top:0,right:Ue,bottom:cr},$e={left:-Je,top:-Te,right:we-Je,bottom:ne-Te},ue=J.htmlRegion,Se="visible",Qe="visibleFirst";ue!=="scroll"&&ue!==Qe&&(ue=Se);var G=ue===Qe,Or=Zn($e,y),A=Zn(lr,y),Fr=ue===Se?A:Or,Ze=G?A:Fr;b.style.left="auto",b.style.top="auto",b.style.right="0",b.style.bottom="0";var K=b.getBoundingClientRect();b.style.left=W,b.style.top=V,b.style.right=ve,b.style.bottom=ee,b.style.overflow=Ee,(q=b.parentElement)===null||q===void 0||q.removeChild(Z);var Le=xr(Math.round(Ce/parseFloat(I)*1e3)/1e3),De=xr(Math.round(oe/parseFloat(X)*1e3)/1e3);if(Le===0||De===0||Mn(r)&&!dt(r))return;var Yr=J.offset,Xr=J.targetOffset,Er=Kn(R,Yr),me=$(Er,2),ge=me[0],se=me[1],pr=Kn(E,Xr),Ge=$(pr,2),fe=Ge[0],ke=Ge[1];E.x-=fe,E.y-=ke;var en=J.points||[],Dr=$(en,2),rn=Dr[0],nn=Dr[1],Pe=On(nn),te=On(rn),vr=sr(E,Pe),O=sr(R,te),He=D({},J),N=vr.x-O.x+ge,T=vr.y-O.y+se,ye=le(N,T),Ke=le(N,T,A),dr=sr(E,["t","l"]),ce=sr(R,["t","l"]),Rr=sr(E,["b","r"]),hr=sr(R,["b","r"]),je=J.overflow||{},Nr=je.adjustX,tn=je.adjustY,mr=je.shiftX,rr=je.shiftY,gr=function(Ve){return typeof Ve=="boolean"?Ve:Ve>=0},Oe,Ye,Re,nr;Br();var Xe=gr(tn),Ar=te[0]===Pe[0];if(Xe&&te[0]==="t"&&(Ye>Ze.bottom||h.current.bt)){var U=T;Ar?U-=oe-he:U=dr.y-hr.y-se;var Tr=le(N,U),an=le(N,U,A);Tr>ye||Tr===ye&&(!G||an>=Ke)?(h.current.bt=!0,T=U,se=-se,He.points=[_e(te,0),_e(Pe,0)]):h.current.bt=!1}if(Xe&&te[0]==="b"&&(Oe<Ze.top||h.current.tb)){var pe=T;Ar?pe+=oe-he:pe=Rr.y-ce.y-se;var $r=le(N,pe),on=le(N,pe,A);$r>ye||$r===ye&&(!G||on>=Ke)?(h.current.tb=!0,T=pe,se=-se,He.points=[_e(te,0),_e(Pe,0)]):h.current.tb=!1}var Lr=gr(Nr),kr=te[1]===Pe[1];if(Lr&&te[1]==="l"&&(nr>Ze.right||h.current.rl)){var er=N;kr?er-=Ce-p:er=dr.x-hr.x-ge;var Hr=le(er,T),tr=le(er,T,A);Hr>ye||Hr===ye&&(!G||tr>=Ke)?(h.current.rl=!0,N=er,ge=-ge,He.points=[_e(te,1),_e(Pe,1)]):h.current.rl=!1}if(Lr&&te[1]==="r"&&(Re<Ze.left||h.current.lr)){var Ne=N;kr?Ne+=Ce-p:Ne=Rr.x-ce.x-ge;var jr=le(Ne,T),Vr=le(Ne,T,A);jr>ye||jr===ye&&(!G||Vr>=Ke)?(h.current.lr=!0,N=Ne,ge=-ge,He.points=[_e(te,1),_e(Pe,1)]):h.current.lr=!1}Br();var Me=mr===!0?0:mr;typeof Me=="number"&&(Re<A.left&&(N-=Re-A.left-ge,E.x+p<A.left+Me&&(N+=E.x-A.left+p-Me)),nr>A.right&&(N-=nr-A.right-ge,E.x>A.right-Me&&(N+=E.x-A.right+Me)));var be=rr===!0?0:rr;typeof be=="number"&&(Oe<A.top&&(T-=Oe-A.top-se,E.y+he<A.top+be&&(T+=E.y-A.top+he-be)),Ye>A.bottom&&(T-=Ye-A.bottom-se,E.y>A.bottom-be&&(T+=E.y-A.bottom+be)));var ar=R.x+N,ir=ar+Ce,xe=R.y+T,un=xe+oe,Wr=E.x,sn=Wr+p,yr=E.y,fn=yr+he,cn=Math.max(ar,Wr),ln=Math.min(ir,sn),_r=(cn+ln)/2,vn=_r-ar,dn=Math.max(xe,yr),zr=Math.min(un,fn),hn=(dn+zr)/2,mn=hn-xe;o==null||o(e,He);var br=K.right-R.x-(N+R.width),qe=K.bottom-R.y-(T+R.height);Le===1&&(N=Math.round(N),br=Math.round(br)),De===1&&(T=Math.round(T),qe=Math.round(qe));var gn={ready:!0,offsetX:N/Le,offsetY:T/De,offsetR:br/Le,offsetB:qe/De,arrowX:vn/Le,arrowY:mn/De,scaleX:Le,scaleY:De,align:He};m(gn)}}),f=function(){l.current+=1;var P=l.current;Promise.resolve().then(function(){l.current===P&&C()})},M=function(){m(function(P){return D(D({},P),{},{ready:!1})})};return Y(M,[t]),Y(function(){n||M()},[n]),[g.ready,g.offsetX,g.offsetY,g.offsetR,g.offsetB,g.arrowX,g.arrowY,g.scaleX,g.scaleY,g.align,f]}function la(n,e,r,t,a){Y(function(){if(n&&e&&r){let l=function(){t(),a()};var i=e,o=r,u=Dn(i),v=Dn(o),g=qr(o),m=new Set([g].concat(Ae(u),Ae(v)));return m.forEach(function(y){y.addEventListener("scroll",l,{passive:!0})}),g.addEventListener("resize",l,{passive:!0}),t(),function(){m.forEach(function(y){y.removeEventListener("scroll",l),g.removeEventListener("resize",l)})}}},[n,e,r])}function va(n,e,r,t,a,i,o,u){var v=s.useRef(n);v.current=n;var g=s.useRef(!1);s.useEffect(function(){if(e&&t&&(!a||i)){var l=function(){g.current=!1},y=function(f){var M;v.current&&!o(((M=f.composedPath)===null||M===void 0||(M=M.call(f))===null||M===void 0?void 0:M[0])||f.target)&&!g.current&&u(!1)},h=qr(t);h.addEventListener("pointerdown",l,!0),h.addEventListener("mousedown",y,!0),h.addEventListener("contextmenu",y,!0);var c=xn(r);return c&&(c.addEventListener("mousedown",y,!0),c.addEventListener("contextmenu",y,!0)),function(){h.removeEventListener("pointerdown",l,!0),h.removeEventListener("mousedown",y,!0),h.removeEventListener("contextmenu",y,!0),c&&(c.removeEventListener("mousedown",y,!0),c.removeEventListener("contextmenu",y,!0))}}},[e,r,t,a,i]);function m(){g.current=!0}return m}var da=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function ha(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:it,e=s.forwardRef(function(r,t){var a=r.prefixCls,i=a===void 0?"rc-trigger-popup":a,o=r.children,u=r.action,v=u===void 0?"hover":u,g=r.showAction,m=r.hideAction,l=r.popupVisible,y=r.defaultPopupVisible,h=r.onPopupVisibleChange,c=r.afterPopupVisibleChange,C=r.mouseEnterDelay,f=r.mouseLeaveDelay,M=f===void 0?.1:f,S=r.focusDelay,P=r.blurDelay,F=r.mask,q=r.maskClosable,b=q===void 0?!0:q,L=r.getPopupContainer,B=r.forceRender,j=r.autoDestroy,I=r.destroyPopupOnHide,X=r.popup,ie=r.popupClassName,W=r.popupStyle,V=r.popupPlacement,ve=r.builtinPlacements,ee=ve===void 0?{}:ve,Ee=r.popupAlign,J=r.zIndex,Z=r.stretch,E=r.getPopupClassNameFromAlign,Ie=r.fresh,de=r.alignPoint,Q=r.onPopupClick,R=r.onPopupAlign,re=r.arrow,Ue=r.popupMotion,cr=r.maskMotion,we=r.popupTransitionName,ne=r.popupAnimation,Te=r.maskTransitionName,Je=r.maskAnimation,oe=r.className,Ce=r.getTriggerDOMNode,he=An(r,da),p=j||I||!1,lr=s.useState(!1),$e=$(lr,2),ue=$e[0],Se=$e[1];Y(function(){Se(ht())},[]);var Qe=s.useRef({}),G=s.useContext(Un),Or=s.useMemo(function(){return{registerSubPopup:function(w,k){Qe.current[w]=k,G==null||G.registerSubPopup(w,k)}}},[G]),A=mt(),Fr=s.useState(null),Ze=$(Fr,2),K=Ze[0],Le=Ze[1],De=s.useRef(null),Yr=ze(function(d){De.current=d,Mn(d)&&K!==d&&Le(d),G==null||G.registerSubPopup(A,d)}),Xr=s.useState(null),Er=$(Xr,2),me=Er[0],ge=Er[1],se=s.useRef(null),pr=ze(function(d){Mn(d)&&me!==d&&(ge(d),se.current=d)}),Ge=s.Children.only(o),fe=(Ge==null?void 0:Ge.props)||{},ke={},en=ze(function(d){var w,k,_=me;return(_==null?void 0:_.contains(d))||((w=xn(_))===null||w===void 0?void 0:w.host)===d||d===_||(K==null?void 0:K.contains(d))||((k=xn(K))===null||k===void 0?void 0:k.host)===d||d===K||Object.values(Qe.current).some(function(H){return(H==null?void 0:H.contains(d))||d===H})}),Dr=Qn(i,Ue,ne,we),rn=Qn(i,cr,Je,Te),nn=s.useState(y||!1),Pe=$(nn,2),te=Pe[0],vr=Pe[1],O=l??te,He=ze(function(d){l===void 0&&vr(d)});Y(function(){vr(l||!1)},[l]);var N=s.useRef(O);N.current=O;var T=s.useRef([]);T.current=[];var ye=ze(function(d){var w;He(d),((w=T.current[T.current.length-1])!==null&&w!==void 0?w:O)!==d&&(T.current.push(d),h==null||h(d))}),Ke=s.useRef(),dr=function(){clearTimeout(Ke.current)},ce=function(w){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;dr(),k===0?ye(w):Ke.current=setTimeout(function(){ye(w)},k*1e3)};s.useEffect(function(){return dr},[]);var Rr=s.useState(!1),hr=$(Rr,2),je=hr[0],Nr=hr[1];Y(function(d){(!d||O)&&Nr(!0)},[O]);var tn=s.useState(null),mr=$(tn,2),rr=mr[0],gr=mr[1],Oe=s.useState(null),Ye=$(Oe,2),Re=Ye[0],nr=Ye[1],Xe=function(w){nr([w.clientX,w.clientY])},Ar=ca(O,K,de&&Re!==null?Re:me,V,ee,Ee,R),U=$(Ar,11),Tr=U[0],an=U[1],pe=U[2],$r=U[3],on=U[4],Lr=U[5],kr=U[6],er=U[7],Hr=U[8],tr=U[9],Ne=U[10],jr=ua(ue,v,g,m),Vr=$(jr,2),Me=Vr[0],be=Vr[1],ar=Me.has("click"),ir=be.has("click")||be.has("contextMenu"),xe=ze(function(){je||Ne()}),un=function(){N.current&&de&&ir&&ce(!1)};la(O,me,K,xe,un),Y(function(){xe()},[Re,V]),Y(function(){O&&!(ee!=null&&ee[V])&&xe()},[JSON.stringify(Ee)]);var Wr=s.useMemo(function(){var d=fa(ee,i,tr,de);return fr(d,E==null?void 0:E(tr))},[tr,E,ee,i,de]);s.useImperativeHandle(t,function(){return{nativeElement:se.current,popupElement:De.current,forceAlign:xe}});var sn=s.useState(0),yr=$(sn,2),fn=yr[0],cn=yr[1],ln=s.useState(0),_r=$(ln,2),vn=_r[0],dn=_r[1],zr=function(){if(Z&&me){var w=me.getBoundingClientRect();cn(w.width),dn(w.height)}},hn=function(){zr(),xe()},mn=function(w){Nr(!1),Ne(),c==null||c(w)},br=function(){return new Promise(function(w){zr(),gr(function(){return w})})};Y(function(){rr&&(Ne(),rr(),gr(null))},[rr]);function qe(d,w,k,_){ke[d]=function(H){var Ur;_==null||_(H),ce(w,k);for(var Cn=arguments.length,Tn=new Array(Cn>1?Cn-1:0),Jr=1;Jr<Cn;Jr++)Tn[Jr-1]=arguments[Jr];(Ur=fe[d])===null||Ur===void 0||Ur.call.apply(Ur,[fe,H].concat(Tn))}}(ar||ir)&&(ke.onClick=function(d){var w;N.current&&ir?ce(!1):!N.current&&ar&&(Xe(d),ce(!0));for(var k=arguments.length,_=new Array(k>1?k-1:0),H=1;H<k;H++)_[H-1]=arguments[H];(w=fe.onClick)===null||w===void 0||w.call.apply(w,[fe,d].concat(_))});var gn=va(O,ir,me,K,F,b,en,ce),le=Me.has("hover"),Br=be.has("hover"),or,Ve;le&&(qe("onMouseEnter",!0,C,function(d){Xe(d)}),qe("onPointerEnter",!0,C,function(d){Xe(d)}),or=function(w){(O||je)&&K!==null&&K!==void 0&&K.contains(w.target)&&ce(!0,C)},de&&(ke.onMouseMove=function(d){var w;(w=fe.onMouseMove)===null||w===void 0||w.call(fe,d)})),Br&&(qe("onMouseLeave",!1,M),qe("onPointerLeave",!1,M),Ve=function(){ce(!1,M)}),Me.has("focus")&&qe("onFocus",!0,S),be.has("focus")&&qe("onBlur",!1,P),Me.has("contextMenu")&&(ke.onContextMenu=function(d){var w;N.current&&be.has("contextMenu")?ce(!1):(Xe(d),ce(!0)),d.preventDefault();for(var k=arguments.length,_=new Array(k>1?k-1:0),H=1;H<k;H++)_[H-1]=arguments[H];(w=fe.onContextMenu)===null||w===void 0||w.call.apply(w,[fe,d].concat(_))}),oe&&(ke.className=fr(fe.className,oe));var We=D(D({},fe),ke),wr={},Ir=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Ir.forEach(function(d){he[d]&&(wr[d]=function(){for(var w,k=arguments.length,_=new Array(k),H=0;H<k;H++)_[H]=arguments[H];(w=We[d])===null||w===void 0||w.call.apply(w,[We].concat(_)),he[d].apply(he,_)})});var yn=s.cloneElement(Ge,D(D({},We),wr)),bn={x:Lr,y:kr},wn=re?D({},re!==!0?re:{}):null;return s.createElement(s.Fragment,null,s.createElement(nt,{disabled:!O,ref:pr,onResize:hn},s.createElement(oa,{getTriggerDOMNode:Ce},yn)),s.createElement(Un.Provider,{value:Or},s.createElement(ia,{portal:n,ref:Yr,prefixCls:i,popup:X,className:fr(ie,Wr),style:W,target:me,onMouseEnter:or,onMouseLeave:Ve,onPointerEnter:or,zIndex:J,open:O,keepDom:je,fresh:Ie,onClick:Q,onPointerDownCapture:gn,mask:F,motion:Dr,maskMotion:rn,onVisibleChanged:mn,onPrepare:br,forceRender:B,autoDestroy:p,getPopupContainer:L,align:tr,arrow:wn,arrowPos:bn,ready:Tr,offsetX:an,offsetY:pe,offsetR:$r,offsetB:on,onAlign:xe,stretch:Z,targetWidth:fn/er,targetHeight:vn/Hr})))});return e}const Fa=ha(it);export{kn as C,it as P,Kr as S,Fa as T,Ma as a,qa as c,xa as u};
