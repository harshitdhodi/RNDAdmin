import{j as e}from"./react-DKICu8bO.js";import{c as I}from"./react-hook-form-BpvdonxZ.js";import{d as C,al as q,an as E,I as d,B as L}from"./index-CDFtkn6X.js";import{S as p,a as u,b as g,c as b,d as y}from"./select-CdiUu-U-.js";import{F as A,a as t,b as n,c as o,d as i,e as l}from"./form-CHW_58Tj.js";import{o as T,s as c,c as k}from"./zod-B_haSLVu.js";import{t as w}from"./@hookform-DUkwi3xb.js";import{B}from"./BreadCrumb-C1ZZs22B.js";import{a as M}from"./react-router-B9QVkYva.js";import"./classnames-Bv6oJzD9.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./lucide-D7hRWJEP.js";import"./axios-DXsv3KKR.js";import"./@syncfusion-BIAkhmGL.js";import"./cookie--_YQFYBD.js";const P=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],V=T({firstName:c().min(2,{message:"First name must be at least 2 characters"}),lastName:c().min(2,{message:"Last name must be at least 2 characters"}),organisation:c().min(2,{message:"Organisation name must be at least 2 characters"}),department:c().optional(),email:c().email({message:"Invalid email address"}),phone:c().regex(/^[0-9]{10}$/,{message:"Phone number must be 10 digits"}),address:c().optional(),country:c().optional(),message:c().min(10,{message:"Message must be at least 10 characters"}),needCallback:k().default(!1),status:c().nonempty({message:"Please select a status"}),source:c().nonempty({message:"Please select a source"})});function Ne({onClose:D}){const[f,{isLoading:h}]=C(),{data:x,isLoading:S}=q(),{data:j,isLoading:N}=E(),v=M(),r=I({resolver:w(V),defaultValues:{firstName:"",lastName:"",organisation:"",department:"",email:"",phone:"",address:"",country:"",message:"",needCallback:!1,status:"",source:""}}),F=async s=>{var m;try{const a={...s,date:new Date().toISOString().split("T")[0]};await f(a).unwrap(),r.reset(),v("/inquiry-list")}catch(a){alert(((m=a==null?void 0:a.data)==null?void 0:m.message)||"Failed to add inquiry.")}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(B,{items:P})}),e.jsx(A,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(F),className:"space-y-4 p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Inquiry"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:r.control,name:"firstName",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"First Name"}),e.jsx(i,{children:e.jsx(d,{placeholder:"Enter first name",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"lastName",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Last Name"}),e.jsx(i,{children:e.jsx(d,{placeholder:"Enter last name",...s})}),e.jsx(l,{})]})})]}),e.jsx(t,{control:r.control,name:"organisation",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Organisation"}),e.jsx(i,{children:e.jsx(d,{placeholder:"Enter organisation name",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"email",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Email"}),e.jsx(i,{children:e.jsx(d,{type:"email",placeholder:"Enter email",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Phone Number"}),e.jsx(i,{children:e.jsx(d,{type:"tel",placeholder:"Enter 10-digit phone",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"address",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Address"}),e.jsx(i,{children:e.jsx(d,{placeholder:"Enter address",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"country",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Country"}),e.jsx(i,{children:e.jsx(d,{placeholder:"Enter country",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"message",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Message"}),e.jsx(i,{children:e.jsx(d,{placeholder:"Enter message",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"needCallback",render:({field:s})=>e.jsxs(n,{children:[e.jsx(o,{children:"Need Callback"}),e.jsx(i,{children:e.jsx(d,{type:"checkbox",...s})}),e.jsx(l,{})]})}),e.jsx(t,{control:r.control,name:"status",render:({field:s})=>{var m;return e.jsxs(n,{children:[e.jsx(o,{children:"Status"}),S?e.jsx("div",{children:"Loading statuses..."}):e.jsxs(p,{onValueChange:s.onChange,value:s.value,children:[e.jsx(i,{children:e.jsx(u,{children:e.jsx(g,{placeholder:"Select status"})})}),e.jsx(b,{children:(m=x==null?void 0:x.data)==null?void 0:m.map(a=>e.jsx(y,{value:a.status,children:a.status},a._id))})]}),e.jsx(l,{})]})}}),e.jsx(t,{control:r.control,name:"source",render:({field:s})=>{var m;return e.jsxs(n,{children:[e.jsx(o,{children:"Source"}),N?e.jsx("div",{children:"Loading sources..."}):e.jsxs(p,{onValueChange:s.onChange,value:s.value,children:[e.jsx(i,{children:e.jsx(u,{children:e.jsx(g,{placeholder:"Select source"})})}),e.jsx(b,{children:(m=j==null?void 0:j.data)==null?void 0:m.map(a=>e.jsx(y,{value:a.source,children:a.source},a._id))})]}),e.jsx(l,{})]})}}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsx(L,{type:"submit",disabled:h,children:h?"Adding...":"Add Inquiry"})})]})})]})}export{Ne as default};
