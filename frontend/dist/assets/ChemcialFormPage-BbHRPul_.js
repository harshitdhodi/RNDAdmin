import{r as S,j as e}from"./react-DKICu8bO.js";import{C as g,u as J,b as X,c as Y}from"./react-hook-form-BpvdonxZ.js";import{a as O}from"./axios-DXsv3KKR.js";import{P as A}from"./prop-types-D44m66iB.js";import{x as Z,u as V,L as u,I as y,B as T,T as z}from"./index-Bbo1zcj1.js";import{C as q,a as D}from"./card-D0ajdvoE.js";import{S as M,a as R,b as $,c as P,d as k}from"./select-CnTZk46j.js";import{s as B}from"./slugify-CcPMdEZZ.js";import{X as L,o as G,p as K}from"./lucide-D7hRWJEP.js";import{R as ee}from"./react-quill-BTfuOY7l.js";import{a as se,b as ae,L as H}from"./react-router-B9QVkYva.js";import"./classnames-Bv6oJzD9.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./@syncfusion-BIAkhmGL.js";import"./cookie--_YQFYBD.js";import"./lodash-BLBAyiDt.js";import"./quill-BGoone1_.js";const Q=({control:t,chemicalData:i,watch:x,setValue:a})=>{const[N,v]=S.useState([]),[_,l]=S.useState([]),{data:d,isLoading:h}=Z(),s=d||[],{data:r,isLoading:n,isSuccess:c,isError:j,error:F}=V(),p=r||[],f=x("category"),I=x("sub_category"),U=x("subsub_category_id");return console.log(f,I,U),S.useEffect(()=>{var C;if(!p.length)return;const m=p.find(o=>o._id===f);m&&(v(m.subCategories||[]),a("categorySlug",m.slug));const b=I&&((C=m==null?void 0:m.subCategories)==null?void 0:C.find(o=>o._id===I));b&&(l(b.subSubCategory||[]),a("subCategorySlug",b.slug))},[p,f,I,a]),S.useEffect(()=>{if(!_.length)return;const m=U&&_.find(b=>b._id===U);m&&a("subSubCategorySlug",m.slug)},[_,U,a]),S.useEffect(()=>{j&&console.error("Failed to load categories:",F)},[j,F]),S.useEffect(()=>{var m,b;if(i&&i.category&&p.length>0){const C=p.find(o=>o._id===i.category);if(C){v(C.subCategories||[]),a("category",i.category),a("categorySlug",C.slug);const o=(m=C.subCategories)==null?void 0:m.find(E=>E._id===i.sub_category);o&&(l(o.subSubCategory||[]),a("sub_category",i.sub_category),a("subCategorySlug",o.slug));const w=(b=o==null?void 0:o.subSubCategory)==null?void 0:b.find(E=>E._id===i.subsub_category_id);w&&(a("subsub_category_id",i.subsub_category_id),a("subSubCategorySlug",w.slug))}}},[i,p,a]),e.jsx(q,{className:"w-full max-w-2xl border-none mx-auto shadow-none",children:e.jsx(D,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"category",children:"Category"}),e.jsx(g,{name:"category",control:t,rules:{required:"Category is required"},render:({field:m})=>{var b,C;return e.jsxs(M,{value:m.value||"",onValueChange:o=>{const w=p.find(E=>E._id===o);w&&(m.onChange(w._id),a("categorySlug",w.slug))},children:[e.jsx(R,{id:"category",children:e.jsx($,{children:m.value&&c?(b=p.find(o=>o._id===m.value))==null?void 0:b.category:i&&((C=i.category)==null?void 0:C.name)||"Select Category"})}),e.jsx(P,{children:n?e.jsx(k,{value:"loading",disabled:!0,children:"Loading..."}):c&&p.length>0?p.map(o=>e.jsx(k,{value:o._id,children:o.category},o._id)):e.jsx(k,{value:"none",disabled:!0,children:"No categories available"})})]})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"sub_category",children:"Sub Category"}),e.jsx(g,{name:"sub_category",control:t,render:({field:m})=>{var b,C;return e.jsxs(M,{value:m.value||"",onValueChange:o=>{const w=N.find(E=>E._id===o);w&&(m.onChange(w._id),a("subCategorySlug",w.slug))},disabled:!f||N.length===0,children:[e.jsx(R,{id:"sub_category",children:e.jsx($,{children:m.value&&N.length>0?(b=N.find(o=>o._id===m.value))==null?void 0:b.category:i&&((C=i.sub_category)==null?void 0:C.name)||"Select Sub Category"})}),e.jsx(P,{children:N.length>0?N.map(o=>e.jsx(k,{value:o._id,children:o.category},o._id)):e.jsx(k,{value:"none",disabled:!0,children:"No sub-categories available"})})]})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"subsub_category_id",children:"Sub Sub Category"}),e.jsx(g,{name:"subsub_category_id",control:t,render:({field:m})=>{var b,C;return e.jsxs(M,{value:m.value||"",onValueChange:o=>{const w=_.find(E=>E._id===o);w&&(m.onChange(w._id),a("subSubCategorySlug",w.slug))},disabled:!I||_.length===0,children:[e.jsx(R,{id:"subsub_category_id",children:e.jsx($,{children:m.value&&_.length>0?(b=_.find(o=>o._id===m.value))==null?void 0:b.category:i&&((C=i.subSubCategory)==null?void 0:C.category)||"Select Sub Sub Category"})}),e.jsx(P,{children:_.length>0?_.map(o=>e.jsx(k,{value:o._id,children:o.category},o._id)):e.jsx(k,{value:"none",disabled:!0,children:"No sub-sub-categories available"})})]})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"unit",children:"Unit"}),e.jsx(g,{name:"unit",control:t,rules:{required:"Unit is required"},render:({field:m})=>e.jsxs(M,{onValueChange:m.onChange,value:m.value||void 0,children:[e.jsx(R,{id:"unit",children:e.jsx($,{placeholder:"Select Unit"})}),e.jsx(P,{children:h?e.jsx(k,{value:"loading",children:"Loading..."}):s.map(b=>e.jsx(k,{value:b.name,children:b.name},b._id))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"assay",children:"Assay (%)"}),e.jsx(g,{name:"assay",control:t,render:({field:m})=>e.jsx("div",{children:e.jsx("input",{type:"string",id:"assay",min:"0",max:"100",step:"0.01",value:m.value||0,onChange:b=>m.onChange(b.target.value),className:"w-full border "})})})]})]})})})};Q.propTypes={control:A.object.isRequired,chemicalData:A.object,watch:A.func.isRequired,setValue:A.func.isRequired};const re=({control:t,setValue:i})=>{const x=J({control:t,name:"name"});return S.useEffect(()=>{if(x){const a=B(x,{lower:!0,strict:!0,trim:!0});i("slug",a)}},[x,i]),e.jsx(q,{className:"w-full max-w-2xl mx-auto shadow-none border-none",children:e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"name",children:"Name"}),e.jsx(g,{name:"name",control:t,rules:{required:"Name is required"},render:({field:a})=>e.jsx(y,{id:"name",...a})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"slug",children:"Slug"}),e.jsx(g,{name:"slug",control:t,render:({field:a})=>e.jsx(y,{id:"slug",...a,onChange:N=>{const v=B(N.target.value,{lower:!0,strict:!0,trim:!0});a.onChange(v)}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"chemical_type",children:"Chemical Type"}),e.jsx(g,{name:"chemical_type",control:t,render:({field:a})=>e.jsx(y,{id:"chemical_type",...a})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"cas_number",children:"CAS Number"}),e.jsx(g,{name:"cas_number",control:t,render:({field:a})=>e.jsx(y,{id:"cas_number",...a})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"iupac",children:"IUPAC Name"}),e.jsx(g,{name:"iupac",control:t,render:({field:a})=>e.jsx(y,{id:"iupac",...a})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"molecular_formula",children:"Molecular Formula"}),e.jsx(g,{name:"molecular_formula",control:t,render:({field:a})=>e.jsx(y,{id:"molecular_formula",...a})})]})]})})},W=({control:t,watch:i})=>{const[x,a]=S.useState({specs:!1,msds:!1}),N=i("specs"),v=i("msds"),_=(l,d="specs")=>{if(l){const h=d==="msds"?"msds":"specs",s=l.split(".")[0];window.open(`/api/image/${h}/view/${s}`,"_blank")}};return e.jsx(q,{className:"w-full max-w-2xl mx-auto border-none shadow-none",children:e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"packings",children:"Packings"}),e.jsx(g,{name:"packings",control:t,defaultValue:[],render:({field:l})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{placeholder:"Enter packing (e.g., 25kg)",onKeyDown:d=>{if(d.key==="Enter"){d.preventDefault();const h=d.target.value.trim();h&&!l.value.includes(h)&&(l.onChange([...l.value,h]),d.target.value="")}}}),e.jsx(T,{type:"button",onClick:d=>{const h=d.currentTarget.previousSibling,s=h.value.trim();s&&!l.value.includes(s)&&(l.onChange([...l.value,s]),h.value="")},children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(l.value)&&l.value.map((d,h)=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[e.jsx("span",{children:d}),e.jsx("button",{type:"button",onClick:()=>{const s=l.value.filter((r,n)=>n!==h);l.onChange(s)},className:"text-muted-foreground hover:text-foreground",children:e.jsx(L,{className:"h-4 w-4"})})]},h))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"grade",children:"Grade"}),e.jsx(g,{name:"grade",control:t,render:({field:l})=>e.jsx(y,{id:"grade",placeholder:"Enter grade",...l})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"iupac",children:"IUPAC Name"}),e.jsx(g,{name:"iupac",control:t,render:({field:l})=>e.jsx(y,{id:"iupac",placeholder:"Enter IUPAC name",...l})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"h_s_code",children:"HS Code"}),e.jsx(g,{name:"h_s_code",control:t,render:({field:l})=>e.jsx(y,{id:"h_s_code",placeholder:"Enter HS code",...l})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"molecular_weight",children:"Molecular Weight"}),e.jsx(g,{name:"molecular_weight",control:t,render:({field:l})=>e.jsx(y,{id:"molecular_weight",type:"number",placeholder:"Enter molecular weight",...l})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"molecular_formula",children:"Molecular Formula"}),e.jsx(g,{name:"molecular_formula",control:t,render:({field:l})=>e.jsx(y,{id:"molecular_formula",placeholder:"Enter molecular formula",...l})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"application",children:"Applications"}),e.jsx(g,{name:"application",control:t,defaultValue:[],render:({field:l})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{placeholder:"Enter application",onKeyDown:d=>{if(d.key==="Enter"){d.preventDefault();const h=d.target.value.trim();h&&!l.value.includes(h)&&(l.onChange([...l.value,h]),d.target.value="")}}}),e.jsx(T,{type:"button",onClick:d=>{const h=d.currentTarget.previousSibling,s=h.value.trim();s&&!l.value.includes(s)&&(l.onChange([...l.value,s]),h.value="")},children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(l.value)&&l.value.map((d,h)=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[e.jsx("span",{children:d}),e.jsx("button",{type:"button",onClick:()=>{const s=l.value.filter((r,n)=>n!==h);l.onChange(s)},className:"text-muted-foreground hover:text-foreground",children:e.jsx(L,{className:"h-4 w-4"})})]},h))})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"specs",children:"Specifications (PDF)"}),e.jsx(g,{name:"specs",control:t,render:({field:{value:l,onChange:d,...h}})=>e.jsxs("div",{className:"space-y-2",children:[typeof N=="string"&&N&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-secondary rounded-md",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm truncate",children:N}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",onClick:()=>_(N,"specs"),children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",onClick:()=>d(""),children:e.jsx(L,{className:"h-4 w-4"})})]}),e.jsx(y,{id:"specs",type:"file",accept:".pdf",disabled:x.specs,onChange:async s=>{var n;const r=(n=s.target.files)==null?void 0:n[0];r&&(a(c=>({...c,specs:!0})),d(r),a(c=>({...c,specs:!1})))},...h}),x.specs&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploading specification file..."})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"msds",children:"MSDS (PDF)"}),e.jsx(g,{name:"msds",control:t,render:({field:{value:l,onChange:d,...h}})=>e.jsxs("div",{className:"space-y-2",children:[typeof v=="string"&&v&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-secondary rounded-md",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm truncate",children:v}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",onClick:()=>_(v,"msds"),children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(T,{type:"button",variant:"ghost",size:"sm",onClick:()=>d(""),children:e.jsx(L,{className:"h-4 w-4"})})]}),e.jsx(y,{id:"msds",type:"file",accept:".pdf",disabled:x.msds,onChange:async s=>{var n;const r=(n=s.target.files)==null?void 0:n[0];r&&(a(c=>({...c,msds:!0})),d(r),a(c=>({...c,msds:!1})))},...h}),x.msds&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uploading MSDS file..."})]})})]})]})})};W.propTypes={control:A.object.isRequired,watch:A.func};W.defaultProps={watch:()=>{}};const te=({control:t})=>e.jsx(q,{className:"w-full max-w-2xl mx-auto border-none shadow-none",children:e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"metatitle",children:"Meta Title"}),e.jsx(g,{name:"metatitle",control:t,render:({field:i})=>e.jsx(y,{id:"metatitle",placeholder:"Enter meta title",...i})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"metadescription",children:"Meta Description"}),e.jsx(g,{name:"metadescription",control:t,render:({field:i})=>e.jsx(z,{id:"metadescription",placeholder:"Enter meta description",...i,rows:3})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"metakeywords",children:"Meta Keywords"}),e.jsx(g,{name:"metakeywords",control:t,render:({field:i})=>e.jsx(y,{id:"metakeywords",placeholder:"Enter meta keywords",...i})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"metacanonical",children:"Meta Canonical URL"}),e.jsx(g,{name:"metacanonical",control:t,render:({field:i})=>e.jsx(y,{id:"metacanonical",placeholder:"Enter canonical URL",...i})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"metalanguage",children:"Meta Language"}),e.jsx(g,{name:"metalanguage",control:t,render:({field:i})=>e.jsx(y,{id:"metalanguage",placeholder:"Enter language code (e.g., en-US)",...i})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"metaschema",children:"Meta Schema"}),e.jsx(g,{name:"metaschema",control:t,render:({field:i})=>e.jsx(z,{id:"metaschema",placeholder:"Enter JSON-LD schema",...i,rows:4})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"otherMeta",children:"Other Meta Information"}),e.jsx(g,{name:"otherMeta",control:t,render:({field:i})=>e.jsx(z,{id:"otherMeta",placeholder:"Enter any additional meta information",...i,rows:3})})]})]})}),le=({control:t,setValue:i})=>{const{fields:x,append:a,remove:N,update:v}=X({control:t,name:"images"}),_={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]},l=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","color","background","align","direction","code-block","script"],d=S.useCallback((s,r)=>{var c,j,F,p;const n=s.target.files[0];if(n){(j=(c=x[r])==null?void 0:c.preview)!=null&&j.startsWith("blob:")&&URL.revokeObjectURL(x[r].preview);const f=URL.createObjectURL(n);v(r,{...x[r],file:n,preview:f,altText:((F=x[r])==null?void 0:F.altText)||"",title:((p=x[r])==null?void 0:p.title)||"",url:null})}},[x,v]);S.useEffect(()=>()=>{x.forEach(s=>{var r;(r=s==null?void 0:s.preview)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(s.preview)})},[x]);const h=S.useCallback(s=>{var r,n;(n=(r=x[s])==null?void 0:r.preview)!=null&&n.startsWith("blob:")&&URL.revokeObjectURL(x[s].preview),x[s]._id&&i(`imagesToDelete.${x[s]._id}`,!0),N(s)},[x,N,i]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"global_tagline",children:"Global Tagline"}),e.jsx(g,{name:"global_tagline",control:t,defaultValue:"",render:({field:s})=>e.jsx(y,{id:"global_tagline",placeholder:"Enter global tagline",...s})}),e.jsx("p",{className:"text-xs text-gray-500",children:"A brief tagline that will appear globally."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"description",children:"Description"}),e.jsx(g,{name:"description",control:t,defaultValue:"",render:({field:{onChange:s,value:r}})=>e.jsx("div",{className:"quill-container",children:e.jsx(ee,{id:"description",theme:"snow",value:r,onChange:s,className:"bg-white",modules:_,formats:l,placeholder:"Enter detailed description..."})})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format your content using the toolbar above. Use headings, lists, and formatting to create well-structured content."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"synonyms",children:"Synonyms"}),e.jsx(g,{name:"synonyms",control:t,defaultValue:[],render:({field:s})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{placeholder:"Enter synonym",onKeyDown:r=>{if(r.key==="Enter"){r.preventDefault();const n=r.target.value.trim();n&&!s.value.includes(n)&&(s.onChange([...s.value,n]),r.target.value="")}}}),e.jsx(T,{type:"button",onClick:r=>{const n=r.currentTarget.previousSibling,c=n.value.trim();c&&!s.value.includes(c)&&(s.onChange([...s.value,c]),n.value="")},children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(s.value)&&s.value.map((r,n)=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded-md",children:[e.jsx("span",{children:r}),e.jsx("button",{type:"button",onClick:()=>{const c=s.value.filter((j,F)=>F!==n);s.onChange(c)},className:"text-muted-foreground hover:text-foreground",children:e.jsx(L,{className:"h-4 w-4"})})]},n))})]})})]}),e.jsx(u,{children:"Images"}),x.map((s,r)=>e.jsxs("div",{className:"space-y-2 border p-4 rounded-lg",children:[s.preview||s.url?e.jsx("img",{src:s.preview||`/api/image/download/${s.url}`,alt:s.altText||"Image preview",className:"w-32 h-32 object-cover rounded border"}):e.jsx("div",{className:"w-32 h-32 flex items-center justify-center border rounded bg-gray-100",children:"No Preview"}),e.jsx("input",{type:"file",onChange:n=>d(n,r),accept:"image/*",className:`block w-full text-sm text-gray-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-full file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-blue-50 file:text-blue-700\r
                hover:file:bg-blue-100`}),e.jsx(u,{htmlFor:`alt-text-${r}`,children:"Alt Text"}),e.jsx(g,{name:`images.${r}.altText`,control:t,defaultValue:s.altText||"",render:({field:n})=>e.jsx(y,{id:`alt-text-${r}`,placeholder:"Alt Text",...n})}),e.jsx(u,{htmlFor:`image-title-${r}`,children:"Image Title"}),e.jsx(g,{name:`images.${r}.title`,control:t,defaultValue:s.title||"",render:({field:n})=>e.jsx(y,{id:`image-title-${r}`,placeholder:"Image Title",...n})}),e.jsx("button",{type:"button",onClick:()=>h(r),className:"text-red-600 hover:underline",children:"Remove"})]},s.id)),e.jsx("button",{type:"button",onClick:()=>a({file:null,preview:null,altText:"",title:"",url:null}),className:"px-4 py-2 mt-4 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add Image"})]})},Ge=()=>{const{control:t,handleSubmit:i,watch:x,setValue:a}=Y({defaultValues:{category:"",sub_category:"",subsub_category_id:"",categorySlug:"",subCategorySlug:"",subSubCategorySlug:"",name:"",slug:"",images:[],catalog:"",msds:"",specs:"",unit:"",chemical_type:"",cas_number:"",packings:[],grade:"",iupac:"",h_s_code:"",molecular_weight:"",molecular_formula:"",synonyms:[],application:[],chemical_industries:[],product_code:"",auto_p_code:"",packing:"",hs_code:"",assay:"",metatitle:"",metadescription:"",metakeywords:"",metacanonical:"",metalanguage:"",metaschema:"",otherMeta:"",imagesToDelete:{}}}),N=se(),{id:v}=ae(),[_,l]=S.useState(!1),[d,h]=S.useState(null);S.useEffect(()=>{(async()=>{if(v){l(!0);try{const c=(await O.get(`/api/chemical/getChemicalById?id=${v}`)).data;h(c),c.category&&(a("category",c.category._id),a("categorySlug",c.category.slug)),c.sub_category&&(a("sub_category",c.sub_category._id),a("subCategorySlug",c.sub_category.slug)),c.subsub_category_id&&(a("subsub_category_id",typeof c.subsub_category_id=="object"?c.subsub_category_id._id:c.subsub_category_id),a("subSubCategorySlug",c.subsub_category_id.slug||"")),Object.entries(c).forEach(([j,F])=>{j!=="category"&&j!=="sub_category"&&j!=="subsub_category_id"&&j!=="images"&&a(j,F)}),c.images&&c.images.length>0&&a("images",c.images)}catch(n){console.error("Error fetching chemical data:",n)}finally{l(!1)}}})()},[v,a]);const s=async r=>{var n,c;try{const j=new FormData;r.images.forEach((p,f)=>{p.file instanceof File?(j.append("images",p.file),j.append(`altText-${f}`,p.altText||""),j.append(`title-${f}`,p.title||"")):p.url&&(j.append(`existingImages[${f}][url]`,p.url),j.append(`existingImages[${f}][altText]`,p.altText||""),j.append(`existingImages[${f}][title]`,p.title||""))}),Object.keys(r.imagesToDelete).forEach(p=>{j.append("imagesToDelete[]",p)}),Object.entries(r).forEach(([p,f])=>{p!=="images"&&p!=="imagesToDelete"&&f!==void 0&&f!==null&&f!==""&&(Array.isArray(f)?f.forEach((I,U)=>{j.append(`${p}[${U}]`,I)}):p==="molecular_weight"&&f?j.append(p,Number(f)):j.append(p,f))});let F;v?F=await O.put(`/api/chemical/updateChemicalById?id=${v}`,j,{headers:{"Content-Type":"multipart/form-data"}}):F=await O.post("/api/chemical/add",j,{headers:{"Content-Type":"multipart/form-data"}}),console.log("Form submitted successfully",F.data),N("/chemical-table")}catch(j){console.error("Error submitting form:",((c=(n=j.response)==null?void 0:n.data)==null?void 0:c.message)||j.message)}};return _?e.jsx("div",{children:"Loading existing chemical data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex items-center text-sm text-gray-500",children:[e.jsx(H,{to:"/",className:"hover:text-purple-600",children:"Home"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(H,{to:"/chemical-table",className:"hover:text-purple-600",children:"Chemicals"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900",children:v?"Edit Chemical":"New Chemical"})]}),e.jsxs("form",{onSubmit:i(s),className:"space-y-6 bg-white",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Category Information"}),e.jsx(Q,{control:t,watch:x,setValue:a,chemicalData:d})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Chemical Details"}),e.jsx(re,{control:t,setValue:a,chemicalData:d})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Chemical Properties"}),e.jsx(W,{control:t,chemicalData:d})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Image Upload"}),e.jsx(le,{control:t,setValue:a,chemicalData:d})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Meta Information"}),e.jsx(te,{control:t,chemicalData:d})]})]}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(T,{type:"submit",className:"px-8 py-3 w-1/4 text-white rounded-md hover:bg-purple-700 transition duration-300 ease-in-out transform hover:scale-105",children:v?"Update Chemical":"Submit Chemical"})})]})]})};export{Ge as ChemicalFormPage,Ge as default};
