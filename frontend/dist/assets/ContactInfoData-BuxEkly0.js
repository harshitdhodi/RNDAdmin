import{r as n,j as s}from"./react-DKICu8bO.js";import{ba as g,bb as h,bc as b}from"./index-Bbo1zcj1.js";import"./classnames-Bv6oJzD9.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./react-router-B9QVkYva.js";import"./cookie--_YQFYBD.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./lucide-D7hRWJEP.js";import"./axios-DXsv3KKR.js";import"./@syncfusion-BIAkhmGL.js";const J=()=>{const[r,i]=n.useState({address:"",mobiles:[""],emails:[""],imgTitle:[""],altName:[""],photo:[],previewUrls:[]}),[d]=g(),[c]=h(),{data:m}=b();n.useEffect(()=>{if(m&&m.length>0){const a=m[0];i({address:a.address,mobiles:a.mobiles,emails:a.emails,imgTitle:a.imgTitle||[""],altName:a.altName||[""],photo:[],previewUrls:a.photo?a.photo.map(t=>`/api/image/download/${t}`):[]})}},[m]);const p=a=>{const t=Array.from(a.target.files),o=t.map(e=>URL.createObjectURL(e));i(e=>({...e,photo:t,previewUrls:[...o],imgTitle:t.map(()=>""),altName:t.map(()=>"")}))};n.useEffect(()=>()=>{r.previewUrls.forEach(a=>{a.startsWith("blob:")&&URL.revokeObjectURL(a)})},[r.previewUrls]);const u=async a=>{var o;a.preventDefault();const t=new FormData;t.append("address",r.address),r.mobiles.forEach(e=>{t.append("mobiles[]",e)}),r.emails.forEach(e=>{t.append("emails[]",e)}),r.imgTitle.forEach((e,l)=>{t.append("imgTitle[]",e)}),r.altName.forEach((e,l)=>{t.append("altName[]",e)}),r.photo.length>0?r.photo.forEach(e=>{t.append("photo[]",e)}):m&&((o=m[0])!=null&&o.photo)&&m[0].photo.forEach(e=>{t.append("photo[]",e)});try{m&&m.length>0?await c({id:m[0]._id,formData:t}).unwrap():await d(t).unwrap()}catch(e){console.error("Error:",e)}};return s.jsx("div",{className:"max-w-2xl mx-auto p-4",children:s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),s.jsx("textarea",{value:r.address,onChange:a=>i(t=>({...t,address:a.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Numbers"}),r.mobiles.map((a,t)=>s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx("input",{type:"tel",value:a,onChange:o=>i(e=>{const l=[...e.mobiles];return l[t]=o.target.value,{...e,mobiles:l}}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),r.mobiles.length>1&&s.jsx("button",{type:"button",onClick:()=>i(o=>{const e=[...o.mobiles];return e.splice(t,1),{...o,mobiles:e}}),className:"text-red-500",children:"Remove"})]},t)),s.jsx("button",{type:"button",onClick:()=>i(a=>({...a,mobiles:[...a.mobiles,""]})),className:"mt-2 text-indigo-600",children:"Add Mobile"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emails"}),r.emails.map((a,t)=>s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx("input",{type:"email",value:a,onChange:o=>i(e=>{const l=[...e.emails];return l[t]=o.target.value,{...e,emails:l}}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),r.emails.length>1&&s.jsx("button",{type:"button",onClick:()=>i(o=>{const e=[...o.emails];return e.splice(t,1),{...o,emails:e}}),className:"text-red-500",children:"Remove"})]},t)),s.jsx("button",{type:"button",onClick:()=>i(a=>({...a,emails:[...a.emails,""]})),className:"mt-2 text-indigo-600",children:"Add Email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo Images"}),s.jsx("input",{type:"file",onChange:p,accept:"image/*",multiple:!0,className:"mt-1 block w-full"}),s.jsx("div",{className:"mt-2 grid grid-cols-3 gap-4",children:r.previewUrls.map((a,t)=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:a,alt:r.altName[t]||`Preview ${t+1}`,className:"w-24 h-24 object-cover rounded"}),s.jsx("input",{type:"text",placeholder:"Image Title",value:r.imgTitle[t]||"",onChange:o=>{const e=[...r.imgTitle];e[t]=o.target.value,i(l=>({...l,imgTitle:e}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),s.jsx("input",{type:"text",placeholder:"Alt Text",value:r.altName[t]||"",onChange:o=>{const e=[...r.altName];e[t]=o.target.value,i(l=>({...l,altName:e}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),s.jsx("button",{type:"button",onClick:()=>{i(o=>({...o,previewUrls:o.previewUrls.filter((e,l)=>l!==t),photo:Array.from(o.photo).filter((e,l)=>l!==t),imgTitle:o.imgTitle.filter((e,l)=>l!==t),altName:o.altName.filter((e,l)=>l!==t)}))},className:"text-red-500",children:"Remove"})]},t))})]}),s.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700",children:m&&m.length>0?"Update":"Submit"})]})})};export{J as default};
