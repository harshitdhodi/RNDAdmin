import{r as o,j as e}from"./react-DKICu8bO.js";import{U as V,L as i,I as u,T as F,B as h}from"./index-CDFtkn6X.js";import{C as M,b as R,c as T,a as A}from"./card-CY6sXsn1.js";import{S as x,a as g,b as j,c as v,d as C}from"./select-CdiUu-U-.js";import{B as O}from"./BreadCrumb-C1ZZs22B.js";import{S as W,C as z,a as $}from"./country-state-city-BYZIyAdR.js";import{B as m}from"./react-toastify-CMp5zawu.js";import{a as H}from"./react-router-B9QVkYva.js";import"./classnames-Bv6oJzD9.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./lucide-D7hRWJEP.js";import"./axios-DXsv3KKR.js";import"./@syncfusion-BIAkhmGL.js";import"./cookie--_YQFYBD.js";const G=[{label:"Dashboard",href:"/dashboard"},{label:"Customer Table",href:"/customer-table"},{label:"Customer Form",href:null}];function Le(){const[w,{isLoading:y}]=V(),[t,l]=o.useState({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",county:"",city:"",description:"",image:null}),[E,P]=o.useState([]),[I,b]=o.useState([]),[J,f]=o.useState([]),[L,N]=o.useState([]),B=H();o.useEffect(()=>{const s=$.getAllCountries();P(s)},[]),o.useEffect(()=>{if(t.country){const s=W.getStatesOfCountry(t.country);b(s),l(a=>({...a,state:"",county:"",city:""}))}else b([])},[t.country]),o.useEffect(()=>{if(t.country&&t.state){const s=z.getCitiesOfState(t.country,t.state);N(s),l(a=>({...a,city:""}))}else N([])},[t.country,t.state]),o.useEffect(()=>{if(t.state){const s=D(t.state);f(s),l(a=>({...a,county:""}))}else f([])},[t.state]);const D=s=>[{code:"county1",name:"County 1"},{code:"county2",name:"County 2"},{code:"county3",name:"County 3"}],d=s=>{const{id:a,value:c}=s.target;l(S=>({...S,[a]:c}))},p=(s,a)=>{l(c=>({...c,[a]:s}))},U=s=>{const a=s.target.files[0];if(a){if(!a.type.startsWith("image/")){m({title:"Invalid file type",description:"Please upload an image file",variant:"destructive"});return}if(a.size>5*1024*1024){m({title:"File too large",description:"Image size should be less than 5MB",variant:"destructive"});return}l(c=>({...c,image:a}))}},q=async s=>{s.preventDefault();const c=["name","email","mobile"].filter(n=>!t[n]);if(c.length>0){m({title:"Validation Error",description:`Please fill in all required fields: ${c.join(", ")}`,variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)){m({title:"Validation Error",description:"Please enter a valid email address",variant:"destructive"});return}try{const n=new FormData;Object.keys(t).forEach(r=>{t[r]!==null&&(r==="image"&&t[r]?n.append(r,t[r]):r==="description"?n.append(r,t[r]||""):n.append(r,t[r]))}),(await w(n)).data&&(m({title:"Success",description:"Customer added successfully"}),l({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",county:"",city:"",description:"",image:null}),B("/customer-table"))}catch(n){m({title:"Error",description:n.message||"Failed to add customer",variant:"destructive"}),console.error("Submission Error:",n)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(O,{items:G})}),e.jsxs(M,{className:"w-full mt-4 mx-auto",children:[e.jsx(R,{children:e.jsx(T,{className:"text-xl text-purple-700",children:"Manage Customer"})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"name",children:["Customer Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{id:"name",value:t.name,onChange:d,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"contactPerson",children:"Contact Person"}),e.jsx(u,{id:"contactPerson",value:t.contactPerson,onChange:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"email",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{id:"email",type:"email",value:t.email,onChange:d,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"mobile",children:["Mobile Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{id:"mobile",value:t.mobile,onChange:d,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"website",children:"Website"}),e.jsx(u,{id:"website",type:"url",value:t.website,onChange:d})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"country",children:"Country"}),e.jsxs(x,{value:t.country,onValueChange:s=>p(s,"country"),children:[e.jsx(g,{children:e.jsx(j,{placeholder:"Select Country"})}),e.jsx(v,{children:E.map(s=>e.jsx(C,{value:s.isoCode,children:s.name},s.isoCode))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"state",children:"State/Province"}),e.jsxs(x,{value:t.state,onValueChange:s=>p(s,"state"),disabled:!t.country,children:[e.jsx(g,{children:e.jsx(j,{placeholder:"Select State"})}),e.jsx(v,{children:I.map(s=>e.jsx(C,{value:s.isoCode,children:s.name},s.isoCode))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"city",children:"City"}),e.jsxs(x,{value:t.city,onValueChange:s=>p(s,"city"),disabled:!t.state,children:[e.jsx(g,{children:e.jsx(j,{placeholder:"Select City"})}),e.jsx(v,{children:L.map(s=>e.jsx(C,{value:s.name,children:s.name},s.name))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"address",children:"Address"}),e.jsx(F,{id:"address",className:"min-h-[100px]",value:t.address,onChange:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Upload image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"w-32 h-32 mx-auto mb-4",children:e.jsx("img",{src:t.image?URL.createObjectURL(t.image):"/placeholder.svg",alt:"image preview",className:"w-full h-full object-contain"})}),e.jsx(h,{type:"button",variant:"outline",className:"bg-green-500 text-white hover:bg-green-600",onClick:()=>document.getElementById("imageUpload").click(),children:"Add image"}),e.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:U,className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:"Description"}),e.jsx(F,{id:"description",value:t.description,onChange:d,className:"min-h-[200px]",placeholder:"Enter customer description"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(h,{type:"submit",disabled:y,className:"bg-green-500 text-white hover:bg-green-600",children:y?"Saving...":"Save"}),e.jsx(h,{type:"button",variant:"destructive",onClick:()=>l({name:"",contactPerson:"",email:"",mobile:"",website:"",address:"",country:"",state:"",county:"",city:"",description:"",image:null}),children:"Cancel"})]})]})})]})]})}export{Le as default};
