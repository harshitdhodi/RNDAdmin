import{r as s,j as e}from"./react-DKICu8bO.js";import{a as H}from"./axios-DXsv3KKR.js";import{b as ue,a as me}from"./react-router-B9QVkYva.js";import"./classnames-Bv6oJzD9.js";import"./cookie--_YQFYBD.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";const je=()=>{const{categoryId:l,subCategoryId:o,subSubCategoryId:d}=ue(),K=me(),[u,x]=s.useState(""),[n,f]=s.useState(""),[h,p]=s.useState(""),[y,g]=s.useState(""),[j,v]=s.useState(""),[N,W]=s.useState(""),[c,m]=s.useState(""),[C,w]=s.useState(""),[S,F]=s.useState(""),[k,I]=s.useState(""),[$,M]=s.useState(""),[q,P]=s.useState(""),[D,E]=s.useState(""),[T,U]=s.useState(""),[L,X]=s.useState(),[z,A]=s.useState(),[R,O]=s.useState(0),[b,B]=s.useState("active");s.useEffect(()=>{(async()=>{let r="";l&&o&&d?r=`/api/chemicalCategory/getSpecificSubSubcategory?categoryId=${l}&subCategoryId=${o}&subSubCategoryId=${d}`:l&&o?r=`/api/chemicalCategory/getSpecificSubcategory?categoryId=${l}&subCategoryId=${o}`:l&&(r=`/api/chemicalCategory/getSpecificCategoryById?categoryId=${l}`);try{const a=await H.get(r,{withCredentials:!0}),{category:i,details:V,photo:Z,alt:_,imgtitle:ee,slug:te,metatitle:ae,metadescription:se,metakeywords:le,metalanguage:oe,metacanonical:re,metaschema:ne,otherMeta:ce,changeFreq:ie,priority:de}=a.data;x(i),W(Z),p(_),g(ee),m(te),B(b),v(V),w(ae),F(se),I(le),M(oe),P(re),E(ne),U(ce),A(ie),O(de)}catch(a){console.error("Error fetching data:",a)}})()},[l,o,d]);const Y=t=>{const r=t.target.files[0];f(r)},G=()=>{f(""),p(""),g("")},J=()=>{let t="https://rndtechnosoft.com";return l&&!o?`${t}/${c}`:l&&o?`${t}/${c}`:`${t}/${c}`};s.useEffect(()=>{X(J())},[c,l,o]),s.useEffect(()=>{m(u.replace(/\s+/g,"-").toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""))},[u]),s.useEffect(()=>{m(c.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-"))},[c]);const Q=async t=>{t.preventDefault();let r="";l&&o&&d?r=`/api/chemicalCategory/updatesubsubcategory?categoryId=${l}&subCategoryId=${o}&subSubCategoryId=${d}`:l&&o?r=`/api/chemicalCategory/updateSubCategory?categoryId=${l}&subCategoryId=${o}`:l&&(r=`/api/chemicalCategory/updateCategory?categoryId=${l}`);const a=new FormData;a.append("category",u),a.append("alt",h),a.append("imgtitle",y),a.append("slug",c),a.append("metatitle",C||""),a.append("metakeywords",k||""),a.append("metadescription",S||""),a.append("metalanguage",$||""),a.append("metacanonical",q||""),a.append("metaschema",D||""),a.append("otherMeta",T||""),a.append("url",L),a.append("changeFreq",z||""),a.append("priority",R),a.append("status",b),a.append("details",j),n&&(console.log("Photo file:",n),console.log("Photo file name:",n.name),console.log("Photo file type:",n.type),console.log("Photo file size:",n.size),a.append("photo",n));try{const i=await H.put(r,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});K("/chemical-category")}catch(i){console.error("Error updating data:",i.response?i.response.data:i.message),alert(i.response?i.response.data.error:"An error occurred")}};return e.jsxs("form",{onSubmit:Q,className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold font-serif text-gray-700 uppercase text-center",children:"Edit Category"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block font-semibold mb-2",children:"Category"}),e.jsx("input",{type:"text",id:"category",value:u,onChange:t=>x(t.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{htmlFor:"photo",className:"block font-semibold mb-2",children:"Photo"}),e.jsx("input",{type:"file",name:"photo",id:"photo",onChange:Y,className:"border rounded focus:outline-none",accept:"image/*"}),(n||N)&&e.jsxs("div",{className:"mt-2 w-56 relative group",children:[e.jsx("img",{src:n?URL.createObjectURL(n):`/api/logo/download/${N}`,alt:h,className:"h-32 w-56 object-cover"}),e.jsx("button",{type:"button",onClick:G,className:"absolute top-4 right-2 bg-red-500 text-white rounded-md p-1 size-6 flex items-center justify-center hover:bg-red-600 focus:outline-none",children:"X"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"alt",className:"block font-semibold mb-2",children:"Alternative Text"}),e.jsx("input",{type:"text",id:"alt",value:h,onChange:t=>p(t.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"imgtitle",className:"block font-semibold mb-2",children:"Image Title Text"}),e.jsx("input",{type:"text",id:"imgtitle",value:y,onChange:t=>g(t.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"imgtitle",className:"block font-semibold mb-2",children:"Details"}),e.jsx("textarea",{type:"text",id:"details",value:j,onChange:t=>v(t.target.value),className:"w-full p-2 border rounded focus:outline-none",required:!0})]}),e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsx("label",{htmlFor:"slug",className:"block font-semibold mb-2",children:"Slug"}),e.jsx("input",{type:"text",id:"slug",value:c,onChange:t=>m(t.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsx("label",{htmlFor:"url",className:"block font-semibold mb-2",children:"URL"}),e.jsx("input",{type:"text",id:"url",value:L,disabled:!0,className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Title"}),e.jsx("textarea",{id:"meta",value:C,onChange:t=>w(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Description"}),e.jsx("textarea",{id:"meta",value:S,onChange:t=>F(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Keywords"}),e.jsx("textarea",{id:"meta",value:k,onChange:t=>I(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Canonical"}),e.jsx("textarea",{id:"meta",value:q,onChange:t=>P(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Meta Language"}),e.jsx("textarea",{id:"meta",value:$,onChange:t=>M(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Other Meta"}),e.jsx("textarea",{id:"meta",value:T,onChange:t=>U(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"meta",className:"block font-semibold mb-2",children:"Schema"}),e.jsx("textarea",{id:"meta",value:D,onChange:t=>E(t.target.value),className:"w-full p-2 border rounded focus:outline-none",rows:"3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"priority",className:"block font-semibold mb-2",children:"Priority"}),e.jsx("input",{type:"number",id:"priority",min:0,max:1,step:.01,value:R,onChange:t=>O(t.target.value),className:"w-full p-2 border rounded focus:outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"changeFreq",className:"block font-semibold mb-2",children:"Change Frequency"}),e.jsxs("select",{id:"changeFreq",value:z,onChange:t=>A(t.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Change Frequency"}),e.jsx("option",{value:"always",children:"Always"}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"status",className:"block font-semibold mb-2",children:"Status"}),e.jsxs("select",{id:"status",value:b,onChange:t=>B(t.target.value),className:"w-full p-2 border rounded focus:outline-none",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Update Category"})]})};export{je as default};
