import{r as g,j as e}from"./react-DKICu8bO.js";import{c as q}from"./react-hook-form-BpvdonxZ.js";import{ao as F,ap as I,al as N,I as p,B as S}from"./index-Bbo1zcj1.js";import{S as v,a as E,b as C,c as L,d as B}from"./select-CnTZk46j.js";import{F as w,a as i,b as o,c as n,d as m,e as l}from"./form-CcwpV_gP.js";import{o as M,s as d}from"./zod-B_haSLVu.js";import{t as T}from"./@hookform-DUkwi3xb.js";import{B as U}from"./BreadCrumb-P1oQ4p-m.js";import{b as V,a as A}from"./react-router-B9QVkYva.js";import"./classnames-Bv6oJzD9.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./lucide-D7hRWJEP.js";import"./axios-DXsv3KKR.js";import"./@syncfusion-BIAkhmGL.js";import"./cookie--_YQFYBD.js";const G=[{label:"Dashboard",href:"/dashboard"},{label:"Inquiry Table",href:"/inquiry-list"},{label:"Inquiry Form",href:null}],P=M({companyName:d().min(2,{message:"Company name must be at least 2 characters"}),name:d().min(2,{message:"Full name must be at least 2 characters"}),email:d().email({message:"Invalid email address"}),mobile:d().regex(/^[0-9]{10}$/,{message:"Mobile number must be 10 digits"}),address:d().min(2,{message:"Address must be at least 2 characters"}),status:d({required_error:"Please select a status"})});function Ne({onClose:Q}){const{id:x}=V(),h=A(),{data:a,isLoading:b}=F(x),[y,{isLoading:j}]=I(),{data:u,isLoading:_}=N(),r=q({resolver:T(P),defaultValues:{companyName:"",name:"",email:"",mobile:"",address:"",status:"New Inquiry"}});g.useEffect(()=>{a&&r.reset({companyName:a.companyName||"",name:a.name||"",email:a.email||"",mobile:a.mobile||"",address:a.address||"",status:a.status||"New Inquiry"})},[a,r]);const f=async s=>{var c;try{const t=await y({id:x,...s}).unwrap();r.reset(),h("/inquiry-list")}catch(t){alert({title:"Error",description:((c=t==null?void 0:t.data)==null?void 0:c.message)||"Failed to update inquiry",variant:"destructive"})}};return b?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1",children:e.jsx(U,{items:G})}),e.jsx(w,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(f),className:"space-y-4 p-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Update Inquiry"}),e.jsx(i,{control:r.control,name:"companyName",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Company Name"}),e.jsx(m,{children:e.jsx(p,{placeholder:"Enter company name",...s})}),e.jsx(l,{})]})}),e.jsx(i,{control:r.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Full Name"}),e.jsx(m,{children:e.jsx(p,{placeholder:"Enter full name",...s})}),e.jsx(l,{})]})}),e.jsx(i,{control:r.control,name:"email",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Email"}),e.jsx(m,{children:e.jsx(p,{type:"email",placeholder:"Enter email",...s})}),e.jsx(l,{})]})}),e.jsx(i,{control:r.control,name:"mobile",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Mobile Number"}),e.jsx(m,{children:e.jsx(p,{type:"tel",placeholder:"Enter 10-digit mobile",...s})}),e.jsx(l,{})]})}),e.jsx(i,{control:r.control,name:"address",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Address"}),e.jsx(m,{children:e.jsx(p,{placeholder:"Enter address",...s})}),e.jsx(l,{})]})}),e.jsx(i,{control:r.control,name:"status",render:({field:s})=>{var c;return e.jsxs(o,{children:[e.jsx(n,{children:"Status"}),e.jsxs(v,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(m,{children:e.jsx(E,{children:e.jsx(C,{placeholder:"Select status"})})}),e.jsx(L,{children:(c=u==null?void 0:u.data)==null?void 0:c.map(t=>e.jsx(B,{value:t.status,children:t.status},t._id))})]}),e.jsx(l,{})]})}}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsx(S,{type:"submit",disabled:j,children:j?"Updating...":"Update Inquiry"})})]})})]})}export{Ne as default};
