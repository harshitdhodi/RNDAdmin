import{r as x,j as e}from"./react-DKICu8bO.js";import{b as w,c as D}from"./react-icons-CD_zxaLW.js";import{aw as C,ax as v,ay as F,i as k,j as L,k as M,at as U,B as S,au as _,al as A,az as B,D as b,h as q}from"./index-CDFtkn6X.js";import{c as G}from"./react-hook-form-BpvdonxZ.js";import{h as P}from"./lucide-D7hRWJEP.js";import"./classnames-Bv6oJzD9.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./react-router-B9QVkYva.js";import"./cookie--_YQFYBD.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./axios-DXsv3KKR.js";import"./@syncfusion-BIAkhmGL.js";const g=({closeModal:i,statusToEdit:s})=>{console.log(s);const{register:d,handleSubmit:m,reset:l,formState:{errors:o}}=G(),{data:r}=C(s==null?void 0:s._id,{skip:!s});console.log(r);const[u,{isLoading:n,isSuccess:a,isError:t}]=v(),[h,{isLoading:j,isSuccess:p,isError:f}]=F(s==null?void 0:s._id),y=async c=>{try{s?await h({id:s._id,...c}).unwrap():await u(c).unwrap(),l()}catch(N){console.error("Failed to save status:",N)}};return x.useEffect(()=>{(a||p)&&i()},[a,p,i]),x.useEffect(()=>{const c=r||s;c&&l({status:c.status})},[r,s,l]),e.jsxs(k,{children:[e.jsxs(L,{children:[e.jsx(M,{children:s?"Edit Status":"Add Status"}),e.jsx(U,{children:s?"Edit the status details below.":"Fill out the form below to create a new status."})]}),e.jsxs("form",{onSubmit:m(y),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium mb-2",children:"Status"}),e.jsx("input",{id:"status",...d("status",{required:"Status is required",minLength:{value:2,message:"Status must be at least 2 characters"}}),className:`w-full px-3 py-2 border rounded ${o.status?"border-red-500":""}`,placeholder:"Enter status name"}),o.status&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.status.message})]}),e.jsx(S,{type:"submit",className:"w-full",disabled:n||j,children:n||j?"Submitting...":s?"Update":"Submit"}),(a||p)&&e.jsx("p",{className:"text-green-500",children:s?"Status updated successfully!":"Status added successfully!"}),(t||f)&&e.jsx("p",{className:"text-red-500",children:"Error processing status."})]}),e.jsx(_,{})]})},be=()=>{const{data:i,isLoading:s,isError:d}=A(),[m]=B(),[l,o]=x.useState(null),r=i==null?void 0:i.data,u=async t=>{try{await m(t).unwrap(),alert("Status deleted successfully!")}catch{alert("Failed to delete status.")}},n=t=>{console.log(t),o(t)},a=()=>{o(null)};return s?e.jsx("div",{children:"Loading..."}):d?e.jsx("div",{children:"Error fetching statuses."}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Status List"}),e.jsxs(b,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(S,{className:"gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Add Status"]})}),e.jsx(g,{closeModal:a})]})]}),e.jsxs("table",{className:"table-auto border-collapse border border-gray-300 w-1/2 text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:r==null?void 0:r.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.status}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[e.jsx(w,{className:"inline-block mx-2 cursor-pointer text-blue-500",title:"Edit",onClick:()=>n(t)}),e.jsx(D,{className:"inline-block mx-2 cursor-pointer text-red-500",title:"Delete",onClick:()=>u(t._id)})]})]},t._id))})]}),l&&e.jsx(b,{open:!0,onOpenChange:a,children:e.jsx(g,{closeModal:a,statusToEdit:l})})]})};export{be as StatusTable};
