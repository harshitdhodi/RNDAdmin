import{a as e,j as r}from"./react-BfBsRgn0.js";import{g as s,$ as t,B as a}from"./index-cVSOkL6A.js";import{a as i,L as o}from"./react-router-DUJjWq5j.js";import"./classnames-C3ovBj6j.js";import"./react-dom-DwrudmHt.js";import"./scheduler-BFk34ZWe.js";import"./react-redux-DbBiFgqA.js";import"./use-sync-external-store-DdeJV4gQ.js";import"./@reduxjs-UCSEaN3g.js";import"./redux-C5Huw2aR.js";import"./immer-DgfQkf_7.js";import"./redux-thunk-B3S1iNVp.js";import"./reselect-BSOs5pU1.js";import"./js-cookie-BXEMiIsG.js";import"./@radix-ui-BWjeGzol.js";import"./aria-hidden-BHUiN-rI.js";import"./react-remove-scroll-yauc81_r.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BcxDecei.js";import"./react-style-singleton-C1QVuB2c.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-BA4C4RS7.js";import"./use-callback-ref-Cvx1xcTX.js";import"./@floating-ui-BSChQBl3.js";import"./class-variance-authority-DeOWI0hf.js";import"./clsx-BeLtu-UY.js";import"./tailwind-merge-D2VJQb_v.js";import"./lucide-D6BDVLHE.js";import"./axios-BoylL8Pu.js";import"./@syncfusion-CXokIO9o.js";import"./cookie-BUTH-fPQ.js";const l=()=>{const{data:l,error:d,isLoading:n}=s(),[c]=t(),m=i(),p=e.useMemo((()=>{if(!l)return[];if(Array.isArray(l))return l;if(l.data&&Array.isArray(l.data))return l.data;for(const e in l)if(Array.isArray(l[e]))return l[e];return[]}),[l]),[j,x]=e.useState({}),h=(e,r=100)=>{if(!e)return"";const s=e.replace(/<[^>]+>/g,"");return s.length<=r?e:s.substring(0,r)+"..."};if(n)return r.jsx("p",{children:"Loading templates..."});if(d)return r.jsxs("p",{children:["Error loading templates: ",d.message]});if(!p.length)return r.jsx("p",{children:"No templates found."});return r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h1",{className:"text-xl font-bold",children:"Email Templates"}),r.jsx(o,{to:"/add-template",children:r.jsx(a,{className:"bg-[#3b1f91] text-white hover:bg-purple-700",variant:"primary",children:"Add Template"})})]}),r.jsx("hr",{className:"mb-5"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full border-collapse border border-gray-300",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-200",children:[r.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Name"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Subject"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Body"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),r.jsx("tbody",{children:p.map((e=>r.jsxs("tr",{className:"hover:bg-gray-100",children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.name||"Unnamed Template"}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.subject||"No Subject"}),r.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[r.jsx("div",{dangerouslySetInnerHTML:{__html:j[e._id]?e.body:h(e.body)}}),e.body&&e.body.length>100&&r.jsx(a,{variant:"link",className:"text-[#3b1f91] p-0 h-auto font-medium",onClick:()=>{return r=e._id,void x((e=>({...e,[r]:!e[r]})));var r},children:j[e._id]?"Show Less":"Read More"})]}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(a,{variant:"secondary",className:"hover:bg-[#4f359c]",size:"sm",onClick:()=>{return r=e._id,void m(`/edit-template/${r}`);var r},children:"Edit"}),r.jsx(a,{variant:"destructive",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this template?"))try{await c(e).unwrap(),alert("Template deleted successfully!")}catch(r){alert("Failed to delete template: "+(r.message||"Unknown error"))}})(e._id),children:"Delete"})]})})]},e._id)))})]})}),0===p.length&&!n&&r.jsx("div",{className:"text-center py-4",children:r.jsx("p",{children:'No templates found. Create your first template by clicking "Add Template".'})})]})};export{l as default};
