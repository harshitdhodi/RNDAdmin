import{j as e,r as j}from"./react-DKICu8bO.js";import{L as A,a as E,b as B,u as O}from"./react-router-B9QVkYva.js";import{C as I}from"./checkbox-DUFGddMk.js";import{C as z,a as U}from"./card-CY6sXsn1.js";import{X as L}from"./lucide-D7hRWJEP.js";import{P as _}from"./prop-types-D44m66iB.js";import{T as q,a as H,b as D,c as k,d as G,e as T}from"./table-BxxugdeG.js";import{S as V,a as Q,b as X,c as Y,d as J}from"./select-CdiUu-U-.js";import{a9 as K}from"./index-CDFtkn6X.js";import{a as W}from"./axios-DXsv3KKR.js";import"./classnames-Bv6oJzD9.js";import"./cookie--_YQFYBD.js";import"./react-dom-BBS6HuAW.js";import"./scheduler-CKyTKYc2.js";import"./@radix-ui-BlrBCj0C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fXbmorz6.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C9fmXXva.js";import"./react-style-singleton-DKBZmuKg.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-C10EJNOT.js";import"./use-callback-ref-BoKxM4XI.js";import"./@floating-ui-8J-daYO3.js";import"./react-redux-BrRfTdeB.js";import"./use-sync-external-store-D0ivhzzy.js";import"./@reduxjs-B5J9SSA5.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./js-cookie-Cz0CWeBA.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./@syncfusion-BIAkhmGL.js";const F=a=>a?a.split(/[-\s]+/).map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"";function Z({chemicalName:a,categorySlug:l,categoryName:c,slug2:d,subsubCategorySlug:o}){return console.log(c),e.jsx("nav",{className:"text-sm mb-6 border-b-2 pb-3",children:e.jsxs("ol",{className:"list-none p-0 inline-flex",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(A,{to:"/",className:"text-[15px]",children:"Home"}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(A,{to:"/categories",className:"text-[15px]",children:"Products"}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-[15px]",children:e.jsx(A,{to:`/${l}`,className:"text-black",children:F(c)})}),e.jsx("span",{className:"mx-2",children:"››"})]}),e.jsx("li",{className:"flex items-center",children:e.jsx("span",{className:"text-[15px]",children:e.jsx(A,{to:`/chemicals/${d}`,className:"text-black",children:F(d)})})}),o&&e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"mx-2",children:"››"}),e.jsx("span",{className:"text-[15px] text-orange-600",children:F(o)})]})]})})}function ee({chemicals:a,categorySlug:l,selectedSubCategories:c,selectedGrades:d,setSelectedSubCategories:o,setSelectedGrades:h,subsubCategorySlug:m,categoryName:p}){const g=a.reduce((t,r)=>{const s=r.grade||"Other";return t[s]=(t[s]||0)+1,t},{}),f=E(),b=a.reduce((t,r)=>{const s=r.subSubCategorySlug||"Uncategorized";return t[s]=(t[s]||0)+1,t},{}),N=t=>t.split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),y=(t,r)=>{o(t?s=>[...s,r]:s=>s.filter(n=>n!==r))},S=(t,r)=>{h(t?s=>[...s,r]:s=>s.filter(n=>n!==r))},C=()=>{f(`/${p}`),o([]),h([])},x=t=>{o(r=>r.filter(s=>s!==t))},P=t=>{alert("hii"),h(r=>r.filter(s=>s!==t)),setTimeout(()=>{f(`/chemicals/${l}`)},0)};return m?c.includes(m):c.includes(l),e.jsx(z,{className:"md:col-span-1 bg-[#dee8ff] rounded-none p-3",children:e.jsxs(U,{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-normal mb-4",children:"Your Selections"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Categories:"}),e.jsxs("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{children:m?`${m} (${a.length})`:`${N(l)} (${a.length})`}),e.jsx("button",{onClick:C,className:"ml-2 text-white bg-red-600 mr-2  w-4 pb-2 h-4",children:e.jsx(L,{size:16})})]}),c.map(t=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:N(t)}),e.jsx("button",{onClick:()=>x(t),className:"ml-2 text-white bg-red-600   w-4 pb-2 h-4",children:e.jsx(L,{size:16})})]},t))]})]}),d.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Grades:"}),e.jsx("div",{className:"text-blue-600 py-3 flex flex-col gap-2 border-y-2 border-gray-300",children:d.map(t=>e.jsxs("div",{className:"flex justify-between items-center px-2 py-1 bg-blue-100 rounded",children:[e.jsx("span",{className:"text-sm",children:t}),e.jsx("button",{onClick:()=>P(t),className:"text-gray-600 hover:text-red-600",children:e.jsx(L,{size:16})})]},t))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Categories"}),e.jsx("div",{className:"space-y-2",children:Object.entries(b).map(([t,r])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{id:t,checked:m?t===m:c.includes(t),onCheckedChange:s=>y(s,t)}),e.jsxs("label",{htmlFor:t,className:"text-sm",children:[N(t)," (",r,")"]})]},t))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-2xl font-normal",children:"Grades"}),e.jsx("div",{className:"space-y-2",children:Object.entries(g).map(([t,r])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{id:t,checked:d.includes(t),onCheckedChange:s=>S(s,t)}),e.jsxs("label",{htmlFor:t,className:"text-sm",children:[t," (",r,")"]})]},t))})]})]})]})})}const M=({chemicals:a,isLoading:l,msds:c,specs:d,error:o})=>{const h=E(),[m,p]=j.useState(1),[g,f]=j.useState(5);if(console.log(a),l)return e.jsx("div",{className:"p-4 text-center",children:"Loading..."});if(o)return e.jsxs("div",{className:"p-4 text-center text-red-500",children:["Error fetching chemicals: ",o]});if(a.length===0)return e.jsx("div",{className:"p-4 text-center",children:"No products found."});const b=m*g,N=b-g,y=a.slice(N,b),S=Math.ceil(a.length/g),C=s=>{const n=s.replace(/\s+/g,"-").toLowerCase();console.log(`Redirecting to: /${n}`),h(`/${n}`)},x=s=>{s&&window.open(`/api/image/specs/view/${s}`,"_blank")},P=s=>{s&&window.open(`/api/image/msds/view/${s}`,"_blank")},t=s=>{p(s)},r=s=>{f(Number(s)),p(1)};return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-4 py-1 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Items per page:"}),e.jsxs(V,{value:g.toString(),onValueChange:r,children:[e.jsx(Q,{className:"w-[60px] bg-white border-gray-200 hover:border-gray-300",children:e.jsx(X,{})}),e.jsx(Y,{children:[5,10,20,30,40,50].map(s=>e.jsx(J,{className:"w-[60px]",value:s.toString(),children:s},s))})]})]}),e.jsxs("div",{className:"text-gray-600 font-medium",children:["Showing ",e.jsx("span",{className:"text-gray-900",children:N+1})," to ",e.jsx("span",{className:"text-gray-900",children:Math.min(b,a.length)})," of ",e.jsx("span",{className:"text-gray-900",children:a.length})," items"]})]}),e.jsxs(q,{children:[e.jsx(H,{children:e.jsxs(D,{className:"bg-[#264796] hover:bg-[#264796]",children:[e.jsx(k,{className:"text-white",children:"Product Code"}),e.jsx(k,{className:"text-white",children:"Product Name"}),e.jsx(k,{className:"text-white",children:"CAS"}),e.jsx(k,{className:"text-white",children:"TDS"}),e.jsx(k,{className:"text-white",children:"MSDS"})]})}),e.jsx(G,{children:y.map((s,n)=>e.jsxs(D,{className:n%2!==0?"bg-[#93aff0]/60 hover:bg-[#93aff0]/60":"",children:[e.jsx(T,{children:s.auto_p_code}),e.jsx(T,{className:"text-blue-900",children:e.jsx("button",{className:"text-blue-900 hover:no-underline",onClick:()=>C(s.slug),children:s.name})}),e.jsx(T,{className:"text-blue-900",children:s.cas}),e.jsx(T,{className:"text-blue-900",children:s.specs?e.jsx("button",{className:"text-blue-900 hover:underline",onClick:()=>x(s.specs),children:"Specs"}):"Specs"}),e.jsx(T,{className:"text-blue-900",children:s.msds?e.jsx("button",{className:"text-blue-900 hover:underline",onClick:()=>P(s.msds),children:"MSDS"}):"MSDS"})]},s.auto_p_code))})]}),e.jsx("div",{className:"flex justify-end gap-1.5 mt-6",children:[...Array(S)].map((s,n)=>e.jsx("button",{onClick:()=>t(n+1),className:`px-4 py-2 border rounded-md transition-colors duration-200 ${m===n+1?"bg-[#264796] text-white border-[#264796] hover:bg-[#1e357a]":"text-gray-700 border-gray-200 hover:bg-gray-50 hover:border-gray-300"}`,children:n+1},n+1))})]})};M.propTypes={chemicals:_.array.isRequired,isLoading:_.bool.isRequired,error:_.string};const R=({categorySlug:a,subsubCategorySlug:l})=>{const{data:c,error:d,isLoading:o}=K(a);if(console.log(c),o)return e.jsx("p",{children:"Loading..."});if(d)return e.jsx("p",{children:"Error loading category data."});if(!c)return e.jsx("p",{children:"Category Not Found"});const{category:h,details:m,photo:p}=c,g=l?l.charAt(0).toUpperCase()+l.slice(1):h;return e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:g}),!l&&e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsx("div",{className:"w-full md:w-1/4",children:e.jsx("img",{src:`/api/logo/download/${p}`,alt:h,className:"w-full object-contain"})}),e.jsx("div",{className:"w-full md:w-3/4",children:e.jsx("p",{className:"text-gray-700 text-justify",children:m})})]})]})};R.propTypes={categorySlug:_.string.isRequired,subsubCategorySlug:_.string};function Ee(){const{chemicals:a,slug:l,subsubCategorySlug:c}=B();console.log({chemicals:a,slug:l,subsubCategorySlug:c});const[d,o]=j.useState([]),[h,m]=j.useState([]),[p,g]=j.useState([]),[f,b]=j.useState([]),[N,y]=j.useState(!0),[S,C]=j.useState(null),x=O(),P=x.pathname.startsWith("/chemicals")||x.pathname.startsWith("/microbiology")||x.pathname.startsWith("/plant-culture-tested-chemical")||x.pathname.startsWith("/cell-culture-tested-chemical");let t="";P&&(x.pathname.startsWith("/chemicals")?t="Fine Chemicals":x.pathname.startsWith("/microbiology")?t="MicroBiology Products":x.pathname.startsWith("/plant-culture-tested-chemical")?t="Plant Culture Tested Chemical":x.pathname.startsWith("/cell-culture-tested-chemical")&&(t="Cell Culture Tested Chemical"));const{chemicalName:r,subCategoryName:s}=x.state||{};j.useEffect(()=>{(a&&l||c)&&(async()=>{var u,v;try{y(!0),C(null);let w;c?w=await W.get("/api/chemical/getChemicalBysubsubCategorySlug",{params:{slug:c}}):w=await W.get("/api/chemical/getChemical",{params:{categoryslug:a,subcategoryslug:l}});const $=w.data;o(Array.isArray($)?$:[]),m(Array.isArray($)?$:[])}catch(w){console.error("API Error:",w),C(((v=(u=w.response)==null?void 0:u.data)==null?void 0:v.message)||"An error occurred while fetching chemicals")}finally{y(!1)}})()},[a,l,c]),j.useEffect(()=>{(()=>{let u=[...d];p.length>0&&(u=u.filter(v=>p.includes(v.subSubCategorySlug))),f.length>0&&(u=u.filter(v=>f.includes(v.grade))),m(u)})()},[d,p,f]);const n=h.map(i=>{var u;return{id:i._id,name:i.name,slug:i.slug,auto_p_code:i.auto_p_code,molecularFormula:i.molecular_formula,molecularWeight:i.molecular_weight,category:i.categorySlug,subCategory:i.subCategorySlug,subSubCategory:i.subSubCategorySlug,unit:i.unit,cas:i.cas_number,msds:i.msds,specs:i.specs,image:((u=i.images)==null?void 0:u.length)>0?i.images[0]:null}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-7xl mx-auto py-4 mb-10",children:[e.jsx(Z,{chemicalName:r,slug2:l,categoryName:t,subCategoryName:s,subsubCategorySlug:c,categorySlug:a,subCategorySlug:l}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[e.jsx(ee,{chemicals:d,categorySlug:l,selectedSubCategories:p,selectedGrades:f,setSelectedSubCategories:g,setSelectedGrades:b,subsubCategorySlug:c,categoryName:a}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(R,{categorySlug:l,subsubCategorySlug:c}),e.jsx(M,{chemicals:n,isLoading:N,error:S,subsubCategorySlug:c})]})]})]})})}export{Ee as default};
