import{k as e,g as n,e as t,c as r}from"./@babel-BfC2A0EA.js";import{r as a,a as i}from"./react-BfBsRgn0.js";import{c as s}from"./classnames-C3ovBj6j.js";import{R as o}from"./rc-resize-observer-pLBfxqzk.js";import{x as l,d as u,u as c}from"./rc-util-CQtTJgfq.js";import{r as m}from"./react-dom-DwrudmHt.js";var f=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],d=void 0;function v(r,i){var l=r.prefixCls,u=r.invalidate,c=r.item,m=r.renderItem,v=r.responsive,p=r.responsiveDisabled,y=r.registerSize,h=r.itemKey,b=r.className,E=r.style,g=r.children,N=r.display,R=r.order,C=r.component,x=void 0===C?"div":C,I=e(r,f),w=v&&!N;function S(e){y(h,e)}a.useEffect((function(){return function(){S(null)}}),[]);var M,z=m&&c!==d?m(c):g;u||(M={opacity:w?0:1,height:w?0:d,overflowY:w?"hidden":d,order:v?R:d,pointerEvents:w?"none":d,position:w?"absolute":d});var k={};w&&(k["aria-hidden"]=!0);var j=a.createElement(x,n({className:s(!u&&l,b),style:t(t({},M),E)},k,I,{ref:i}),z);return v&&(j=a.createElement(o,{onResize:function(e){S(e.offsetWidth)},disabled:p},j)),j}var p=a.forwardRef(v);function y(){var e=a.useRef(null);return function(n){e.current||(e.current=[],function(e){if("undefined"==typeof MessageChannel)l(e);else{var n=new MessageChannel;n.port1.onmessage=function(){return e()},n.port2.postMessage(void 0)}}((function(){m.unstable_batchedUpdates((function(){e.current.forEach((function(e){e()})),e.current=null}))}))),e.current.push(n)}}function h(e,n){var t=a.useState(n),i=r(t,2),s=i[0],o=i[1];return[s,u((function(n){e((function(){o(n)}))}))]}p.displayName="Item";var b=i.createContext(null),E=["component"],g=["className"],N=["className"],R=function(t,r){var i=a.useContext(b);if(!i){var o=t.component,l=void 0===o?"div":o,u=e(t,E);return a.createElement(l,n({},u,{ref:r}))}var c=i.className,m=e(i,g),f=t.className,d=e(t,N);return a.createElement(b.Provider,{value:null},a.createElement(p,n({ref:r,className:s(c,f)},m,d)))},C=a.forwardRef(R);C.displayName="RawItem";var x=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],I="responsive",w="invalidate";function S(e){return"+ ".concat(e.length," ...")}function M(i,l){var u=i.prefixCls,m=void 0===u?"rc-overflow":u,f=i.data,d=void 0===f?[]:f,v=i.renderItem,E=i.renderRawItem,g=i.itemKey,N=i.itemWidth,R=void 0===N?10:N,C=i.ssr,M=i.style,z=i.className,k=i.maxCount,j=i.renderRest,A=i.renderRawRest,K=i.suffix,_=i.component,D=void 0===_?"div":_,P=i.itemComponent,V=i.onVisibleChange,W=e(i,x),F="full"===C,T=y(),G=h(T,null),O=r(G,2),X=O[0],L=O[1],U=X||0,Y=h(T,new Map),q=r(Y,2),B=q[0],H=q[1],J=h(T,0),Q=r(J,2),Z=Q[0],$=Q[1],ee=h(T,0),ne=r(ee,2),te=ne[0],re=ne[1],ae=h(T,0),ie=r(ae,2),se=ie[0],oe=ie[1],le=a.useState(null),ue=r(le,2),ce=ue[0],me=ue[1],fe=a.useState(null),de=r(fe,2),ve=de[0],pe=de[1],ye=a.useMemo((function(){return null===ve&&F?Number.MAX_SAFE_INTEGER:ve||0}),[ve,X]),he=a.useState(!1),be=r(he,2),Ee=be[0],ge=be[1],Ne="".concat(m,"-item"),Re=Math.max(Z,te),Ce=k===I,xe=d.length&&Ce,Ie=k===w,we=xe||"number"==typeof k&&d.length>k,Se=a.useMemo((function(){var e=d;return xe?e=null===X&&F?d:d.slice(0,Math.min(d.length,U/R)):"number"==typeof k&&(e=d.slice(0,k)),e}),[d,R,X,k,xe]),Me=a.useMemo((function(){return xe?d.slice(ye+1):d.slice(Se.length)}),[d,Se,xe,ye]),ze=a.useCallback((function(e,n){var t;return"function"==typeof g?g(e):null!==(t=g&&(null==e?void 0:e[g]))&&void 0!==t?t:n}),[g]),ke=a.useCallback(v||function(e){return e},[v]);function je(e,n,t){(ve!==e||void 0!==n&&n!==ce)&&(pe(e),t||(ge(e<d.length-1),null==V||V(e)),void 0!==n&&me(n))}function Ae(e,n){H((function(t){var r=new Map(t);return null===n?r.delete(e):r.set(e,n),r}))}function Ke(e){return B.get(ze(Se[e],e))}c((function(){if(U&&"number"==typeof Re&&Se){var e=se,n=Se.length,t=n-1;if(!n)return void je(0,null);for(var r=0;r<n;r+=1){var a=Ke(r);if(F&&(a=a||0),void 0===a){je(r-1,void 0,!0);break}if(e+=a,0===t&&e<=U||r===t-1&&e+Ke(t)<=U){je(t,null);break}if(e+Re>U){je(r-1,e-a-se+te);break}}K&&Ke(0)+se>U&&me(null)}}),[U,B,te,se,ze,Se]);var _e=Ee&&!!Me.length,De={};null!==ce&&xe&&(De={position:"absolute",left:ce,top:0});var Pe,Ve={prefixCls:Ne,responsive:xe,component:P,invalidate:Ie},We=E?function(e,n){var r=ze(e,n);return a.createElement(b.Provider,{key:r,value:t(t({},Ve),{},{order:n,item:e,itemKey:r,registerSize:Ae,display:n<=ye})},E(e,n))}:function(e,t){var r=ze(e,t);return a.createElement(p,n({},Ve,{order:t,key:r,item:e,renderItem:ke,itemKey:r,registerSize:Ae,display:t<=ye}))},Fe={order:_e?ye:Number.MAX_SAFE_INTEGER,className:"".concat(Ne,"-rest"),registerSize:function(e,n){re(n),$(te)},display:_e};if(A)A&&(Pe=a.createElement(b.Provider,{value:t(t({},Ve),Fe)},A(Me)));else{var Te=j||S;Pe=a.createElement(p,n({},Ve,Fe),"function"==typeof Te?Te(Me):Te)}var Ge=a.createElement(D,n({className:s(!Ie&&m,z),style:M,ref:l},W),Se.map(We),we?Pe:null,K&&a.createElement(p,n({},Ve,{responsive:Ce,responsiveDisabled:!xe,order:ye,className:"".concat(Ne,"-suffix"),registerSize:function(e,n){oe(n)},display:!0,style:De}),K));return Ce&&(Ge=a.createElement(o,{onResize:function(e,n){L(n.clientWidth)},disabled:!xe},Ge)),Ge}var z=a.forwardRef(M);z.displayName="Overflow",z.Item=C,z.RESPONSIVE=I,z.INVALIDATE=w;export{z as F};
