import{_ as e,a as t,b as n}from"./tslib-Bc9CN1Ef.js";import{r}from"./react-BfBsRgn0.js";import{f as o,z as a,R as c}from"./react-remove-scroll-bar-BcxDecei.js";import{c as l,e as i}from"./use-sidecar-BA4C4RS7.js";import{u}from"./use-callback-ref-Cvx1xcTX.js";import{s}from"./react-style-singleton-C1QVuB2c.js";var f=l(),d=function(){},h=r.forwardRef((function(n,o){var a=r.useRef(null),c=r.useState({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:d}),l=c[0],i=c[1],s=n.forwardProps,h=n.children,v=n.className,m=n.removeScrollBar,p=n.enabled,w=n.shards,g=n.sideCar,b=n.noIsolation,y=n.inert,E=n.allowPinchZoom,C=n.as,R=void 0===C?"div":C,k=n.gapMode,S=e(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=g,M=u([a,o]),N=t(t({},S),l);return r.createElement(r.Fragment,null,p&&r.createElement(L,{sideCar:f,removeScrollBar:m,shards:w,noIsolation:b,inert:y,setCallbacks:i,allowPinchZoom:!!E,lockRef:a,gapMode:k}),s?r.cloneElement(r.Children.only(h),t(t({},N),{ref:M})):r.createElement(R,t({},N,{className:v,ref:M}),h))}));h.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},h.classNames={fullWidth:o,zeroRight:a};var v=!1;if("undefined"!=typeof window)try{var m=Object.defineProperty({},"passive",{get:function(){return v=!0,!0}});window.addEventListener("test",m,m),window.removeEventListener("test",m,m)}catch(T){v=!1}var p=!!v&&{passive:!1},w=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},g=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),b(e,r)){var o=y(e,r);if(o[1]>o[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},b=function(e,t){return"v"===e?function(e){return w(e,"overflowY")}(t):function(e){return w(e,"overflowX")}(t)},y=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},E=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},C=function(e){return[e.deltaX,e.deltaY]},R=function(e){return e&&"current"in e?e.current:e},k=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},S=0,L=[];function M(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const N=i(f,(function(e){var t=r.useRef([]),o=r.useRef([0,0]),a=r.useRef(),l=r.useState(S++)[0],i=r.useState(s)[0],u=r.useRef(e);r.useEffect((function(){u.current=e}),[e]),r.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var t=n([e.lockRef.current],(e.shards||[]).map(R),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(l))})),function(){document.body.classList.remove("block-interactivity-".concat(l)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(l))}))}}}),[e.inert,e.lockRef.current,e.shards]);var f=r.useCallback((function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!u.current.allowPinchZoom;var n,r=E(e),c=o.current,l="deltaX"in e?e.deltaX:c[0]-r[0],i="deltaY"in e?e.deltaY:c[1]-r[1],s=e.target,f=Math.abs(l)>Math.abs(i)?"h":"v";if("touches"in e&&"h"===f&&"range"===s.type)return!1;var d=g(f,s);if(!d)return!0;if(d?n=f:(n="v"===f?"h":"v",d=g(f,s)),!d)return!1;if(!a.current&&"changedTouches"in e&&(l||i)&&(a.current=n),!n)return!0;var h=a.current||n;return function(e,t,n,r,o){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),c=a*r,l=n.target,i=t.contains(l),u=!1,s=c>0,f=0,d=0;do{var h=y(e,l),v=h[0],m=h[1]-h[2]-a*v;(v||m)&&b(e,l)&&(f+=m,d+=v),l=l instanceof ShadowRoot?l.host:l.parentNode}while(!i&&l!==document.body||i&&(t.contains(l)||t===l));return s&&(Math.abs(f)<1||!o)?u=!0:s||!(Math.abs(d)<1)&&o||(u=!0),u}(h,t,e,"h"===h?l:i,!0)}),[]),d=r.useCallback((function(e){var n=e;if(L.length&&L[L.length-1]===i){var r="deltaY"in n?C(n):E(n),o=t.current.filter((function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,o=r,t[0]===o[0]&&t[1]===o[1]);var t,o}))[0];if(o&&o.should)n.cancelable&&n.preventDefault();else if(!o){var a=(u.current.shards||[]).map(R).filter(Boolean).filter((function(e){return e.contains(n.target)}));(a.length>0?f(n,a[0]):!u.current.noIsolation)&&n.cancelable&&n.preventDefault()}}}),[]),h=r.useCallback((function(e,n,r,o){var a={name:e,delta:n,target:r,should:o,shadowParent:M(r)};t.current.push(a),setTimeout((function(){t.current=t.current.filter((function(e){return e!==a}))}),1)}),[]),v=r.useCallback((function(e){o.current=E(e),a.current=void 0}),[]),m=r.useCallback((function(t){h(t.type,C(t),t.target,f(t,e.lockRef.current))}),[]),w=r.useCallback((function(t){h(t.type,E(t),t.target,f(t,e.lockRef.current))}),[]);r.useEffect((function(){return L.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:w}),document.addEventListener("wheel",d,p),document.addEventListener("touchmove",d,p),document.addEventListener("touchstart",v,p),function(){L=L.filter((function(e){return e!==i})),document.removeEventListener("wheel",d,p),document.removeEventListener("touchmove",d,p),document.removeEventListener("touchstart",v,p)}}),[]);var N=e.removeScrollBar,P=e.inert;return r.createElement(r.Fragment,null,P?r.createElement(i,{styles:k(l)}):null,N?r.createElement(c,{gapMode:e.gapMode}):null)}));var P=r.forwardRef((function(e,n){return r.createElement(h,t({},e,{ref:n,sideCar:N}))}));P.classNames=h.classNames;export{P as R};
